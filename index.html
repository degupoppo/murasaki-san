<!doctype html>
<html lang="en-GB">

<!---

コンセプト
    低インフレ率の育成ゲーム
    

ゲームシステム概要
    NTTについて
    クラフト品とNFTについて
    Not play2earn
    no token

行動説明
    feeding
    grooming
    mining
    farming
    crafting

ステータス説明
    テーブルで説明

アイテム説明
    テーブルで説明

ロードマップ
    NFTマーケットプレイス

制作話
    むらさきさん誕生について
        友人が書いた絵を動かしたかった
        長くお世話できる成長するNFTを作りたかった
        Rarityのsummonerコンセプト
            expテーブルはrarityとDnD3.5を踏襲している
    むらさきさんの名前の由来について
    このゲームのコンセプトについて
        製作者が楽しめるものを作っている
    低インフレ
        1年で最大値
    ポンジスキームではなく、長く付き合える作品をブロックチェーン上に作ってみたかった。
        何よりも製作者達本人のために。
        作るのが最も楽しく、プレイするのはその次に楽しいように。
    非人力のbot対策として、初期コストに少しかけたが、それ以外はコストは必要ない。
        下心として、dapps stakingへの登録が直近の目標。

Doc
    exp要求テーブル
    itemのコスト/時間要求テーブル
    mining/farmingによるcoin/material取得の計算式
    craftingのrequired timeの計算式
    Level-up時のstatus point加算の計算式
    critical判定時の計算式と効果

--->



<script src="js_v2/web3.min.js"></script>
<script src="js_v2/bulletin_board.js"></script>
<script type="text/javascript">

    //update summoner
    function button_select_summoner() {
        summoner = document.getElementById("summoner").value;
        window.location.href = "dapp.html?summoner=" + summoner;
    }

    //connect to metamask
    async function connect() {
        const web3 = await new Web3(window.ethereum);
        window.ethereum.enable();
        window.ethereum.request({
            method: 'wallet_addEthereumChain',

            params: [{
                chainId: '0x51',  //4369
                chainName: 'Shibuya Testnet',
                nativeCurrency: {
                    name: 'sby',
                    symbol: 'SBY',
                    decimals: 18
                },
                rpcUrls: ["https://rpc.shibuya.astar.network:8545"],
                blockExplorerUrls: ['https://blockscout.com/shibuya'],
            }]
        });
        return web3;
    }

    //get wallet
    async function get_wallet() {
        let web3 = await connect();
        let wallet = await web3.eth.getAccounts();
        return wallet[0];
    }

    //write message
    async function contract_write_message(_message) {
        let web3 = await connect();
        let contract = await new web3.eth.Contract(abi_bulletin_board, contract_bulletin_board);
        let wallet = await get_wallet(web3);
        contract.methods.write_message(_message).send({from:wallet});
    }
    function write_message() {
        let _message = document.getElementById("message").value;
        contract_write_message(_message);
    }

    //read message
    async function contract_read_message(_count) {
        let web3 = await connect();
        let contract = await new web3.eth.Contract(abi_bulletin_board, contract_bulletin_board);
        let wallet = await get_wallet(web3);
        let _message = await contract.methods.read_recent_messages(_count).call(); 
        //console.log(_message);
        return _message;
    }

    //show messages
    async function show_messages() {
        let _res;
        let _count;
        //reset text
        messages.innerHTML = "";
        for (let i = 1; i <= 10; i++) {
            _res = await contract_read_message(i);
            //when count=0, stop
            _count = _res[0];
            if (_count == 0) {
                return 0;
            }
            if (_res[2] == "0x0000000000000000000000000000000000000000") {
                continue;
            }
            messages.innerHTML += "<p>";
            messages.innerHTML += "<font color='blue'>" + _res[1] + " / " + _res[2].substring(0,10) +"... :</font>";
            messages.innerHTML += "<br>";
            messages.innerHTML += _res[3];
            messages.innerHTML += "</p>";
        }
    }

</script>



<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>House of Murasaki-san</title>
    <meta name="description" content="Murasaki-san is a pet living in your wallet on Astar Network." />
    <link rel="stylesheet" href="assets/css/simple.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="icon" href="png/icon.PNG" />
    <link rel="apple-touch-icon" href="png/icon.PNG">
</head>

<body>



<header>
    <nav>
      <a href="/murasakisan/" class="current">Home</a>
      <a href="/murasakisan/dapp.html" ><b>Play Game</b></a>
      <a href="/murasakisan/dapp.html?summoner=1">Demo Preview</a>
      <a href="https://twitter.com/degupoppo" >Twitter</a>
      <a href="https://github.com/degupoppo/murasakisan/" >GitHub</a>
    </nav>
    <h1>
        <img src="png/food_sweet_potato.png" width="40" height="40">
        House of Murasaki-san
        <img src="png/food_sweet_potato.png" width="40" height="40">
    </h1>
    <p>
        Murasaki-san is a pet living in your wallet on <a href="https://astar.network/">Astar Network</a>.<br>
        They will grow depending on your dedication and time.
    </p>
</header>

<main>

<p>
    <center><code class="language-plaintext highlighter-rouge">
        We have NOT easy Play2Earn mechanism.<br>
        NO pump-and-dump tokens and NO limited NFTs.<br>
    </code></center>

</p>

<p>House of Murasaki-san project is a dApp game built on Astar Network. You can summon your Murasaki-san character and care them to grow. Murasaki-san can mine coins (not token), farm materials, and craft item NFTs.</p>

<p>
    You can <b><a href="/murasakisan/dapp.html?summoner=1">Demo Preview</a></b> before summoning your Murasaki-san.<br>
    (Developer's character. No transactions are permitted.)
</p>

<h3 id="concept">The Concept</h3>
<p>blah-blah-blah...</p>

<h3 id="screen">Game Screen</h3>
<figure>
  <img alt="Game screen" src="png/demo.jpg" />
  <figcaption>Game screen</figcaption>
</figure>

<h3 id="system">Systems</h3>
<p><ul>
    <li>Murasaki-san is not NFT, but <a href="https://github.com/ethereum/EIPs/issues/1238">NTT (Non-Transferable Non-Fungible Token)</a>. Your wallet can have only one Murasaki-san NTT and this NTT can not be transfered to other wallet.</li>
    <li>You can summon your Murasaki-san and linked to your wallet <b>with 10 $ASTR cost</b>. Your Murasaki-san will grow depending on your daily caring.</li>
    <li>Crafted items are NFTs. You can transfer, sell and buy them. Marketplace of crafted items using $ASTR token will be opened (under development).</li>
    <li>House of Murasaki-san will become more lively as your Murasaki-san grows. There are no clear goals in this game.</li>
</ul></p>

<h3 id="action">Actions</h3>
<p>You can take care of your Murasaki-san with these actions.</p>
<p><ul>
    <li><b>Feeding:</b> Recover the satiety and earn some exp. You can feeding at anytime. Exp gained depends only on time.</li>
    <li><b>Grooming:</b> Recover the happy and earn some exp. You can grooming only when your Murasaki-san is not working. Exp gained depends on not-working time.</li>
    <li><b>Level-up:</b> You can level-up your Murasaki-san when the exp bar is accumulated. Status points will increase depends on the behavior of your Murasaki-san.</li>
    <li><b>Mining:</b> Working to earn Ohana coin. Coin gained depends on mainly Strength. Lv 2 is required.</li>
    <li><b>Farming:</b> Working to earn Kusa material. Material gained depends on mainly Dexterity. Lv 2 is required.</li>
    <li><b>Crafting:</b> Working to mint items (NFT). Ohana coin and Kusa material are needed to start crafting. Time needed to complete depends on mainly Intelligence. Lv 3 is required.</li>
</ul></p>

<h3 id="status">Status</h3>
<p><table>
  <thead>
    <tr>
      <th>Status</th>
      <th>Discriptions</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Level</td>
      <td>Affects almost all action efficiencies. Increases by level-up.</td>
    </tr>
    <tr>
      <td>Exp</td>
      <td>Need to level-up. Can be earned by feeding and grooming.</td>
    </tr>
    <tr>
      <td>Strength</td>
      <td>Affects mining efficiency. Increases by level-up and crafted items.</td>
    </tr>
    <tr>
      <td>Dexterity</td>
      <td>Affects farming efficiency. Increases by level-up and crafted items.</td>
    </tr>
    <tr>
      <td>Intelligence</td>
      <td>Affects crafting efficiency. Increases by level-up and crafted items.</td>
    </tr>
    <tr>
      <td>Luck</td>
      <td>Affects critical judgment. Increases by level-up.<br>Critical success: earning x2 coin/material in mining/farming; crafting rare items; earning x2 exp in feeding/grooming.</td>
    </tr>
    <tr>
      <td>Satiety</td>
      <td>Decreases over time and reaches 0% in 12 hours. Be recovered by feeding. When below 20%, your Murasaki-san can not start new working.</td>
    </tr>
    <tr>
      <td>Happy</td>
      <td>Decreases over time and reaches 0% in 72 hours. Be recovered by grooming. When below 20%, your Murasaki-san can not start new working.</td>
    </tr>
  </tbody>
</table></p>

<h3 id="item">Items</h3>
<p>Crafting items require costs and time. Items increase status point and make your house more lively.</p>
<p><table>
  <thead>
    <tr>
      <th>Items</th>
      <th>Discriptions</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Mr. Astar</td>
      <td>+1 Strength. Summon a small pet in your house.</td>
    </tr>
    <tr>
      <td>Music Box</td>
      <td>+1 Intelligence. Set up a Music box in your house. You can click to play music.</td>
    </tr>
    <tr>
      <td>Violin</td>
      <td>+1 Intelligence. Set up a Violin in your house.</td>
    </tr>
    <tr>
      <td>Flowerpot</td>
      <td>+1 Dexterity. Set up a Flowerpot in your house.</td>
    </tr>
  </tbody>
</table></p>

<h3 id="hint">Hints</h3>
<p><ul>
    <li>At the level-up, status point of Murasaki-san will increase depending to behavier. Ex: if you spent more time for mining, the more strength will increase.</li>
    <li>The exp gained by grooming depends on not-working time. It means that if you did not make your Murasaki-san work, grooming will give a lot of exp to faster level-up.</li>
    <li>If you leave your Murasaki-san for a long long time (about a month), Murasaki-san will be petrified with disappointment. Once petrified, your Murasaki-san can not do anything. For incentives of dedication, we have set some cost for cure petrification.<br><b>CAUTION: To cure petrification, you need Lv x 10 $ASTR cost</b>.
    <li>
        IF you know the Murasaki-san ID, you can look at the friend's house in here: <br>
        Murasaki-san ID:&nbsp;
        <input type="number" id="summoner" style="width:100px;">&nbsp;
        <button onclick="button_select_summoner();">Visit House</button>
    </li>
</ul></p>

<h3 id="future">Future Plans</h3>
<p><ul>
    <li>Development of all craftable items (total 48 types planned).</li>
    <li>Market place of item NFTs using $ASTR token.</li>
    <li>NFT staking of crafted items? (uncertain, only idea ATM)</li>
    <li>Submission to Dapps Staking program on Astar Network.</li>
</ul></p>

<h3 id="contract">Contract Address</h3>
<p>All contracts have been verified.</p>
<p><ul>
    <li>Main: 0xae778a945bF612b13E78eB1162E79a42e29A4036</li>
    <li>Strage: 0x7ca3B2969B49D51C630a77b17b8e5E95A4f7b1d2</li>
    <li>Craft: 0x5FD2daeC9d995De32cDbfb166d73f0bFdb9c5edF</li>
    <li>Function1: 0x9DdE8F4B921b161F43b5BCAFD87e25366E3D5549</li>
    <li>Function2: 0x69e4496B8E2e32208b57aa8981a91E48014Fb821</li>
    <li>Function3: 0x5d18ca97f1568B869826Cd2Ba2d745Deb8EA761b</li>
    <li>Function4: 0x8692C58A12dDef426EB20432aC3C5Ac4179cbEa0</li>
    <li>Function5: 0xcEE3730D1CeEF8E466da20008f04698C2Da90539</li>
    <li>Dice: 0xE11419a55727623802a29127EA04D9F2Cf4A8112</li>
</ul></p>

<h3 id="story">Back Story</h3>
<p>blah-blah-blah...</p>

<h3 id="bbs">Bulletin Board</h3>
<p>
    This is a bulletin board using blockchain during trial operation.<br>
    You need some gas cost to write message here.
</p>
<p>
    <label><b>Message:</b></label>&nbsp;
    <input type="text" id="message">
    <button onclick="write_message();">Write</button>
    <button onclick="show_messages();">Reload</button>
</p>
<p><div id="messages" class="box"></div></p>
<script type="text/javascript">
    show_messages();
</script>

</main>

<footer>
    <p>
        Donation: 0x2F7448B62134e52C2f46454d0089Ae21B5248805<br>
    </p>
</footer>

</body>
</html>
