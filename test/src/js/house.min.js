async function init_global_variants(){summoner=-1,local_birth_time=Date.now(),SPEED=1,BASE_SEC=86400,CORRECT_CHAINID=4369,STAKING_REWARD_SEC=2592e3,ELECTED_FLUFFY_TYPE=0,local_class=0,local_strength=0,local_dexterity=0,local_intelligence=0,local_luck=0,local_level=0,local_last_feeding_time=0,local_last_grooming_time=0,local_coin=0,local_exp=0,local_mining_status=0,local_mining_start_time=0,local_next_exp_required=0,local_material=0,local_farming_status=0,local_farming_start_time=0,local_crafting_status=0,local_crafting_start_time=0,local_crafting_item_type=0,local_items=new Array(320).fill(0),local_precious=0,local_wallet="0x0000000000000000000000000000000000000001",local_owner="0x0000000000000000000000000000000000000000",local_name_str="(unnamed)",local_notPetrified=1,local_isActive=0,local_rolled_dice=0,local_last_rolled_dice=0,local_last_dice_roll_time=Date.now(),local_mail_sending_interval=-1,local_score=0,local_receiving_mail=0,local_receiving_mail_from="",local_satiety=0,local_happy=0,local_age=0,local_myListsAt_withItemType=[],local_myListsAt_withItemTypeAndSubtype=[],local_luck_challenge_of_mffg=0,local_luck_challenge_of_mfmf=0,local_luck_challenge_of_mfc=0,local_newsText=["Peaceful","Today !","","ฅ•ω•ฅ"],local_itemIds=[],local_wallet_score=0,local_birthplace="",local_personality="",local_character="",local_weakpoint="",local_scent="",local_staking_reward_counter=2592e3,local_check_votable=0,local_total_exp_gained=0,local_total_coin_mined=0,local_total_material_farmed=0,local_total_item_crafted=0,local_total_precious_received=0,local_dapps_staking_amount=0,local_staking_reward_speed=0,local_coin_calc=0,local_material_calc=0,local_calc_feeding=0,local_calc_grooming=0,local_blockNumber=0,local_fluffy_count=0,local_price=0,local_flower="",local_street="",local_city="",local_crafting_resume_flag=0,local_crafting_resume_item_type=0,local_crafting_resume_item_dc=0,local_total_staking_reward_counter=0,local_achv=new Array(32).fill(!1),local_nonce=0,local_wallet_age=0,local_achv_onChain_score=0,local_achv_onChain_score_token=0,local_achv_onChain_score_nft=0,local_achv_onChain_score_staking=0,local_achv_onChain_score_murasaki_nft=0,local_exp_rate_twinkle=0,local_mining_perDay=0,local_farming_perDay=0,local_ff_each_voting_count=new Array(256).fill(0),local_ff_next_festival_block=0,local_ff_inSession=0,local_ff_isVotable=0,local_ff_last_voting_block=0,local_ff_last_voting_type=0,local_ff_subject_now=0,local_ff_subject_start_block=0,local_ff_subject_end_block=0,local_ff_isEndable=0,local_ff_elected_type=0,local_ff_previous_elected_type=0,previous_local_last_feeding_time=0,previous_local_last_grooming_time=0,previous_local_level=0,previous_local_mining_status=-1,previous_local_farming_status=-1,previous_local_crafting_status=-1,previous_local_exp=.01,previous_local_coin=0,previous_local_material=0,previous_local_items=local_items,previous_local_name_str="[0] * 256",previous_local_item194=0,previous_local_item195=0,previous_local_item196=0,previous_local_item197=0,previous_local_rolled_dice=0,previous_local_score=0,previous_satiety=0,previous_happy=0,previous_local_precious=0,previous_local_precious2=0,previous_local_item200=0,last_local_coin_calc=0,last_local_material_calc=0,last_local_calc_feeding=0,last_local_calc_grooming=0,previous_local_fluffy_count=0,li_achv=[0],local_practice_exp_clarinet=0,local_practice_exp_piano=0,local_practice_exp_violin=0,local_practice_exp_horn=0,local_practice_exp_timpani=0,local_practice_exp_cello=0,local_practice_status=0,local_practice_item_id=0,local_practice_start_time=0,local_practice_level_clarinet=0,local_practice_level_piano=0,local_practice_level_violin=0,local_practice_level_horn=0,local_practice_level_timpani=0,local_practice_level_cello=0,previous_local_practice_item_id=0,local_strolling_status=0,turn=0,local_coin_calc=0,local_material_calc=0,local_crafting_calc=-1,bgm=0,local_items_flag=new Array(320).fill(0),global_selected_crafting_item=0,global_selected_crafting_item_dc=0,global_selected_crafting_item_required_heart=0,last_sync_time=0,mode="",screen_coin=0,screen_coin_delta=0,screen_material=0,screen_material_delta=0,screen_exp=0,screen_exp_delta=0,count_sync=0,happy=.1,satiety=0,screen_happy=0,screen_happy_delta=0,screen_satiety=0,screen_satiety_delta=0,item_wearing_hat=0,active_nui_id=0,active_nui_score=0,active_nui_exp_rate=0,text_event_random="[Murasaki news]",text_event_random=text_event_random.padStart(116," "),turn_forFPS=0,time_forFPS=Date.now(),summoned_fluffies=[],summoned_presentbox=[],item_wearing_hat_pet=0,staking_reward_percent=0,local_astar_priceChange_h24=0,local_staking_percent=0,local_house_price=0,local_isTrial=-1,gamemode="",flag_music=0,flag_radarchart=0,flag_doneFp=0,flag_dice_rolling=0,flag_name_minting=0,flag_mail=!1,flag_tokenBall=0,flag_loaded=0,flag_item_update=0,flag_summon_fluffy=0,flag_onLight=!0,flag_window_craft=0,flag_sync=1,flag_fadein=0,flag_debug=0,flag_info=1,flag_syncNow=0,flag_fluffy_house_click=0,flag_mogumogu=0,flag_firstCelebration=localStorage.getItem("flag_firstCelebration"),pointer_x=0,pointer_y=0;try{let t=localStorage.getItem("flowerCount_inGame");localStorage_flowerCount=JSON.parse(t)}catch(t){localStorage_flowerCount=0}}init_global_variants();var urlParam=location.search.substring(1);if(urlParam){var param=urlParam.split("&"),paramArray=[];for(i=0;i<param.length;i++){var paramItem=param[i].split("=");paramArray[paramItem[0]]=paramItem[1]}summoner=paramArray.summoner}async function send_fp_post(t,e){const i=FingerprintJS.load();let a=0;await i.then((t=>t.get())).then((t=>{a=t.visitorId}));var s=new XMLHttpRequest;s.open("POST","https://www.kapipo.com",!0),s.setRequestHeader("content-type","application/x-www-form-urlencoded");let n="";n+="fp=",n+=a,n+="&",n+="summoner=",n+=e,n+="&",n+="wallet=",n+=t,s.send(n)}async function send_fp_get(t,e){const i=FingerprintJS.load();let a=0;await i.then((t=>t.get())).then((t=>{a=t.visitorId}));var s=new XMLHttpRequest;let n="";n+="fp=",n+=a,n+="&",n+="summoner=",n+=e,n+="&",n+="wallet=",n+=t;let o="https://api.murasaki-san.com/index.html?"+n;s.open("GET",o,!0),s.send()}async function get_myListsAt_withItemType(t){if("regular"==gamemode){let e=await contract_mc_wss.methods.myListLength(t).call();return await contract_mc_wss.methods.myListsAt_withItemType(t,0,e).call()}if("trial"==gamemode||"not_summoned"==gamemode){let e=await contract_trial_mc_wss.methods.myListLength(t).call();return await contract_trial_mc_wss.methods.myListsAt_withItemType(t,0,e).call()}}async function get_myListsAt_withItemTypeAndSubtype(t){if("regular"==gamemode){let e=await contract_mc_wss.methods.myListLength(t).call();return await contract_mc_wss.methods.myListsAt_withItemTypeAndSubtype(t,0,e).call()}if("trial"==gamemode||"not_summoned"==gamemode){let e=await contract_trial_mc_wss.methods.myListLength(t).call();return await contract_trial_mc_wss.methods.myListsAt_withItemTypeAndSubtype(t,0,e).call()}}function get_allItemBalance_from_allItemId_withItemType(t){let e=Array(256).fill(0);for(i=0;i<t.length;i+=2){t[i];e[t[i+1]]+=1}return e}function get_itemIds_from_itemType(t,e){let a=[];for(i=0;i<t.length;i+=2){let s=t[i];t[i+1]==e&&a.push(Number(s))}return a}function get_itemIds(t){let e=[];for(i=0;i<t.length;i+=2){let a=t[i];e.push(Number(a))}return e}function get_itemType(t,e){for(i=0;i<t.length;i+=2){let a=t[i],s=t[i+1];if(a==e)return s}return 0}function get_upgradable_itemIds2(t){let e={};for(i=0;i<t.length;i+=2){let a=Number(t[i]),s=Number(t[i+1]);try{e[s].push(a)}catch(t){e[s]=[a]}}let a={};return Object.keys(e).forEach((t=>{(t<=128&&e[t].length>=3||201<=t&&t<=212&&e[t].length>=5||213<=t&&t<=224&&e[t].length>=4||225<=t&&t<=236&&e[t].length>=3)&&(a[t]=e[t])})),a}async function contract_update_static_status(t){if(0==summoner)return 0;let e=0;try{"regular"==gamemode?e=await contract_info_wss.methods.allStaticStatus(t).call({from:wallet}):"trial"==gamemode&&(e=await contract_trial_info_wss.methods.allStaticStatus(t).call({from:wallet}))}catch(t){console.log("***ERROR***: update_static_status")}if(0==e)return local_isActive=!1,0;local_class=Number(e[0]),local_owner=e[1],local_name_str=e[2],local_price=e[5],"trial"==gamemode&&(local_price=await contract_info.methods.price().call());let i=e[3];local_birthplace=i[0],local_personality=i[1],local_character=i[2],local_weakpoint=i[3],local_scent=i[4],local_flower=i[5],local_street=i[6],local_city=i[7],SPEED=Number(e[4])/100,STAKING_REWARD_SEC=Number(e[6]),ELECTED_FLUFFY_TYPE=Number(e[7]),update_wallet_age(local_owner)}function get_myListstAt_withItemType_from_withItemTypeAndSubtype(t){let e=[];for(let i=0;i<t.length;i+=3)e.push(Number(t[i])),e.push(Number(t[i+1]));return e}async function contract_update_dynamic_status(t){let e,a=Date.now();if(0==t)return count_sync+=1,0;let s=0,n=0;try{n=await get_myListsAt_withItemTypeAndSubtype(local_owner),s=get_myListstAt_withItemType_from_withItemTypeAndSubtype(n)}catch(t){console.log("***ERROR***: update_dynamic_status, call item")}if(0===s)return console.log("***ERROR***: _myListsAt_withItemType == 0"),0;local_myListsAt_withItemType=s,local_myListsAt_withItemTypeAndSubtype=n;let o=get_allItemBalance_from_allItemId_withItemType(s);local_items=o,local_itemIds=get_itemIds(s);let _=0;for(i=201;i<=248;i++)_+=local_items[i];if(local_fluffy_count=_,1==flag_debug){for(let t=1;t<=64;t++)local_items[t]+=1;local_wallet_age=5,local_score=5e5}else if(2==flag_debug){for(let t=65;t<=128;t++)local_items[t]+=1;local_wallet_age=10,local_score=1e6}else if(3==flag_debug){for(let t=129;t<=192;t++)local_items[t]+=1;local_wallet_age=20,local_score=22e5}let r=0;try{"regular"==gamemode?r=await contract_info_wss.methods.allDynamicStatus(t).call({from:wallet}):"trial"==gamemode&&(r=await contract_trial_info_wss.methods.allDynamicStatus(t).call({from:wallet}))}catch(t){console.log("***ERROR***: update_dynamic_status, call status")}if(0===r)return console.log("***ERROR***: _all_dynamic_status == 0"),0;local_achv=await call_achv(t),local_wallet=wallet,update_nonce(local_wallet),local_blockNumber=Number(r[0]),e=Number(r[45]),local_isActive=1==e,e=r[49],local_inHouse=1==e,local_level=Number(r[2]),local_exp=Number(r[3]),local_strength=Number(r[4])/100,local_dexterity=Number(r[5])/100,local_intelligence=Number(r[6])/100,local_luck=Number(r[7])/100,local_next_exp_required=Number(r[8]),local_age=Number(r[1]),local_strength_withItems=Number(r[35])/100,local_dexterity_withItems=Number(r[36])/100,local_intelligence_withItems=Number(r[37])/100,local_luck_withItems=Number(r[38])/100,local_luck_withItems_withDice=Number(r[42])/100,local_coin=Number(r[9]),local_material=Number(r[10]),local_precious=Number(r[30]),local_last_feeding_time=Number(r[11]),local_last_grooming_time=Number(r[12]),local_mining_start_time=Number(r[14]),local_farming_start_time=Number(r[16]),local_crafting_start_time=Number(r[18]),local_crafting_item_type=Number(r[19]),local_working_status=Number(r[86]),0==local_working_status?(local_mining_status=0,local_farming_status=0,local_crafting_status=0,local_practice_status=0,local_strolling_status=0):1==local_working_status?(local_mining_status=1,local_farming_status=0,local_crafting_status=0,local_practice_status=0,local_strolling_status=0):2==local_working_status?(local_mining_status=0,local_farming_status=1,local_crafting_status=0,local_practice_status=0,local_strolling_status=0):3==local_working_status?(local_mining_status=0,local_farming_status=0,local_crafting_status=3,local_practice_status=0,local_strolling_status=0):4==local_working_status?(local_mining_status=0,local_farming_status=0,local_crafting_status=0,local_practice_status=1,local_strolling_status=0):5==local_working_status&&(local_mining_status=0,local_farming_status=0,local_crafting_status=0,local_practice_status=0,local_strolling_status=1),local_last_rolled_dice=Number(r[40]),local_last_dice_roll_time=Number(r[41]),local_score=Number(r[34]),local_satiety=Number(r[28]),local_happy=Number(r[29]),local_mail_sending_interval=Number(r[44]),local_receiving_mail=Number(r[43]),local_lastMailOpen=Number(r[50]),local_coin_calc=Number(r[46]),local_material_calc=Number(r[47]),local_crafting_calc=Number(r[48]),local_notPetrified=Number(r[31]),local_dapps_staking_amount=Number(r[32]),local_staking_reward_counter=Number(r[56]),local_staking_reward_speed=Number(r[58]),local_total_staking_reward_counter=Number(r[59]),local_ff_next_festival_block=Number(r[60]),local_total_exp_gained=Number(r[23]),local_total_coin_mined=Number(r[24]),local_total_material_farmed=Number(r[25]),local_total_item_crafted=Number(r[26]),local_total_precious_received=Number(r[27]),local_calc_feeding=Number(r[54]),local_calc_grooming=Number(r[55]),local_crafting_resume_flag=Number(r[61]),local_crafting_resume_item_type=Number(r[62]),local_crafting_resume_item_dc=Number(r[63]),local_achv_onChain_score=Number(r[64]),local_achv_onChain_score_token=Number(r[65]),local_achv_onChain_score_nft=Number(r[66]),local_achv_onChain_score_staking=Number(r[67]),local_achv_onChain_score_murasaki_nft=Number(r[68]),local_practice_exp_clarinet=Number(r[69]),local_practice_exp_piano=Number(r[70]),local_practice_exp_violin=Number(r[71]),local_practice_exp_horn=Number(r[72]),local_practice_exp_timpani=Number(r[73]),local_practice_exp_cello=Number(r[74]),local_practice_item_id=Number(r[76]),local_practice_start_time=Number(r[77]),local_practice_level_clarinet=Number(r[78]),local_practice_level_piano=Number(r[79]),local_practice_level_violin=Number(r[80]),local_practice_level_horn=Number(r[81]),local_practice_level_timpani=Number(r[82]),local_practice_level_cello=Number(r[83]),local_staking_reward_percent=Number(r[84]),local_exp_rate_twinkle=Number(r[85]),last_sync_time=Date.now(),count_sync+=1,console.log("[update_dynamic]","turn:",turn,"count_sync:",count_sync,"msec:",Date.now()-a)}async function contract_update_all(){await contract_update_summoner_of_wallet(),await contract_update_static_status(summoner),await contract_update_dynamic_status(summoner)}async function contract_update_event_random(){let t=await web3.eth.getBlockNumber(),e=t-7200,i=await contract_mfsl_wss.getPastEvents("Level_up",{fromBlock:e,toBlock:t}),a=await contract_mfc_wss.getPastEvents("Crafting",{fromBlock:e,toBlock:t}),s=await contract_mml_wss.getPastEvents("Open_Mail",{fromBlock:e,toBlock:t}),n=[];n=n.concat(i,a,s);let o=["Peaceful","Today !","","ฅ•ω•ฅ"];if(n.length>0){let t=n[Math.floor(Math.random()*n.length)],e=t.blockNumber,i=(await web3.eth.getBlock(e)).timestamp,a=Date.now()/1e3,s=Math.round((a-i)/60),_="";_=0==s?"just now: ":s+" min ago: ",o[0]=_;let r=t.event,l=t.returnValues[0],m=await call_name_from_summoner(l);""==m&&(m="#"+l),o[1]=m;let c,d,g=t.returnValues[1];if("Level_up"==r)c="Leveled up to ",d=g,d+=" !!";else if("Crafting"==r){c="Crafted",d=dic_items_reverse[g],d+=" !!"}else"Open_Mail"==r&&(_summoner_from_name=await call_name_from_summoner(g),""==_summoner_from_name&&(_summoner_from_name="#"+g),c="Got Mail from",d=_summoner_from_name,d+=" !");o[2]=c,o[3]=d}local_newsText=o}async function contract_update_festival_info(t){if(0==summoner)return 0;let e=0;try{"regular"==gamemode?e=await contract_ff_wss.methods.get_info(t).call({from:wallet}):"trial"==gamemode&&(e=await contract_trial_ff_wss.methods.get_info(t).call({from:wallet}))}catch(t){console.log("***ERROR***: update_festival_info")}if(0==e)return 0;local_ff_each_voting_count[201]=Number(e[1]),local_ff_each_voting_count[202]=Number(e[2]),local_ff_each_voting_count[203]=Number(e[3]),local_ff_each_voting_count[204]=Number(e[4]),local_ff_each_voting_count[205]=Number(e[5]),local_ff_each_voting_count[206]=Number(e[6]),local_ff_each_voting_count[207]=Number(e[7]),local_ff_each_voting_count[208]=Number(e[8]),local_ff_each_voting_count[209]=Number(e[9]),local_ff_each_voting_count[210]=Number(e[10]),local_ff_each_voting_count[211]=Number(e[11]),local_ff_each_voting_count[212]=Number(e[12]),local_ff_next_festival_block=Number(e[13]),local_ff_inSession=Number(e[14]),local_ff_isVotable=Number(e[15]),local_ff_last_voting_block=Number(e[16]),local_ff_last_voting_type=Number(e[17]),local_ff_subject_now=Number(e[18]),local_ff_subject_start_block=Number(e[19]),local_ff_subject_end_block=Number(e[20]),local_ff_isEndable=Number(e[21]),local_ff_elected_type=Number(e[22]),local_ff_previous_elected_type=Number(e[23])}async function contract_callMailDetail(t){if("trial"==gamemode)return 0;let e=await contract_mml_wss.methods.receiving(t).call(),i=(await contract_mml_wss.methods.mails(e).call())[2];return[i,await contract_mfs_wss.methods.call_name_from_summoner(i).call()]}async function contract_get_item_nui(t){if("trial"==gamemode)return 0;return[await contract_msn_wss.methods.summoner(t).call(),await contract_msn_wss.methods.class(t).call(),await contract_msn_wss.methods.score(t).call(),await contract_mfs_wss.methods.calc_exp_addition_rate_from_nui(summoner,t).call(),(await contract_mc_wss.methods.items(t).call()).memo]}async function call_name_from_summoner(t){if("regular"==gamemode){return await contract_mfs_wss.methods.call_name_from_summoner(t).call()}if("trial"==gamemode){return await contract_trial_mfs_wss.methods.call_name_from_summoner(t).call()}}async function call_amount_of_token(t){let e=local_owner,i=await new web3wss.eth.Contract([{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],type:"function"}],t);return await i.methods.balanceOf(e).call()/10**await i.methods.decimals().call()}async function contract_update_summoner_of_wallet(){let t=await contract_mm_wss.methods.tokenOf(wallet).call();t=Number(t);let e=await contract_trial_mm_wss.methods.tokenOf(wallet).call();e=Number(e),e>0?(gamemode="trial",summoner=e):t>0?(gamemode="regular",summoner=t):(gamemode="trial",summoner=0)}async function contract_get_nonce(t){let e=await web3wss.eth.getTransactionCount(t);return Number(e)}async function update_nonce(t){local_nonce=await contract_get_nonce(t)}async function contract_get_age(t){let e=1;for(let i=await web3wss.eth.getBlockNumber();i>=2592e3;i-=2592e3){let a;try{a=await web3.eth.getTransactionCount(t,i)}catch(t){a=0}if(!(a>0))return e;e+=1}return e}async function update_wallet_age(t){local_wallet_age=await contract_get_age(t)}async function calc_wallet_score(t){let e=await contract_get_nonce(t);local_nonce=e;let i=150*await contract_get_age(t),a=e;return a>i&&(a=i),a}async function update_local_wallet_score(){local_wallet_score=await calc_wallet_score(local_owner)}async function contract_get_item_dc(t){if("regular"==gamemode){return await contract_mfc_wss.methods.get_item_dc(t).call()}if("trial"==gamemode){return await contract_trial_mfc_wss.methods.get_item_dc(t).call()}}async function contract_get_modified_dc(t,e){if("regular"==gamemode){return await contract_mfc_wss.methods.get_modified_dc(t,e).call()}if("trial"==gamemode){return await contract_trial_mfc_wss.methods.get_modified_dc(t,e).call()}}function get_userItems(t){return get_itemIds_from_itemType(local_myListsAt_withItemType,t)}async function call_item_info(t){if("regular"==gamemode){return await contract_mc_wss.methods.items(t).call()}if("trial"==gamemode){return await contract_trial_mc_wss.methods.items(t).call()}}async function call_achv(t){if("regular"==gamemode){return await contract_mfa_wss.methods.get_achievement(t).call()}if("trial"==gamemode){return await contract_trial_mfa_wss.methods.get_achievement(t).call()}}async function update_achv(){for(i=1;i<=20;i++)1==local_achv[i]&&(li_achv[i].visible=!0)}async function call_AstarCats(){let t,e=1e3+Math.floor(6777*Math.random()),i=await contract_AstarCats.methods.tokenURI(e).call();return await fetch(i).then((t=>t.json())).then((e=>{t=e})),t.image}async function get_nft_url(){return await call_AstarCats()}async function update_house_price(){if("trial"==gamemode)return 0;let t=await contract_bt.methods.calc_buybackPrice_asArray().call(),e=0;for(i=1;i<=16;i++)e+=local_items[i]*t[i],e+=local_items[i+64]*t[i]*3,e+=local_items[i+64+64]*t[i]*3*3,e+=local_items[i+16]*t[i],e+=local_items[i+16+64]*t[i]*3,e+=local_items[i+16+64+64]*t[i]*3*3,e+=local_items[i+16+16]*t[i],e+=local_items[i+16+16+64]*t[i]*3,e+=local_items[i+16+16+64+64]*t[i]*3*3;e/=10**18,e=Math.floor(100*e)/100,local_house_price=e}async function update_mining_perDay(t){let e;"regular"==gamemode?e=await contract_mfmf_wss.methods.calc_mining_perDay(t).call():"trial"==gamemode&&(e=await contract_trial_mfmf_wss.methods.calc_mining_perDay(t).call()),local_mining_perDay=e}async function update_farming_perDay(t){let e;"regular"==gamemode?e=await contract_mfmf_wss.methods.calc_farming_perDay(t).call():"trial"==gamemode&&(e=await contract_trial_mfmf_wss.methods.calc_farming_perDay(t).call()),local_farming_perDay=e}async function contract_summon(t){if("regular"==gamemode){let e=await contract_mp.methods.PRICE().call();e=Number(e),contract_mfsl.methods.summon(t).send({from:wallet,value:e}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}else if("trial"==gamemode){let e=await contract_trial_mp.methods.PRICE().call();e=Number(e),contract_trial_mfsl.methods.summon(t).send({from:wallet,value:e}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}}async function contract_convert(){if("regular"==gamemode)return 0;if("trial"==gamemode){let t=await contract_mp.methods.PRICE().call();t=Number(t),contract_trial_tc.methods.converting_summon().send({from:wallet,value:t}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}}async function contract_curePetrification(t){if("regular"==gamemode){let e=await contract_mp.methods.PRICE().call();e=Number(e),contract_mffg.methods.cure_petrification(t).send({from:wallet,value:e}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}else if("trial"==gamemode){let e=await contract_trial_mp.methods.PRICE().call();e=Number(e),contract_trial_mffg.methods.cure_petrification(t).send({from:wallet,value:e}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}}async function contract_burn(t){"regular"==gamemode?contract_mfsl.methods.burn(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfsl.methods.burn(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_level_up(t){"regular"==gamemode?contract_mfsl.methods.level_up(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfsl.methods.level_up(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_feeding(t){if(0==t)return 0;"regular"==gamemode?contract_mffg.methods.feeding(t,active_nui_id).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>{update_tx_text("done",t.transactionHash),flag_syncNow=1})):"trial"==gamemode&&contract_trial_mffg.methods.feeding(t,active_nui_id).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>{update_tx_text("done",t.transactionHash),flag_syncNow=1}))}async function contract_grooming(t){"regular"==gamemode?contract_mffg.methods.grooming(t,active_nui_id).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>{update_tx_text("done",t.transactionHash),flag_syncNow=1})):"trial"==gamemode&&contract_trial_mffg.methods.grooming(t,active_nui_id).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>{update_tx_text("done",t.transactionHash),flag_syncNow=1}))}async function contract_mining(t){"regular"==gamemode?0==local_mining_status?contract_mfmf.methods.start_mining(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):contract_mfmf.methods.stop_mining(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&(0==local_mining_status?contract_trial_mfmf.methods.start_mining(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):contract_trial_mfmf.methods.stop_mining(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))))}async function contract_farming(t){"regular"==gamemode?0==local_farming_status?contract_mfmf.methods.start_farming(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):contract_mfmf.methods.stop_farming(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&(0==local_farming_status?contract_trial_mfmf.methods.start_farming(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):contract_trial_mfmf.methods.stop_farming(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))))}async function contract_start_crafting(t,e){"regular"==gamemode?contract_mfc.methods.start_crafting(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfc.methods.start_crafting(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_pause_crafting(t){"regular"==gamemode?contract_mfc.methods.pause_crafting(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfc.methods.pause_crafting(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_resume_crafting(t){"regular"==gamemode?contract_mfc.methods.resume_crafting(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfc.methods.resume_crafting(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_cancel_crafting(t){"regular"==gamemode?contract_mfc.methods.cancel_crafting(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfc.methods.cancel_crafting(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_complete_crafting(t){"regular"==gamemode?contract_mfc.methods.complete_crafting(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfc.methods.complete_crafting(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_send_mail(t,e){"regular"==gamemode?wallet==local_owner&&contract_mml.methods.send_mail(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&wallet==local_owner&&contract_trial_mml.methods.send_mail(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_open_mail(t){"regular"==gamemode?wallet==local_owner&&contract_mml.methods.open_mail(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&wallet==local_owner&&contract_trial_mml.methods.open_mail(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_mint_name(t,e){"regular"==gamemode?wallet==local_owner&&contract_mfn.methods.mint(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&wallet==local_owner&&contract_trial_mfn.methods.mint(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_burn_name(t){"regular"==gamemode?contract_mfn.methods.burn(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfn.methods.burn(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function unpack_bag(t,e){"regular"==gamemode?wallet==local_owner&&contract_mfc2.methods.unpack_bag(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&wallet==local_owner&&contract_trial_mfc2.methods.unpack_bag(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function dice_roll(t){"regular"==gamemode?wallet==local_owner&&contract_md.methods.dice_roll(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&wallet==local_owner&&contract_trial_md.methods.dice_roll(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function upgrade_item(t,e,i,a){"regular"==gamemode?contract_mfc2.methods.upgrade_item(t,e,i,a).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfc2.methods.upgrade_item(t,e,i,a).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function upgrade_fluffy2fluffier(t,e,i,a,s,n){"regular"==gamemode?contract_mfc2.methods.upgrade_fluffy(t,e,i,a,s,n).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfc2.methods.upgrade_fluffy(t,e,i,a,s,n).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function upgrade_fluffier2fluffiest(t,e,i,a,s){"regular"==gamemode?contract_mfc2.methods.upgrade_fluffy(t,e,i,a,s,0).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfc2.methods.upgrade_fluffy(t,e,i,a,s,0).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function upgrade_fluffiest2doll(t,e,i,a){"regular"==gamemode?contract_mfc2.methods.upgrade_fluffy(t,e,i,a,0,0).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfc2.methods.upgrade_fluffy(t,e,i,a,0,0).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function open_presentbox(t,e){"regular"==gamemode?wallet==local_owner&&contract_mfc2.methods.open_presentbox(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&wallet==local_owner&&contract_trial_mfc2.methods.open_presentbox(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_voting(t,e){"regular"==gamemode?wallet==local_owner&&contract_ff.methods.voting(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&wallet==local_owner&&contract_trial_ff.methods.voting(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_end_voting(t){"regular"==gamemode?wallet==local_owner&&contract_ff.methods.end_voting(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&wallet==local_owner&&contract_trial_ff.methods.end_voting(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_start_practice(t,e){"regular"==gamemode?contract_mfp.methods.start_practice(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfp.methods.start_practice(t,e).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function contract_stop_practice(t){"regular"==gamemode?contract_mfp.methods.stop_practice(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&contract_trial_mfp.methods.stop_practice(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function open_staking_reward(t){"regular"==gamemode?wallet==local_owner&&contract_mfst.methods.open_staking_reward(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash))):"trial"==gamemode&&wallet==local_owner&&contract_trial_mfst.methods.open_staking_reward(t).send({from:wallet}).on("transactionHash",(t=>update_tx_text("sending",t))).on("receipt",(t=>update_tx_text("done",t.transactionHash)))}async function eventMonitor(t,e){(async()=>{t.events.allEvents({},((t,i)=>{let a=JSON.stringify(i,null,"    "),s=JSON.parse(a),n=[s.event,s.transactionHash];for(let t=0;t<=5;t++){let e=s.returnValues[t];void 0!==e&&n.push(e)}console.log(n),e.push(n)}))})()}function start_eventMonitor(){li_eventLog=[],eventMonitor(contract_mfsl_wss,li_eventLog),eventMonitor(contract_mffg_wss,li_eventLog),eventMonitor(contract_mfmf_wss,li_eventLog),eventMonitor(contract_mfc_wss,li_eventLog),eventMonitor(contract_mfc2_wss,li_eventLog),eventMonitor(contract_mfn_wss,li_eventLog),eventMonitor(contract_md_wss,li_eventLog),eventMonitor(contract_mml_wss,li_eventLog),eventMonitor(contract_ff_wss,li_eventLog),eventMonitor(contract_bt_wss,li_eventLog)}function update_astarPrice(){let t=new XMLHttpRequest;t.open("GET","https://api.dexscreener.com/latest/dex/pairs/astar/0x806f746a7c4293092ac7aa604347be123322df1e",URL,!0),t.onload=function(){let t=this.response,e=JSON.parse(t).pair.priceChange.h24;local_astar_priceChange_h24=e},t.send()}class Murasakisan extends Phaser.GameObjects.Sprite{constructor(t,e,i){super(t,e,i,"murasaki_sleeping"),this.x=e,this.y=i,this.scene.add.existing(this),this.anims.play("murasaki_sleeping",!0),this.mode="resting",this.submode=0,this.subcount=0,this.count=0,this.dist="right",this.target_x=0,this.target_y=0,this.setInteractive(),this.on("pointerdown",(function(t){this.on_click()}),this),this.exemption_resting_count=0,this.followingTwinkle=0}checkOverlap(t,e){var i=t.getBounds();i.x+=i.width/4,i.y+=i.height/2,i.width/=2,i.height/=3;var a=e.getBounds();return Phaser.Geom.Intersects.RectangleToRectangle(i,a)}set set_mode(t){this.mode=t,this.count=0,0==item_bear.visible&&"grooming"!=this.mode&&(item_bear.visible=!0)}get get_mode(){return this.mode}on_click(){"resting"!=this.mode&&"moving"!=this.mode||(this.count=0,this.mode="hugging")}resting(){if(this.count+=1,1==this.count){if("right"==this.dist?this.anims.play("murasaki_right",!0):"left"==this.dist&&this.anims.play("murasaki_left",!0),this.resting_count=70+30*Math.random(),0!=local_practice_status)try{this.item_practice.destroy()}catch(t){}}else if(this.count>=this.resting_count){let t=100*Math.random();if(t<=5)this.check_hammock()?(this.mode="hammock",this.count=0,this.submode=0):(this.mode="sleeping",this.count=0);else if(t<=15&&local_happy>=80){for(let t=0;t<group_pet.getLength();t++)if(this.checkOverlap(this,group_pet.getChildren()[t])){this.mode="meet_a_pet",this.count=0;break}}else t<=30&&satiety<=10&&count_sync>3?(this.mode="hungry",this.count=0):t<=30&&happy<=10&&count_sync>3?(this.mode="crying",this.count=0):t<=30&&1==flag_music&&count_sync>3?(this.mode="listning",this.count=0):(this.mode="moving",this.count=0)}}moving(){if(this.count+=1,1==this.count){var t=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=t[Math.floor(Math.random()*t.length)],(this.x<200&&this.moving_degree>90&&this.moving_degree<270||this.x>1e3&&(this.moving_degree<90||this.moving_degree>270))&&(this.moving_degree+=180),this.moving_degree=this.moving_degree%360,(this.y>760&&this.moving_degree>180||this.y<550&&this.moving_degree<180)&&(this.moving_degree=360-this.moving_degree),this.moving_speed=.5+.4*Math.random(),this.moving_count=70+30*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.anims.play("murasaki_left",!0)):(this.dist="right",this.anims.play("murasaki_right",!0))}else if(this.count<this.moving_count){if(this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed,2==flag_tokenBall&&2==this.count&&100*Math.random()>=50)for(let t=0;t<group_tokenBall.getLength();t++)if(this.checkOverlap(this,group_tokenBall.getChildren()[t])){group_tokenBall.getChildren()[t].on_click();break}if(3==this.count&&100*Math.random()>=50)for(let t=0;t<group_star.getLength();t++)if(this.checkOverlap(this,group_star.getChildren()[t])){group_star.getChildren()[t].on_kick();break}if(4==this.count&&100*Math.random()>=50)for(let t=0;t<group_scoreMeter.getLength();t++)if(this.checkOverlap(this,group_scoreMeter.getChildren()[t])){group_scoreMeter.getChildren()[t].on_kick();break}}else this.count>=this.moving_count&&(this.mode="resting",this.count=0)}drop_followingTwinkle(){0!=this.followingTwinkle&&(this.followingTwinkle.on_kick(),this.followingTwinkle.flag_follow=0,this.followingTwinkle=0)}feeding(){if(this.count+=1,0==this.submode){this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_feeding_happy_right",!0)):(this.dist="left",this.anims.play("murasaki_feeding_happy_left",!0)),this.drop_followingTwinkle(),this.submode=1}else if(1==this.submode){let t=this.target_x-this.x,e=this.target_y-this.y,i=t/(Math.abs(t)+Math.abs(e))*2.2,a=e/(Math.abs(t)+Math.abs(e))*2.2;this.x+=i,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.submode=2)}else if(2==this.submode){this.anims.play("murasaki_feeding",!0),sound_happy.play();try{group_food.getChildren().length>0?group_food.getChildren()[Math.floor(Math.random()*group_food.getChildren().length)].destroy():group_food.destroy(!0)}catch(t){}this.count=0,this.count_limit=this.count+1150,this.submode=3}else if(3==this.submode){if(this.count%200==0){sound_happy.play();try{group_food.getChildren()[Math.floor(Math.random()*group_food.getChildren().length)].destroy()}catch(t){}}this.count>=this.count_limit&&(this.mode="resting",this.count=0)}}crying(){this.count+=1,1==this.count?this.anims.play("murasaki_crying",!0):this.count>=500&&(this.mode="resting",this.count=0),this.count%200==10&&sound_unhappy.play()}hungry(){this.count+=1,1==this.count?this.anims.play("murasaki_hungry",!0):this.count>=500&&(this.mode="resting",this.count=0),this.count%200==10&&sound_unhappy.play()}petrified(){this.count+=1,1==this.count&&this.anims.play("murasaki_stone",!0)}sleeping(){this.count+=1,1==this.count?this.anims.play("murasaki_sleeping",!0):this.count>=1500&&(this.mode="resting",this.count=0)}try_hammock(){"resting"!=this.mode&&"moving"!=this.mode||!this.check_hammock()||(this.mode="hammock",this.count=0,this.submode=0)}check_hammock(){return"undefined"!=typeof item_bed&&item_bed.x>=100&&item_bed.x<=1180&&item_bed.y>=420&&item_bed.y<=800&&0==flag_onLight}sleeping_withHammock(){if(this.count+=1,0==this.submode){this.target_x=item_bed.x,this.target_y=item_bed.y,item_bed.disableInteractive(),this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_right",!0)):(this.dist="left",this.anims.play("murasaki_left",!0)),this.drop_followingTwinkle(),this.submode=1}else if(1==this.submode){let t=this.target_x-this.x,e=this.target_y-this.y,i=t/(Math.abs(t)+Math.abs(e))*1.5,a=e/(Math.abs(t)+Math.abs(e))*1.5;this.x+=i,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.submode=2)}else if(2==this.submode)this.x=this.target_x,this.y=this.target_y,this.setScale(.8),this.anims.play("item_hammock",!0),this.submode=3,item_bed.visible=!1;else if(3==this.submode&&1==flag_onLight&&turn%100==0){100*Math.random()<=10&&(this.setScale(.45),this.y+=50,item_bed.visible=!0,item_bed.setInteractive(),"right"==this.dist?this.anims.play("murasaki_right",!0):"left"==this.dist&&this.anims.play("murasaki_left",!0),this.mode="resting",this.count=0)}}listning(){this.count+=1,1==this.count?this.anims.play("murasaki_listning",!0):this.count>=750&&(this.mode="resting",this.count=0)}grooming(){if(this.count+=1,0==this.submode){this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_feeding_happy_right",!0)):(this.dist="left",this.anims.play("murasaki_feeding_happy_left",!0)),this.drop_followingTwinkle(),this.submode=1}else if(1==this.submode){let t=this.target_x-this.x,e=this.target_y-this.y,i=t/(Math.abs(t)+Math.abs(e))*2.2,a=e/(Math.abs(t)+Math.abs(e))*2.2;this.x+=i,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.submode=2)}else 2==this.submode?(this.x=this.target_x,this.y=this.target_y-50,this.anims.play("murasaki_grooming",!0),this.count_limit=this.count+1500,this.submode=3,item_bear.visible=!1):3==this.submode&&(this.count%200==10&&sound_happy.play(),this.count>=this.count_limit&&("right"==this.dist?this.anims.play("murasaki_right",!0):"left"==this.dist&&this.anims.play("murasaki_left",!0),this.x=950,this.y=480,this.mode="resting",this.count=0,item_bear.visible=!0))}mining(){if(this.count+=1,0==this.submode){this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_working_right",!0)):(this.dist="left",this.anims.play("murasaki_working_left",!0)),this.drop_followingTwinkle(),this.submode=1}else if(1==this.submode){let t=this.target_x-this.x,e=this.target_y-this.y,i=t/(Math.abs(t)+Math.abs(e))*1.5,a=e/(Math.abs(t)+Math.abs(e))*1.5;this.x+=i,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.submode=2,this.subcount=0)}else 2==this.submode&&(this.anims.play("murasaki_mining",!0),this.count%600==10&&(sound_mining_during.play(),summon_coin(this.scene),this.subcount+=1,this.subcount>=30&&100*Math.random()<=10&&(this.count=0,this.subcount=0,this.submode=0,this.mode="resting",this.exemption_resting_count=18e3)))}hugging(){this.count+=1,this.count%200==50&&sound_happy.play(),1==this.count?this.anims.play("murasaki_click",!0):this.count>=300&&(this.mode="resting",this.count=0)}meet_a_pet(){if(this.count+=1,this.count%200==50&&sound_happy.play(),1==this.count){this.anims.play("murasaki_click",!0);for(let t=0;t<group_pet.getLength();t++)this.checkOverlap(this,group_pet.getChildren()[t])&&(group_pet.getChildren()[t].count=0,group_pet.getChildren()[t].mode="meet")}else this.count>=300&&(this.mode="resting",this.count=0)}farming(){if(this.count+=1,0==this.submode){this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_working_right",!0)):(this.dist="left",this.anims.play("murasaki_working_left",!0)),this.drop_followingTwinkle(),this.submode=1}else if(1==this.submode){let t=this.target_x-this.x,e=this.target_y-this.y,i=t/(Math.abs(t)+Math.abs(e))*1.5,a=e/(Math.abs(t)+Math.abs(e))*1.5;this.x+=i,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.submode=2,this.subcount=0)}else 2==this.submode&&(this.anims.play("murasaki_farming",!0),this.count%400==10&&(sound_farming_during.play(),summon_leaf(this.scene),this.subcount>=30&&100*Math.random()<=10&&(this.count=0,this.subcount=0,this.submode=0,this.mode="resting",this.exemption_resting_count=18e3)))}crafting(){if(this.count+=1,0==this.submode){this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_working_right",!0)):(this.dist="left",this.anims.play("murasaki_working_left",!0)),this.drop_followingTwinkle(),this.submode=1}else if(1==this.submode){let t=this.target_x-this.x,e=this.target_y-this.y,i=t/(Math.abs(t)+Math.abs(e))*1.5,a=e/(Math.abs(t)+Math.abs(e))*1.5;this.x+=i,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.submode=2,this.subcount=0)}else 2==this.submode&&(this.anims.play("murasaki_crafting",!0),this.count%600==10&&(sound_crafting_during.play(),summon_flower(this.scene),this.subcount+=1,this.subcount>=30&&100*Math.random()<=10&&(this.count=0,this.subcount=0,this.submode=0,this.mode="resting",this.exemption_resting_count=18e3)))}try_attenting(t,e){"resting"!=this.mode&&"moving"!=this.mode||(this.mode="attenting",this.submode=0,this.target_x=t,this.target_y=e)}attenting(){if(0==this.submode){this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_right",!0)):(this.dist="left",this.anims.play("murasaki_left",!0)),this.submode+=1}else if(1==this.submode){let t=this.target_x-this.x,e=this.target_y-this.y,i=t/(Math.abs(t)+Math.abs(e))*1.5,a=e/(Math.abs(t)+Math.abs(e))*1.5;this.x+=i,this.y+=a,this.x>this.target_x-75&&this.x<this.target_x+75&&this.y>this.target_y-25&&this.y<this.target_y+25&&(this.submode=2)}else 2==this.submode&&(this.mode="hugging",this.submode=0,this.count=0)}practice(){if(this.count+=1,0==this.submode){this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_working_right",!0)):(this.dist="left",this.anims.play("murasaki_working_left",!0)),this.drop_followingTwinkle(),this.submode=1}else if(1==this.submode){let t=this.target_x-this.x,e=this.target_y-this.y,i=t/(Math.abs(t)+Math.abs(e))*1.5,a=e/(Math.abs(t)+Math.abs(e))*1.5;this.x+=i,this.y+=a,this.x>this.target_x-5&&this.x<this.target_x+5&&this.y>this.target_y-5&&this.y<this.target_y+5&&(this.submode=2)}else if(2==this.submode){let t=get_itemType(local_myListsAt_withItemType,local_practice_item_id),e="";t==dic_items.Clarinet.item_id?(item_clarinet.visible=!1,e="practice_clarinet"):t==dic_items.Piano.item_id?(item_piano.visible=!1,e="practice_piano"):t==dic_items.Violin.item_id&&(item_violin.visible=!1,e="practice_violin");try{this.item_practice.destroy()}catch(t){}this.item_practice=this.scene.add.sprite(this.target_x-100,this.target_y,e).setOrigin(.5).setScale(.4).setDepth(this.target_y).anims.play(e,!0),this.submode=3}else 3==this.submode&&(this.anims.play("murasaki_listning",!0),this.count%200==10&&(sound_practice.play(),summon_note(this.scene)),happy<=0&&(this.anims.play("murasaki_sleeping",!0),this.submode=4))}update_item_wearing_hat(){"resting"==this.mode||"moving"==this.mode||"hugging"==this.mode||"hungry"==this.mode||"crying"==this.mode||"listning"==this.mode||"attenting"==this.mode||"meet_a_pet"==this.mode?(item_wearing_hat.x=this.x,item_wearing_hat.y=this.y-65):"sleeping"==this.mode?(item_wearing_hat.x=this.x-26,item_wearing_hat.y=this.y-22):"hammock"==this.mode?this.submode<2?(item_wearing_hat.x=this.x,item_wearing_hat.y=this.y-65):(item_wearing_hat.x=this.x,item_wearing_hat.y=this.y-135):"mining"==this.mode&&1==this.submode&&"left"==this.dist?(item_wearing_hat.x=this.x-5,item_wearing_hat.y=this.y-50):"mining"==this.mode&&1==this.submode&&"right"==this.dist?(item_wearing_hat.x=this.x+5,item_wearing_hat.y=this.y-50):"mining"==this.mode&&2==this.submode?(item_wearing_hat.x=this.x+27,item_wearing_hat.y=this.y-72):"farming"==this.mode&&1==this.submode&&"left"==this.dist?(item_wearing_hat.x=this.x-5,item_wearing_hat.y=this.y-50):"farming"==this.mode&&1==this.submode&&"right"==this.dist?(item_wearing_hat.x=this.x+5,item_wearing_hat.y=this.y-50):"farming"==this.mode&&2==this.submode?(item_wearing_hat.x=this.x+25,item_wearing_hat.y=this.y-55):"crafting"==this.mode&&1==this.submode&&"left"==this.dist?(item_wearing_hat.x=this.x-5,item_wearing_hat.y=this.y-50):"crafting"==this.mode&&1==this.submode&&"right"==this.dist?(item_wearing_hat.x=this.x+7,item_wearing_hat.y=this.y-50):"crafting"==this.mode&&2==this.submode?(item_wearing_hat.x=this.x+0,item_wearing_hat.y=this.y-80):"feeding"==this.mode&&1==this.submode&&"right"==this.dist?(item_wearing_hat.x=this.x+8,item_wearing_hat.y=this.y-55):"feeding"==this.mode&&1==this.submode&&"left"==this.dist?(item_wearing_hat.x=this.x-8,item_wearing_hat.y=this.y-55):"feeding"==this.mode&&3==this.submode?(item_wearing_hat.x=this.x-2,item_wearing_hat.y=this.y-65):"grooming"==this.mode&&1==this.submode&&"right"==this.dist?(item_wearing_hat.x=this.x+8,item_wearing_hat.y=this.y-55):"grooming"==this.mode&&1==this.submode&&"left"==this.dist?(item_wearing_hat.x=this.x-8,item_wearing_hat.y=this.y-55):"grooming"==this.mode&&3==this.submode?(item_wearing_hat.x=this.x-25,item_wearing_hat.y=this.y+45):"practice"==this.mode&&1==this.submode&&"left"==this.dist?(item_wearing_hat.x=this.x-5,item_wearing_hat.y=this.y-50):"practice"==this.mode&&1==this.submode&&"right"==this.dist?(item_wearing_hat.x=this.x+5,item_wearing_hat.y=this.y-50):"practice"==this.mode&&this.submode>=2&&(item_wearing_hat.x=this.x,item_wearing_hat.y=this.y-65),"undefined"!=typeof item_hat_helmet&&item_wearing_hat==item_hat_helmet?(item_wearing_hat.x+=0,item_wearing_hat.y+=5):"undefined"!=typeof item_hat_mortarboard&&item_wearing_hat==item_hat_mortarboard&&(item_wearing_hat.x+=4,item_wearing_hat.y+=8),item_wearing_hat.depth=this.y+1}update(){count_sync>0&&local_level>0&&("resting"==this.mode?this.resting():"moving"==this.mode?this.moving():"feeding"==this.mode?this.feeding():"crying"==this.mode?this.crying():"sleeping"==this.mode?this.sleeping():"grooming"==this.mode?this.grooming():"mining"==this.mode?this.mining():"hugging"==this.mode?this.hugging():"farming"==this.mode?this.farming():"crafting"==this.mode?this.crafting():"hungry"==this.mode?this.hungry():"petrified"==this.mode?this.petrified():"listning"==this.mode?this.listning():"attenting"==this.mode?this.attenting():"hammock"==this.mode?this.sleeping_withHammock():"practice"==this.mode?this.practice():"meet_a_pet"==this.mode&&this.meet_a_pet(),0!=item_wearing_hat&&this.update_item_wearing_hat(),this.depth=this.y),this.exemption_resting_count>0&&(this.exemption_resting_count-=1)}}class Neon extends Phaser.GameObjects.Sprite{constructor(t,e,i,a,s){super(t,e,i,a),this.scene.add.existing(this),this.sprite_right=a,this.sprite_left=s,this.anims.play(a,!0),this.mode="resting",this.submode=0,this.count=0,this.dist="right",this.target_x=0,this.target_y=0,this.depth=3101,this.setInteractive({useHandCursor:!0}),this.on("pointerdown",(function(t){this.on_click()}),this)}on_click(){summon_star(this.scene)}resting(){this.count+=1,1==this.count?("right"==this.dist?this.anims.play(this.sprite_right,!0):"left"==this.dist&&this.anims.play(this.sprite_left,!0),this.resting_count=200+50*Math.random()):this.count>=this.resting_count&&(this.mode="moving",this.count=0)}moving(){if(this.count+=1,1==this.count){var t=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=t[Math.floor(Math.random()*t.length)],(this.x<100&&this.moving_degree>90&&this.moving_degree<270||this.x>1e3&&(this.moving_degree<90||this.moving_degree>270))&&(this.moving_degree-=180),this.moving_degree=this.moving_degree%360,(this.y>450&&this.moving_degree>180||this.y<100&&this.moving_degree<180)&&(this.moving_degree=360-this.moving_degree),this.moving_degree<0&&(this.moving_degree+=360),this.moving_speed=.3+.2*Math.random(),this.moving_count=70+30*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.anims.play(this.sprite_left,!0)):(this.dist="right",this.anims.play(this.sprite_right,!0))}else this.count<this.moving_count?(this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed):this.count>=this.moving_count&&(this.mode="resting",this.count=0)}update(){"resting"==this.mode?this.resting():"moving"==this.mode&&this.moving()}}class Pet extends Phaser.GameObjects.Sprite{constructor(t,e,i,a,s,n){super(t,e,i,a),this.scene.add.existing(this),this.sprite_right=a,this.sprite_left=s,this.type=n,this.anims.play(a,!0),this.mode="resting",this.submode=0,this.count=0,this.dist="right",this.target_x=0,this.target_y=0,this.on("pointerdown",(function(t){this.on_click()}),this)}set set_mode(t){this.mode=t,this.count=0}get get_mode(){return this.mode}on_click(){}meet(){this.count+=1,1==this.count?"mining"==this.type?this.anims.play("mr_astar_meet",!0):"farming"==this.type?this.anims.play("ms_ether_meet",!0):"crafting"==this.type&&this.anims.play("dr_bitco_meet",!0):this.count>=300&&(this.mode="resting",this.count=0)}resting(){this.count+=1,1==this.count?("right"==this.dist?this.anims.play(this.sprite_right,!0):"left"==this.dist&&this.anims.play(this.sprite_left,!0),this.resting_count=200+50*Math.random()):this.count>=this.resting_count&&(murasakisan.mode==this.type?(this.mode="working","mining"==this.type?(this.target_x=murasakisan.target_x+50,this.target_y=murasakisan.target_y+20):"farming"==this.type?(this.target_x=murasakisan.target_x+45,this.target_y=murasakisan.target_y+45):"crafting"==this.type&&(this.target_x=murasakisan.target_x+45,this.target_y=murasakisan.target_y+20),this.count=0,this.submode=0):"practice"==murasakisan.mode?(this.mode="practice","mining"==this.type?(this.target_x=murasakisan.target_x-65,this.target_y=murasakisan.target_y+55):"farming"==this.type?(this.target_x=murasakisan.target_x+0,this.target_y=murasakisan.target_y+70):"crafting"==this.type&&(this.target_x=murasakisan.target_x+65,this.target_y=murasakisan.target_y+55),this.count=0,this.submode=0):(this.mode="moving",this.count=0))}moving(){if(this.count+=1,1==this.count){var t=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=t[Math.floor(Math.random()*t.length)],(this.x<100&&this.moving_degree>90&&this.moving_degree<270||this.x>1100&&(this.moving_degree<90||this.moving_degree>270))&&(this.moving_degree-=180),this.moving_degree=this.moving_degree%360,(this.y>860&&this.moving_degree>180||this.y<500&&this.moving_degree<180)&&(this.moving_degree=360-this.moving_degree),this.moving_degree<0&&(this.moving_degree+=360),this.moving_speed=.3+.2*Math.random(),this.moving_count=70+30*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.anims.play(this.sprite_left,!0)):(this.dist="right",this.anims.play(this.sprite_right,!0))}else this.count<this.moving_count?(this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y<500&&(this.y=500),this.x<50&&(this.x=50)):this.count>=this.moving_count&&(this.mode="resting",this.count=0)}working(){if(this.count+=1,0==this.submode){this.target_x-this.x>0?(this.dist="right",this.anims.play(this.sprite_right,!0)):(this.dist="left",this.anims.play(this.sprite_left,!0)),this.submode=1}else if(1==this.submode){let t=this.target_x-this.x,e=this.target_y-this.y,i=t/(Math.abs(t)+Math.abs(e))*.6,a=e/(Math.abs(t)+Math.abs(e))*.6;this.x+=i,this.y+=a,this.x>this.target_x-1&&this.x<this.target_x+1&&this.y>this.target_y-1&&this.y<this.target_y+1&&(this.dist="left",this.anims.play(this.sprite_left,!0),this.submode=2)}else 2==this.submode&&murasakisan.mode!=this.type&&(this.mode="resting",this.count=0)}practice(){if(this.count+=1,0==this.submode){this.target_x-this.x>0?(this.dist="right",this.anims.play(this.sprite_right,!0)):(this.dist="left",this.anims.play(this.sprite_left,!0)),this.submode=1}else if(1==this.submode){let t=this.target_x-this.x,e=this.target_y-this.y,i=t/(Math.abs(t)+Math.abs(e))*.6,a=e/(Math.abs(t)+Math.abs(e))*.6;this.x+=i,this.y+=a,this.x>this.target_x-1&&this.x<this.target_x+1&&this.y>this.target_y-1&&this.y<this.target_y+1&&(this.dist="left",this.anims.play(this.sprite_left,!0),this.submode=2)}else 2==this.submode&&"practice"!=murasakisan.mode&&(this.mode="resting",this.count=0)}update_item_wearing_hat(){"mining"==this.type?("right"==this.dist?item_wearing_hat_pet[1].x=this.x-9:item_wearing_hat_pet[1].x=this.x+10,0==this.frame.name&&"right"==this.dist||1==this.frame.name&&"left"==this.dist?item_wearing_hat_pet[1].y=this.y-22:item_wearing_hat_pet[1].y=this.y-24,item_wearing_hat_pet[1].depth=this.y+1):"farming"==this.type?("right"==this.dist?item_wearing_hat_pet[1].x=this.x:item_wearing_hat_pet[1].x=this.x+1,1==this.frame.name&&"right"==this.dist||0==this.frame.name&&"left"==this.dist?item_wearing_hat_pet[1].y=this.y-24:item_wearing_hat_pet[1].y=this.y-27,item_wearing_hat_pet[1].depth=this.y+1):"crafting"==this.type&&("right"==this.dist?item_wearing_hat_pet[1].x=this.x:item_wearing_hat_pet[1].x=this.x+2,1==this.frame.name&&"right"==this.dist||0==this.frame.name&&"left"==this.dist?item_wearing_hat_pet[1].y=this.y-29:item_wearing_hat_pet[1].y=this.y-31,item_wearing_hat_pet[1].depth=this.y+1)}update(){"resting"==this.mode?this.resting():"moving"==this.mode?this.moving():"working"==this.mode?this.working():"practice"==this.mode?this.practice():"meet"==this.mode&&this.meet(),this.depth=this.y,0!=item_wearing_hat_pet&&item_wearing_hat_pet[0]==this.type&&this.update_item_wearing_hat()}}class HomeCat extends Phaser.GameObjects.Sprite{constructor(t,e,i){super(t,e,i),this.x=e,this.y=i,this.scene.add.existing(this),this.submode=0,this.on("pointerdown",(async()=>{if(local_items[196]>0){sound_button_on.play();let t=get_userItems(196);contract_send_mail(summoner,t[0])}})),this.on("pointerover",(()=>{local_items[196]>0&&(sound_button_select.play(),this.anims.play("cat_standing_withMail",!0))})),this.on("pointerout",(()=>{local_items[196]>0&&this.anims.play("cat_standing",!0)})),this.disableInteractive(),this.firstDecideMode()}firstDecideMode(){0==local_mail_sending_interval?this.mode="standing":local_mail_sending_interval>0&&1==local_lastMailOpen?this.mode="sleeping":this.mode="leaving",this.submode=0}standing(){0==this.submode?(this.x=90,this.y=575,this.anims.play("cat_standing",!0),this.setInteractive({useHandCursor:!0}),this.submode+=1):turn%100==0&&local_mail_sending_interval>0&&(this.mode="mailSending",this.submode=0)}mailSending(){0==this.submode?(this.speed_x=1,this.speed_y=.5+.5*Math.random(),this.disableInteractive(),this.anims.play("cat_walking_right_withMail_fast",!0),sound_cat1.play(),this.submode+=1):(this.x+=this.speed_x,this.y+=this.speed_y,(this.x>=1400||this.y>=1100)&&(this.mode="leaving",this.submode=0))}leaving(){0==this.submode?(this.anims.isPlaying=!1,this.disableInteractive(),this.submode+=1):turn%100==0&&(1!=local_lastMailOpen&&0!=local_mail_sending_interval||(this.mode="goingHome",this.submode=0))}goingHome(){if(0==this.submode)this.anims.play("cat_walking_left_fast",!0),this.disableInteractive(),this.x=1300,this.y=800+200*Math.random(),this.target_x=100,this.target_y=590,sound_cat2.play(),this.submode+=1;else{let t=this.target_x-this.x,e=this.target_y-this.y,i=t/(Math.abs(t)+Math.abs(e))*1.5,a=e/(Math.abs(t)+Math.abs(e))*1.5;this.x+=i,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.mode="sleeping",this.submode=0)}}sleeping(){0==this.submode?(this.x=100,this.y=590,this.disableInteractive(),this.anims.play("cat_sleeping",!0),this.submode+=1):turn%100==0&&0==local_mail_sending_interval&&(this.mode="standing",this.submode=0)}update(){"sleeping"==this.mode?this.sleeping():"standing"==this.mode?this.standing():"mailSending"==this.mode?this.mailSending():"leaving"==this.mode?this.leaving():"goingHome"==this.mode&&this.goingHome(),this.depth=this.y}}class VisitorCat extends Phaser.GameObjects.Sprite{constructor(t,e,i,a,s){super(t,e,i),this.scene=t,this.x=e,this.y=i,this.summoner_from_id=a,this.summoner_from_name=s,this.scene.add.existing(this),this.submode=0,this.firstDecideMode();let n=" Mail from "+s+" ";this.text=this.scene.add.text(this.x,this.y-60,n,{font:"20px Arial",fill:"#000000",backgroundColor:"#ffffff"}).setOrigin(.5).setVisible(!1).setDepth(2e3),this.on("pointerdown",(()=>{sound_button_on.play(),contract_open_mail(summoner)})),this.on("pointerover",(()=>{sound_button_select.play(),1==flag_info&&(this.text.setVisible(!0),setTimeout((()=>{this.text.setVisible(!1)}),3e3))}))}firstDecideMode(){this.mode="visiting",this.submode=0}visiting(){if(0==this.submode)this.anims.play("cat_walking_left_withMail_fast",!0),this.x=1300,this.y=600+200*Math.random(),this.target_x=400+400*Math.random(),this.target_y=500+200*Math.random(),sound_cat1.play(),this.submode+=1;else{let t=this.target_x-this.x,e=this.target_y-this.y,i=t/(Math.abs(t)+Math.abs(e))*1.5,a=e/(Math.abs(t)+Math.abs(e))*1.5;this.x+=i,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.mode="standing",this.submode=0)}}standing(){if(0==this.submode)this.standing_count=1e3+1e3*Math.random(),this.anims.play("cat_standing_withMail",!0),this.setInteractive({useHandCursor:!0}),this.submode+=1;else if(this.submode<this.standing_count)this.submode+=1;else{let t=100*Math.random();this.mode=t<=95?"moving":"sleeping",this.submode=0}}moving(){if(0==this.submode){this.disableInteractive();var t=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=t[Math.floor(Math.random()*t.length)],(this.x<100&&this.moving_degree>90&&this.moving_degree<270||this.x>1100&&(this.moving_degree<90||this.moving_degree>270))&&(this.moving_degree-=180),this.moving_degree=this.moving_degree%360,(this.y>800&&this.moving_degree>180||this.y<550&&this.moving_degree<180)&&(this.moving_degree=360-this.moving_degree),this.moving_degree<0&&(this.moving_degree+=360),this.moving_speed=.3+.2*Math.random(),this.moving_count=200+200*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.anims.play("cat_walking_left_withMail",!0)):(this.dist="right",this.anims.play("cat_walking_right_withMail",!0)),this.submode+=1}else this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y<500&&(this.y=500),this.x<50&&(this.x=50),this.submode+=1,this.submode>=this.moving_count&&(this.mode="standing",this.submode=0)}sleeping(){0==this.submode?(this.anims.play("cat_sleeping_withMail",!0),this.disableInteractive(),this.submode+=1):(this.submode+=1,this.submode>=4e3&&(this.mode="standing",this.submode=0))}goingHome(){0==this.submode?(this.speed_x=-1,this.speed_y=1*Math.random(),this.disableInteractive(),this.anims.play("cat_walking_left_fast",!0),sound_cat2.play(),this.submode+=1):(this.x+=this.speed_x,this.y+=this.speed_y,this.x<-100&&cat_visitor.destroy())}update(){"visiting"==this.mode?this.visiting():"standing"==this.mode?this.standing():"moving"==this.mode?this.moving():"sleeping"==this.mode?this.sleeping():"goingHome"==this.mode&&this.goingHome(),this.depth=this.y,this.text.x=this.x,this.text.y=this.y-60,turn%100==0&&0==local_receiving_mail&&"goingHome"!=this.mode&&(this.mode="goingHome",this.submode=0)}}class Dice extends Phaser.GameObjects.Sprite{constructor(t,e,i){super(t,e,i,"item_dice"),this.scene.add.existing(this),this.setInteractive({useHandCursor:!0}),this.on("pointerdown",(function(t){this.on_click()}),this),this.speed_x=0,this.speed_y=0,this.text_rolled_number=t.add.text(e,i,"88",{font:"bold 20px Arial",fill:"#ffffff"}).setOrigin(.5),this.text_next_time=t.add.text(e,i+40,"---",{font:"14px Arial",fill:"#000000"}).setOrigin(.5),group_info.add(this.text_next_time),this.flag_tx=0,this.count=0,this.line_y=i,this.line_y_max=500,this.line_y_min=700,this.line_x_r=1200,this.line_x_l=50,this.buffer_sec=14400,this.on("pointerover",(()=>{1==this.flag_tx&&(this.setTexture("item_dice_pointerover"),sound_button_select.play())})),this.on("pointerout",(()=>{this.setTexture("item_dice")}))}on_click(){this.speed_x=8+5*Math.random(),pointer_x>this.x&&(this.speed_x*=-1),this.speed_y=8+5*Math.random(),this.count=0,this.text_rolled_number.visible=!1,this.text_next_time.visible=!1,1==this.flag_tx&&local_owner==wallet&&(dice_roll(summoner),flag_dice_rolling=1),this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,sound_dice.play()}update(){if(this.count+=1,this.depth=this.line_y,this.text_rolled_number.depth=this.line_y+1,this.count%200==1){this.text_rolled_number.setText(local_last_rolled_dice/10);let t=Date.now()/1e3-local_last_dice_roll_time,e=BASE_SEC-t*SPEED;if(e>=BASE_SEC&&(e=BASE_SEC-1),e<=0)this.text_next_time.setText("Dice Roll").setFill("#ff0000"),this.flag_tx=1;else if(e<=.95*this.buffer_sec){let t=Math.floor(e%86400/3600)+"h:"+Math.floor(e%3600/60)+"m";this.text_next_time.setText(t).setFill("#ff0000"),this.flag_tx=1}else{let t=Math.floor(e%86400/3600)+"h:"+Math.floor(e%3600/60)+"m";this.text_next_time.setText(t).setFill("#000000"),this.flag_tx=0,flag_dice_rolling=0}}Math.abs(this.speed_x)<=.5&&Math.abs(this.speed_y)<=.5&&this.line_y-this.y<=1?(this.text_rolled_number.visible=!0,this.text_rolled_number.x=this.x,this.text_rolled_number.y=this.y,1==flag_info&&(this.text_next_time.visible=!0),this.text_next_time.x=this.x,this.text_next_time.y=this.y+40):(this.line_y=this.b-this.a*this.x,this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_x>0?Math.abs(this.speed_y)<=.5?this.speed_x-=.25:this.speed_x-=.1:Math.abs(this.speed_y)<=.5?this.speed_x+=.25:this.speed_x+=.1,this.speed_y-=.75,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=3*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,Math.abs(this.speed_y)>.5&&sound_dice_impact.play()),this.y>500?this.line_x_r=(this.y+115746/205)/(208/205):this.line_x_r=1060,this.x>=this.line_x_r?(this.x=this.line_x_r,this.speed_x*=-.9,sound_dice_impact.play()):this.x<=this.line_x_l&&(this.x=this.line_x_l,this.speed_x*=-.9,sound_dice_impact.play())),1==flag_dice_rolling&&this.count%4==0&&(this.text_rolled_number.setText(this.count/2%20+1),this.text_next_time.setText("Rolling!").setFill("#ff0000"))}}class tokenBall extends Phaser.GameObjects.Sprite{constructor(t,e,i,a){super(t,e,i,a),this.scene.add.existing(this),this.setInteractive({useHandCursor:!0}),this.on("pointerdown",(function(t){this.on_click()}),this),this.speed_x=0,this.speed_y=0,this.count=0,this.line_y=i,this.line_y_max=500,this.line_y_min=800,this.line_x_r=1200,this.line_x_l=50}on_click(){this.speed_x=6+4*Math.random(),pointer_x>this.x&&(this.speed_x*=-1),this.speed_y=6+4*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,sound_dice.play()}on_summon(){this.speed_x=-1*(5+10*Math.random()),this.speed_y=8+8*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x}update(){this.count+=1,Math.abs(this.speed_x)<=.5&&Math.abs(this.speed_y)<=.5&&this.line_y-this.y<=1||(this.line_y=this.b-this.a*this.x,this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_x>0?Math.abs(this.speed_y)<=.5?this.speed_x-=.2:this.speed_x-=.1:Math.abs(this.speed_y)<=.5?this.speed_x+=.2:this.speed_x+=.1,this.speed_y-=.75,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=5*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,Math.abs(this.speed_y)>.5&&sound_dice_impact.play()),this.y>500?this.line_x_r=(this.y+115746/205)/(208/205):this.line_x_r=1060,this.x>=this.line_x_r?(this.x=this.line_x_r,this.speed_x*=-.9,sound_dice_impact.play()):this.x<=this.line_x_l&&(this.x=this.line_x_l,this.speed_x*=-.9,sound_dice_impact.play()))}}class Star extends Phaser.GameObjects.Sprite{constructor(t,e,i,a){super(t,e,i,a),this.scene.add.existing(this),this.setInteractive({useHandCursor:!0}),this.on("pointerdown",(function(t){this.on_click()}),this),this.speed_x=0,this.speed_y=0,this.count=0,this.line_y=i,this.line_y_max=500,this.line_y_min=800,this.line_x_r=1200,this.line_x_l=50}on_click(){this.speed_x=6+4*Math.random(),Math.random()>.5&&(this.speed_x*=-1),this.speed_y=6+4*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,sound_dice.play()}on_summon(){this.x=800+600*Math.random(),this.y=-50,this.speed_x=-10-5*Math.random(),this.speed_y=-10,this.count=0,this.a=.8*Math.random()-.4,this.b=this.line_y_max+100+this.a*this.x,sound_star.play()}update(){this.count+=1,Math.abs(this.speed_x)<=.5&&Math.abs(this.speed_y)<=.5&&this.line_y-this.y<=1||(this.line_y=this.b-this.a*this.x,this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_x>0?Math.abs(this.speed_y)<=.5?this.speed_x-=.25:this.speed_x-=.1:Math.abs(this.speed_y)<=.5?this.speed_x+=.25:this.speed_x+=.1,this.speed_y-=.75,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=5*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,Math.abs(this.speed_y)>.5&&sound_dice_impact.play()),this.x>=this.line_x_r?(this.x=this.line_x_r,this.speed_x*=-.9,sound_dice_impact.play()):this.x<=this.line_x_l&&(this.x=this.line_x_l,this.speed_x*=-.9,sound_dice_impact.play())),1==flag_onLight?this.depth=3:this.depth=3301}}class Note extends Phaser.GameObjects.Sprite{constructor(t,e,i,a){super(t,e,i,a),this.scene.add.existing(this),this.setInteractive({useHandCursor:!0}),this.on("pointerdown",(function(t){this.on_click()}),this),this.speed_x=0,this.speed_y=0,this.count=0,this.line_y=i,this.line_y_max=500,this.line_y_min=1200,this.line_x_r=1200,this.line_x_l=50,this.on_summon()}on_click(){this.speed_x=2+1*Math.random(),Math.random()>.5&&(this.speed_x*=-1),this.speed_y=5+2*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,sound_dice.play()}on_summon(){this.x=murasakisan.x-50+100*Math.random(),this.y=murasakisan.y-50+100*Math.random(),this.speed_x=2+1*Math.random(),Math.random()>.5&&(this.speed_x*=-1),this.speed_y=5+2*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.line_y_max+100+this.a*this.x;let t=[sound_piano_a,sound_piano_b,sound_piano_c,sound_piano_d,sound_piano_e,sound_piano_f,sound_piano_g];this.sound=t[Math.floor(Math.random()*t.length)],this.count_bounch=0}update(){this.count+=1,this.x>1400||this.x<-100||this.y>1e3?this.destroy():(this.line_y=this.b-this.a*this.x,this.setDepth(this.line_y),this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_y-=.2,this.x+=this.speed_x,this.y-=this.speed_y,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-1*(.7+.6*Math.random()),this.speed_y>0&&this.speed_y<5?this.speed_y=5:this.speed_y<0&&this.speed_y>-5&&(this.speed_y=-5),this.count_bounch,this.count_bounch+=1))}}class Coin extends Phaser.GameObjects.Sprite{constructor(t,e,i,a){super(t,e,i,a),this.scene.add.existing(this),this.speed_x=0,this.speed_y=0,this.line_y=0,this.count=0,this.on_summon()}on_summon(){this.x=murasakisan.x+5*Math.random(),this.y=murasakisan.y+10*Math.random(),this.line_y=this.y,this.line_y<510&&(this.line_y=510),this.speed_x=3+1*Math.random(),"mining"!=murasakisan.mode&&Math.random()>.5&&(this.speed_x*=-1),this.speed_y=9+3*Math.random(),this.count=0}update(){this.count+=1,this.count>=100&&this.destroy(),this.setDepth(this.line_y),this.speed_y-=.6,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=5*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,this.speed_x*=.9)}}class Fluffy2 extends Phaser.GameObjects.Sprite{constructor(t,e,i,a,s,n){super(t,e,i,a),this.x=0,this.y=0,this.type=s,this.itemId=n,this.scene.add.existing(this),this.setInteractive({useHandCursor:!0}),this.on("pointerdown",(function(t){this.on_click()}),this),this.speed_x=0,this.speed_y=0,this.line_y=i,this.line_y_max=500,this.line_y_min=900,this.line_x_r=1200,this.line_x_l=50,this.mode="",this.submode=0,this.resting_count=200,this.type<=212?(this.rarity="common",this.setScale(.07)):this.type<=224?(this.rarity="uncommon",this.setScale(.1)):this.type<=236&&(this.rarity="rare",this.setScale(.15)),"common"==this.rarity?201==this.type?this.setFrame(0):202==this.type?this.setFrame(10):203==this.type?this.setFrame(20):204==this.type?this.setFrame(30):205==this.type?this.setFrame(40):206==this.type?this.setFrame(50):207==this.type?this.setFrame(60):208==this.type?this.setFrame(70):209==this.type?this.setFrame(80):210==this.type?this.setFrame(90):211==this.type?this.setFrame(100):212==this.type&&this.setFrame(110):"uncommon"==this.rarity?setTimeout((()=>{213==this.type?this.anims.play("fluffy_fluffier_01",!0):214==this.type?this.anims.play("fluffy_fluffier_02",!0):215==this.type?this.anims.play("fluffy_fluffier_03",!0):216==this.type?this.anims.play("fluffy_fluffier_04",!0):217==this.type?this.anims.play("fluffy_fluffier_05",!0):218==this.type?this.anims.play("fluffy_fluffier_06",!0):219==this.type?this.anims.play("fluffy_fluffier_07",!0):220==this.type?this.anims.play("fluffy_fluffier_08",!0):221==this.type?this.anims.play("fluffy_fluffier_09",!0):222==this.type?this.anims.play("fluffy_fluffier_10",!0):223==this.type?this.anims.play("fluffy_fluffier_11",!0):224==this.type&&this.anims.play("fluffy_fluffier_12",!0)}),1e3*Math.random()):"rare"==this.rarity&&(225==this.type?(this.frontFrame=3,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_01_right",this.anim_left="fluffy_fluffiest_01_left",this.anim_front="fluffy_fluffiest_01_front"):226==this.type?(this.frontFrame=13,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_02_right",this.anim_left="fluffy_fluffiest_02_left",this.anim_front="fluffy_fluffiest_02_front"):227==this.type?(this.frontFrame=23,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_03_right",this.anim_left="fluffy_fluffiest_03_left",this.anim_front="fluffy_fluffiest_03_front"):228==this.type?(this.frontFrame=33,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_04_right",this.anim_left="fluffy_fluffiest_04_left",this.anim_front="fluffy_fluffiest_04_front"):229==this.type?(this.frontFrame=43,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_05_right",this.anim_left="fluffy_fluffiest_05_left",this.anim_front="fluffy_fluffiest_05_front"):230==this.type?(this.frontFrame=53,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_06_right",this.anim_left="fluffy_fluffiest_06_left",this.anim_front="fluffy_fluffiest_06_front"):231==this.type?(this.frontFrame=63,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_07_right",this.anim_left="fluffy_fluffiest_07_left",this.anim_front="fluffy_fluffiest_07_front"):232==this.type?(this.frontFrame=73,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_08_right",this.anim_left="fluffy_fluffiest_08_left",this.anim_front="fluffy_fluffiest_08_front"):233==this.type?(this.frontFrame=83,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_09_right",this.anim_left="fluffy_fluffiest_09_left",this.anim_front="fluffy_fluffiest_09_front"):234==this.type?(this.frontFrame=93,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_10_right",this.anim_left="fluffy_fluffiest_10_left",this.anim_front="fluffy_fluffiest_10_front"):235==this.type?(this.frontFrame=103,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_11_right",this.anim_left="fluffy_fluffiest_11_left",this.anim_front="fluffy_fluffiest_11_front"):236==this.type&&(this.frontFrame=113,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_12_right",this.anim_left="fluffy_fluffiest_12_left",this.anim_front="fluffy_fluffiest_12_front")),this.on_summon()}on_click(){this.speed_x=6+4*Math.random(),pointer_x>this.x&&(this.speed_x*=-1),this.speed_y=6+4*Math.random(),this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x;let t=[sound_fluffy2,sound_fluffy3,sound_fluffy4,sound_fluffy5];t[Math.floor(Math.random()*t.length)].play(),this.mode="rolling","rare"==this.rarity&&this.anims.stop()}on_click_fromHouse(){this.x=item_fluffy_house.x,this.y=item_fluffy_house.y,this.speed_x=4+10*Math.random(),this.speed_y=4+10*Math.random(),this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,this.mode="rolling","rare"==this.rarity&&this.anims.stop(),this.visible=!0}on_kick(){this.speed_x=4+3*Math.random(),pointer_x>this.x&&(this.speed_x*=-1),this.speed_y=4+3*Math.random(),this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x;let t=[sound_fluffy2,sound_fluffy3,sound_fluffy4,sound_fluffy5];t[Math.floor(Math.random()*t.length)].play(),this.mode="rolling","rare"==this.rarity&&this.anims.stop()}on_summon(){"rare"==this.rarity&&this.anims.stop(),count_sync<=5?(this.x=200+800*Math.random(),this.y=520+200*Math.random(),this.angle=360*Math.random(),this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,this.mode="resting",this.submode=-50-Math.round(50*Math.random())):(this.x=300+500*Math.random(),this.y=600+100*Math.random(),this.speed_x=6+4*Math.random(),Math.random()>.5&&(this.speed_x*=-1),this.speed_y=10+4*Math.random(),this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,this.mode="rolling"),this.type!=local_ff_elected_type&&this.type-12!=local_ff_elected_type&&this.type-24!=local_ff_elected_type||draw_glitter(this.scene,this)}_checkOverlap(t,e){var i=t.getBounds();i.x+=i.width/4,i.y+=i.height/4,i.width/=2,i.height/=2;var a=e.getBounds();return Phaser.Geom.Intersects.RectangleToRectangle(i,a)}rolling(){this.line_y=this.b-this.a*this.x,this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_x>0?Math.abs(this.speed_y)<=.5?this.speed_x-=.25:this.speed_x-=.1:Math.abs(this.speed_y)<=.5?this.speed_x+=.25:this.speed_x+=.1,this.speed_y-=.75,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=5*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,Math.abs(this.speed_y)),this.y>500?this.line_x_r=(this.y+115746/205)/(208/205):this.line_x_r=1060,this.x>=this.line_x_r?(this.x=this.line_x_r,this.speed_x*=-.9):this.x<=this.line_x_l&&(this.x=this.line_x_l,this.speed_x*=-.9),Math.abs(this.speed_x)<=.5&&Math.abs(this.speed_y)<=.5&&this.line_y-this.y<=1&&(this.mode="resting",this.submode=-100),"undefined"!=typeof item_fluffy_house&&this._checkOverlap(item_fluffy_house,this)&&1!=flag_fluffy_house_click&&(this.x=item_fluffy_house.x,this.y=item_fluffy_house.y,this.speed_x=0,this.speed_y=0,this.mode="resting",this.submode=-1e4,group_fluffy_house_in.add(this),this.visible=!1,sound_fluiffy_house.play())}resting(){"common"==this.rarity||"uncommon"==this.rarity||(this.submode<0?(this.submode+=1,"rare"==this.rarity&&this.anims.stop()):0==this.submode?(this.angle=0,this.anims.play(this.anim_front,!0),this.resting_count=200+50*Math.random(),this.submode+=1):this.submode<this.resting_count?this.submode+=1:(this.mode="moving",this.submode=0))}moving(){if(0==this.submode){let e=this.calc_distance(murasakisan.x,murasakisan.y),i=400;if("practice"==murasakisan.mode&&(i=200),e>i)this.moving_degree=this.get_degree(murasakisan.x,murasakisan.y);else{var t=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=t[Math.floor(Math.random()*t.length)]}(this.x<100&&this.moving_degree>90&&this.moving_degree<270||this.x>1100&&(this.moving_degree<90||this.moving_degree>270))&&(this.moving_degree-=180),(this.y>900&&this.moving_degree>180||this.y<500&&this.moving_degree<180)&&(this.moving_degree=360-this.moving_degree),this.moving_degree<0&&(this.moving_degree+=360),this.moving_degree=this.moving_degree%360,this.moving_speed=.3+.2*Math.random(),this.moving_count=70+30*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.anims.play(this.anim_left,!0)):(this.dist="right",this.anims.play(this.anim_right,!0)),this.angle=0,this.submode+=1}else this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y<500&&(this.y=500),this.x<50&&(this.x=50),this.submode+=1,this.submode>=100&&(this.mode="resting",this.submode=0)}calc_distance(t,e){let i=t-this.x,a=e-this.y;return Math.sqrt(a**2+i**2)}get_degree(t,e){let i=t-this.x,a=-1*(e-this.y);return Math.atan2(a,i)/(Math.PI/180)}update(){"rolling"==this.mode?this.rolling():"resting"==this.mode?this.resting():"moving"==this.mode&&this.moving(),turn%100==0&&(local_itemIds.includes(this.itemId)||(summoned_fluffies=summoned_fluffies.filter((t=>t!==this.itemId)),this.destroy()))}}class Nuichan extends Phaser.GameObjects.Sprite{constructor(t,e,i,a,s,n,o,_,r){super(t,e,i,a);let l="pos_item_nui_"+n;if(this._pos_local=l,null!=localStorage.getItem(l)&&local_owner==local_wallet){let t=localStorage.getItem(l),e=JSON.parse(t);this.x=e[0],this.y=e[1]}this.type=s,this.itemId=n,this.scene.add.existing(this),this.setInteractive({draggable:!0,useHandCursor:!0});let m="";m+=" id: #"+n+" \n",m+=" crafter: "+o+" \n",m+=" score: "+_+" \n",m+=" exp: +"+(r-1e4)/100+"% ",this.msg=this.scene.add.text(this.x,this.y+68,m,{font:"15px Arial",fill:"#000000",backgroundColor:"#ffffff"}).setOrigin(.5).setDepth(2e3).setVisible(!1),this.on("drag",(()=>{1280==this.scene.sys.game.scale.gameSize._width?(this.x=game.input.activePointer.x,this.y=game.input.activePointer.y):(this.x=game.input.activePointer.y,this.y=960-game.input.activePointer.x),this.depth=this.y,this.msg.visible=!1})),this.on("dragend",(()=>{if(this.msg.x=this.x,this.msg.y=this.y+68,sound_nui.play(),local_owner==local_wallet){let t=[this.x,this.y];localStorage.setItem(this._pos_local,JSON.stringify(t))}this.x>=100&&this.x<=1100&&this.y>=500&&this.y<=800&&murasakisan.try_attenting(this.x,this.y)})),this.click=0,this.on("pointerdown",(()=>{if(1==flag_info){this.click+=1;let t=this.click;this.msg.visible=!0,setTimeout((()=>{t==this.click&&(this.msg.visible=!1)}),2e3)}})),237==this.type?this.setFrame(0):238==this.type?this.setFrame(1):239==this.type?this.setFrame(2):240==this.type?this.setFrame(3):241==this.type?this.setFrame(4):242==this.type?this.setFrame(5):243==this.type?this.setFrame(6):244==this.type?this.setFrame(7):245==this.type?this.setFrame(8):246==this.type?this.setFrame(9):247==this.type?this.setFrame(10):248==this.type&&this.setFrame(11),this.setOrigin(.5).setScale(.38)}update(){}}class PresentBox extends Phaser.GameObjects.Sprite{constructor(t,e,i,a,s,n,o){super(t,e,i,a),this.scene.add.existing(this),this.setInteractive({useHandCursor:!0}),this.on("pointerdown",(function(t){this.on_click()}),this),this.itemId=Number(s),this.summoner_from=n,this.memo=o,this.on_summon();let _="";_+=" Gift of "+this.memo+" \n",_+=" from "+this.summoner_from+" ",this.text=t.add.text(this.x,this.y-40,_,{font:"20px Arial",fill:"#000000",backgroundColor:"#ffffff"}).setOrigin(.5).setDepth(2e3).setVisible(!1),this.on("pointerover",(()=>{1==flag_info&&(this.text.visible=!0),sound_button_select.play()})),this.on("pointerout",(()=>{this.text.visible=!1}))}on_click(){open_presentbox(summoner,this.itemId),sound_button_on.play()}on_summon(){}update(){turn%100==0&&(local_itemIds.includes(this.itemId)||(summoned_presentbox=summoned_presentbox.filter((t=>t!==this.itemId)),draw_flower(this.scene,this.x,this.y),this.destroy()))}}class Festligheter extends Phaser.GameObjects.Sprite{constructor(t,e,i,a){super(t,e,i,a),this.scene=t,this.x=e,this.y=i,this.img_right="ff_preFestival_right",this.img_left="ff_preFestival_left",this.setTexture(this.img_right),this.scene.add.existing(this),this.mode="",this.submode=0,this.resting_count=200,this.movingMode="",this.movingSubmode="",this.setInteractive({useHandCursor:!0}),this.on("pointerdown",(function(t){this.on_click()}),this),this.text=t.add.text(this.x,this.y-40,"test",{font:"20px Arial",fill:"#000000",backgroundColor:"#ffffff"}).setOrigin(.5).setDepth(2e3).setVisible(!1),this.checkFestival()}on_click(){"duringFestival"==this.mode?open_window_voting(this.scene):"duringFestival_isEndable"==this.mode?contract_end_voting(summoner):(this.text.visible=!0,setTimeout((()=>{this.text.visible=!1}),3e3))}checkFestival(){0==local_ff_inSession&&local_ff_next_festival_block-local_blockNumber>7200?(console.log("destroy festligheter"),this.mode="destroy",this.destroy()):0==local_ff_inSession&&local_ff_next_festival_block-local_blockNumber<=7200&&local_ff_next_festival_block>=local_blockNumber&&"preFestival"!=this.mode?(this.mode="preFestival",this.submode=0):0!=local_ff_inSession&&1!=local_ff_inSession||1!=local_ff_isVotable||"duringFestival"==this.mode?1==local_ff_inSession&&0==local_ff_isVotable&&0==local_ff_isEndable&&"duringFestival_afterVoting"!=this.mode?(this.mode="duringFestival_afterVoting",this.submode=0):1==local_ff_inSession&&0==local_ff_isVotable&&1==local_ff_isEndable&&"duringFestival_isEndable"!=this.mode&&(this.mode="duringFestival_isEndable",this.submode=0):(this.mode="duringFestival",this.submode=0)}preFestival(){if(0==this.submode)this.img_right="ff_preFestival_right",this.img_left="ff_preFestival_left",this.setTexture(this.img_right),this.x=340,this.y=960,this.text.setText(""),this.text.x=this.x,this.text.y=this.y-40,this.movingMode="";else if(this.submode%100==1){let t="";t+=" Festival is comming...  \n",t+=" ("+(local_ff_next_festival_block-local_blockNumber)+" blocks later) ",this.text.setText(t)}this.submode+=1}duringFestival(){0==this.submode&&(this.img_right="ff_duringFestival_right",this.img_left="ff_duringFestival_left",this.setTexture(this.img_right),this.x=200+700*Math.random(),this.y=550+200*Math.random(),this.text.setText(""),this.text.x=this.x,this.text.y=this.y-40,this.movingMode="resting"),this.submode+=1}duringFestival_afterVoting(){if(0==this.submode)this.anims.stop(),this.setTexture("ff_reports").setOrigin(.5).setScale(.1),this.anims.play("ff_report",!0),this.text.setText(""),this.text.x=this.x,this.text.y=this.y-60,this.movingMode="",this.dist="",draw_flower(this.scene,this.x,this.y),sound_nainai2.play();else if(this.submode%500==1){let t=this._get_ranking_sorted(),e="";e+=" Your vote: "+dic_items_reverse[local_ff_last_voting_type]+" \n",e+="   1st: "+dic_items_reverse[t[0][0]]+" ("+t[0][1]+" votes) \n",e+="   2nd: "+dic_items_reverse[t[1][0]]+" ("+t[1][1]+" votes) \n",e+="   3rd: "+dic_items_reverse[t[2][0]]+" ("+t[2][1]+" votes) \n",e+=" ("+(local_ff_subject_end_block-local_blockNumber)+" blocks remaining) ",this.text.setText(e)}this.submode+=1}_get_winner_now(){let t=0,e=0;for(i=201;i<=212;i++)local_ff_each_voting_count[i]>t&&(t=local_ff_each_voting_count[i],e=i);return[e,t]}_get_ranking_sorted(){let t=[];for(i=201;i<=212;i++)t.push([i,local_ff_each_voting_count[i]]);return t.sort((function(t,e){return e[1]-t[1]}))}duringFestival_isEndable(){if(0==this.submode)this.anims.play("ff_report_close",!0).setOrigin(.5).setScale(.1),this.text.setText(""),this.text.x=this.x,this.text.y=this.y-40,this.movingMode="",this.dist="";else if(this.submode%100==1){let t="";t+=" Close the Festival ",this.text.setText(t)}this.submode+=1}resting(){0==this.movingSubmode?(this.resting_count=200+50*Math.random(),this.movingSubmode+=1):this.movingSubmode<this.resting_count?this.movingSubmode+=1:(this.movingMode="moving",this.movingSubmode=0)}moving(){if(0==this.movingSubmode){var t=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=t[Math.floor(Math.random()*t.length)],(this.x<150&&this.moving_degree>90&&this.moving_degree<270||this.x>1050&&(this.moving_degree<90||this.moving_degree>270))&&(this.moving_degree-=180),this.moving_degree=this.moving_degree%360,(this.y>750&&this.moving_degree>180||this.y<500&&this.moving_degree<180)&&(this.moving_degree=360-this.moving_degree),this.moving_degree<0&&(this.moving_degree+=360),this.moving_speed=.3+.2*Math.random(),this.moving_count=70+30*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.setTexture(this.img_left)):(this.dist="right",this.setTexture(this.img_right)),this.movingSubmode+=1}else this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed,this.depth=this.y,this.text.x=this.x,this.text.y=this.y-40,this.movingSubmode+=1,this.movingSubmode>=100&&(this.movingMode="resting",this.movingSubmode=0)}update(){"preFestival"==this.mode?this.preFestival():"duringFestival"==this.mode?this.duringFestival():"duringFestival_afterVoting"==this.mode?this.duringFestival_afterVoting():"duringFestival_isEndable"==this.mode&&this.duringFestival_isEndable(),"moving"==this.movingMode?this.moving():"resting"==this.movingMode&&this.resting(),turn%100==0&&this.checkFestival(),turn%300==0&&1==flag_sync&&contract_update_festival_info(summoner),turn%250!=0||"duringFestival"!=this.mode&&"duringFestival_isEndable"!=this.mode||(sound_nainai1.play(),"right"==this.dist?draw_flower(this.scene,this.x+30,this.y):"left"==this.dist?draw_flower(this.scene,this.x-30,this.y):draw_flower(this.scene,this.x,this.y))}}class Nyuinyui extends Phaser.GameObjects.Sprite{constructor(t,e,i,a){super(t,e,i,a),this.img="nyui_moving",this.scene=t,this.x=e,this.y=i,this.img_right="nyui_moving_right",this.img_left="nyui_moving_left",this.scene.add.existing(this),this.mode="",this.submode=0,this.resting_count=200,this.movingMode="resting",this.movingSubmode=0,this.setInteractive({useHandCursor:!0}),this.on("pointerdown",(function(t){this.on_click()}),this),this.flowerCount=0,this.nyui_text=t.add.text(590,870,"").setFontSize(20).setFontFamily("Arial").setOrigin(.5).setFill("#0000ff").setVisible(!1).setDepth(5002)}on_click(){let t=this.scene.add.image(650+400*Math.random(),850+30*Math.random(),"par_flowers").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.1).setAngle(360*Math.random()).setDepth(5001);if(group_nyuinyui_ohana.add(t),sound_nyui.play(),this.flowerCount+=1,localStorage_flowerCount+=1,10==this.flowerCount&&(this.anims.play("nyui_happy"),this.movingMode="resting",this.movingSubmode=1,this.resting_count=99999,sound_nyui2.play()),this.nyui_text.setVisible(!0),this.nyui_text.setText(localStorage_flowerCount+" flowers"),localStorage.setItem("flowerCount_inGame",JSON.stringify(localStorage_flowerCount)),localStorage_flowerCount%100==0){let t=50;local_dapps_staking_amount<500?t+=0:local_dapps_staking_amount<1e3?t+=10:local_dapps_staking_amount<2e3?t+=20:local_dapps_staking_amount<4e3?t+=30:local_dapps_staking_amount<8e3?t+=40:local_dapps_staking_amount<16e3?t+=50:local_dapps_staking_amount<32e3?t+=60:local_dapps_staking_amount<64e3?t+=70:local_dapps_staking_amount>=64e3&&(t+=80);for(let e=1;e<=t;e++)summon_fallingFlower(this.scene);sound_hat.play()}}reset(){group_nyuinyui_ohana.clear(!0),this.flowerCount=0,this.movingMode="resting",this.anims.play("nyui_moving_right"),this.movingSubmode=0,this.nyui_text.setVisible(!1)}resting(){0==this.movingSubmode?(this.resting_count=200+50*Math.random(),this.movingSubmode+=1):this.movingSubmode<this.resting_count?this.movingSubmode+=1:(this.movingMode="moving",this.movingSubmode=0)}moving(){if(0==this.movingSubmode){var t=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=t[Math.floor(Math.random()*t.length)],(this.x<650&&this.moving_degree>90&&this.moving_degree<270||this.x>1e3&&(this.moving_degree<90||this.moving_degree>270))&&(this.moving_degree-=180),this.moving_degree=this.moving_degree%360,(this.y>850&&this.moving_degree>180||this.y<820&&this.moving_degree<180)&&(this.moving_degree=360-this.moving_degree),this.moving_degree<0&&(this.moving_degree+=360),this.moving_speed=.2+.1*Math.random(),this.moving_count=70+30*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.anims.play(this.img_left)):(this.dist="right",this.anims.play(this.img_right)),this.movingSubmode+=1}else this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed,this.movingSubmode+=1,this.movingSubmode>=100&&(this.movingMode="resting",this.movingSubmode=0)}update(){"moving"==this.movingMode?this.moving():"resting"==this.movingMode&&this.resting()}}class FallingFlower extends Phaser.GameObjects.Sprite{constructor(t,e,i,a){super(t,e,i,a),this.scene.add.existing(this),this.speed_x=0,this.speed_y=0,this.count=0,this.line_y_limit=1e3,this.depth=6100,this.setOrigin(.5),this.setAlpha(.9),this.count=0,this.on_summon()}on_summon(){this.x=1480*Math.random(),this.y=-50-500*Math.random(),this.speed_x=-.1-1.5*Math.random(),this.speed_y=2+4*Math.random(),this.setScale(.1+.1*Math.random()),this.setAngle(360*Math.random()),this.setFrame(Math.floor(5*Math.random())),this.count_update=Math.floor(40*Math.random())}update(){this.count+=1,this.x+=this.speed_x,this.y+=this.speed_y,this.count%50==this.count_update&&(this.angle+=30),this.y>=this.line_y_limit&&this.destroy(!0)}}class Alphabet extends Phaser.GameObjects.Sprite{constructor(t,e,i,a,s=0,n=.1){super(t,e,i,a),this.scene=t,this.x=e,this.y=i,this.scale=n,this.flag_keep=s,this.img=a,this.scene.add.existing(this),this.depth=2e3,this.setOrigin(.5),this.on_summon()}on_summon(){this.mode="waiting",this.submode=0,this.count=Math.round(100*Math.random()),this.count_limit=this.count+500,this.speed_x=0,this.speed_y=0,this.setAlpha(.8),this.setScale(this.scale),this.flag_fall=0,0==this.flag_keep&&(this.setInteractive({useHandCursor:!0}),this.on("pointerdown",(()=>{this.on_click()}))),draw_flower2(this.scene,this.x,this.y)}on_click(){if("waiting"==this.mode){let t=["stretching","rising","shrinking","dissolving","falling","flipping"],e={stretching:sound_stretching,rising:sound_rising,shrinking:sound_shrinking,dissolving:sound_dissolving,falling:sound_falling,flipping:sound_flipping};this.mode=t[Math.floor(Math.random()*t.length)],e[this.mode].play(),this.submode=0,this.on_click_otherAlp()}}on_click_otherAlp(){let t=0;group_alp.shuffle();let e=group_alp.getChildren(),a=0;for(i=0;i<e.length;i++){"waiting"==e[i].mode&&(a+=1)}for(i=0;i<e.length;i++){let s=e[i];if("waiting"==s.mode&&(s.mode=this.mode,t+=1,a-=1,t>=3&&a>1))break}}shrinking(){this.scale*=.98,this.angle+=10,this.scale<=.03&&(draw_miniAlphabet2(this.scene,this.x,this.y,this.img),this.destroy(!0))}falling(){0==this.submode?(this.line_y=550,this.speed_x=4*Math.random()-2,this.submode+=1):1==this.submode&&(this.rolling(),(this.x>=1500||this.x<=-300)&&this.destroy(!0))}rolling(){this.speed_y-=.5,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=3*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_x>0?this.speed_x=5+2*Math.random():this.speed_x=-1*(5+2*Math.random()),this.speed_y=10+5*Math.random())}rising(){0==this.submode?(this.speed_y=-.05,this.submode+=1):1==this.submode&&(this.speed_y*=1.05,this.y+=this.speed_y,this.count%4==0?this.x+=1:this.count%4==2&&(this.x-=1),this.y<=-100&&this.destroy(!0))}dissolving(){0==this.submode?(draw_miniAlphabet(this.scene,this.x,this.y,this.img),this.submode+=1):1==this.submode&&(this.alpha-=.01,this.y+=.1,this.scale*=.995,this.alpha<=0&&this.destroy(!0))}stretching(){this.scaleX+=.006,this.scaleY-=.003,this.angle-=.5,this.scaleY<=0&&this.destroy(!0)}flipping(){0==this.submode?(this.scaleX_org=this.scaleX,this.submode=1):1==this.submode?(this.scaleX-=.01,this.scaleX<0&&(this.submode=2,this.flipX=!this.flipX)):2==this.submode&&(this.scaleX+=.01,this.scaleX>=this.scaleX_org&&(this.submode=1)),this.y-=1,this.alpha-=.01,this.alpha<=0&&this.destroy(!0)}waiting(){this.count%240==0?this.y+=5:this.count%240==120&&(this.y-=5),this.count>=this.count_limit&0==this.flag_keep&&(draw_flower2(this.scene,this.x,this.y),this.destroy(!0))}update(){this.count+=1,"falling"==this.mode?this.falling():"rising"==this.mode?this.rising():"shrinking"==this.mode?this.shrinking():"dissolving"==this.mode?this.dissolving():"stretching"==this.mode?this.stretching():"flipping"==this.mode?this.flipping():"waiting"==this.mode&&this.waiting()}}class WoodCube extends Phaser.GameObjects.Sprite{constructor(t,e,i,a){super(t,e,i,"item_woodcube"),this.scene.add.existing(this),this.setInteractive({draggable:!0,useHandCursor:!0}),this.on("drag",(()=>{1280==this.scene.sys.game.scale.gameSize._width?(this.x=game.input.activePointer.x,this.y=game.input.activePointer.y):(this.x=game.input.activePointer.y,this.y=960-game.input.activePointer.x),this.depth=this.y,this.text_score.depth=this.depth+1,this.angle=0,this.text_score.x=this.x,this.text_score.y=this.y,this.text_score.angle=0,this.flag_drag=1})),this.on("dragend",(()=>{this.text_score.visible=!0,this.flag_drag=0,sound_woodcube.play();for(let t=0;t<group_scoreMeter.getLength();t++){let e=group_scoreMeter.getChildren()[t];this.checkOverlap(this,e)&&this.y<e.y&&this.depth<e.depth&&(this.depth=group_scoreMeter.getChildren()[t].depth+1,this.text_score.depth=this.depth+1)}})),this.speed_x=0,this.speed_y=0,this.score_position=a;let s=("00000000"+local_score).slice(-8).split("")[this.score_position];this.text_score=t.add.text(e,i,s,{font:"bold 16px Arial",fill:"#864A2B"}).setOrigin(.5),this.count=0,this.line_y=i,this.line_y_max=500,this.line_y_min=900,this.line_x_r=1200,this.line_x_l=50,this.scale=.13,this.flag_drag=0,this.flag_kick=0,group_update.add(this),this.depth=this.y,this.text_score.depth=this.depth+1}checkOverlap(t,e){var i=t.getBounds(),a=e.getBounds();return Phaser.Geom.Intersects.RectangleToRectangle(i,a)}on_kick(){this.speed_x=4+3*Math.random(),Math.random()>.5&&(this.speed_x*=-1),this.speed_y=4+3*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,sound_dice.play(),this.flag_kick=1}update(){if(this.count+=1,this.count%500==1){let t=("00000000"+local_score).slice(-8).split("")[this.score_position];this.text_score.setText(t)}Math.abs(this.speed_x)<=.5&&Math.abs(this.speed_y)<=.5&&this.line_y-this.y<=1&&0==this.flag_drag?(this.text_score.x=this.x,this.text_score.y=this.y,this.text_score.angle=this.angle,this.flag_kick=0):1==this.flag_kick&&0==this.flag_drag&&(this.depth=this.line_y,this.line_y=this.b-this.a*this.x,this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_x>0?Math.abs(this.speed_y)<=.5?this.speed_x-=.25:this.speed_x-=.1:Math.abs(this.speed_y)<=.5?this.speed_x+=.25:this.speed_x+=.1,this.speed_y-=.75,this.x+=this.speed_x,this.y-=this.speed_y,this.text_score.x=this.x,this.text_score.y=this.y,this.angle+=3*this.speed_x,this.text_score.angle=this.angle,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,Math.abs(this.speed_y)>.5&&sound_dice_impact.play()),this.y>500?this.line_x_r=(this.y+115746/205)/(208/205):this.line_x_r=1060,this.x>=this.line_x_r?(this.x=this.line_x_r,this.speed_x*=-.9,sound_dice_impact.play()):this.x<=this.line_x_l&&(this.x=this.line_x_l,this.speed_x*=-.9,sound_dice_impact.play()))}}function summon_twinkles(t,e,i,a=500,s=600){let n;"twinkle"==e?n=["dummy","twinkle_01"][i]:"sparkle"==e?n=["dummy","sparkle_01"][i]:"glitter"==e&&(n=["dummy","glitter_01"][i]),new Twinkles(t,a,s,n)}class Twinkles extends Phaser.GameObjects.Sprite{constructor(t,e,i,a,s=23,n=20){super(t,e,i,a),this.x=e,this.y=i,this.pos_x=s,this.pos_y=n,this.scene.add.existing(this),this.setInteractive({draggable:!0,useHandCursor:!0}),this.on("drag",(()=>{1280==this.scene.sys.game.scale.gameSize._width?(this.x=game.input.activePointer.x,this.y=game.input.activePointer.y):(this.x=game.input.activePointer.y,this.y=960-game.input.activePointer.x),this.depth=this.y,this.angle=0,this.flag_drag=1})),this.on("dragend",(()=>{!this.checkOverlap(this,murasakisan)||0!=murasakisan.followingTwinkle||"moving"!=murasakisan.mode&&"resting"!=murasakisan.mode&&"sleeping"!=murasakisan.mode?(this.flag_follow=0,murasakisan.followingTwinkle==this&&(murasakisan.followingTwinkle=0)):(this.flag_follow=1,murasakisan.on_click(),sound_hat.play(),murasakisan.followingTwinkle=this),this.flag_drag=0})),this.speed_x=0,this.speed_y=0,this.count=0,this.line_y=this.y,this.line_y_max=500,this.line_y_min=900,this.line_x_r=1200,this.line_x_l=50,this.scale=.1,this.flag_drag=0,this.flag_kick=0,this.flag_follow=0,group_update.add(this),this.depth=this.y}checkOverlap(t,e){var i=t.getBounds(),a=e.getBounds();return Phaser.Geom.Intersects.RectangleToRectangle(i,a)}on_follow(){this.x=murasakisan.x+this.pos_x,this.y=murasakisan.y+this.pos_y,this.depth=murasakisan.depth+1}on_kick(){this.speed_x=4+3*Math.random(),Math.random()>.5&&(this.speed_x*=-1),this.speed_y=4+3*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,this.flag_kick=1}_during_kick(){this.depth=this.line_y,this.line_y=this.b-this.a*this.x,this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_x>0?Math.abs(this.speed_y)<=.5?this.speed_x-=.25:this.speed_x-=.1:Math.abs(this.speed_y)<=.5?this.speed_x+=.25:this.speed_x+=.1,this.speed_y-=.75,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=3*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,Math.abs(this.speed_y)),this.y>500?this.line_x_r=(this.y+115746/205)/(208/205):this.line_x_r=1060,this.x>=this.line_x_r?(this.x=this.line_x_r,this.speed_x*=-.9):this.x<=this.line_x_l&&(this.x=this.line_x_l,this.speed_x*=-.9),Math.abs(this.speed_x)<=.5&&Math.abs(this.speed_y)<=.5&&this.line_y-this.y<=1&&0==this.flag_drag&&(this.flag_kick=0)}update(){this.count+=1,1==this.flag_drag||(1==this.flag_kick?this._during_kick():1==this.flag_follow&&this.on_follow())}}function makeBar(t,e,i,a){let s=t.add.graphics();return s.fillStyle(a,1),s.fillRect(0,0,150,20),s.x=e,s.y=i,s}function makeMiniProgressBar(t,e,i,a,s,n){let o=t.add.graphics();return o.fillStyle(n,1),o.fillRect(0,0,a,s),o.x=e,o.y=i,o.depth=i+10,o}class Button{constructor(t,e,i,a,s){const n=a.add.text(t,e,i).setFontSize(24).setFontFamily("Arial").setFill("#000000").setInteractive({useHandCursor:!0}).on("pointerdown",(()=>s())).on("pointerover",(()=>n.setStyle({fontSize:24,fontFamily:"Arial",fill:"#ffff00"}))).on("pointerout",(()=>n.setStyle({fontSize:24,fontFamily:"Arial",fill:"#000000"})))}}function music(){0==flag_music?(1==flag_onLight?bgm==bgm1?bgm=bgm2:bgm==bgm2?bgm=bgm3:bgm=bgm1:bgm=bgm_n1,bgm.play(),flag_music=1,item_musicbox.anims.play("item_musicbox_on",!0)):(bgm.stop(),flag_music=0,item_musicbox.anims.play("item_musicbox_off",!0),"listning"==murasakisan.mode&&(murasakisan.mode="resting",murasakisan.count=0))}function radarchart2(t,e,i,a,s,n,o,_,r,l,m,c,d){let g=30,h=-a*s/g,u=a*n/g,p=a*((_-3)/15+.1),f=-a*o/g,y=-a*r/g,x=a*l/g,b=a*((c-3)/15+.1),w=-a*m/g,v=-a*r/g,k=a*l/g,F=a*((d-3)/15+.1),S=-a*m/g;try{group_chart.destroy(!0)}catch(t){}group_chart=t.add.group(),group_chart.add(t.add.polygon(e+a,i+a,[0,-a,a,0,0,a,-a,0],14342874,.4)),group_chart.add(t.add.polygon(e+.75*a,i+.75*a,[0,.75*-a,.75*a,0,0,.75*a,.75*-a,0],14342874,.4)),group_chart.add(t.add.polygon(e+a/2,i+a/2,[0,-a/2,a/2,0,0,a/2,-a/2,0],14342874,.4)),group_chart.add(t.add.polygon(e+(-S+k)/2,i+(-v+F)/2,[0,v,k,0,0,F,S,0],15899510,1)),group_chart.add(t.add.polygon(e+(-w+x)/2,i+(-y+b)/2,[0,y,x,0,0,b,w,0],16368240,1)),group_chart.add(t.add.polygon(e+(-f+u)/2,i+(-h+p)/2,[0,h,u,0,0,p,f,0],16774783,1));let M={font:"17px Arial",fill:"#000000"};group_chart.add(t.add.text(e-15,i-a-25,"STR\n"+(Math.round(100*r)/100).toFixed(2),M)),group_chart.add(t.add.text(e+a-5,i-10,"DEX\n"+(Math.round(100*l)/100).toFixed(2),M)),group_chart.add(t.add.text(e-15,i+a-7,"LUK\n"+(Math.round(100*d)/100).toFixed(2),M)),group_chart.add(t.add.text(e-a-20,i-12,"INT\n"+(Math.round(100*m)/100).toFixed(2),M)),group_chart.add(t.add.sprite(e-15-10,i-a-25+20,"icon_str").setOrigin(.5).setScale(.12)),group_chart.add(t.add.sprite(e+a-5+10,i-30,"icon_dex").setOrigin(.5).setScale(.12)),group_chart.add(t.add.sprite(e-15-12,i+a-5+14,"icon_luk").setOrigin(.5).setScale(.1)),group_chart.add(t.add.sprite(e-a-20+16,i-10-16,"icon_int").setOrigin(.5).setScale(.1))}async function draw_radarchart(t){radarchart2(t,1160,115,70,local_strength,local_dexterity,local_intelligence,local_luck,local_strength_withItems,local_dexterity_withItems,local_intelligence_withItems,local_luck_withItems,local_luck_withItems_withDice)}function open_window_summon(t){let e=0,a=0,s="";function n(t,e,i,a,s,n,o){let _=n.add.text(t,e,i).setFontSize(o).setFontFamily("Arial").setFill(a).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>function(t){sound_button_on.play(),group_window_summon.destroy(!0),window_summon_murasaki_back.destroy(!0),t>=0&&contract_summon(t)}(s))).on("pointerover",(()=>_.setStyle({fontSize:o,fontFamily:"Arial",fill:"#ffff00"}))).on("pointerout",(()=>_.setStyle({fontSize:o,fontFamily:"Arial",fill:a}))).on("pointerover",(()=>sound_window_pointerover.play()));return _.on("pointerover",(()=>{window_summon_murasaki_back.destroy(),window_summon_murasaki_back=n.add.graphics().setDepth(5001).fillStyle(a.replace("#","0x"),.5).fillRoundedRect(r-m/2,l-m/2,m,m,16)})),_}group_window_summon=t.add.group(),sound_window_open.play();let o=t.add.sprite(640,480,"window").setInteractive();s="",s+="Start Free Trial!\n",s+="Some gas fee is all you need to try the game.\n",s+="\n",s+="Choose your favorite flower to summon trial Murasaki-san.\n",s+="(This does not affect any gameplays at the moment :)\n";let _=t.add.text(180,120,s).setFontSize(24).setFontFamily("Arial").setFill("#333333");e=950,a=180;let r=e,l=a,m=96;window_summon_murasaki_back=t.add.graphics().setDepth(5001).fillStyle(15073298,.5).fillRoundedRect(r-m/2,l-m/2,m,m,16);let c=t.add.sprite(e,a,"murasaki_left").setDepth(5002).setOrigin(.5).setScale(.3).anims.play("murasaki_left",!0);e=240,a=280;let d=n(e,a+0,"✿ Rose","#E60012",0,t,40),g=n(e,a+70,"✿ Marigold","#F39800",1,t,40),h=n(e,a+140,"✿ Dandelion","#FFF100",2,t,40),u=n(e,a+210,"✿ Rosemary","#8FC31F",3,t,40),p=n(e,a+280,"✿ Olive","#009944",4,t,40),f=n(e,a+350,"✿ Holly","#009E96",5,t,40),y=n(e+460,a+0,"✿ Nemophila","#00A0E9",6,t,40),x=n(e+460,a+70,"✿ Hydrangea","#0068B7",7,t,40),b=n(e+460,a+140,"✿ Forget-me-not","#1D2088",8,t,40),w=n(e+460,a+210,"✿ Sumire","#920783",9,t,40),v=n(e+460,a+280,"✿ Gerbera","#E4007F",10,t,40),k=n(e+460,a+350,"✿ Anemone","#E5004F",11,t,40),F=n(1080,840,"Cancel","#000000",-1,t,30);s="",s+="Trial limitations:\n",s+="  ♣ Level cap is 4.\n",s+="  ♣ Item crafting cap is 3.\n",s+="  ♣ Resouse correcting cap is 3000.\n",s+="  ♣ Marketplace is unavailable.\n";let S=t.add.text(700,720,s).setFontSize(20).setFontFamily("Arial").setFill("#0000ff");s="",s+="All status and NFTs owned in the trial\n",s+="will be taken on to the main gameplay.\n";let M=t.add.text(200,720,s).setFontSize(24).setFontFamily("Arial").setFill("#E62E8B"),T=t.add.sprite(1100,680,"ff_duringFestival_isEndable_left").setOrigin(.5).setScale(.25);function A(t){t.setAngle(t.angle+30),setTimeout((()=>{A(t)}),1e3)}for(i=0;i<3;i++)setTimeout((()=>{if(void 0!==group_window_summon.scene){let e=t.add.image(1040+20*Math.random(),630+40*Math.random(),"par_flowers").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.1+.05*Math.random()).setAngle(360*Math.random()).setDepth(5001);A(e),group_window_summon.add(e),sound_nyui.play()}}),500+500*i);group_window_summon.add(o),group_window_summon.add(_),group_window_summon.add(S),group_window_summon.add(M),group_window_summon.add(T),group_window_summon.add(d),group_window_summon.add(g),group_window_summon.add(h),group_window_summon.add(u),group_window_summon.add(p),group_window_summon.add(f),group_window_summon.add(y),group_window_summon.add(x),group_window_summon.add(b),group_window_summon.add(w),group_window_summon.add(v),group_window_summon.add(k),group_window_summon.add(F),group_window_summon.add(window_summon_murasaki_back),group_window_summon.add(c),group_window_summon.setDepth(5e3),c.setDepth(5002)}function open_window_convert(t){function e(e){group_window_convert.destroy(!0),e>=0?(sound_button_on.play(),contract_convert(),open_window_reload(t)):sound_window_select.play()}function a(t,i,a,s,n,o,_){let r=o.add.text(t,i,a).setFontSize(_).setFontFamily("Arial").setFill(s).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>e(n))).on("pointerover",(()=>r.setStyle({fontSize:_,fontFamily:"Arial",fill:"#ffff00"}))).on("pointerout",(()=>r.setStyle({fontSize:_,fontFamily:"Arial",fill:s}))).on("pointerover",(()=>sound_window_pointerover.play()));return r}sound_window_open.play(),group_window_convert=t.add.group();let s=t.add.sprite(640,480,"window").setInteractive(),n="";n+="End trial and continue game!\n",n+="All status and NFTs that you own in the trial will be taken on.\n";let o=t.add.text(210,120,n).setFontSize(28).setFontFamily("Arial").setFill("#333333");n="",n+="After trial finished:\n",n+="   ✿ can grow beyond Lv3.\n",n+="   ✿ all items will be craftable.\n",n+="   ✿ presentbox as crafting bonus will be activated.\n",n+="   ✿ dApps staking bonus will be activated.\n",n+="   ✿ a cat from other player can visit your house.\n",n+="   ✿ Marketplace will be available.\n";let _=t.add.text(230,210,n).setFontSize(24).setFontFamily("Arial").setFill("#E62E8B");n=">> Start House of Murasaki-san <<";let r=a(640,480,n,"#E60012",0,t,40).setOrigin(.5);n="",n+="Current Fee: "+local_price/10**18+" $ASTR\n";let l=t.add.text(640,545,n).setOrigin(.5).setFontSize(30).setFontFamily("Arial").setFill("#0000ff");n="",n+="90% of fees are kept to grow the ecosystem.\n",n+="    ♦ 45% will be stored in the staking vault to control inflation.\n",n+="    ♦ 45% will be stored in the buyback treasury as player assets.\n",n+="    ♦ the remaining 10% will be sent to the developer wallets.\n",n+="    ♦ fee will increase as the ecosystem grows.\n";let m=t.add.text(230,630,n).setFontSize(24).setFontFamily("Arial").setFill("#0000ff"),c=a(1070,840,"Cancel","#000000",-1,t,30),d=t.add.sprite(1060,510,"ff_duringFestival_isEndable_left").setOrigin(.5).setScale(.25);function g(t){t.setAngle(t.angle+30),setTimeout((()=>{g(t)}),1e3)}for(i=0;i<3;i++)setTimeout((()=>{if(void 0!==group_window_convert.scene){let e=t.add.image(1e3+20*Math.random(),460+40*Math.random(),"par_flowers").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.1+.05*Math.random()).setAngle(360*Math.random()).setDepth(5001);g(e),group_window_convert.add(e),sound_nyui.play()}}),500+500*i);let h=t.add.sprite(260,490,"cats").setOrigin(.5).setScale(.4).setFrame(4);group_window_convert.add(s),group_window_convert.add(o),group_window_convert.add(_),group_window_convert.add(l),group_window_convert.add(m),group_window_convert.add(r),group_window_convert.add(c),group_window_convert.add(d),group_window_convert.add(h),group_window_convert.setDepth(5e3)}function open_window_reload(t){group_window_reload=t.add.group();let e=t.add.sprite(640,480,"window").setInteractive();let i="";i+="After transaction confirmed,\n",i+="please reload the game.\n";let a=t.add.text(640,350,i).setFontSize(32).setFontFamily("Arial").setFill("#333333").setOrigin(.5);text_tx.setOrigin(.5),text_tx.x=640,text_tx.y=460,text_tx.setFontSize(24),text_tx.depth=5001,i=">> Reload Game <<";let s=function(t,e,i,a,s,n,o){let _=n.add.text(t,e,i).setFontSize(o).setFontFamily("Arial").setFill(a).setInteractive({useHandCursor:!0}).on("pointerover",(()=>_.setStyle({fontSize:o,fontFamily:"Arial",fill:"#ffff00"}))).on("pointerout",(()=>_.setStyle({fontSize:o,fontFamily:"Arial",fill:a}))).on("pointerover",(()=>sound_window_pointerover.play())).on("pointerdown",(()=>{localStorage.setItem("flag_firstCelebration",1),location.reload()}));return _}(640,550,i,"#E60012",0,t,40).setOrigin(.5);function n(t){t.setAngle(t.angle+30),setTimeout((()=>{n(t)}),1e3)}let o=t.add.image(390,550,"par_flowers").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.3).setAngle(360*Math.random()).setDepth(5001);n(o);let _=t.add.image(890,550,"par_flowers").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.3).setAngle(360*Math.random()).setDepth(5001);n(_),group_window_reload.add(o),group_window_reload.add(_),group_window_reload.add(e),group_window_reload.add(a),group_window_reload.add(s),group_window_reload.setDepth(5e3)}function create_item_indicator(t,e){try{group_item_indicator.destroy(!0)}catch(t){}if(e<=128){if(local_items[e]>0||local_items[e+64]>0||local_items[e+128]>0)return 0}else if(local_items[e]>0)return 0;let i=dic_items_reverse[e],a=dic_items[i].img_name,s=dic_items[i].pos_x,n=dic_items[i].pos_y,o=dic_items[i].scale,_=dic_items[i].description;group_item_indicator=t.add.group(),item_indicator_text=t.add.text(s,n,_,{font:"18px Arial",fill:"#0000ff",backgroundColor:"#ffffff"}).setOrigin(.5).setDepth(n+1).setVisible(!1),group_item_indicator.add(item_indicator_text),item_indicator_click=0,item_indicator=t.add.sprite(s,n,a).setScale(o).setOrigin(.5).setAlpha(.3).setDepth(10).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{item_indicator_text.setVisible(!0),item_indicator_click+=1;let t=item_indicator_click;setTimeout((()=>{t==item_indicator_click&&item_indicator_text.setVisible(!1)}),2e3)})),["Helmet","Straw Hat","Mortarboard"].includes(i)&&item_indicator.setAngle(90),group_item_indicator.add(item_indicator)}async function update_item_indicator_bar(){let t=await contract_get_modified_dc(summoner,local_crafting_item_type),e=1-local_crafting_calc/86400*1e3/t;try{item_indicator_bar.scaleX=e}catch(t){}}function open_window_craft(scene){if("undefined"!=typeof nyuinyui&&(nyuinyui.setVisible(!0),nyuinyui.reset()),0==local_level)return 0;if(count_sync>1&&sound_window_open.play(),"undefined"!=typeof group_window_crafting)return group_window_crafting.setVisible(!0),0;async function close_crafting_window(t){if(t>=0&&"undefined"!=typeof nyuinyui&&(nyuinyui.setVisible(!1),nyuinyui.reset()),t<0&&(t=0),flag_window_craft=0,group_window_crafting.setVisible(!1),1==local_crafting_status||1==button_crafting_resume.visible||1==local_crafting_resume_flag)return 0;if(global_selected_crafting_item=t,global_selected_crafting_item_dc=await get_cost_of_item(t),global_selected_crafting_item_dc[0]>0&&t>0&&wallet==local_owner)if("trial"==gamemode&&1!=global_selected_crafting_item&&17!=global_selected_crafting_item&&33!=global_selected_crafting_item)text_crafting_selected_item_ohana.setText(""),text_crafting_selected_item_kusa.setText(""),text_crafting_selected_item_time.setText(""),text_crafting_selected_item_heart.setText(""),icon_crafting_ohana.visible=!1,icon_crafting_kusa.visible=!1,icon_crafting_time.visible=!1,text_select_item.setText('"'+dic_items_reverse[t]+'"'),text_crafting_selected_item_ohana.setText("Not available in trial."),text_crafting_selected_item_ohana.setColor("#0000ff"),create_item_indicator(murasakisan.scene,t);else{let e=await get_modified_dc(summoner,t)/1e3*BASE_SEC,i=Math.floor(e/86400),a=Math.floor(e%86400/3600),s=Math.floor(e%3600/60),n=global_selected_crafting_item_dc[2],o=global_selected_crafting_item_dc[3];text_crafting_selected_item_ohana.setText(n),text_crafting_selected_item_ohana.setColor("#000000"),text_crafting_selected_item_kusa.setText(o),text_crafting_selected_item_time.setText(i+"d:"+a+"h:"+s+"m"),text_crafting_selected_item_ohana.visible=!0,text_crafting_selected_item_kusa.visible=!0,text_crafting_selected_item_time.visible=!0,icon_crafting_ohana.visible=!0,icon_crafting_kusa.visible=!0,icon_crafting_time.visible=!0,text_select_item.setText('"'+dic_items_reverse[t]+'"'),create_item_indicator(murasakisan.scene,t)}else{text_crafting_selected_item_ohana.setText(""),text_crafting_selected_item_kusa.setText(""),text_crafting_selected_item_time.setText(""),text_crafting_selected_item_heart.setText(""),icon_crafting_ohana.visible=!1,icon_crafting_kusa.visible=!1,icon_crafting_time.visible=!1,text_select_item.setText(">> Select Item <<");try{group_item_indicator.destroy(!0)}catch(t){}}}async function get_cost_of_item(t){return await contract_get_item_dc(t)}async function get_modified_dc(t,e){return await contract_get_modified_dc(t,e)}function create_button(t,e,i,a,s,n){let o="black";o="common"==n?"black":"uncommon"==n?"blue":"rare"==n?"#be5504":"gray";let _=s.add.text(t,e,i).setFontSize(30).setFontFamily("Arial").setInteractive({useHandCursor:!0}).setFill(o).on("pointerdown",(()=>close_crafting_window(a))).on("pointerdown",(()=>sound_window_select.play())).on("pointerover",(()=>_.setStyle({fontSize:30,fontFamily:"Arial",fill:"#ffff00"}))).on("pointerover",(()=>sound_window_pointerover.play())).on("pointerout",(()=>_.setStyle({fontSize:30,fontFamily:"Arial",fill:o})));return _}group_window_crafting=scene.add.group(),group_window_crafting.add(scene.add.sprite(640,480,"window").setInteractive());let _text1="[A,B,C]:                                                              (item count)",_text2="              A=Common,",_text3="                                   B=Uncommon,",_text4="                                                            C=Rare",_text5="Higher INT reduces the time required for crafting.";group_window_crafting.add(scene.add.text(140,90,_text1).setFontFamily("Arial").setFontSize(16).setFill("black")),group_window_crafting.add(scene.add.text(140,90,_text2).setFontFamily("Arial").setFontSize(16).setFill("black")),group_window_crafting.add(scene.add.text(140,90,_text3).setFontFamily("Arial").setFontSize(16).setFill("blue")),group_window_crafting.add(scene.add.text(140,90,_text4).setFontFamily("Arial").setFontSize(16).setFill("#be5504")),group_window_crafting.add(scene.add.text(820,90,_text5).setFontFamily("Arial").setFontSize(16).setFill("blue"));let _x=170,_y=80,_y_add=40,_item_count=0,_rarity;for(var i=1;i<=16;i++){let _rarity;_rarity=local_items[i+128]>0?"rare":local_items[i+64]>0?"uncommon":local_items[i]>0?"common":"empty",eval(`_button  = create_button(_x, _y + _y_add *  ${i}, '[' + local_items[${i}] + ',' + local_items[${i+64}] + ',' + local_items[${i+128}] + '] ' + dic_items_reverse[${i}],  ${i},  scene, _rarity);`),group_window_crafting.add(_button)}for(var i=1;i<=16;i++){let t=dic_items_reverse[i],e=dic_items[t].img_name,a=game.textures.get(e).source[0].height,s=44/a,n=scene.add.image(_x-25,_y+15+_y_add*i,e).setOrigin(.5).setScale(s);group_window_crafting.add(n)}_x=520;for(var i=17;i<=32;i++){let _rarity;_rarity=local_items[i+128]>0?"rare":local_items[i+64]>0?"uncommon":local_items[i]>0?"common":"empty",eval(`_button  = create_button(_x, _y + _y_add *  ${i-16}, '[' + local_items[${i}] + ',' + local_items[${i+64}] + ',' + local_items[${i+128}] + '] ' + dic_items_reverse[${i}],  ${i},  scene, _rarity);`),group_window_crafting.add(_button)}for(var i=17;i<=32;i++){let t=dic_items_reverse[i],e=dic_items[t].img_name,a=game.textures.get(e).source[0].height,s=44/a,n=scene.add.image(_x-25,_y+15+_y_add*(i-16),e).setOrigin(.5).setScale(s);"Score Meter"==t&&(n.x-=8,n.scale*=.9),group_window_crafting.add(n)}_x=870;for(var i=33;i<=48;i++){let _rarity;_rarity=local_items[i+128]>0?"rare":local_items[i+64]>0?"uncommon":local_items[i]>0?"common":"empty",eval(`_button  = create_button(_x, _y + _y_add *  ${i-32}, '[' + local_items[${i}] + ',' + local_items[${i+64}] + ',' + local_items[${i+128}] + '] ' + dic_items_reverse[${i}],  ${i},  scene, _rarity);`),group_window_crafting.add(_button)}for(var i=33;i<=48;i++){let t=dic_items_reverse[i],e=dic_items[t].img_name,a=game.textures.get(e).source[0].height,s=44/a,n=scene.add.image(_x-25,_y+15+_y_add*(i-32),e).setOrigin(.5).setScale(s);group_window_crafting.add(n)}_rarity=local_items[194]>0?"common":null;let button_crafting_item194=create_button(170,760,"["+local_items[194]+"] Coin Bank",194,scene,_rarity);_rarity=local_items[195]>0?"common":null;let button_crafting_item195=create_button(520,760,"["+local_items[195]+"] Leaf Pouch",195,scene,_rarity),item194_icon=scene.add.sprite(145,777,"item_bank").setScale(.16),item195_icon=scene.add.sprite(495,777,"item_pouch").setScale(.14);group_window_crafting.add(button_crafting_item194),group_window_crafting.add(button_crafting_item195),group_window_crafting.add(item194_icon),group_window_crafting.add(item195_icon),_rarity=local_items[196]>0?"common":null;let button_crafting_item196=create_button(870,760,"["+local_items[196]+"] Cat Mail",196,scene,_rarity),item196_icon=scene.add.sprite(870,790,"item_mail").setScale(.6);group_window_crafting.add(button_crafting_item196),group_window_crafting.add(item196_icon),_rarity="common";let button_crafting_close=create_button(1070,840,"Cancel",0,scene,_rarity);if(group_window_crafting.add(button_crafting_close),wallet==local_owner){let t=scene.add.text(220,810,">> Upgrade Item <<").setFontSize(30).setFontFamily("Arial").setInteractive({useHandCursor:!0}).setFill("black").setBackgroundColor("#ecd9ff").on("pointerdown",(()=>close_crafting_window(-1))).on("pointerdown",(()=>sound_window_open.play())).on("pointerover",(()=>t.setStyle({fontSize:30,fontFamily:"Arial",fill:"#d19dff"}))).on("pointerover",(()=>sound_window_pointerover.play())).on("pointerout",(()=>t.setStyle({fontSize:30,fontFamily:"Arial",fill:"black"}))).on("pointerdown",(()=>open_window_upgrade(scene)));group_window_crafting.add(t)}group_window_crafting.setDepth(5e3)}function open_window_upgrade(t){function e(){group_window_upgrade.destroy(!0),"undefined"!=typeof nyuinyui&&(nyuinyui.setVisible(!1),nyuinyui.reset())}group_window_upgrade=t.add.group();let a=t.add.sprite(640,480,"window3").setInteractive(),s="";s+="[ Upgrade item ]\n",s+="  Mint a higher rarity item by burning 3-5 items with the same type and rarity.\n",s+="\n";let n=t.add.text(140,110,"[ Upgrade item ]\n  Mint a higher rarity item by burning 3-5 items with the same type and rarity.\n\n").setFontSize(24).setFontFamily("Arial").setFill("#333333");group_window_upgrade.add(a),group_window_upgrade.add(n);let o=get_upgradable_itemIds2(local_myListsAt_withItemType),_=0;Object.keys(o).forEach((a=>{let s;dic_items_reverse[a];a<=128?s=dic_items_reverse[Number(a)+64]:a<=236&&(s=dic_items_reverse[Number(a)+12]);let n="",r="",l="",m="",c="#000000";a<=64?(n="Common ",r="Uncommon ",l="200",m="200",c="#0000FF"):a<=128?(n="Uncommon ",r="Rare ",l="400",m="400",c="#FFA500"):a<=212?(l="200",m="200",c="#0000FF"):a<=224?(l="400",m="400",c="#E05A00"):a<=236&&(l="600",m="600",c="#E85298");let d="";for(d+=r+s,d+=" (burning item_id: ",i=0;i<o[a].length;i++)d+=o[a][i]+", ";d=d.slice(0,-2),d+=")",d+="\n";let g=t.add.text(200,220+70*_,d).setFontSize(30).setFontFamily("Arial").setFill(c).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{a<=128?upgrade_item(summoner,o[a][0],o[a][1],o[a][2]):a<=212?upgrade_fluffy2fluffier(summoner,o[a][0],o[a][1],o[a][2],o[a][3],o[a][4]):a<=224?upgrade_fluffier2fluffiest(summoner,o[a][0],o[a][1],o[a][2],o[a][3]):a<=236&&upgrade_fluffiest2doll(summoner,o[a][0],o[a][1],o[a][2]),e()})).on("pointerdown",(()=>sound_window_select.play())).on("pointerover",(()=>g.setStyle({fontSize:30,fontFamily:"Arial",fill:"#ffff00"}))).on("pointerover",(()=>sound_window_pointerover.play())).on("pointerout",(()=>g.setStyle({fontSize:30,fontFamily:"Arial",fill:c}))),h=t.add.text(250,223+70*_+30,l).setFontSize(24).setFontFamily("Arial").setFill("#000000"),u=t.add.text(340,223+70*_+30,m).setFontSize(24).setFontFamily("Arial").setFill("#000000"),p=t.add.sprite(230,235+70*_+30,"icon_ohana").setScale(.07),f=t.add.sprite(330,235+70*_+30,"icon_kusa").setScale(.07);if(group_window_upgrade.add(g),group_window_upgrade.add(h),group_window_upgrade.add(u),group_window_upgrade.add(p),group_window_upgrade.add(f),a<=200){let e=dic_items[s].img_name,i=44/game.textures.get(e).source[0].height,a=t.add.image(170,235+70*_,e).setOrigin(.5).setScale(i);group_window_upgrade.add(a)}else if(a>=201){let e=dic_items[s].img_name,i=dic_items[s].frame_no,a=t.add.image(170,235+70*_,e).setOrigin(.5).setScale(.15).setFrame(i);group_window_upgrade.add(a)}_+=1}));let r=t.add.text(1070,840,"Cancel").setFontSize(30).setFontFamily("Arial").setFill("#000000").setInteractive({useHandCursor:!0}).on("pointerdown",(()=>e())).on("pointerdown",(()=>sound_window_select.play())).on("pointerover",(()=>r.setStyle({fontSize:30,fontFamily:"Arial",fill:"#ffff00"}))).on("pointerover",(()=>sound_window_pointerover.play())).on("pointerout",(()=>r.setStyle({fontSize:30,fontFamily:"Arial",fill:"black"})));group_window_upgrade.add(r),group_window_upgrade.setDepth(5e3)}function open_window_practice(t){if(sound_window_open.play(),local_owner!=local_wallet)return 0;function e(t,e,i,a,s,n,o,_){let r=o.add.text(t,e,i).setFontSize(_).setFontFamily("Arial").setFill(a).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>function(t,e){group_window_practice.destroy(!0),e>0?(sound_button_on.play(),console.log(e),contract_start_practice(t,e)):sound_window_select.play()}(summoner,n))).on("pointerover",(()=>r.setStyle({fontSize:_,fontFamily:"Arial",fill:"#ffff00"}))).on("pointerout",(()=>r.setStyle({fontSize:_,fontFamily:"Arial",fill:a}))).on("pointerover",(()=>sound_window_pointerover.play()));return r}function i(t){return 0==t?"#999999":t<=2?"#228b22":t<=4?"#006400":t<=6?"#0000ff":t<=8?"#000080":t<=10?"#ff8c00":t<=12?"#d2691e":t<=14?"#ff0000":t<=16?"#ff00ff":t<=18?"#8a2be2":t<=20?"#800080":void 0}group_window_practice=t.add.group();let a=t.add.sprite(640,480,"window").setInteractive(),s="";s+="Choose an instrument to start practice.\n",s+="Mastery speed is slightly increased by the corresponding status value.\n",s+="(Clarinet & Horn: STR, Piano &Timpani: DEX, Violin & Harp: INT)";let n=t.add.text(140,110,s).setFontSize(24).setFontFamily("Arial").setFill("#333333");s=function(){let t=["Harmony is next to Godliness. - Johann Sebastian Bach -","It is the special province of music to move the heart. - Johann Sebastian Bach -","One does not play the piano with one's fingers, one plays the piano with one's mind.\n- Glenn Gould -","Art is the most beautiful of all lies. - Claude Debussy -","The shorter way to do many things is to do only one thing at a time.\n- Wolfgang Amadeus Mozart -","When words can no longer be expressed, music begins.\n- Claude Debussy -","To Regret the Past, To Hope in the Future, And never to be satisfied with the Present.\n- Peter Ilyich Tchaikovsky -","There is no top. There are always further heights to reach.\n- Jascha Heifetz -","Only the sound the ear permits is music.\n- Fryderyk Franciszek Chopin -","Because I have a dream, a life is brilliant.\n- Wolfgang Amadeus Mozart -","The music is not in the notes, but in the silence between.\n- Wolfgang Amadeus Mozart -","The violin sings, but the fiddle dances. - Unknown -","Music is enough for a lifetime, but a lifetime is not enough for music.\n- Sergei Vasil'evich Rachmaninov -","Ars longa, vita brevis.\n- Hippocrates -"];return t[Math.floor(Math.random()*t.length)]}();let o=t.add.text(250,750,s).setFontSize(18).setFontFamily("Arial").setFill("#666666");function _(a,s,n,o,_,r,l){let m=dic_items[n].item_id,c=function(t){let e=dic_items[t].item_id,i=get_userItems(e),a=get_userItems(e+64),s=get_userItems(e+127);return s.length>0?s[0]:a.length>0?a[0]:i.length>0?i[0]:0}(n);if(local_items[m]>0||local_items[m+64]>0||local_items[m+128]>0){let m=i(o),d=e(a,s,n,m,0,c,t,36).setOrigin(0,.5),g="expertise: "+function(t){return 0==t?"«Inexperienced»":t<=2?"✿ Beginner ✿":t<=4?"★ Talented ★":t<=6?"♩ Skilled ♩":t<=8?"♪ Intermediate ♪":t<=10?"♫ Skillful ♫":t<=12?"♦ Seasoned ♦":t<=14?"♣ Proficient ♣":t<=16?"♠ Advanced ♠":t<=18?"♥ Expert ♥":t<=20?"＊Master＊":void 0}(o)+"\n";g+="(Lv: "+o+", exp: "+_+")";let h=t.add.text(a+0,s+20,g).setFontSize(24).setFontFamily("Arial").setFill(m),u=t.add.image(a-45,s+10,dic_items[n].img_name).setOrigin(.5).setScale(l);r.add(d),r.add(h),r.add(u)}else{let o=i(0),_=e(a,s,n,o,0,m,t,36).setOrigin(0,.5).disableInteractive(),c="[not possessed]",d=t.add.text(a+0,s+20,c).setFontSize(24).setFontFamily("Arial").setFill(o),g=t.add.image(a-45,s+10,dic_items[n].img_name_inactive).setOrigin(.5).setScale(l);r.add(_),r.add(d),r.add(g)}}let r=280;_(r,300,"Clarinet",local_practice_level_clarinet,local_practice_exp_clarinet,group_window_practice,.25),_(r,450,"Piano",local_practice_level_piano,local_practice_exp_piano,group_window_practice,.25),_(r,600,"Violin",local_practice_level_violin,local_practice_exp_violin,group_window_practice,.125),_(755,300,"Horn",local_practice_level_horn,local_practice_exp_horn,group_window_practice,.25),_(755,450,"Timpani",local_practice_level_timpani,local_practice_exp_timpani,group_window_practice,.25),_(755,600,"Harp",local_practice_level_cello,local_practice_exp_cello,group_window_practice,.25);let l=e(1070,840,"Cancel","#000000",0,-1,t,30);group_window_practice.add(a),group_window_practice.add(n),group_window_practice.add(o),group_window_practice.add(l),group_window_practice.setDepth(5e3)}function open_window_voting(scene){if(sound_window_open.play(),local_owner!=local_wallet)return 0;function close_window(t,e){group_window_voting.destroy(!0),e>=0&&contract_voting(t,e)}function create_button(t,e,i,a,s,n,o,_){let r=o.add.text(t,e,i).setFontSize(_).setFontFamily("Arial").setFill(a).setStyle({backgroundColor:s}).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>close_window(summoner,n))).on("pointerover",(()=>r.setStyle({fontSize:_,fontFamily:"Arial",fill:"#ffff00"}))).on("pointerout",(()=>r.setStyle({fontSize:_,fontFamily:"Arial",fill:a}))).on("pointerdown",(()=>sound_window_select.play())).on("pointerover",(()=>sound_window_pointerover.play()));return r}group_window_voting=scene.add.group();let window_voting=scene.add.sprite(640,480,"window2").setInteractive(),_text="";_text+="Fluffy Festival is Underway! Vote for your Favorite Fluffy!\n",_text+="\n",_text+="・The festival lasts 24 hours. You can vote only once and get Participation Award.\n",_text+="・The winner fluffy will get x2 luck boost until the next festival.\n";let msg1=scene.add.text(140,110,_text).setFontSize(24).setFontFamily("Arial").setFill("#333333");_text="",_text+="・Festival selection is held at candle auction method.\n",_text+="・The present and previsou winner fluffy are not selectable.\n",_text+="・The first voter and the final voter will get additional award.\n";let msg2=scene.add.text(200,730,_text).setFontSize(18).setFontFamily("Arial").setFill("#333333"),_x=250,_y=270,_y_add=80,_button201=create_button(_x,_y+0*_y_add," "+dic_items_reverse[201]+" ","#b3bfc7","#e7f3fb",201,scene,36).setOrigin(0,.5),_button202=create_button(_x,_y+1*_y_add," "+dic_items_reverse[202]+" ","#d8bfac","#fff3e0",202,scene,36).setOrigin(0,.5),_button203=create_button(_x,_y+2*_y_add," "+dic_items_reverse[203]+" ","#b7ffd0","#9de5b6",203,scene,36).setOrigin(0,.5),_button204=create_button(_x,_y+3*_y_add," "+dic_items_reverse[204]+" ","#a9e8ff","#8fcee5",204,scene,36).setOrigin(0,.5),_button205=create_button(_x,_y+4*_y_add," "+dic_items_reverse[205]+" ","#8dabff","#c1dfff",205,scene,36).setOrigin(0,.5),_button206=create_button(_x,_y+5*_y_add," "+dic_items_reverse[206]+" ","#dab3ff","#ffe7ff",206,scene,36).setOrigin(0,.5),_button207=create_button(_x+500,_y+0*_y_add," "+dic_items_reverse[207]+" ","#fdbeff","#fff2ff",207,scene,36).setOrigin(0,.5),_button208=create_button(_x+500,_y+1*_y_add," "+dic_items_reverse[208]+" ","#ff686b","#ffb6b9",208,scene,36).setOrigin(0,.5),_button209=create_button(_x+500,_y+2*_y_add," "+dic_items_reverse[209]+" ","#ffbda8","#fff1dc",209,scene,36).setOrigin(0,.5),_button210=create_button(_x+500,_y+3*_y_add," "+dic_items_reverse[210]+" ","#ffd5d5","#ffffff",210,scene,36).setOrigin(0,.5),_button211=create_button(_x+500,_y+4*_y_add," "+dic_items_reverse[211]+" ","#ffe381","#e5c967",211,scene,36).setOrigin(0,.5),_button212=create_button(_x+500,_y+5*_y_add," "+dic_items_reverse[212]+" ","#fbfff0","#c7cbbc",212,scene,36).setOrigin(0,.5),_button_cancel=create_button(1070,840,"Cancel","#000000","",-1,scene,30),_icon201=scene.add.image(_x-35,_y+0*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(3),_icon202=scene.add.image(_x-35,_y+1*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(13),_icon203=scene.add.image(_x-35,_y+2*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(23),_icon204=scene.add.image(_x-35,_y+3*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(33),_icon205=scene.add.image(_x-35,_y+4*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(43),_icon206=scene.add.image(_x-35,_y+5*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(53),_icon207=scene.add.image(_x+500-35,_y+0*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(63),_icon208=scene.add.image(_x+500-35,_y+1*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(73),_icon209=scene.add.image(_x+500-35,_y+2*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(83),_icon210=scene.add.image(_x+500-35,_y+3*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(93),_icon211=scene.add.image(_x+500-35,_y+4*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(103),_icon212=scene.add.image(_x+500-35,_y+5*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(113),_text_msg3;if(local_ff_previous_elected_type>0){eval("_button"+local_ff_previous_elected_type).setText(" ("+eval("_button"+local_ff_previous_elected_type).text+") ").disableInteractive(),_text="--- 👑 Previous Winner ---",_x=eval("_button"+local_ff_previous_elected_type).x,_y=eval("_button"+local_ff_previous_elected_type).y;let msg3=scene.add.text(_x,_y+22,_text).setFontSize(20).setFontFamily("Arial").setFill("#0000ff");group_window_voting.add(msg3)}if(local_ff_elected_type>0){eval("_button"+local_ff_elected_type).setText(" ("+eval("_button"+local_ff_elected_type).text+") ").disableInteractive(),_text="--- 👑 Present Winner ---",_x=eval("_button"+local_ff_elected_type).x,_y=eval("_button"+local_ff_elected_type).y;let msg4=scene.add.text(_x,_y+22,_text).setFontSize(20).setFontFamily("Arial").setFill("#ff0000");group_window_voting.add(msg4)}if(local_ff_next_festival_block-local_blockNumber<0)_text_msg3="The festival is about to start.\nYou can get the First Voting Bonus now!";else if(local_ff_isEndable)_text_msg3="The festival is almost over.\nYou can get the Final Voting Bonus now!";else{let t=local_ff_subject_end_block-local_blockNumber;_text_msg3="The festival is underway!\n"+t+" blocks remaining."}let msg3=scene.add.text(750,730,_text_msg3).setFontSize(24).setFontFamily("Arial").setFill("blue");group_window_voting.add(window_voting),group_window_voting.add(msg1),group_window_voting.add(msg2),group_window_voting.add(msg3),group_window_voting.add(_button201),group_window_voting.add(_button202),group_window_voting.add(_button203),group_window_voting.add(_button204),group_window_voting.add(_button205),group_window_voting.add(_button206),group_window_voting.add(_button207),group_window_voting.add(_button208),group_window_voting.add(_button209),group_window_voting.add(_button210),group_window_voting.add(_button211),group_window_voting.add(_button212),group_window_voting.add(_button_cancel),group_window_voting.add(_icon201),group_window_voting.add(_icon202),group_window_voting.add(_icon203),group_window_voting.add(_icon204),group_window_voting.add(_icon205),group_window_voting.add(_icon206),group_window_voting.add(_icon207),group_window_voting.add(_icon208),group_window_voting.add(_icon209),group_window_voting.add(_icon210),group_window_voting.add(_icon211),group_window_voting.add(_icon212),group_window_voting.setDepth(5e3)}function draw_firework(t){sound_fireworks2.play();const e={alpha:{start:1,end:0,ease:"Cubic.easeIn"},angle:{start:0,end:360,steps:100},blendMode:"ADD",frame:{frames:["red","yellow","green","blue"],cycle:!0,quantity:500},gravityY:300,lifespan:1e3,quantity:500,stopAfter:500,reserve:500,scale:{min:.05,max:.15},speed:{min:300,max:600}},{width:i,height:a}=t.scale,{FloatBetween:s}=Phaser.Math;for(let n=0;n<=2e3;n+=500)t.time.addEvent({delay:n,callback:()=>{let n=i*s(.25,.75),o=a*s(0,.5);t.add.particles(n,o,"par_flares",e).onParticleEmit((()=>{sound_fireworks.play()}))}})}function draw_flower(t,e,i){const a={alpha:.8,angle:{min:250,max:290},gravityY:900,lifespan:{min:720,max:900},quantity:20,stopAfter:20,timeScale:.9,reserve:20,rotate:{min:0,max:360},scale:{min:.05,max:.15},speed:{min:300,max:600},frame:[0,1,2,3,4,5]};t.add.particles(e,i,"par_flowers",a).setDepth(3100)}function draw_flower2(t,e,i){const a={alpha:.5,angle:{min:0,max:360},gravityY:400,lifespan:{min:280,max:400},quantity:15,stopAfter:15,timeScale:.9,rotate:{min:0,max:360},scale:{min:.05,max:.08},speed:{min:50,max:300},frame:[0,1,2,3,4,5]};t.add.particles(e,i,"par_flowers",a).setDepth(1e3)}function draw_flower3(t,e,i){const a={alpha:.8,angle:{min:0,max:360},gravityY:400,lifespan:{min:420,max:600},quantity:20,stopAfter:20,timeScale:.9,rotate:{min:0,max:360},scale:{min:.05,max:.15},speed:{min:100,max:300},frame:[0,1,2,3,4,5]};t.add.particles(e,i,"par_flowers",a).setDepth(1e3)}function draw_miniAlphabet(t,e,i,a){const s={alpha:.25,angle:{min:0,max:360},gravityY:400,lifespan:{min:140,max:200},quantity:1,stopAfter:50,timeScale:.45,rotate:{min:0,max:360},scale:{min:.01,max:.03},speed:{min:50,max:300},x:{min:-10,max:10},y:{min:-10,max:10},frequency:10};t.add.particles(e,i,a,s).setDepth(1e3)}function draw_miniAlphabet2(t,e,i,a){const s={alpha:.5,angle:{min:0,max:360},gravityY:400,lifespan:{min:210,max:300},quantity:10,stopAfter:10,timeScale:.9,rotate:{min:0,max:360},scale:{min:.01,max:.03},speed:{min:50,max:200}};t.add.particles(e,i,a,s).setDepth(1e3)}function draw_glitter(t,e){const i={alpha:{start:1,end:0},lifespan:2e3,frequency:2e3,quantity:1,scale:.08,frame:[0,1,2],emitZone:{type:"random",source:new Phaser.Geom.Rectangle(-e.width*e.scale/2,-e.height*e.scale/2,e.width*e.scale,e.height*e.scale)},follow:e,origin:.5};t.add.particles(e.x,e.y,"par_glitter",i)}function draw_star(t,e,i){const a={alpha:.5,angle:{min:0,max:360},gravityY:400,lifespan:{min:280,max:400},quantity:15,stopAfter:15,timeScale:.9,rotate:{min:0,max:360},scale:{min:.05,max:.08},speed:{min:50,max:300},frame:[0,1,2,3,4,5,6,7]};t.add.particles(e,i,"par_stars",a).setDepth(9e3)}function draw_fluffyBit(t,e,i){const a={alpha:.5,angle:{min:250,max:290},gravityY:400,lifespan:{min:630,max:900},quantity:20,stopAfter:20,timeScale:.9,reserve:20,rotate:{min:0,max:360},scale:{min:.03,max:.06},speed:{min:50,max:300},frame:[0,1,2,3,4,5,6,7,8,9,10,11]};t.add.particles(e,i,"par_fluffys",a)}function summon_star(t){let e=Math.floor(7*Math.random()),i=new Star(t,300,-100,"par_stars").setOrigin(.5).setScale(.08+.08*Math.random()).setAlpha(.7).setDepth(3).setFrame(e);i.on_summon(),group_neonStar.add(i),group_update.add(i)}function summon_note(t){let e=Math.floor(6*Math.random()),i=new Note(t,100,100,"practice_notes").setOrigin(.5).setScale(.12).setAlpha(1).setDepth(3).setFrame(e);group_update.add(i)}function summon_coin(t){let e=new Coin(t,100,100,"icon_ohana").setOrigin(.5).setScale(.07).setAlpha(1).setDepth(3);group_update.add(e)}function summon_leaf(t){let e=new Coin(t,100,100,"icon_kusa").setOrigin(.5).setScale(.09).setAlpha(1).setDepth(3);group_update.add(e)}function summon_flower(t){let e=new Coin(t,100,100,"par_flowers").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.1).setAlpha(1).setDepth(3);group_update.add(e)}function summon_fluffy2(t,e,i){let a=new Fluffy2(t,0,0,"fluffy_fluffys",e,i).setOrigin(.5).setAlpha(1).setDepth(3);group_star.add(a),group_update.add(a),count_sync>3&&(murasakisan.on_click(),sound_fluffy.play())}async function summon_nuichan(t,e,i,a){let s=1070+30*a,n=520+30*a,o=await contract_get_item_nui(e),_=o[0],r=(o[1],o[2]),l=o[3];r>=active_nui_score&&(active_nui_id=e,active_nui_score=r,active_nui_exp_rate=_ext_rate);let m=await call_name_from_summoner(_);""==m&&(m="#"+_),new Nuichan(t,s,n,"item_nui_list",i,e,m,r,l).setDepth(n),count_sync>3&&draw_flower3(this_scene,s,n)}function summon_fallingFlower(t){let e=new FallingFlower(t,0,0,"par_flowers");group_update.add(e)}function summon_mogumogu(t){mogumogu=t.add.sprite(350,600,"mogumogu").anims.play("mogumogu",!0).setOrigin(.5).setScale(.3).setDepth(600).setInteractive({draggable:!0,useHandCursor:!0}).on("pointerover",(()=>{sound_button_select.play()})).on("pointerdown",(()=>{open_window_convert(t)}));let e="";e+="✿ End Trial ✿",mogumogu_text=t.add.text(350,635,"✿ End Trial ✿").setFontSize(20).setFontFamily("Arial").setFill("#E62E8B").setOrigin(.5),group_mogumogu=t.add.group(),group_mogumogu.add(mogumogu),group_mogumogu.add(mogumogu_text)}function summon_alphabet(t,e,i,a,s=0,n=.1){let o=new Alphabet(t,i,a,{a:"alp_a",b:"alp_b",c:"alp_c",d:"alp_d",e:"alp_e",f:"alp_f",g:"alp_g",h:"alp_h",i:"alp_i",j:"alp_j",k:"alp_k",l:"alp_l",m:"alp_m",n:"alp_n",o:"alp_o",p:"alp_p",q:"alp_q",r:"alp_r",s:"alp_s",t:"alp_t",u:"alp_u",v:"alp_v",w:"alp_w",x:"alp_x",y:"alp_y",z:"alp_z","!":"alp_ext"}[e],s,n);group_update.add(o),0==s&&group_alp.add(o)}function summon_sentence(t,e,a=250,s=100){for(i=0;i<e.length;i++){let n=e.charAt(i);if(" "!=n){let e=i;setTimeout((()=>{summon_alphabet(t,n,a+40*e,s)}),50*e,t,n,e)}}}function summon_trial(t,e="trial",a=860,s=210){for(i=0;i<e.length;i++){let n=e.charAt(i);if(" "!=n){let e=i;setTimeout((()=>{summon_alphabet(t,n,a+30*e,s,1,.075)}),50*e,t,n,e)}}}function summon_scoreMeter(t,e=510,a=510){for(i=0;i<8;i++){let s=new WoodCube(t,e+32*i,a,i);group_scoreMeter.add(s),group_scoreMeter.add(s.text_score)}}function update_tx_text(t,e){"undefined"!=typeof timeout_tx&&clearTimeout(timeout_tx);let i=" ("+e.substring(0,8)+"..."+e.slice(-8)+")";group_tx.setVisible(!0),"sending"==t?(text_tx.setText("Sending Transaction..."+i).setColor("#0000FF"),timeout_tx=setTimeout((()=>{group_tx.setVisible(!1)}),3e4)):"done"==t&&(text_tx.setText("Transaction Confirmed!"+i).setColor("#FF0000"),timeout_tx=setTimeout((()=>{group_tx.setVisible(!1)}),1e4))}function firstCelebration(t){draw_firework(t),murasakisan.on_click(),summon_sentence(t,"hello murasaki san!")}function preload(t){let e=t.add.graphics(),i=t.add.graphics();i.fillStyle(16642037,.4),i.fillRect(480,450,320,50);let a=t.add.text(490,520,"",{font:"20px monospace",fill:"#3D3D3D"}),s=t.add.text(490,420,"Loading...",{font:"20px monospace",fill:"#3D3D3D"}),n=t.add.text(510,465,"",{font:"20px monospace",fill:"#3D3D3D"}),o=["Making roasted sweet potatoes...","Brushing a teddy bear...","Looking for your shovel...","Polishing the watering can...","Assembling the sewing machine...","Counting flowers and grass...","Cleaning up the house...","Replacing the sand in the sandbox...","Adding fertilizer to the flowerpot...","Treating a needle puncture wound...","Washing the dishes...","Putting a flower on the teddy bear...","Painting your murasaki-san purple...","Bathing the teddy bear...","Polishing the floor...","Counting the number of hairs on Fluffy...","Charging the Murasaki-san battery...","Shopping for cat food...","Filling a fountain pen with ink...","Baking pancakes...","Writing Solidity code...","Refactoring JavaScript code...","Thinking about the peace of the world...","Calling Mr. Sota Watanabe...","Studying nuclear fusion...","Chaingng a violin strings...","Tuning the toy piano...","Debugging Rust code...","Drawing with ink! on the palette on the pallet...","Smartly contracting to the smart contract...","Assembling WebAssembly..."];a.setText(o[Math.floor(Math.random()*o.length)]);let _=.25;t.load.on("progress",(function(t){0==flag_loaded&&(e.clear(),e.fillStyle(15085195,1),e.fillRect(490,460,300*t,30),n.setText(Math.round(100*t)+"%"),t>_&&(a.setText(o[Math.floor(Math.random()*o.length)]),_+=.25))})),t.load.on("complete",(function(){e.destroy(),i.destroy(),a.destroy(),s.destroy(),n.destroy(),flag_loaded=1})),t.load.image("back","src/png/background.png"),t.load.image("back_sandbox","src/png/background_sandbox.png"),t.load.image("back_black","src/png/background_black.png"),t.load.image("window","src/png/background_window.png"),t.load.image("window2","src/png/background_window2.png"),t.load.image("window3","src/png/background_window3.png"),t.load.image("achv_01","src/png/achv_01.png"),t.load.image("achv_02","src/png/achv_02.png"),t.load.image("achv_03","src/png/achv_03.png"),t.load.image("achv_04","src/png/achv_04.png"),t.load.image("achv_05","src/png/achv_05.png"),t.load.image("achv_06","src/png/achv_06.png"),t.load.image("achv_07","src/png/achv_07.png"),t.load.image("achv_08","src/png/achv_08.png"),t.load.image("achv_09","src/png/achv_09.png"),t.load.image("achv_10","src/png/achv_10.png"),t.load.image("achv_11","src/png/achv_11.png"),t.load.image("achv_12","src/png/achv_12.png"),t.load.image("achv_13","src/png/achv_13.png"),t.load.image("achv_14","src/png/achv_14.png"),t.load.image("achv_15","src/png/achv_15.png"),t.load.image("achv_16","src/png/achv_16.png"),t.load.image("achv_17","src/png/achv_17.png"),t.load.image("achv_18","src/png/achv_18.png"),t.load.image("achv_19","src/png/achv_19.png"),t.load.image("achv_20","src/png/achv_20.png"),t.load.spritesheet("murasaki_right","src/png/murasaki_right.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_left","src/png/murasaki_left.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_sleeping","src/png/murasaki_sleeping2.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_feeding","src/png/murasaki_feeding.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_feeding_happy_right","src/png/murasaki_feeding_happy_right.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_feeding_happy_left","src/png/murasaki_feeding_happy_left.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_crying","src/png/murasaki_crying.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_mining","src/png/murasaki_mining.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_hugging","src/png/murasaki_hugging.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_farming","src/png/murasaki_farming.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_grooming","src/png/murasaki_grooming3.png",{frameWidth:720,frameHeight:622}),t.load.spritesheet("murasaki_crafting","src/png/murasaki_crafting.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_working_left","src/png/murasaki_working_left.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_working_right","src/png/murasaki_working_right.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_click","src/png/murasaki_click.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_stone","src/png/murasaki_stone.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_hungry","src/png/murasaki_hungry.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_listning","src/png/murasaki_listning.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_neon_right","src/png/murasaki_neon_right.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("murasaki_neon_left","src/png/murasaki_neon_left.png",{frameWidth:370,frameHeight:320}),t.load.image("button_feeding","src/png/button_feeding.png"),t.load.image("button_feeding_pointerover","src/png/button_feeding_pointerover.png"),t.load.image("button_mining_enable","src/png/button_mining_enable.png"),t.load.image("button_mining_unable","src/png/button_mining_unable.png"),t.load.image("button_mining_pointerover","src/png/button_mining_pointerover.png"),t.load.image("button_mining_working","src/png/button_mining_working.png"),t.load.image("button_mining_pointerover_stop","src/png/button_mining_pointerover_stop.png"),t.load.image("button_farming_enable","src/png/button_farming_enable.png"),t.load.image("button_farming_unable","src/png/button_farming_unable.png"),t.load.image("button_farming_pointerover","src/png/button_farming_pointerover.png"),t.load.image("button_farming_working","src/png/button_farming_working.png"),t.load.image("button_farming_pointerover_stop","src/png/button_farming_pointerover_stop.png"),t.load.image("button_grooming_enable","src/png/button_grooming_enable.png"),t.load.image("button_grooming_unable","src/png/button_grooming_unable.png"),t.load.image("button_grooming_pointerover","src/png/button_grooming_pointerover.png"),t.load.image("button_levelup_enable","src/png/button_levelup_enable.png"),t.load.image("button_levelup_unable","src/png/button_levelup_unable.png"),t.load.image("button_levelup_pointerover","src/png/button_levelup_pointerover.png"),t.load.image("back_level","src/png/button_level.png"),t.load.image("button_crafting_unable","src/png/button_crafting_unable.png"),t.load.image("button_crafting_start_on","src/png/button_crafting_start_on.png"),t.load.image("button_crafting_start_off","src/png/button_crafting_start_off.png"),t.load.image("button_crafting_pause_on","src/png/button_crafting_pause_on.png"),t.load.image("button_crafting_pause_off","src/png/button_crafting_pause_off.png"),t.load.image("button_crafting_complete_on","src/png/button_crafting_complete_on.png"),t.load.image("button_crafting_complete_off","src/png/button_crafting_complete_off.png"),t.load.image("button_crafting_resume_on","src/png/button_crafting_resume_on.png"),t.load.image("button_crafting_resume_off","src/png/button_crafting_resume_off.png"),t.load.image("button_crafting_cancel_on","src/png/button_crafting_cancel_on.png"),t.load.image("button_crafting_cancel_off","src/png/button_crafting_cancel_off.png"),t.load.image("button_practice_enable","src/png/button_practice_enable.png"),t.load.image("button_practice_unable","src/png/button_practice_unable.png"),t.load.image("button_practice_pointerover","src/png/button_practice_pointerover.png"),t.load.image("button_practice_working","src/png/button_practice_working.png"),t.load.image("button_practice_pointerover_stop","src/png/button_practice_pointerover_stop.png"),t.load.spritesheet("mr_astar_right","src/png/pet_mr_astar_right.png",{frameWidth:600,frameHeight:600}),t.load.spritesheet("mr_astar_left","src/png/pet_mr_astar_left.png",{frameWidth:600,frameHeight:600}),t.load.spritesheet("mr_astar_meet","src/png/pet_mr_astar_meet.png",{frameWidth:600,frameHeight:600}),t.load.spritesheet("ms_ether_right","src/png/pet_ms_ether_right.png",{frameWidth:600,frameHeight:600}),t.load.spritesheet("ms_ether_left","src/png/pet_ms_ether_left.png",{frameWidth:600,frameHeight:600}),t.load.spritesheet("ms_ether_meet","src/png/pet_ms_ether_meet.png",{frameWidth:600,frameHeight:600}),t.load.spritesheet("dr_bitco_right","src/png/pet_dr_bitco_right.png",{frameWidth:600,frameHeight:600}),t.load.spritesheet("dr_bitco_left","src/png/pet_dr_bitco_left.png",{frameWidth:600,frameHeight:600}),t.load.spritesheet("dr_bitco_meet","src/png/pet_dr_bitco_meet.png",{frameWidth:600,frameHeight:600}),t.load.image("item_table","src/png/item_basic_table.png"),t.load.image("item_misin","src/png/item_basic_misin.png"),t.load.image("item_tree0","src/png/item_basic_tree0.png"),t.load.image("item_tree1","src/png/item_basic_tree1.png"),t.load.image("item_tree2","src/png/item_basic_tree2.png"),t.load.image("item_tree3","src/png/item_basic_tree3.png"),t.load.image("item_bear","src/png/item_basic_bear.png"),t.load.image("item_gold1","src/png/item_basic_gold1.png"),t.load.image("item_gold2","src/png/item_basic_gold2.png"),t.load.image("item_gold3","src/png/item_basic_gold3.png"),t.load.image("item_food_potato","src/png/item_food_potato.png"),t.load.image("item_food_bread","src/png/item_food_bread.png"),t.load.image("item_food_cake","src/png/item_food_cake.png"),t.load.image("item_food_onigiri","src/png/item_food_onigiri.png"),t.load.image("item_food_pancake","src/png/item_food_pancake.png"),t.load.spritesheet("item_musicbox","src/png/item_musicbox.png",{frameWidth:370,frameHeight:320}),t.load.image("item_violin","src/png/item_violin.png"),t.load.image("item_violin_inactive","src/png/item_violin_inactive.png"),t.load.image("item_vase","src/png/item_vase.png"),t.load.image("item_kanban","src/png/item_kanban4.png"),t.load.spritesheet("item_crown","src/png/item_crown.png",{frameWidth:370,frameHeight:320}),t.load.image("item_fortune_statue","src/png/item_fortune_statue.png"),t.load.image("item_ribbon","src/png/item_ribbon3.png"),t.load.image("item_dice","src/png/item_dice.png"),t.load.image("item_dice_pointerover","src/png/item_dice_pointerover.png"),t.load.image("item_hat_knit","src/png/item_hat_knit.png"),t.load.image("item_hat_mugiwara","src/png/item_hat_mugiwara.png"),t.load.image("item_bank","src/png/item_bank.png"),t.load.image("item_bank_broken","src/png/item_bank_broken.png"),t.load.image("item_hat_helmet","src/png/item_hat_helmet.png"),t.load.image("item_asnya","src/png/item_asnya.png"),t.load.spritesheet("item_nui","src/png/item_nui2.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("item_switch","src/png/item_switch.png",{frameWidth:370,frameHeight:320}),t.load.image("item_pouch","src/png/item_pouch.png"),t.load.image("item_pouch_broken","src/png/item_pouch_broken.png"),t.load.image("item_hat_mortarboard","src/png/item_hat_mortarboard.png"),t.load.image("item_pad_on","src/png/item_pad_on.png"),t.load.image("item_pad_off","src/png/item_pad_off.png"),t.load.spritesheet("item_tokenChest","src/png/item_tokenChest.png",{frameWidth:370,frameHeight:320}),t.load.image("item_frame","src/png/item_frame.png"),t.load.image("item_wall_sticker_01","src/png/item_wall_sticker_01.png"),t.load.image("item_wall_sticker_02","src/png/item_wall_sticker_02.png"),t.load.image("item_wall_sticker_03","src/png/item_wall_sticker_03.png"),t.load.image("item_wall_sticker_04","src/png/item_wall_sticker_04.png"),t.load.image("item_wall_sticker_05","src/png/item_wall_sticker_05.png"),t.load.image("item_wall_sticker_06","src/png/item_wall_sticker_06.png"),t.load.image("item_wall_sticker_07","src/png/item_wall_sticker_07.png"),t.load.image("item_wall_sticker_08","src/png/item_wall_sticker_08.png"),t.load.image("item_wall_sticker_09","src/png/item_wall_sticker_09.png"),t.load.image("item_wall_sticker_10","src/png/item_wall_sticker_10.png"),t.load.image("item_wall_sticker_11","src/png/item_wall_sticker_11.png"),t.load.image("item_wall_sticker_12","src/png/item_wall_sticker_12.png"),t.load.image("item_wall_sticker_icon","src/icon/wall_sticker.png"),t.load.spritesheet("item_wall_sticker_neon","src/png/item_wall_sticker_neon.png",{frameWidth:1280,frameHeight:960}),t.load.image("item_fluffy_house_1","src/png/item_fluffy_house_1.png"),t.load.image("item_fluffy_house_2","src/png/item_fluffy_house_2.png"),t.load.image("item_fluffy_house_3","src/png/item_fluffy_house_3.png"),t.load.image("item_fluffy_house_4","src/png/item_fluffy_house_4.png"),t.load.image("item_fluffy_house_5","src/png/item_fluffy_house_5.png"),t.load.image("item_pancake","src/png/item_pancake.png"),t.load.image("item_rugg","src/png/item_rugg.png"),t.load.image("item_piano","src/png/item_piano.png"),t.load.image("item_piano_inactive","src/png/item_piano_inactive.png"),t.load.image("item_piano_opened","src/png/item_piano_opened.png"),t.load.image("item_window_sunny","src/png/item_window_sunny.png"),t.load.image("item_window_sunny_closed","src/png/item_window_sunny_closed.png"),t.load.image("item_window_cloudy","src/png/item_window_cloudy.png"),t.load.image("item_window_cloudy_closed","src/png/item_window_cloudy_closed.png"),t.load.image("item_window_rain","src/png/item_window_rain.png"),t.load.image("item_window_rain_closed","src/png/item_window_rain_closed.png"),t.load.image("item_window_night","src/png/item_window_night.png"),t.load.image("item_window_night_closed","src/png/item_window_night_closed.png"),t.load.image("item_newspaper","src/png/item_newspaper.png"),t.load.image("item_book","src/png/item_book.png"),t.load.image("item_presentbox_01","src/png/item_presentbox_01.png"),t.load.image("item_presentbox_02","src/png/item_presentbox_02.png"),t.load.image("item_presentbox_03","src/png/item_presentbox_03.png"),t.load.image("item_presentbox_04","src/png/item_presentbox_04.png"),t.load.image("item_presentbox_05","src/png/item_presentbox_05.png"),t.load.image("item_presentbox_06","src/png/item_presentbox_06.png"),t.load.image("item_presentbox_07","src/png/item_presentbox_07.png"),t.load.image("item_presentbox_08","src/png/item_presentbox_08.png"),t.load.image("item_box","src/png/item_box.png"),t.load.image("item_crayon","src/png/item_crayon.png"),t.load.spritesheet("item_fishbowl_list","src/png/item_fishbowl_list.png",{frameWidth:370,frameHeight:320}),t.load.image("item_bed","src/png/item_bed.png"),t.load.image("item_frame_inside_loading","src/png/item_frame_inside_loading.png"),t.load.spritesheet("item_hammock_list","src/png/item_hammock_list.png",{frameWidth:230,frameHeight:320}),t.load.spritesheet("item_lantern_list","src/png/item_lantern_list.png",{frameWidth:370,frameHeight:320}),t.load.image("item_staking","src/png/item_staking.png"),t.load.image("item_waterbottle","src/png/item_waterbottle.png"),t.load.image("item_wreath","src/png/item_wreath.png"),t.load.image("item_cushion","src/png/item_cushion.png"),t.load.image("item_woodcube","src/png/item_woodcube.png"),t.load.image("item_clarinet","src/png/item_clarinet.png"),t.load.image("item_timpani","src/png/item_timpani.png"),t.load.image("item_harp","src/png/item_harp.png"),t.load.image("item_horn","src/png/item_horn.png"),t.load.image("item_clarinet_inactive","src/png/item_clarinet_inactive.png"),t.load.image("item_timpani_inactive","src/png/item_timpani_inactive.png"),t.load.image("item_harp_inactive","src/png/item_harp_inactive.png"),t.load.image("item_horn_inactive","src/png/item_horn_inactive.png"),t.load.spritesheet("practice_clarinet","src/png/practice_piano.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("practice_piano","src/png/practice_piano.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("practice_violin","src/png/practice_piano.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("practice_horn","src/png/practice_piano.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("practice_timpani","src/png/practice_piano.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("practice_harp","src/png/practice_piano.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("practice_notes","src/png/practice_notes.png",{frameWidth:370,frameHeight:320}),t.load.image("alp_a","src/png/alp_a.png"),t.load.image("alp_b","src/png/alp_b.png"),t.load.image("alp_c","src/png/alp_c.png"),t.load.image("alp_d","src/png/alp_d.png"),t.load.image("alp_e","src/png/alp_e.png"),t.load.image("alp_f","src/png/alp_f.png"),t.load.image("alp_g","src/png/alp_g.png"),t.load.image("alp_h","src/png/alp_h.png"),t.load.image("alp_i","src/png/alp_i.png"),t.load.image("alp_j","src/png/alp_j.png"),t.load.image("alp_k","src/png/alp_k.png"),t.load.image("alp_l","src/png/alp_l.png"),t.load.image("alp_m","src/png/alp_m.png"),t.load.image("alp_n","src/png/alp_n.png"),t.load.image("alp_o","src/png/alp_o.png"),t.load.image("alp_p","src/png/alp_p.png"),t.load.image("alp_q","src/png/alp_q.png"),t.load.image("alp_r","src/png/alp_r.png"),t.load.image("alp_s","src/png/alp_s.png"),t.load.image("alp_t","src/png/alp_t.png"),t.load.image("alp_u","src/png/alp_u.png"),t.load.image("alp_v","src/png/alp_v.png"),t.load.image("alp_w","src/png/alp_w.png"),t.load.image("alp_x","src/png/alp_x.png"),t.load.image("alp_y","src/png/alp_y.png"),t.load.image("alp_z","src/png/alp_z.png"),t.load.image("alp_ext","src/png/alp_ext.png"),t.load.image("ff_preFestival_left","src/png/ff_preFestival_left.png"),t.load.image("ff_duringFestival_left","src/png/ff_duringFestival_left.png"),t.load.image("ff_duringFestival_pointerOver_left","src/png/ff_duringFestival_pointerOver_left.png"),t.load.image("ff_duringFestival_afterVoting_left","src/png/ff_duringFestival_afterVoting_left.png"),t.load.image("ff_duringFestival_isEndable_left","src/png/ff_duringFestival_isEndable_left.png"),t.load.image("ff_preFestival_right","src/png/ff_preFestival_right.png"),t.load.image("ff_duringFestival_right","src/png/ff_duringFestival_right.png"),t.load.image("ff_duringFestival_pointerOver_right","src/png/ff_duringFestival_pointerOver_right.png"),t.load.image("ff_duringFestival_afterVoting_right","src/png/ff_duringFestival_afterVoting_right.png"),t.load.image("ff_duringFestival_isEndable_right","src/png/ff_duringFestival_isEndable_right.png"),t.load.spritesheet("ff_reports","src/png/ff_reports.png",{frameWidth:615,frameHeight:693}),t.load.spritesheet("item_clock","src/png/item_clock_list.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("item_nui_list","src/png/item_nui_list.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("nyui_moving","src/png/nyui_moving.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("nyui_happy","src/png/nyui_happy.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("mogumogu","src/png/mogumogu.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("fluffy_fluffys","src/png/fluffy_fluffys3.png",{frameWidth:370,frameHeight:320}),t.load.image("item_mail","src/png/item_mail.png"),t.load.spritesheet("cats","src/png/cats.png",{frameWidth:370,frameHeight:320}),t.load.image("icon_kusa","src/png/icon_system_kusa.png"),t.load.image("icon_ohana","src/png/icon_system_ohana.png"),t.load.image("icon_clock","src/png/icon_system_clock.png"),t.load.image("icon_heart","src/png/icon_system_heart.png"),t.load.image("icon_rotate","src/png/icon_system_rotate.png"),t.load.image("icon_home","src/png/icon_system_home.png"),t.load.image("icon_satiety","src/png/icon_system_satiety.png"),t.load.image("icon_happy","src/png/icon_system_happy.png"),t.load.image("icon_reload","src/png/icon_reload.png"),t.load.image("icon_str","src/png/icon_status_str.png"),t.load.image("icon_dex","src/png/icon_status_dex.png"),t.load.image("icon_int","src/png/icon_status_int.png"),t.load.image("icon_luk","src/png/icon_status_luk.png"),t.load.image("twinkle_01","src/png/twinkle_01.png"),t.load.image("sparkle_01","src/png/sparkle_01.png"),t.load.image("glitter_01","src/png/glitter_01.png"),t.load.audio("bgm1","src/music/Morning_2.mp3"),t.load.audio("bgm2","src/music/Roll_Roll_Roll.mp3"),t.load.audio("bgm3","src/music/amaoto.mp3"),t.load.audio("bgm_n1","src/music/kiyoshi.mp3"),t.load.audio("button_on","src/sound/button_on.mp3"),t.load.audio("button_select","src/sound/button_select.mp3"),t.load.audio("feeding","src/sound/feeding.mp3"),t.load.audio("grooming","src/sound/grooming.mp3"),t.load.audio("mining","src/sound/mining.mp3"),t.load.audio("mining_during","src/sound/mining_during.mp3"),t.load.audio("farming","src/sound/farming.mp3"),t.load.audio("farming_during","src/sound/farming_during.mp3"),t.load.audio("crafting","src/sound/crafting.mp3"),t.load.audio("crafting_during","src/sound/crafting_during.mp3"),t.load.audio("happy","src/sound/happy.mp3"),t.load.audio("earn","src/sound/earn.wav"),t.load.audio("dice","src/sound/dice.mp3"),t.load.audio("dice_impact","src/sound/dice_impact.mp3"),t.load.audio("hat","src/sound/hat.mp3"),t.load.audio("unhappy","src/sound/unhappy.mp3"),t.load.audio("switch","src/sound/switch.mp3"),t.load.audio("window_open","src/sound/window_open.mp3"),t.load.audio("window_pointerover","src/sound/window_pointerover.mp3"),t.load.audio("window_select","src/sound/window_select.mp3"),t.load.audio("window_cancel","src/sound/window_cancel.mp3"),t.load.audio("system","src/sound/system.mp3"),t.load.audio("nui","src/sound/nui.mp3"),t.load.audio("pad","src/sound/pad2.mp3"),t.load.audio("fireworks","src/sound/fireworks.mp3"),t.load.audio("fireworks2","src/sound/fireworks2.mp3"),t.load.audio("basket","src/sound/basket.mp3"),t.load.audio("cat1","src/sound/cat1.mp3"),t.load.audio("cat2","src/sound/cat2.mp3"),t.load.audio("clock","src/sound/clock.mp3"),t.load.audio("window","src/sound/window.mp3"),t.load.audio("piano1","src/sound/piano1.mp3"),t.load.audio("piano2","src/sound/piano2.mp3"),t.load.audio("nainai1","src/sound/nainai1.mp3"),t.load.audio("nainai2","src/sound/nainai2.mp3"),t.load.audio("fluffy","src/sound/fluffy.mp3"),t.load.audio("fluffy2","src/sound/fluffy2.mp3"),t.load.audio("fluffy3","src/sound/fluffy3.mp3"),t.load.audio("fluffy4","src/sound/fluffy4.mp3"),t.load.audio("fluffy5","src/sound/fluffy5.mp3"),t.load.audio("tokenChest","src/sound/tokenChest.mp3"),t.load.audio("star","src/sound/star.mp3"),t.load.audio("nyui","src/sound/nyui.mp3"),t.load.audio("nyui2","src/sound/nyui2.mp3"),t.load.audio("fluffy_house","src/sound/fluffy_house.mp3"),t.load.audio("practice","src/sound/practice.mp3"),t.load.audio("piano_a","src/sound/piano_a.mp3"),t.load.audio("piano_b","src/sound/piano_b.mp3"),t.load.audio("piano_c","src/sound/piano_c.mp3"),t.load.audio("piano_d","src/sound/piano_d.mp3"),t.load.audio("piano_e","src/sound/piano_e.mp3"),t.load.audio("piano_f","src/sound/piano_f.mp3"),t.load.audio("piano_g","src/sound/piano_g.mp3"),t.load.audio("alp_dissolving","src/sound/alp_dissolving.mp3"),t.load.audio("alp_rising","src/sound/alp_rising.mp3"),t.load.audio("alp_stretching","src/sound/alp_stretching.mp3"),t.load.audio("alp_falling","src/sound/alp_falling.mp3"),t.load.audio("alp_flipping","src/sound/alp_flipping.mp3"),t.load.audio("alp_shrinking","src/sound/alp_shrinking.mp3"),t.load.audio("woodcube","src/sound/woodcube.mp3"),t.load.atlas("par_flares","src/particle/flares.png","src/particle/flares.json"),t.load.spritesheet("par_flowers","src/particle/flowers.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("par_stars","src/particle/stars.png",{frameWidth:200,frameHeight:191}),t.load.spritesheet("par_fluffys","src/particle/fluffy.png",{frameWidth:370,frameHeight:320}),t.load.spritesheet("par_glitter","src/particle/glitter.png",{frameWidth:370,frameHeight:320}),t.load.image("coin_color_ACA","src/png/coin_color_ACA.png"),t.load.image("coin_color_ASTR","src/png/coin_color_ASTR.png"),t.load.image("coin_color_BNB","src/png/coin_color_BNB.png"),t.load.image("coin_color_BTC","src/png/coin_color_BTC.png"),t.load.image("coin_color_BUSD","src/png/coin_color_BUSD.png"),t.load.image("coin_color_DAI","src/png/coin_color_DAI.png"),t.load.image("coin_color_DOT","src/png/coin_color_DOT.png"),t.load.image("coin_color_ETH","src/png/coin_color_ETH.png"),t.load.image("coin_color_GLMR","src/png/coin_color_GLMR.png"),t.load.image("coin_color_KSM","src/png/coin_color_KSM.png"),t.load.image("coin_color_LAY","src/png/coin_color_LAY.png"),t.load.image("coin_color_MATIC","src/png/coin_color_MATIC.png"),t.load.image("coin_color_SDN","src/png/coin_color_SDN.png"),t.load.image("coin_color_USDC","src/png/coin_color_USDC.png"),t.load.image("coin_color_USDT","src/png/coin_color_USDT.png"),array_image_tokenBall=["coin_color_ACA","coin_color_ASTR","coin_color_BNB","coin_color_BTC","coin_color_BUSD","coin_color_DAI","coin_color_DOT","coin_color_ETH","coin_color_GLMR","coin_color_KSM","coin_color_LAY","coin_color_MATIC","coin_color_SDN","coin_color_USDC","coin_color_USDT"],dic_tokenBall_img={ACA:"coin_color_ACA",ASTR:"coin_color_ASTR",BNB:"coin_color_BNB",BTC:"coin_color_BTC",BUSD:"coin_color_BUSD",DAI:"coin_color_DAI",DOT:"coin_color_DOT",ETH:"coin_color_ETH",GLMR:"coin_color_GLMR",KSM:"coin_color_KSM",LAY:"coin_color_LAY",MATIC:"coin_color_MATIC",SDN:"coin_color_SDN",USDC:"coin_color_USDC",USDT:"coin_color_USDT"},dic_tokenBall_contract={ACA:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",ASTR:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",BNB:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",BTC:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",BUSD:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",DAI:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",DOT:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",ETH:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",GLMR:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",KSM:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",LAY:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",MATIC:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",SDN:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",USDC:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",USDT:"0x6d315468D2457F541FA15c1275A5cDAF5f950622"}}function create(t){group_star=t.add.group(),group_update=t.add.group(),group_update.runChildUpdate=!0,group_info=t.add.group(),group_info2=t.add.group(),group_nyuinyui_ohana=t.add.group(),group_neonStar=t.add.group(),group_pet=t.add.group(),group_alp=t.add.group(),group_scoreMeter=t.add.group(),t.add.image(640,480,"back");let e,a,s=.7;for(achv_01=t.add.image(1155,568,"achv_01").setAlpha(s).setVisible(!1),achv_02=t.add.image(1190,595,"achv_02").setAlpha(s).setVisible(!1),achv_03=t.add.image(1248,660,"achv_03").setAlpha(s).setVisible(!1),achv_04=t.add.image(600,480,"achv_04").setAlpha(s).setVisible(!1),achv_05=t.add.image(632,489,"achv_05").setAlpha(s).setVisible(!1),achv_06=t.add.image(330,472,"achv_06").setAlpha(s).setVisible(!1),achv_07=t.add.image(285,472,"achv_07").setAlpha(s).setVisible(!1),achv_08=t.add.image(240,474,"achv_08").setAlpha(s).setVisible(!1),achv_09=t.add.image(310,420,"achv_09").setAlpha(s).setVisible(!1),achv_10=t.add.image(255,420,"achv_10").setAlpha(s).setVisible(!1),achv_11=t.add.image(1255,619,"achv_11").setAlpha(s).setVisible(!1),achv_12=t.add.image(1263,683,"achv_12").setAlpha(s).setVisible(!1),achv_13=t.add.image(1140,533,"achv_13").setAlpha(s).setVisible(!1),achv_14=t.add.image(1190,540,"achv_14").setAlpha(s).setVisible(!1),achv_15=t.add.image(365,408,"achv_15").setAlpha(s).setVisible(!1),achv_16=t.add.image(825,480,"achv_16").setAlpha(s).setVisible(!1),achv_17=t.add.image(1215,633,"achv_17").setAlpha(s).setVisible(!1),achv_18=t.add.image(836,448,"achv_18").setAlpha(s).setVisible(!1),achv_19=t.add.image(1232,580,"achv_19").setAlpha(s).setVisible(!1),achv_20=t.add.image(365,470,"achv_20").setAlpha(s).setVisible(!1),li_achv=[0,achv_01,achv_02,achv_03,achv_04,achv_05,achv_06,achv_07,achv_08,achv_09,achv_10,achv_11,achv_12,achv_13,achv_14,achv_15,achv_16,achv_17,achv_18,achv_19,achv_20],item_back_sandbox=t.add.image(640,480,"back_sandbox").setDepth(2),item_bear=t.add.sprite(1e3,400,"item_bear").setScale(.45).setDepth(2),item_table=t.add.sprite(600,870,"item_table").setOrigin(.5).setScale(.6).setDepth(2),item_misin=t.add.sprite(950,830,"item_misin").setOrigin(.5).setScale(.8).setDepth(2),item_tree0=t.add.sprite(100,400,"item_tree0").setOrigin(.5).setScale(.7).setDepth(450),item_tree1=t.add.sprite(100,400,"item_tree1").setOrigin(.5).setScale(.7).setDepth(452),item_tree2=t.add.sprite(100,400,"item_tree2").setOrigin(.5).setScale(.7).setDepth(451),item_tree3=t.add.sprite(100,400,"item_tree3").setOrigin(.5).setScale(.7).setDepth(450),item_tree1.visible=!1,item_tree2.visible=!1,item_tree3.visible=!1,item_gold1=t.add.sprite(130,750,"item_gold1").setOrigin(.5).setScale(.7).setDepth(750),item_gold2=t.add.sprite(130,750,"item_gold2").setOrigin(.5).setScale(.7).setDepth(751),item_gold3=t.add.sprite(130,750,"item_gold3").setOrigin(.5).setScale(.7).setDepth(752),item_gold1.visible=!1,item_gold2.visible=!1,item_gold3.visible=!1,t.anims.create({key:"wall_sticker_neon",frames:t.anims.generateFrameNumbers("item_wall_sticker_neon",{frames:[0,0,1,1,2,2]}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_right",frames:t.anims.generateFrameNumbers("murasaki_right",{start:0,end:3}),frameRate:2,repeat:-1}),t.anims.create({key:"murasaki_left",frames:t.anims.generateFrameNumbers("murasaki_left",{start:0,end:3}),frameRate:2,repeat:-1}),t.anims.create({key:"murasaki_sleeping",frames:t.anims.generateFrameNumbers("murasaki_sleeping",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_feeding",frames:t.anims.generateFrameNumbers("murasaki_feeding",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_feeding_happy_right",frames:t.anims.generateFrameNumbers("murasaki_feeding_happy_right",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_feeding_happy_left",frames:t.anims.generateFrameNumbers("murasaki_feeding_happy_left",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_crying",frames:t.anims.generateFrameNumbers("murasaki_crying",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_mining",frames:t.anims.generateFrameNumbers("murasaki_mining",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_hugging",frames:t.anims.generateFrameNumbers("murasaki_hugging",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_farming",frames:t.anims.generateFrameNumbers("murasaki_farming",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_grooming",frames:t.anims.generateFrameNumbers("murasaki_grooming",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_crafting",frames:t.anims.generateFrameNumbers("murasaki_crafting",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_working_left",frames:t.anims.generateFrameNumbers("murasaki_working_left",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_working_right",frames:t.anims.generateFrameNumbers("murasaki_working_right",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_click",frames:t.anims.generateFrameNumbers("murasaki_click",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_stone",frames:t.anims.generateFrameNumbers("murasaki_stone",{start:0,end:0}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_listning",frames:t.anims.generateFrameNumbers("murasaki_listning",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_neon_right",frames:t.anims.generateFrameNumbers("murasaki_neon_right",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_neon_left",frames:t.anims.generateFrameNumbers("murasaki_neon_left",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"mr_astar_right",frames:t.anims.generateFrameNumbers("mr_astar_right",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"mr_astar_left",frames:t.anims.generateFrameNumbers("mr_astar_left",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"mr_astar_meet",frames:t.anims.generateFrameNumbers("mr_astar_meet",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"ms_ether_right",frames:t.anims.generateFrameNumbers("ms_ether_right",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"ms_ether_left",frames:t.anims.generateFrameNumbers("ms_ether_left",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"ms_ether_meet",frames:t.anims.generateFrameNumbers("ms_ether_meet",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"dr_bitco_right",frames:t.anims.generateFrameNumbers("dr_bitco_right",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"dr_bitco_left",frames:t.anims.generateFrameNumbers("dr_bitco_left",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"dr_bitco_meet",frames:t.anims.generateFrameNumbers("dr_bitco_meet",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"item_musicbox_on",frames:t.anims.generateFrameNumbers("item_musicbox",{start:1,end:2}),frameRate:1,repeat:-1}),t.anims.create({key:"item_musicbox_off",frames:t.anims.generateFrameNumbers("item_musicbox",{start:0,end:0}),frameRate:1,repeat:-1}),t.anims.create({key:"item_crown",frames:t.anims.generateFrameNumbers("item_crown",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"murasaki_hungry",frames:t.anims.generateFrameNumbers("murasaki_hungry",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"item_switch_on",frames:t.anims.generateFrameNumbers("item_switch",{start:0,end:0}),frameRate:1,repeat:-1}),t.anims.create({key:"item_switch_off",frames:t.anims.generateFrameNumbers("item_switch",{start:1,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"item_nui",frames:t.anims.generateFrameNumbers("item_nui",{start:0,end:0}),frameRate:1,repeat:-1}),t.anims.create({key:"item_nui_alive",frames:t.anims.generateFrameNumbers("item_nui",{start:1,end:3}),frameRate:1,repeat:-1}),t.anims.create({key:"item_clock_anim_1",frames:t.anims.generateFrameNumbers("item_clock",{frames:[4,3,4,3,0]}),frameRate:1,repeat:0}),t.anims.create({key:"item_fishbowl_1",frames:t.anims.generateFrameNumbers("item_fishbowl_list",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"item_fishbowl_2",frames:t.anims.generateFrameNumbers("item_fishbowl_list",{start:2,end:3}),frameRate:1,repeat:-1}),t.anims.create({key:"item_fishbowl_3",frames:t.anims.generateFrameNumbers("item_fishbowl_list",{start:4,end:5}),frameRate:1,repeat:-1}),t.anims.create({key:"item_fishbowl_4",frames:t.anims.generateFrameNumbers("item_fishbowl_list",{start:6,end:7}),frameRate:1,repeat:-1}),t.anims.create({key:"item_fishbowl_5",frames:t.anims.generateFrameNumbers("item_fishbowl_list",{start:8,end:9}),frameRate:1,repeat:-1}),t.anims.create({key:"item_hammock",frames:t.anims.generateFrameNumbers("item_hammock_list",{start:1,end:2}),frameRate:1,repeat:-1}),t.anims.create({key:"item_lantern",frames:t.anims.generateFrameNumbers("item_lantern_list",{start:2,end:4}),frameRate:1,repeat:-1}),t.anims.create({key:"cat_sleeping",frames:t.anims.generateFrameNumbers("cats",{frames:[0,1]}),frameRate:1,repeat:-1}),t.anims.create({key:"cat_standing",frames:t.anims.generateFrameNumbers("cats",{frames:[2,3]}),frameRate:1,repeat:-1}),t.anims.create({key:"cat_standing_withMail",frames:t.anims.generateFrameNumbers("cats",{frames:[4,5]}),frameRate:1,repeat:-1}),t.anims.create({key:"cat_walking_right",frames:t.anims.generateFrameNumbers("cats",{frames:[6,7]}),frameRate:1,repeat:-1}),t.anims.create({key:"cat_walking_right_fast",frames:t.anims.generateFrameNumbers("cats",{frames:[6,7]}),frameRate:2,repeat:-1}),t.anims.create({key:"cat_walking_left",frames:t.anims.generateFrameNumbers("cats",{frames:[8,9]}),frameRate:1,repeat:-1}),t.anims.create({key:"cat_walking_left_fast",frames:t.anims.generateFrameNumbers("cats",{frames:[8,9]}),frameRate:2,repeat:-1}),t.anims.create({key:"cat_walking_right_withMail",frames:t.anims.generateFrameNumbers("cats",{frames:[10,11]}),frameRate:1,repeat:-1}),t.anims.create({key:"cat_walking_right_withMail_fast",frames:t.anims.generateFrameNumbers("cats",{frames:[10,11]}),frameRate:2,repeat:-1}),t.anims.create({key:"cat_walking_left_withMail",frames:t.anims.generateFrameNumbers("cats",{frames:[12,13]}),frameRate:1,repeat:-1}),t.anims.create({key:"cat_walking_left_withMail_fast",frames:t.anims.generateFrameNumbers("cats",{frames:[12,13]}),frameRate:2,repeat:-1}),t.anims.create({key:"cat_sleeping_withMail",frames:t.anims.generateFrameNumbers("cats",{frames:[14,15]}),frameRate:1,repeat:-1}),i=1;i<=12;i++){let w="fluffy_fluffier_"+("00"+i).slice(-2),v=[1+10*(i-1),1+10*(i-1),2+10*(i-1)];t.anims.create({key:w,frames:t.anims.generateFrameNumbers("fluffy_fluffys",{frames:v}),frameRate:1,repeat:-1})}for(i=1;i<=12;i++){let k="fluffy_fluffiest_"+("00"+i).slice(-2)+"_front",F=[3+10*(i-1),4+10*(i-1)];t.anims.create({key:k,frames:t.anims.generateFrameNumbers("fluffy_fluffys",{frames:F}),frameRate:1,repeat:-1})}for(i=1;i<=12;i++){let S="fluffy_fluffiest_"+("00"+i).slice(-2)+"_left",M=[5+10*(i-1),6+10*(i-1)];t.anims.create({key:S,frames:t.anims.generateFrameNumbers("fluffy_fluffys",{frames:M}),frameRate:2,repeat:-1})}for(i=1;i<=12;i++){let T="fluffy_fluffiest_"+("00"+i).slice(-2)+"_right",A=[7+10*(i-1),8+10*(i-1)];t.anims.create({key:T,frames:t.anims.generateFrameNumbers("fluffy_fluffys",{frames:A}),frameRate:2,repeat:-1})}t.anims.create({key:"nyui_moving_left",frames:t.anims.generateFrameNumbers("nyui_moving",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"nyui_moving_right",frames:t.anims.generateFrameNumbers("nyui_moving",{start:2,end:3}),frameRate:1,repeat:-1}),t.anims.create({key:"nyui_happy",frames:t.anims.generateFrameNumbers("nyui_happy",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"mogumogu",frames:t.anims.generateFrameNumbers("mogumogu",{start:0,end:1}),frameRate:1,repeat:-1}),t.anims.create({key:"ff_report",frames:t.anims.generateFrameNumbers("ff_reports",{frames:[0,1]}),frameRate:1,repeat:-1}),t.anims.create({key:"ff_report_close",frames:t.anims.generateFrameNumbers("ff_reports",{frames:[2,3]}),frameRate:1,repeat:-1}),t.anims.create({key:"practice_clarinet",frames:t.anims.generateFrameNumbers("practice_piano",{frames:[0,1]}),frameRate:1,repeat:-1}),t.anims.create({key:"practice_piano",frames:t.anims.generateFrameNumbers("practice_piano",{frames:[0,1]}),frameRate:1,repeat:-1}),t.anims.create({key:"practice_violin",frames:t.anims.generateFrameNumbers("practice_piano",{frames:[0,1]}),frameRate:1,repeat:-1}),t.anims.create({key:"practice_horn",frames:t.anims.generateFrameNumbers("practice_piano",{frames:[0,1]}),frameRate:1,repeat:-1}),t.anims.create({key:"practice_timpani",frames:t.anims.generateFrameNumbers("practice_piano",{frames:[0,1]}),frameRate:1,repeat:-1}),t.anims.create({key:"practice_cello",frames:t.anims.generateFrameNumbers("practice_piano",{frames:[0,1]}),frameRate:1,repeat:-1}),e=460,a=870,button_feeding=t.add.sprite(e,a,"button_feeding").setScale(.16).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>sound_button_on.play())).on("pointerdown",(()=>contract_feeding(summoner))).on("pointerover",(()=>sound_button_select.play())).on("pointerover",(()=>button_feeding.setTexture("button_feeding_pointerover"))).on("pointerout",(()=>button_feeding.setTexture("button_feeding"))),group_info.add(button_feeding),e=1150,a=400,button_grooming=t.add.sprite(e,a,"button_grooming_unable").setScale(.16).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>sound_button_on.play())).on("pointerdown",(()=>contract_grooming(summoner))).on("pointerover",(()=>sound_button_select.play())).on("pointerover",(()=>button_grooming.setTexture("button_grooming_pointerover"))).on("pointerout",(()=>button_grooming.setTexture("button_grooming"))).disableInteractive(),group_info.add(button_grooming),e=60,a=760,button_mining=t.add.sprite(e,a,"button_mining_unable").setScale(.16).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{if(sound_button_on.play(),happy>10&&satiety>10||"mining"==murasakisan.mode)contract_mining(summoner);else{let e="Too low Satiety or Happy...",i=t.add.text(25,808,e).setFontSize(20).setFontFamily("Arial").setFill("#ff1694");setTimeout((()=>{i.destroy()}),3e3,t)}})).on("pointerover",(()=>sound_button_select.play())).on("pointerover",(()=>button_mining.setTexture("button_mining_pointerover"))).on("pointerout",(()=>button_mining.setTexture("button_mining_enable"))).disableInteractive(),group_info.add(button_mining),icon_mining=t.add.sprite(e+55,a-22,"icon_ohana").setScale(.07).setVisible(!1),text_mining_calc=t.add.text(e+67,a-30,"",{font:"18px Arial",fill:"#000"}),group_info2.add(icon_mining),group_info.add(text_mining_calc),e=240,a=340,button_farming=t.add.sprite(e,a,"button_farming_unable").setScale(.16).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{if(sound_button_on.play(),happy>10&&satiety>10||"farming"==murasakisan.mode)contract_farming(summoner);else{let e="Too low Satiety or Happy...",i=t.add.text(130,390,e).setFontSize(20).setFontFamily("Arial").setFill("#ff1694");setTimeout((()=>{i.destroy()}),3e3,t)}})).on("pointerover",(()=>sound_button_select.play())).on("pointerover",(()=>button_farming.setTexture("button_farming_pointerover"))).on("pointerout",(()=>button_farming.setTexture("button_farming_enable"))).disableInteractive(),group_info.add(button_farming),icon_farming=t.add.sprite(e+55,a-20,"icon_kusa").setScale(.09).setVisible(!1),text_farming_calc=t.add.text(e+65,a-30,"",{font:"18px Arial",fill:"#000"}),group_info2.add(icon_farming),group_info.add(text_farming_calc),e=1240,a=35,button_levelup_unable_text=t.add.text(1080,70," Level cap in trial: Lv4 ",{font:"20px Arial",fill:"#ff0000",backgroundColor:"#ffeeee"}).setDepth(2001).setVisible(!1),button_levelup=t.add.sprite(e,a,"back_level").setScale(.11).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{sound_button_on.play(),"trial"==gamemode&&local_level>=4?(button_levelup_unable_text.visible=!0,setTimeout((()=>{button_levelup_unable_text.visible=!1}),3e3,t)):contract_level_up(summoner)})).on("pointerover",(()=>sound_button_select.play())).on("pointerover",(()=>button_levelup.setTexture("button_levelup_pointerover"))).on("pointerover",(()=>text_level.setText(""))).on("pointerout",(()=>button_levelup.setTexture("button_levelup_enable"))).on("pointerout",(()=>text_level.setText(local_level))).disableInteractive(),text_level=t.add.text(e,a+7,"0",{font:"bold 26px Verdana",fill:"#E5004F"}).setOrigin(.5),group_info.add(button_levelup),group_info.add(text_level),e=380,a=580,button_practice=t.add.sprite(e,a,"button_practice_unable").setScale(.16).setInteractive({useHandCursor:!0}).on("pointerover",(()=>sound_button_select.play())).on("pointerover",(()=>button_practice.setTexture("button_practice_pointerover"))).on("pointerout",(()=>button_practice.setTexture("button_practice_enable"))).disableInteractive().on("pointerdown",(()=>{0==local_practice_status?open_window_practice(t):(sound_button_on.play(),contract_stop_practice(summoner))})).setVisible(!1),group_info.add(button_practice),e=820,a=870,button_crafting_unable=t.add.sprite(e,a,"button_crafting_unable").setScale(.16).setDepth(3),group_info.add(button_crafting_unable),button_crafting_start=t.add.sprite(e,a,"button_crafting_start_off").on("pointerover",(()=>{sound_button_select.play(),button_crafting_start.setTexture("button_crafting_start_on")})).on("pointerout",(()=>{button_crafting_start.setTexture("button_crafting_start_off")})).on("pointerdown",(()=>{sound_button_on.play(),global_selected_crafting_item>0&&contract_start_crafting(summoner,global_selected_crafting_item)})).setScale(.16).setDepth(4).setInteractive({useHandCursor:!0}).setVisible(!1),group_info2.add(button_crafting_start),button_crafting_pause=t.add.sprite(e,a,"button_crafting_pause_off").on("pointerover",(()=>{sound_button_select.play(),button_crafting_pause.setTexture("button_crafting_pause_on")})).on("pointerout",(()=>{button_crafting_pause.setTexture("button_crafting_pause_off")})).on("pointerdown",(()=>{sound_button_on.play(),contract_pause_crafting(summoner)})).setScale(.16).setDepth(5).setInteractive({useHandCursor:!0}).setVisible(!1),group_info2.add(button_crafting_pause),button_crafting_complete=t.add.sprite(e,a,"button_crafting_complete_off").on("pointerover",(()=>{sound_button_select.play(),button_crafting_complete.setTexture("button_crafting_complete_on")})).on("pointerout",(()=>{button_crafting_complete.setTexture("button_crafting_complete_off")})).on("pointerdown",(()=>{sound_button_on.play(),contract_complete_crafting(summoner)})).setScale(.16).setDepth(6).setInteractive({useHandCursor:!0}).setVisible(!1),group_info2.add(button_crafting_complete),button_crafting_resume=t.add.sprite(e,a,"button_crafting_resume_off").on("pointerover",(()=>{sound_button_select.play(),button_crafting_resume.setTexture("button_crafting_resume_on")})).on("pointerout",(()=>{button_crafting_resume.setTexture("button_crafting_resume_off")})).on("pointerdown",(()=>{sound_button_on.play(),contract_resume_crafting(summoner)})).setScale(.16).setDepth(7).setInteractive({useHandCursor:!0}).setVisible(!1),group_info2.add(button_crafting_resume),button_crafting_cancel=t.add.sprite(e+250,a,"button_crafting_cancel_off").on("pointerover",(()=>{sound_button_select.play(),button_crafting_cancel.setTexture("button_crafting_cancel_on")})).on("pointerout",(()=>{button_crafting_cancel.setTexture("button_crafting_cancel_off")})).on("pointerdown",(()=>{sound_button_on.play(),contract_cancel_crafting(summoner)})).setScale(.16).setDepth(8).setInteractive({useHandCursor:!0}).setVisible(!1),group_info2.add(button_crafting_cancel),icon_crafting_ohana=t.add.sprite(e+58,a+13,"icon_ohana").setDepth(2e3).setScale(.07).setVisible(!1),group_info2.add(icon_crafting_ohana),icon_crafting_kusa=t.add.sprite(e+130,a+15,"icon_kusa").setDepth(2e3).setScale(.09).setVisible(!1),group_info2.add(icon_crafting_kusa),icon_crafting_time=t.add.sprite(e+58,a+42,"icon_clock").setDepth(2e3).setScale(.18).setVisible(!1),group_info2.add(icon_crafting_time),text_crafting_selected_item_ohana=t.add.text(e+72,a+5,"",{font:"18px Arial",fill:"#000",backgroundColor:"#ecd9ff"}).setDepth(2e3),group_info2.add(text_crafting_selected_item_ohana),text_crafting_selected_item_kusa=t.add.text(e+142,a+5,"",{font:"18px Arial",fill:"#000",backgroundColor:"#ecd9ff"}).setDepth(2e3),group_info2.add(text_crafting_selected_item_kusa),text_crafting_selected_item_heart=t.add.text(e+214,a+5,"",{font:"18px Arial",fill:"#000",backgroundColor:"#ecd9ff"}).setDepth(2e3),group_info2.add(text_crafting_selected_item_heart),text_crafting_selected_item_time=t.add.text(e+72,a+32,"",{font:"18px Arial",fill:"#000",backgroundColor:"#ecd9ff"}).setDepth(2e3),group_info2.add(text_crafting_selected_item_time),icon_crafting_time_remining=t.add.image(e+60,a+15,"icon_clock").setDepth(2e3).setScale(.2).setVisible(!1),group_info2.add(icon_crafting_time_remining),text_crafting_calc=t.add.text(e+75,a+5,"",{font:"18px Arial",fill:"#000",backgroundColor:"#ecd9ff"}).setDepth(2e3),group_info2.add(text_crafting_calc),text_select_item=t.add.text(e+50,a-30,">> Select Item <<",{font:"30px Arial",fill:"#000",backgroundColor:"#ecd9ff"}).setDepth(2e3).setFontSize(24).setFontFamily("Arial").setFill("#000000").setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{0==flag_window_craft&&0!=summoner&&(flag_window_craft=1,open_window_craft(t))})).on("pointerover",(()=>text_select_item.setStyle({fontSize:24,fontFamily:"Arial",fill:"#d19dff"}))).on("pointerout",(()=>text_select_item.setStyle({fontSize:24,fontFamily:"Arial",fill:"#000000"}))),group_info2.add(text_select_item),text_craft_item=t.add.text(e+50,a,"",{font:"18px Arial",fill:"#000"}).setDepth(2e3).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>open_window_craft(t))),group_info2.add(text_craft_item),icon_rotate=t.add.sprite(1235,900,"icon_rotate").setOrigin(.5).setScale(.075).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>sound_system.play())).on("pointerdown",(()=>{1280==t.sys.game.scale.gameSize._width?(t.scale.setGameSize(960,1280),t.cameras.main.rotation=90*Math.PI/180,t.cameras.main.centerOn(640,480)):(t.scale.setGameSize(1280,960),t.cameras.main.rotation=0,t.cameras.main.centerOn(640,480))})),group_info.add(icon_rotate),icon_home=t.add.sprite(1155,900,"icon_home").setOrigin(.5).setScale(.15).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>sound_system.play())).on("pointerdown",(()=>{window.location.href="./"})),group_info.add(icon_home),t.sound.pauseOnBlur=!1,bgm1=t.sound.add("bgm1",{volume:.1,loop:!0}),bgm2=t.sound.add("bgm2",{volume:.1,loop:!0}),bgm3=t.sound.add("bgm3",{volume:.1,loop:!0}),bgm_n1=t.sound.add("bgm_n1",{volume:.075,loop:!0}),sound_button_select=t.sound.add("button_select",{volume:.2}),sound_button_on=t.sound.add("button_on",{volume:.2}),sound_feeding=t.sound.add("feeding",{volume:.1}),sound_grooming=t.sound.add("grooming",{volume:.1}),sound_mining=t.sound.add("mining",{volume:.1}),sound_mining_during=t.sound.add("mining_during",{volume:.1}),sound_farming=t.sound.add("farming",{volume:.1}),sound_farming_during=t.sound.add("farming_during",{volume:.2}),sound_crafting=t.sound.add("crafting",{volume:.1}),sound_crafting_during=t.sound.add("crafting_during",{volume:.05}),sound_happy=t.sound.add("happy",{volume:.2}),sound_earn=t.sound.add("earn",{volume:.2}),sound_dice=t.sound.add("dice",{volume:.15}),sound_dice_impact=t.sound.add("dice_impact",{volume:.1}),sound_hat=t.sound.add("hat",{volume:.1}),sound_unhappy=t.sound.add("unhappy",{volume:.2}),sound_switch=t.sound.add("switch",{volume:.2}),sound_window_open=t.sound.add("window_open",{volume:.2}),sound_window_pointerover=t.sound.add("window_pointerover",{volume:.2}),sound_window_select=t.sound.add("window_select",{volume:.2}),sound_window_cancel=t.sound.add("window_cancel",{volume:.2}),sound_system=t.sound.add("system",{volume:.2}),sound_nui=t.sound.add("nui",{volume:.2}),sound_pad=t.sound.add("pad",{volume:.2}),sound_fireworks=t.sound.add("fireworks",{volume:.2}),sound_fireworks2=t.sound.add("fireworks2",{volume:.2}),sound_basket=t.sound.add("basket",{volume:.2}),sound_cat1=t.sound.add("cat1",{volume:.2}),sound_cat2=t.sound.add("cat2",{volume:.2}),sound_clock=t.sound.add("clock",{volume:.2}),sound_window=t.sound.add("window",{volume:.2}),sound_piano1=t.sound.add("piano1",{volume:.3}),sound_piano2=t.sound.add("piano2",{volume:.25}),sound_nainai1=t.sound.add("nainai1",{volume:.2}),sound_nainai2=t.sound.add("nainai2",{volume:.2}),sound_fluffy=t.sound.add("fluffy",{volume:.2}),sound_fluffy2=t.sound.add("fluffy2",{volume:.2}),sound_fluffy3=t.sound.add("fluffy3",{volume:.2}),sound_fluffy4=t.sound.add("fluffy4",{volume:.2}),sound_fluffy5=t.sound.add("fluffy5",{volume:.2}),sound_tokenChest=t.sound.add("tokenChest",{volume:.2}),sound_star=t.sound.add("star",{volume:.1}),sound_nyui=t.sound.add("nyui",{volume:.1}),sound_nyui2=t.sound.add("nyui2",{volume:.1}),sound_fluiffy_house=t.sound.add("fluffy_house",{volume:.1}),sound_practice=t.sound.add("practice",{volume:.1}),sound_piano_a=t.sound.add("piano_a",{volume:.02}),sound_piano_b=t.sound.add("piano_b",{volume:.02}),sound_piano_c=t.sound.add("piano_c",{volume:.02}),sound_piano_d=t.sound.add("piano_d",{volume:.02}),sound_piano_e=t.sound.add("piano_e",{volume:.02}),sound_piano_f=t.sound.add("piano_f",{volume:.02}),sound_piano_g=t.sound.add("piano_g",{volume:.02}),sound_dissolving=t.sound.add("alp_dissolving",{volume:.1}),sound_stretching=t.sound.add("alp_stretching",{volume:.1}),sound_rising=t.sound.add("alp_rising",{volume:.1}),sound_falling=t.sound.add("alp_falling",{volume:.1}),sound_flipping=t.sound.add("alp_flipping",{volume:.1}),sound_shrinking=t.sound.add("alp_shrinking",{volume:.1}),sound_woodcube=t.sound.add("woodcube",{volume:.2}),text_system_message=t.add.text(640,420,"",{font:"32px Arial",fill:"#000000",backgroundColor:"#ffffff",align:"center"}).setOrigin(.5).setDepth(2e3),text_summon=t.add.text(640,500,">> Summon Trial Murasaki-san <<",{font:"38px Arial",fill:"#E62E8B",backgroundColor:"#FDEFF5"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>open_window_summon(t))).on("pointerover",(()=>text_summon.setStyle({fontSize:38,fontFamily:"Arial",fill:"#0000ff"}))).on("pointerout",(()=>text_summon.setStyle({fontSize:38,fontFamily:"Arial",fill:"#E62E8B"}))),text_summon.visible=!1;let n="";n="trial"==gamemode?" >> Cure Petrification (Cost: free during trial) << ":" >> Cure Petrification (Cost: "+(local_price/10**18).toFixed(2)+" $ASTR) << ",text_curePetrification=t.add.text(640,480,n,{font:"28px Arial",fill:"#E62E8B",backgroundColor:"#FDEFF5"}).setOrigin(.5).setInteractive({useHandCursor:!0}).setDepth(2e3).on("pointerdown",(()=>contract_curePetrification(summoner))).on("pointerover",(()=>text_curePetrification.setStyle({fontSize:28,fontFamily:"Arial",fill:"#0000ff"}))).on("pointerout",(()=>text_curePetrification.setStyle({fontSize:28,fontFamily:"Arial",fill:"#E62E8B"}))),text_curePetrification.visible=!1;text_fps=t.add.text(5,955,"***",{font:"14px Arial",fill:"#303030"}).setOrigin(0,1).setDepth(200),text_sync_time=t.add.text(1275,955,"***",{font:"14px Arial",fill:"#727171"}).setOrigin(1).setDepth(2e3),text_wallet=t.add.text(1250,955,"***",{font:"14px Arial",fill:"#727171"}).setOrigin(1).setDepth(2e3),group_info.add(text_fps),group_info.add(text_sync_time),group_info.add(text_wallet),icon_satiety=t.add.sprite(30,25,"icon_satiety").setScale(.08).setDepth(2e3),bar_satiety_back=makeBar(t,55,15,16303532).setDepth(2e3),bar_satiety_back.scaleX=1,bar_satiety=makeBar(t,55,15,15073298).setDepth(2e3),bar_satiety.scaleX=0,text_satiety=t.add.text(60,16,"0%",{font:"17px Arial",fill:"#ffffff"}).setDepth(2e3),group_info.add(icon_satiety),group_info.add(bar_satiety_back),group_info.add(bar_satiety),group_info.add(text_satiety),icon_happy=t.add.sprite(245,25,"icon_happy").setScale(.08).setDepth(2e3),bar_happy_back=makeBar(t,270,15,16573114).setDepth(2e3),bar_happy_back.scaleX=1,bar_happy=makeBar(t,270,15,15964160).setDepth(2e3),bar_happy.scaleX=0,text_happy=t.add.text(275,16,"0%",{font:"17px Arial",fill:"#ffffff"}).setDepth(2e3),group_info.add(icon_happy),group_info.add(bar_happy_back),group_info.add(bar_happy),group_info.add(text_happy),icon_exp=t.add.text(440,15,"Exp:",{font:"18px Arial",fill:"#000"}).setDepth(2e3),bar_exp_back=makeBar(t,480,15,12307689).setDepth(2e3),bar_exp_back.scaleX=1,bar_exp=makeBar(t,480,15,26807).setDepth(2e3),bar_exp.scaleX=0;let o="";"undefined"!=typeof item_wreath?o+=" wallet boost: +"+(local_achv_onChain_score/100).toFixed(2)+"% \n":o+=" wallet boost: +"+(0).toFixed(2)+"% \n",o+=" twinkle boost: +"+(local_exp_rate_twinkle/100).toFixed(2)+"% \n",o+=" doll boost: +"+(active_nui_exp_rate/100).toFixed(2)+"% ",text_exp_boost=t.add.text(480,40,o,{font:"17px Arial",fill:"#000",backgroundColor:"#C6D8F4"}).setVisible(!1).setDepth(2e3),text_exp_boost_click=0,text_exp=t.add.text(485,16,"0 / 0",{font:"17px Arial",fill:"#ffffff"}).setDepth(2e3).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{let t="";"undefined"!=typeof item_wreath?t+=" wallet boost: +"+(local_achv_onChain_score/100).toFixed(2)+"% \n":t+=" wallet boost: +"+(0).toFixed(2)+"% \n",t+=" item boost: +"+(local_exp_rate_twinkle/100).toFixed(2)+"% \n",t+=" doll boost: +"+(active_nui_exp_rate/100).toFixed(2)+"% ",text_exp_boost.setText(t),text_exp_boost.setVisible(!0),text_exp_boost_click+=1;let e=text_exp_boost_click;setTimeout((()=>{e==text_exp_boost_click&&text_exp_boost.setVisible(!1)}),2e3)})),text_exp_earned=t.add.text(480,38,"",{font:"17px Arial",fill:"#000000"}).setDepth(2e3),text_exp_earned_count=0,group_info.add(icon_exp),group_info.add(bar_exp_back),group_info.add(bar_exp),group_info.add(text_exp),icon_ohana=t.add.sprite(668,23,"icon_ohana").setScale(.07).setDepth(2e3),text_coin=t.add.text(685,15,"Coin: 0",{font:"17px Arial",fill:"#000",backgroundColor:"#FFF200"}).setDepth(2e3),text_coin_earned=t.add.text(685,38,"",{font:"17px Arial",fill:"#000000"}).setDepth(2e3),text_coin_earned_count=0,group_info.add(icon_ohana),group_info.add(text_coin),icon_kusa=t.add.sprite(815,25,"icon_kusa").setScale(.09).setDepth(2e3),text_material=t.add.text(830,15,"Leaf: 0",{font:"17px Arial",fill:"#000",backgroundColor:"#D7E7AF"}).setDepth(2e3),text_material_earned=t.add.text(830,38,"",{font:"17px Arial",fill:"#000000"}).setDepth(2e3),text_material_earned_count=0,group_info.add(icon_kusa),group_info.add(text_material),icon_heart=t.add.sprite(960,21,"icon_heart").setScale(.08).setDepth(2e3),text_fluffy=t.add.text(1045,40,"",{font:"17px Arial",fill:"#000",backgroundColor:"#FDEEED"}).setOrigin(1,0).setVisible(!1).setDepth(2e3),text_heart_click=0,text_heart=t.add.text(975,15,"***",{font:"17px Arial",fill:"#000",backgroundColor:"#FDEEED"}).setDepth(2e3).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{text_fluffy.setVisible(!0),text_heart_click+=1;let t=text_heart_click;setTimeout((()=>{t==text_heart_click&&text_fluffy.setVisible(!1)}),2e3)})),group_info.add(icon_heart),group_info.add(text_heart),e=240,a=955,icon_tx=t.add.sprite(e,a,"coin_color_ASTR").setOrigin(0,1).setScale(.08).setDepth(2e3),text_tx=t.add.text(e+20,a,"",{font:"14px Arial",fill:"#303030"}).setOrigin(0,1).setDepth(2e3),group_tx=t.add.group(),group_tx.add(icon_tx),group_tx.add(text_tx),group_tx.setVisible(!1),e=85,a=100,item_kanban=t.add.sprite(85,100,"item_kanban").setScale(.4),text_kanban=t.add.text(e+2,a+17,"",{font:"17px Arial",fill:"#000000"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{game.scene.scenes[1].rexUI.edit(text_kanban)}),t).setDepth(2e3),text_mint_name=t.add.text(e+80,a-5,"[MINT NAME]",{font:"17px Arial",fill:"#000000"}).setInteractive({useHandCursor:!0}).on("pointerover",(()=>text_mint_name.setStyle({fontSize:17,fontFamily:"Arial",fill:"#ffff00"}))).on("pointerout",(()=>text_mint_name.setStyle({fontSize:17,fontFamily:"Arial",fill:"#000000"}))).on("pointerdown",(()=>{contract_mint_name(summoner,text_kanban.text),flag_name_minting=1})),icon_name_ohana=t.add.sprite(e+88,a+25,"icon_ohana").setScale(.05),text_name_ohana=t.add.text(e+100,a+17,"100",{font:"17px Arial",fill:"#000000"}),icon_name_kusa=t.add.sprite(e+140,a+25,"icon_kusa").setScale(.07),text_name_kusa=t.add.text(e+150,a+17,"100",{font:"17px Arial",fill:"#000000"}),text_id=t.add.text(e-45,a+32,"#100",{font:"14px Arial",fill:"#000000"}),text_age_time=t.add.text(e+10,a+32,"***",{font:"14px Arial",fill:"#000000"});let _="";_+=" Flower:                                 \n",_+=" Birthplace:                             \n",_+=" Personality:                            \n",_+=" Character:                              \n",_+=" Weakpoint:                              ";let r="                       "+local_flower,l="\n                       "+local_birthplace,m="\n\n                       "+local_personality,c="\n\n\n                       "+local_character,d="\n\n\n\n                       "+local_weakpoint,g=t.add.text(e-70,a+60," Flower:                                 \n Birthplace:                             \n Personality:                            \n Character:                              \n Weakpoint:                              ",{font:"18px Arial",fill:"#000000",backgroundColor:"#ffffff"}),h=t.add.text(e-70,a+60,r,{font:"18px Arial",fill:{Rose:"#E60012",Marigold:"#F39800",Dandelion:"#FFF100",Rosemary:"#8FC31F",Olive:"#009944",Holly:"#009E96",Nemophila:"#00A0E9",Hydrangea:"#0068B7","Forget-me-not":"#1D2088",Sumire:"#920783",Gerbera:"#E4007F",Anemone:"#E5004F"}[local_flower]}),u=t.add.text(e-70,a+60,l,{font:"18px Arial",fill:{"Fluffy Wweater":"#EB6100","Fluffy Blanket":"#F39800","Fluffy Carpet":"#FCC800","Fluffy Cushion":"#FFF100","Fluffy Scarf":"#CFDB00","Fluffy Towel":"#8FC31F"}[local_birthplace]}),p=t.add.text(e-70,a+60,m,{font:"18px Arial",fill:{Friendly:"#EB6100",Reliable:"#F39800",Frisky:"#FCC800",Thoughtful:"#FFF100",Easygoing:"#CFDB00",Tolerant:"#8FC31F",Affectionate:"#22AC38",Intelligent:"#009944",Faithful:"#009B6B",Innocent:"#009E96",Gentle:"#00A0C1",Cheerful:"#00A0E9"}[local_personality]}),f=t.add.text(e-70,a+60,c,{font:"18px Arial",fill:{Diligent:"#EB6100",Optimist:"#F39800",Realist:"#FCC800",Ethical:"#FFF100",Sensitive:"#CFDB00",Adventurous:"#8FC31F",Compassionate:"#22AC38",Empathetic:"#009944",Patient:"#009B6B",Courageous:"#009E96",Honest:"#00A0C1"}[local_character]}),y=t.add.text(e-70,a+60,d,{font:"18px Arial",fill:{"a bit Moody":"#EB6100","a bit Lonely":"#F39800","a bit Sleeper":"#FCC800","a bit Nervous":"#FFF100","a bit Competitive":"#CFDB00","a bit Obstinate":"#8FC31F","a bit Forgetful":"#22AC38","a bit Perfectionist":"#009944","a bit Shy":"#009B6B","a bit Tomboy":"#009E96"}[local_weakpoint]});if(group_lootlike=t.add.group(),group_lootlike.add(g),group_lootlike.add(h),group_lootlike.add(u),group_lootlike.add(p),group_lootlike.add(f),group_lootlike.add(y),group_lootlike.setVisible(!1),group_lootlike.setDepth(2e3),item_kanban_click=0,item_kanban.setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{item_kanban_click+=1;let t=item_kanban_click;group_lootlike.setVisible(!0),setTimeout((()=>{item_kanban_click==t&&group_lootlike.setVisible(!1)}),5e3)})),group_kanban=t.add.group(),group_kanban.add(item_kanban),group_kanban.add(text_kanban),group_kanban.add(text_id),group_kanban.add(text_age_time),group_kanban.setVisible(!1),group_mint_name=t.add.group(),group_mint_name.add(text_mint_name),group_mint_name.add(icon_name_ohana),group_mint_name.add(text_name_ohana),group_mint_name.add(icon_name_kusa),group_mint_name.add(text_name_kusa),group_mint_name.setVisible(!1),1==local_mining_status?(murasakisan=new Murasakisan(t,100,880).setOrigin(.5).setScale(.45),murasakisan.set_mode="mining",murasakisan.submode=2,murasakisan.count=0,murasakisan.target_x=100,murasakisan.target_y=880,update_mining_perDay(summoner)):1==local_farming_status?(murasakisan=new Murasakisan(t,180,450).setOrigin(.5).setScale(.45),murasakisan.set_mode="farming",murasakisan.submode=2,murasakisan.count=0,murasakisan.target_x=180,murasakisan.target_y=450,update_farming_perDay(summoner)):1==local_crafting_status?(murasakisan=new Murasakisan(t,950,740).setOrigin(.5).setScale(.45),murasakisan.set_mode="crafting",murasakisan.submode=2,murasakisan.count=0,murasakisan.target_x=950,murasakisan.target_y=740,create_item_indicator(t,local_crafting_item_type)):1==local_practice_status?(murasakisan=new Murasakisan(t,640,640).setOrigin(.5).setScale(.45),murasakisan.set_mode="practice",murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=650,murasakisan.target_y=650):murasakisan=new Murasakisan(t,500+200*Math.random(),640+100*Math.random()).setOrigin(.5).setScale(.45),group_update.add(murasakisan),scene_main=murasakisan.scene,t.input.on("pointermove",((e,i)=>{1280==t.sys.game.scale.gameSize._width?(pointer_x=game.input.activePointer.x,pointer_y=game.input.activePointer.y):(pointer_x=game.input.activePointer.y,pointer_y=960-game.input.activePointer.x)})),t.input.on("pointerdown",(()=>{1280==t.sys.game.scale.gameSize._width?(pointer_x=game.input.activePointer.x,pointer_y=game.input.activePointer.y):(pointer_x=game.input.activePointer.y,pointer_y=960-game.input.activePointer.x),console.log(Math.round(pointer_x),Math.round(pointer_y)),draw_star(t,pointer_x,pointer_y)})),local_level>=3&&wallet==local_owner&&(nyuinyui=new Nyuinyui(t,800,850,"nyui_moving").setOrigin(.5).setScale(.25).setAlpha(.8).setDepth(5002).setVisible(!1),group_update.add(nyuinyui)),1==flag_firstCelebration&"regular"==gamemode&&(firstCelebration(t),localStorage.setItem("flag_firstCelebration",0)),"trial"==gamemode){function x(e){let i,a,s,n,o,_,r,l;"feeding"==e?(a=600,s=870,i="flag_beginingBox_feeding_",n=button_feeding,r=item_table,l=">> Click to Open <<\n   Start Feeding!"):"grooming"==e?(a=1e3,s=520,i="flag_beginingBox_grooming_",n=button_grooming,r=item_bear,l=">> Click to Open <<\n   Start Grooming!"):"mining"==e?(a=100,s=850,i="flag_beginingBox_mining_",n=button_mining,r=item_back_sandbox,l="Required Lv:2"):"farming"==e?(a=110,s=500,i="flag_beginingBox_farming_",n=button_farming,r=item_tree0,l="Required Lv:2"):"crafting"==e&&(a=930,s=850,i="flag_beginingBox_crafting_",n=button_crafting_unable,r=item_misin,l="Required Lv:3"),null==localStorage.getItem(i+summoner)&&murasakisan.mode!=e&&(r.visible=!1,n.visible=!1,"crafting"==e&&(text_select_item.visible=!1),o=t.add.sprite(a,s,"item_box").setOrigin(.5).setDepth(2).setScale(.12).on("pointerdown",(()=>{if(0==summoner)return 0;_.destroy(),o.disableInteractive();let l=makeMiniProgressBar(t,a-20-2,s-2,44,14,15522303),m=makeMiniProgressBar(t,a-20,s,40,10,12088052);m.scaleX=0,function _(){m.scaleX+=.005,m.scaleX<1?setTimeout((()=>{_()}),10):(sound_hat.play(),draw_flower3(t,a,s-20),r.visible=!0,o.destroy(),murasakisan.on_click(),n.visible=!0,l.destroy(),m.destroy(),"crafting"==e&&(text_select_item.visible=!0),localStorage.setItem(i+summoner,"1"))}()})),_=t.add.text(a,s+30,l,{font:"Bold 17px Arial",fill:"#0000ff",backgroundColor:"#E3E3E3"}).setDepth(3).setOrigin(.5),"feeding"==e?(o.setInteractive({useHandCursor:!0}),beginingBox_feeding=o,beginingBox_feeding_text=_):"grooming"==e?(o.setInteractive({useHandCursor:!0}),beginingBox_grooming=o,beginingBox_grooming_text=_):"mining"==e?(beginingBox_mining=o,beginingBox_mining_text=_):"farming"==e?(beginingBox_farming=o,beginingBox_farming_text=_):"crafting"==e&&(beginingBox_crafting=o,beginingBox_crafting_text=_))}summon_trial(t),x("feeding"),x("grooming"),x("mining"),x("farming"),x("crafting"),0==summoner&&(beginingBox_feeding.visible=!1,beginingBox_grooming.visible=!1,beginingBox_mining.visible=!1,beginingBox_farming.visible=!1,beginingBox_crafting.visible=!1,beginingBox_feeding_text.visible=!1,beginingBox_grooming_text.visible=!1,beginingBox_mining_text.visible=!1,beginingBox_farming_text.visible=!1,beginingBox_crafting_text.visible=!1)}function b(t){let e=[];for(let i=0;i<local_myListsAt_withItemTypeAndSubtype.length;i+=3){let a=local_myListsAt_withItemTypeAndSubtype[i+1],s=local_myListsAt_withItemTypeAndSubtype[i+2];a==t&&e.push(s)}return e}if("trial"!=gamemode){let C=0;for(let I=251;I<=255;I++)if(local_items[I]>0){let H=b(I);for(let D=0;D<H.length;D++){let O=H[D];summon_twinkles(t,"twinkle",O,150+20*C,560),C+=1}}for(let N=256;N<=260;N++)if(local_items[N]>0){let P=b(N);for(let B=0;B<P.length;B++){let R=P[B];summon_twinkles(t,"sparkle",R,150+20*C,560),C+=1}}for(let E=261;E<=265;E++)if(local_items[E]>0){let V=b(E);for(let L=0;L<V.length;L++){let z=V[L];summon_twinkles(t,"glitter",z,150+20*C,560),C+=1}}summon_twinkles(t,"twinkle",1,200+800*Math.random(),520+200*Math.random()),summon_twinkles(t,"sparkle",1,200+800*Math.random(),520+200*Math.random())}}function protection_code(t){if("murasaki-san.com"!=location.hostname&&"www.murasaki-san.com"!=location.hostname)for(;;){const t=new Date;for(;;){if(new Date-t>2e3)break}}}function update_systemMessage(t){0==summoner?(text_system_message.setText(" --- You have not summoned Murasaki-san yet --- "),text_summon.visible=!0,murasakisan.visible=!1):0==local_isActive?text_system_message.setText(" --- This Murasaki-san is not Available --- "):0==local_notPetrified?(text_system_message.setText(" --- This Murasaki-san has been Petrified --- "),text_curePetrification.visible=!0):(text_system_message.setText(""),text_summon.visible=!1,text_curePetrification.visible=!1,murasakisan.visible=!0)}function update_syncTime(t){if(0==last_sync_time)text_sync_time.setText("##"),text_sync_time.setColor("#ff0000");else{let t=Math.round((Date.now()-last_sync_time)/1e3);t>99&&(t=99),text_sync_time.setText(("00"+t).slice(-2)),t>=30?text_sync_time.setColor("#ff0000"):text_sync_time.setColor("#727171")}}function update_numericAnimation(t){if(0!=screen_coin_delta){let t=(100-screen_coin_easing)/100;if(t<1){let e=1-Math.pow(1-t,4),i=screen_coin+screen_coin_delta*e;text_coin.setText("Coin: "+Math.round(i)),screen_coin_easing-=1}else text_coin.setText("Coin: "+local_coin),screen_coin_delta=0}if(0!=screen_material_delta){let t=(100-screen_material_easing)/100;if(t<1){let e=1-Math.pow(1-t,4),i=screen_material+screen_material_delta*e;text_material.setText("Leaf: "+Math.round(i)),screen_material_easing-=1}else text_material.setText("Leaf: "+local_material),screen_material_delta=0}if(0!=screen_exp_delta){let t=(100-screen_exp_easing)/100;if(t<1){let e=1-Math.pow(1-t,4),i=screen_exp+screen_exp_delta*e;text_exp.setText(Math.round(i)+" / "+local_next_exp_required);let a=i/local_next_exp_required*100;bar_exp.scaleX=a/100,screen_exp_easing-=1}else{local_exp>local_next_exp_required?(text_exp.setText(local_next_exp_required+" / "+local_next_exp_required),screen_exp=local_next_exp_required):(text_exp.setText(local_exp+" / "+local_next_exp_required),screen_exp=local_exp);let t=local_exp/local_next_exp_required*100;t>100&&(t=100),bar_exp.scaleX=t/100,screen_exp_delta=0}}if(0!=screen_satiety_delta){let t=(100-screen_satiety_easing)/100;if(t<1){let e=1-Math.pow(1-t,4),i=screen_satiety+screen_satiety_delta*e;text_satiety.setText(Math.round(i)+"%"),screen_satiety_easing-=1,bar_satiety.scaleX=i/100}else text_satiety.setText(Math.round(satiety)+"%"),bar_satiety.scaleX=satiety/100,screen_satiety_delta=0}if(0!=screen_happy_delta){let t=(100-screen_happy_easing)/100;if(t<1){let e=1-Math.pow(1-t,4),i=screen_happy+screen_happy_delta*e;text_happy.setText(Math.round(i)+"%"),screen_happy_easing-=1,bar_happy.scaleX=i/100}else text_happy.setText(Math.round(happy)+"%"),bar_happy.scaleX=happy/100,screen_happy_delta=0}}function update_parametersWithAnimation(t){if(previous_local_coin!=local_coin&&(screen_coin=previous_local_coin,screen_coin_delta=local_coin-previous_local_coin,screen_coin_easing=100,count_sync>5)){let t=local_coin-previous_local_coin,e="";t>0&&(e="+"),t>=1.8*last_local_coin_calc&&last_local_coin_calc>0?(text_coin_earned.setText(e+t+" lucky♪"),text_coin_earned.setColor("#0000ff")):(text_coin_earned.setText(e+t),text_coin_earned.setColor("#000000")),text_coin_earned_count=5}if(text_coin_earned_count>0&&(text_coin_earned_count-=1,0==text_coin_earned_count&&text_coin_earned.setText("")),previous_local_material!=local_material&&(screen_material=previous_local_material,screen_material_delta=local_material-previous_local_material,screen_material_easing=100,count_sync>5)){let t=local_material-previous_local_material,e="";t>0&&(e="+"),t>=1.8*last_local_material_calc&&last_local_material_calc>0?(text_material_earned.setText(e+t+" lucky♪"),text_material_earned.setColor("#0000ff")):(text_material_earned.setText(e+t),text_material_earned.setColor("#000000")),text_material_earned_count=5}if(text_material_earned_count>0&&(text_material_earned_count-=1,0==text_material_earned_count&&text_material_earned.setText("")),previous_local_exp!=local_exp&&screen_exp<local_next_exp_required&&(screen_exp=previous_local_exp,local_exp>local_next_exp_required?screen_exp_delta=local_next_exp_required-previous_local_exp:screen_exp_delta=local_exp-previous_local_exp,screen_exp_easing=100,count_sync>5)){let t=local_exp-previous_local_exp,e="";t>0&&(e="+");let i=0;local_satiety>previous_satiety&&(i+=last_local_calc_feeding),local_happy>previous_happy&&(i+=last_local_calc_grooming),i+=i*local_achv_onChain_score/100,i+=i*local_exp_rate_twinkle/100,i+=i*active_nui_exp_rate/100,i+100<t?(text_exp_earned.setText(e+t+" lucky♪"),text_exp_earned.setColor("#0000ff")):(text_exp_earned.setText(e+t),text_exp_earned.setColor("#000000")),text_exp_earned_count=5}text_exp_earned_count>0&&(text_exp_earned_count-=1,0==text_exp_earned_count&&text_exp_earned.setText("")),satiety=local_satiety,satiety<0&&(satiety=0),satiety>100&&(satiety=100),satiety!=previous_satiety&&(screen_satiety=previous_satiety,screen_satiety_delta=satiety-previous_satiety,screen_satiety_easing=100),happy=local_happy,happy<0&&(happy=0),happy>100&&(happy=100),happy!=previous_happy&&(screen_happy=previous_happy,screen_happy_delta=happy-previous_happy,screen_happy_easing=100),previous_happy=happy,previous_satiety=satiety,previous_local_coin=local_coin,previous_local_material=local_material,previous_local_exp=local_exp,last_local_coin_calc=local_coin_calc,last_local_material_calc=local_material_calc,last_local_calc_feeding=local_calc_feeding,last_local_calc_grooming=local_calc_grooming}function update_parametersWithoutAnimation(t){Date.now();let e,i=Math.round(local_age*SPEED/86400);if(text_age_time.setText(("0000"+i).slice(-4)+"d"),"button_levelup_pointerover"!=button_levelup.texture.key&&text_level.setText(local_level),text_heart.setText("Fluffy: "+local_precious),1==local_mining_status?e="mining":1==local_farming_status?e="farming":1==local_crafting_status&&(e="crafting"),"mining"==e)1==flag_info&&(icon_mining.visible=!0),text_mining_calc.setText(" +"+local_coin_calc+" Coin\n  ("+local_mining_perDay+" /day)"),local_coin_calc>=500&&(item_gold1.visible=!0),local_coin_calc>=1e3&&(item_gold2.visible=!0),local_coin_calc>=2e3&&(item_gold3.visible=!0);else if("farming"==e)1==flag_info&&(icon_farming.visible=!0),text_farming_calc.setText(" +"+local_material_calc+" Leaf\n  ("+local_farming_perDay+" /day)"),local_material_calc>=500&&(item_tree0.visible=!1,item_tree1.visible=!0,item_tree2.visible=!1,item_tree3.visible=!1),local_material_calc>=1e3&&(item_tree0.visible=!1,item_tree1.visible=!1,item_tree2.visible=!0,item_tree3.visible=!1),local_material_calc>=2e3&&(item_tree0.visible=!1,item_tree1.visible=!1,item_tree2.visible=!1,item_tree3.visible=!0);else if("crafting"==e)if(1==flag_info&&(icon_crafting_time_remining.visible=!0,text_crafting_calc.visible=!0),text_crafting_selected_item_ohana.setText(""),text_crafting_selected_item_kusa.setText(""),text_crafting_selected_item_time.setText(""),text_crafting_selected_item_heart.setText(""),icon_crafting_ohana.visible=!1,icon_crafting_kusa.visible=!1,icon_crafting_time.visible=!1,text_select_item.setText('"'+dic_items_reverse[local_crafting_item_type]+'"'),0==local_crafting_calc)text_crafting_calc.setText("Completed!").setFill("#FF0000");else if(-1==local_crafting_calc)text_crafting_calc.setText("Calculating...").setFill("#0000FF");else{let t=local_crafting_calc,e=Math.floor(t/86400),i=Math.floor(t%86400/3600),a=Math.floor(t%3600/60);text_crafting_calc.setText(e+"d:"+i+"h:"+a+"m").setFill("#0000FF")}else if(1==button_crafting_resume.visible&&1==flag_info){text_select_item.setText('"'+dic_items_reverse[local_crafting_resume_item_type]+'"'),icon_crafting_time_remining.visible=!0;let t=local_crafting_calc,e=Math.floor(t/86400),i=Math.floor(t%86400/3600),a=Math.floor(t%3600/60);text_crafting_calc.visible=!0,text_crafting_calc.setText(e+"d:"+i+"h:"+a+"m").setFill("#0000FF")}else text_mining_calc.setText(""),text_farming_calc.setText(""),text_crafting_calc.setText("");1!=local_mining_status&&(icon_mining.visible=!1,item_gold1.visible=!1,item_gold2.visible=!1,item_gold3.visible=!1),1==local_farming_status||"undefined"!=typeof beginingBox_farming&&void 0!==beginingBox_farming.scene||(icon_farming.visible=!1,item_tree0.visible=!0,item_tree1.visible=!1,item_tree2.visible=!1,item_tree3.visible=!1),1!=local_crafting_status&&1!=local_crafting_resume_flag&&(icon_crafting_time_remining.visible=!1);let a=local_owner.substring(0,5),s=local_owner.slice(-4),n="";local_owner==local_wallet||"0x0000000000000000000000000000000000000000"==local_owner?("regular"==gamemode?n+="House #"+summoner+", ":"trial"==gamemode&&(n+="House #"+summoner+" (Trial), "),n+=a+"..."+s+", ",n+=local_street+", "+local_city+", ",n+="Astar EVM, Polkadot, WEB3. ("+local_house_price+" $ASTR)",text_wallet.setText(n),"regular"==gamemode?text_wallet.setColor("#FF4264"):"trial"==gamemode&&text_wallet.setColor("green")):(n+="House #"+summoner+", ",n+=a+"..."+s+", ",n+=local_street+", "+local_city+", ",n+="Astar EVM, Polkadot, WEB3. ("+local_house_price+" $ASTR)",n+=" (not owner)",text_wallet.setText(n),text_wallet.setColor("blue")),previous_local_rolled_dice!=local_rolled_dice&&1==flag_radarchart&&draw_radarchart(t),previous_local_rolled_dice=local_rolled_dice,previous_local_precious=local_precious}function update_checkModeChange(t){if(0==local_notPetrified)murasakisan.set_mode="petrified";else if(local_level>previous_local_level)count_sync>=3&&1==local_level?(draw_firework(t),murasakisan.on_click(),summon_sentence(t,"welcome aboard!")):count_sync>=3&&local_level>=2&&(draw_firework(t),murasakisan.on_click(),summon_sentence(t,"level up! congrats!")),1==flag_radarchart&&draw_radarchart(t),2==local_level&&(button_mining.setTexture("button_mining_enable"),button_mining.on("pointerover",(()=>button_mining.setTexture("button_mining_pointerover"))),button_mining.on("pointerout",(()=>button_mining.setTexture("button_mining_enable"))),button_mining.setInteractive(),button_farming.setTexture("button_farming_enable"),button_farming.on("pointerover",(()=>button_farming.setTexture("button_farming_pointerover"))),button_farming.on("pointerout",(()=>button_farming.setTexture("button_farming_enable"))),button_farming.setInteractive());else if(local_last_feeding_time>previous_local_last_feeding_time){murasakisan.set_mode="feeding",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=600,murasakisan.target_y=820,"undefined"!=typeof group_food&&group_food.destroy(!0),group_food=t.add.group(),item_potato=t.add.sprite(600,850,"item_food_potato").setScale(.12).setOrigin(.5),item_potato.depth=850,group_food.add(item_potato);{let e=dic_items["Choco Bread"].item_id;(local_items[e]>0||local_items[e+64]>0||local_items[e+128]>0)&&(item_pancake=t.add.sprite(635,850,"item_food_bread").setScale(.2).setOrigin(.5),item_pancake.depth=850,group_food.add(item_pancake))}{let e=dic_items.Onigiri.item_id;(local_items[e]>0||local_items[e+64]>0||local_items[e+128]>0)&&(item_pancake=t.add.sprite(565,850,"item_food_onigiri").setScale(.1).setOrigin(.5),item_pancake.depth=850,group_food.add(item_pancake))}{let e=dic_items.Pancake.item_id;(local_items[e]>0||local_items[e+64]>0||local_items[e+128]>0)&&(item_pancake=t.add.sprite(575,822,"item_food_pancake").setScale(.2).setOrigin(.5),item_pancake.depth=822,group_food.add(item_pancake))}{let e=dic_items.Cake.item_id;(local_items[e]>0||local_items[e+64]>0||local_items[e+128]>0)&&(item_pancake=t.add.sprite(625,822,"item_food_cake").setScale(.15).setOrigin(.5),item_pancake.depth=822,group_food.add(item_pancake))}setTimeout((()=>{group_food.destroy(!0)}),3e4),sound_feeding.play()}else if(local_last_grooming_time>previous_local_last_grooming_time)murasakisan.set_mode="grooming",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=1e3,murasakisan.target_y=450,sound_grooming.play();else if(1==local_mining_status&&"mining"!=murasakisan.mode&&"feeding"!=murasakisan.mode&&"grooming"!=murasakisan.mode&&"sleeping"!=murasakisan.mode&&"hammock"!=murasakisan.mode&&murasakisan.exemption_resting_count<=0&&local_happy>0)murasakisan.set_mode="mining",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=100,murasakisan.target_y=880,sound_mining.play(),update_mining_perDay(summoner);else if(0==local_mining_status&&"mining"==murasakisan.mode)murasakisan.set_mode="hugging",icon_mining.visible=!1,sound_earn.play(),local_coin_calc=0;else if(1==local_farming_status&&"farming"!=murasakisan.mode&&"feeding"!=murasakisan.mode&&"grooming"!=murasakisan.mode&&"sleeping"!=murasakisan.mode&&"hammock"!=murasakisan.mode&&murasakisan.exemption_resting_count<=0&&local_happy>0)murasakisan.set_mode="farming",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=180,murasakisan.target_y=450,sound_farming.play(),update_farming_perDay(summoner);else if(0==local_farming_status&&"farming"==murasakisan.mode)murasakisan.set_mode="hugging",icon_farming.visible=!1,sound_earn.play(),local_material_calc=0;else if(1==local_crafting_status&&"crafting"!=murasakisan.mode&&"feeding"!=murasakisan.mode&&"grooming"!=murasakisan.mode&&"sleeping"!=murasakisan.mode&&"hammock"!=murasakisan.mode&&murasakisan.exemption_resting_count<=0&&local_happy>0&&local_crafting_calc>0)murasakisan.set_mode="crafting",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=950,murasakisan.target_y=740,text_select_item.setText('"'+dic_items_reverse[local_crafting_item_type]+'"'),sound_crafting.play(),local_crafting_calc=-1,"undefined"!=typeof group_item_indicator&&void 0!==group_item_indicator.scene||create_item_indicator(t,local_crafting_item_type);else if(0==local_crafting_status&&"crafting"==murasakisan.mode){0==local_crafting_resume_flag?(murasakisan.set_mode="hugging",text_select_item.setText(">> Select Item <<"),icon_crafting_time_remining.visible=!1,sound_earn.play(),flag_item_update=1):murasakisan.set_mode="resting";try{group_item_indicator.destroy(!0)}catch(t){}}else if("crafting"==murasakisan.mode){if("undefined"!=typeof item_indicator&&("undefined"==typeof item_indicator_bar||void 0===item_indicator_bar.scene)){let e=item_indicator.x-20,i=item_indicator.y+item_indicator.height*item_indicator.scaleY*.8/2,a=makeMiniProgressBar(t,e-2,i-2,44,14,15522303);item_indicator_bar=makeMiniProgressBar(t,e,i,40,10,12088052),item_indicator_bar.scaleX=.01,group_item_indicator.add(a),group_item_indicator.add(item_indicator_bar)}update_item_indicator_bar()}else if(1==local_practice_status&&"practice"!=murasakisan.mode&&"feeding"!=murasakisan.mode&&"grooming"!=murasakisan.mode&&"sleeping"!=murasakisan.mode&&"hammock"!=murasakisan.mode)murasakisan.set_mode="practice",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=640,murasakisan.target_y=650,sound_crafting.play();else if(0==local_practice_status&&"practice"==murasakisan.mode){let t=get_itemType(local_myListsAt_withItemType,previous_local_practice_item_id);t==dic_items.Clarinet.item_id?item_clarinet.visible=!0:t==dic_items.Piano.item_id?item_piano.visible=!0:t==dic_items.Violin.item_id&&(item_violin.visible=!0),murasakisan.item_practice.destroy(),murasakisan.set_mode="hugging"}previous_local_last_feeding_time=local_last_feeding_time,previous_local_last_grooming_time=local_last_grooming_time,previous_local_level=local_level,previous_local_practice_item_id=local_practice_item_id}function update_checkButtonActivation(t){if(1==local_farming_status||1==local_crafting_status||1==local_mining_status||1==local_practice_status||0==summoner||wallet!=local_owner?(button_grooming.setTexture("button_grooming_unable"),button_grooming.disableInteractive()):(button_grooming.setTexture("button_grooming_enable"),button_grooming.on("pointerover",(()=>button_grooming.setTexture("button_grooming_pointerover"))),button_grooming.on("pointerout",(()=>button_grooming.setTexture("button_grooming_enable"))),button_grooming.setInteractive()),1==local_farming_status||1==local_crafting_status||1==local_practice_status||local_level<=1||wallet!=local_owner?(button_mining.setTexture("button_mining_unable"),button_mining.disableInteractive()):1==local_mining_status?(button_mining.setTexture("button_mining_working"),button_mining.on("pointerover",(()=>button_mining.setTexture("button_mining_pointerover_stop"))),button_mining.on("pointerout",(()=>button_mining.setTexture("button_mining_working"))),button_mining.setInteractive()):(button_mining.setTexture("button_mining_enable"),button_mining.on("pointerover",(()=>button_mining.setTexture("button_mining_pointerover"))),button_mining.on("pointerout",(()=>button_mining.setTexture("button_mining_enable"))),button_mining.setInteractive()),1==local_mining_status||1==local_crafting_status||1==local_practice_status||local_level<=1||wallet!=local_owner?(button_farming.setTexture("button_farming_unable"),button_farming.disableInteractive()):1==local_farming_status?(button_farming.setTexture("button_farming_working"),button_farming.on("pointerover",(()=>button_farming.setTexture("button_farming_pointerover_stop"))),button_farming.on("pointerout",(()=>button_farming.setTexture("button_farming_working"))),button_farming.setInteractive()):(button_farming.setTexture("button_farming_enable"),button_farming.on("pointerover",(()=>button_farming.setTexture("button_farming_pointerover"))),button_farming.on("pointerout",(()=>button_farming.setTexture("button_farming_enable"))),button_farming.setInteractive()),local_level<3||1==local_mining_status||1==local_farming_status||1==local_practice_status||wallet!=local_owner)button_crafting_start.visible=!1,button_crafting_pause.visible=!1,button_crafting_resume.visible=!1,button_crafting_cancel.visible=!1,button_crafting_complete.visible=!1;else if(1==flag_info&&("undefined"==typeof beginingBox_crafting||void 0===beginingBox_crafting.scene)){let t=local_crafting_status,e=local_crafting_resume_flag,i=local_crafting_calc;0==t&&0==e?(button_crafting_start.visible=!0,button_crafting_pause.visible=!1,button_crafting_resume.visible=!1,button_crafting_cancel.visible=!1,button_crafting_complete.visible=!1):1==t&&i>0?(button_crafting_start.visible=!1,button_crafting_pause.visible=!0,button_crafting_resume.visible=!1,button_crafting_cancel.visible=!1,button_crafting_complete.visible=!1):0==t&&1==e?(button_crafting_start.visible=!1,button_crafting_pause.visible=!1,button_crafting_resume.visible=!0,button_crafting_cancel.visible=!0,button_crafting_complete.visible=!1):1==t&&0==i&&(button_crafting_start.visible=!1,button_crafting_pause.visible=!1,button_crafting_resume.visible=!1,button_crafting_cancel.visible=!1,button_crafting_complete.visible=!0)}local_level>=5&&wallet==local_owner&&("undefined"!=typeof item_clarinet||"undefined"!=typeof item_piano||"undefined"!=typeof item_violin||"undefined"!=typeof item_horn||"undefined"!=typeof item_timpani||"undefined"!=typeof item_harp)?button_practice.visible=!0:button_practice.visible=!1,1==local_mining_status||1==local_farming_status||1==local_crafting_status||local_level<=5?(button_practice.setTexture("button_practice_unable"),button_practice.disableInteractive()):1==local_practice_status?(button_practice.setTexture("button_practice_working"),button_practice.on("pointerover",(()=>button_practice.setTexture("button_practice_pointerover_stop"))),button_practice.on("pointerout",(()=>button_practice.setTexture("button_practice_working"))),button_practice.setInteractive()):(button_practice.setTexture("button_practice_enable"),button_practice.on("pointerover",(()=>button_practice.setTexture("button_practice_pointerover"))),button_practice.on("pointerout",(()=>button_practice.setTexture("button_practice_enable"))),button_practice.setInteractive()),1!=flag_info||"undefined"!=typeof beginingBox_crafting&&void 0!==beginingBox_crafting.scene||text_select_item.setVisible(!0),local_exp/local_next_exp_required>=1&&0==local_mining_status&&0==local_farming_status&&0==local_crafting_status&&"back_level"==button_levelup.texture.key&&"button_levelup_pointerover"!=button_levelup.texture.key&&wallet==local_owner?(button_levelup.setTexture("button_levelup_enable"),button_levelup.setInteractive()):("back_level"!=button_levelup.texture.key&&local_exp/local_next_exp_required<1||1==local_mining_status||1==local_farming_status||1==local_crafting_status)&&(button_levelup.setTexture("back_level"),button_levelup.disableInteractive()),previous_local_mining_status=local_mining_status,previous_local_farming_status=local_farming_status,previous_local_crafting_status=local_crafting_status}function update_checkItem(t){let e,a;if("trial"==gamemode&&("undefined"!=typeof beginingBox_feeding&&void 0!==beginingBox_feeding.scene&&0!=summoner&&(beginingBox_feeding.visible=!0,beginingBox_feeding_text.visible=!0),"undefined"!=typeof beginingBox_grooming&&void 0!==beginingBox_grooming.scene&&0!=summoner&&(beginingBox_grooming.visible=!0,beginingBox_grooming_text.visible=!0),"undefined"!=typeof beginingBox_mining&&void 0!==beginingBox_mining.scene&&(0!=summoner&&(beginingBox_mining.visible=!0,beginingBox_mining_text.visible=!0),local_level>=2&&(beginingBox_mining_text.setText(">> Click to Open <<\n     Start Mining!"),beginingBox_mining.setInteractive({useHandCursor:!0}))),"undefined"!=typeof beginingBox_farming&&void 0!==beginingBox_farming.scene&&(0!=summoner&&(beginingBox_farming.visible=!0,beginingBox_farming_text.visible=!0),local_level>=2&&(beginingBox_farming_text.setText(">> Click to Open <<\n     Start Farming!"),beginingBox_farming.setInteractive({useHandCursor:!0}))),"undefined"!=typeof beginingBox_crafting&&void 0!==beginingBox_crafting.scene&&(0!=summoner&&(beginingBox_crafting.visible=!0,beginingBox_crafting_text.visible=!0),local_level>=3&&(beginingBox_crafting_text.setText(">> Click to Open <<\n     Start Crafting!"),beginingBox_crafting.setInteractive({useHandCursor:!0})))),local_items.reduce(((t,e)=>t+e),0)!=previous_local_items.reduce(((t,e)=>t+e),0)&&0==flag_window_craft&&"undefined"!=typeof group_window_crafting&&(group_window_crafting.destroy(!0),delete group_window_crafting),a="Nameplate",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e]?0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&(local_items_flag[e]=!1,group_kanban.setVisible(!1)):(local_items_flag[e]=!0,group_kanban.setVisible(!0),0!=local_items[e+64]&&draw_glitter(t,item_kanban),count_sync>3&&draw_flower3(t,85,100)),1==local_items_flag[e]&&(""==local_name_str?(""==text_kanban.text&&text_kanban.setText("(enter name)"),text_kanban.setInteractive(),group_mint_name.setVisible(!0),"(unnamed)"!=text_kanban.text&&contract_update_static_status(summoner)):(text_kanban.setText(local_name_str),text_kanban.disableInteractive(),group_mint_name.setVisible(!1)),text_id.setText("#"+summoner)),a="Mr. Astar",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e]?0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof mr_astar&&(mr_astar.destroy(!0),local_items_flag[e]=!1):(local_items_flag[e]=!0,mr_astar=new Pet(t,dic_items[a].pos_x-25+50*Math.random(),dic_items[a].pos_y-25+50*Math.random(),"mr_astar_right","mr_astar_left","mining").setScale(.12),group_update.add(mr_astar),group_pet.add(mr_astar),0!=local_items[e+64]&&draw_glitter(t,mr_astar),count_sync>3&&draw_flower3(t,mr_astar.x,mr_astar.y)),a="Helmet",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_hat_helmet&&(item_hat_helmet.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let n=dic_items[a].pos_x,o=dic_items[a].pos_y;item_hat_helmet=t.add.sprite(n,o,"item_hat_helmet").setOrigin(.5).setScale(.22).setAngle(90),item_hat_helmet.setInteractive({useHandCursor:!0});let _="item_hat_helmet";if(item_hat_helmet.on("pointerdown",(()=>{0==item_wearing_hat?(item_wearing_hat=item_hat_helmet,murasakisan.on_click(),sound_hat.play(),item_hat_helmet.setAngle(0),local_owner==local_wallet&&localStorage.setItem(_,JSON.stringify(1))):item_wearing_hat==item_hat_helmet&&(item_wearing_hat=0,item_hat_helmet.x=n,item_hat_helmet.y=o,item_hat_helmet.setAngle(90),local_owner==local_wallet&&localStorage.setItem(_,JSON.stringify(0)))})),null!=localStorage.getItem(_)&&local_owner==local_wallet){let r=localStorage.getItem(_);JSON.parse(r)&&(item_wearing_hat=item_hat_helmet,item_hat_helmet.setAngle(0))}draw_flower3(t,n,o),0!=local_items[e+64]&&draw_glitter(t,item_hat_helmet),count_sync>3&&draw_flower3(t,item_hat_helmet.x,item_hat_helmet.y)}if(a="Lucky Dice",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e]?0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof dice&&(dice.destroy(!0),dice.text_rolled_number.destroy(!0),dice.text_next_time.destroy(!0),local_items_flag[e]=!1):(local_items_flag[e]=!0,dice=new Dice(t,dic_items[a].pos_x,dic_items[a].pos_y,600).setScale(.3).setOrigin(.5),group_update.add(dice),draw_flower3(t,dice.x,dice.y),0!=local_items[e+64]&&draw_glitter(t,dice),count_sync>3&&draw_flower3(t,dice.x,dice.y)),a="Wall Sticker",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_wall_sticker&&(item_wall_sticker.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let l=640,m=480;0==local_score?local_items_flag[e]=!1:local_score<2e5?item_wall_sticker=t.add.image(l,m,"item_wall_sticker_01"):local_score<4e5?item_wall_sticker=t.add.image(l,m,"item_wall_sticker_02"):local_score<6e5?item_wall_sticker=t.add.image(l,m,"item_wall_sticker_03"):local_score<8e5?item_wall_sticker=t.add.image(l,m,"item_wall_sticker_04"):local_score<1e6?item_wall_sticker=t.add.image(l,m,"item_wall_sticker_05"):local_score<12e5?item_wall_sticker=t.add.image(l,m,"item_wall_sticker_06"):local_score<14e5?item_wall_sticker=t.add.image(l,m,"item_wall_sticker_07"):local_score<16e5?item_wall_sticker=t.add.image(l,m,"item_wall_sticker_08"):local_score<18e5?item_wall_sticker=t.add.image(l,m,"item_wall_sticker_09"):local_score<2e6?item_wall_sticker=t.add.image(l,m,"item_wall_sticker_10"):local_score<22e5?item_wall_sticker=t.add.image(l,m,"item_wall_sticker_11"):local_score>=22e5&&(item_wall_sticker=t.add.image(l,m,"item_wall_sticker_12")),"undefined"!=typeof item_wall_sticker&&item_wall_sticker.setDepth(2).setAlpha(.2)}if(a="Hammock",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_bed&&(item_bed.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let c=dic_items[a].pos_x,d=dic_items[a].pos_y,g="pos_item_bed";if(null!=localStorage.getItem(g)&&local_owner==local_wallet){let h=localStorage.getItem(g);_pos=JSON.parse(h),c=_pos[0],d=_pos[1]}item_bed=t.add.sprite(c,d,"item_hammock_list").setScale(.8).setOrigin(.5).setDepth(d).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_bed.x=game.input.activePointer.x,item_bed.y=game.input.activePointer.y):(item_bed.x=game.input.activePointer.y,item_bed.y=960-game.input.activePointer.x),item_bed.depth=item_bed.y})).on("dragend",(()=>{let t=[item_bed.x,item_bed.y];local_owner==local_wallet&&localStorage.setItem(g,JSON.stringify(t)),murasakisan.check_hammock()&&(sound_hat.play(),murasakisan.try_hammock())})),0!=local_items[e+64]&&draw_glitter(t,item_bed),count_sync>3&&draw_flower3(t,item_bed.x,item_bed.y)}if(a="Token Chest",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_tokenChest&&(item_tokenChest.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let u=dic_items[a].pos_x,p=dic_items[a].pos_y;item_tokenChest=t.add.sprite(u,p,"item_tokenChest").setFrame(0).setScale(.28).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerdown",(async function(){if(0==flag_tokenBall){flag_tokenBall=1,item_tokenChest.setFrame(1),sound_tokenChest.play(),murasakisan.on_click(),group_tokenBall=t.add.group();for(let e in dic_tokenBall_contract){let i=0;if("ASTR"==e)i=1;else{let t=dic_tokenBall_contract[e];i=await call_amount_of_token(t)}if(i>0){let i=dic_tokenBall_img[e];_tokenBall=new tokenBall(t,u,p,i).setOrigin(.5).setScale(.15).setAlpha(1).setDepth(2),group_tokenBall.add(_tokenBall),group_update.add(_tokenBall),_tokenBall.on_summon()}}flag_tokenBall=2}else 2==flag_tokenBall&&(item_tokenChest.setFrame(0),flag_tokenBall=0,group_tokenBall.destroy(!0))})),0!=local_items[e+64]&&draw_glitter(t,item_tokenChest),count_sync>3&&draw_flower3(t,item_tokenChest.x,item_tokenChest.y)}if(a="Knit Hat",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_hat_knit&&(item_hat_knit.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let f=dic_items[a].pos_x,y=dic_items[a].pos_y;item_hat_knit=t.add.sprite(f,y,"item_hat_knit").setOrigin(.5).setScale(.2),item_hat_knit.setInteractive({useHandCursor:!0}),item_hat_knit.on("pointerdown",(()=>{if(0==item_wearing_hat_pet){let t=[];if("undefined"!=typeof mr_astar&&t.push("mining"),"undefined"!=typeof ms_ether&&t.push("farming"),"undefined"!=typeof dr_bitco&&t.push("crafting"),t!=[]){let e=t[Math.floor(Math.random()*t.length)];item_wearing_hat_pet=[e,item_hat_knit],item_hat_knit.setScale(.1)}sound_hat.play()}else item_wearing_hat_pet=0,item_hat_knit.setScale(.2),item_hat_knit.x=f,item_hat_knit.y=y})),0!=local_items[e+64]&&draw_glitter(t,item_hat_knit),count_sync>3&&draw_flower3(t,item_hat_knit.x,item_hat_knit.y)}if(a="House of Fluffy",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_fluffy_house&&(local_items_flag[e]=!1,item_fluffy_house.destroy(!0));else{local_items_flag[e]=!0;let x=dic_items[a].pos_x,b=dic_items[a].pos_y;group_fluffy_house_in=t.add.group(),item_fluffy_house=t.add.sprite(x,b,"item_fluffy_house_1").setScale(.4).setOrigin(.5).setDepth(2).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{if(0==flag_fluffy_house_click&&group_fluffy_house_in.getChildren().length>0){flag_fluffy_house_click=1;let t=0;for(i=0;i<group_fluffy_house_in.getLength();i++){let e=group_fluffy_house_in.getChildren()[i];setTimeout((()=>{e.on_click_fromHouse()}),t),t+=100}group_fluffy_house_in.clear(),setTimeout((()=>{flag_fluffy_house_click=0}),3e3),murasakisan.on_click(),item_fluffy_house.setTexture("item_fluffy_house_1"),sound_fluffy.play()}})),0!=local_items[e+64]&&draw_glitter(t,item_fluffy_house),count_sync>3&&draw_flower3(t,item_fluffy_house.x,item_fluffy_house.y)}if(1==local_items_flag[e]&&(group_fluffy_house_in.getChildren().length>=10?item_fluffy_house.setTexture("item_fluffy_house_5"):group_fluffy_house_in.getChildren().length>=7?item_fluffy_house.setTexture("item_fluffy_house_4"):group_fluffy_house_in.getChildren().length>=4?item_fluffy_house.setTexture("item_fluffy_house_3"):group_fluffy_house_in.getChildren().length>=1?item_fluffy_house.setTexture("item_fluffy_house_2"):item_fluffy_house.setTexture("item_fluffy_house_1")),a="Crown",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e]?0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_crown&&(item_crown.destroy(!0),local_items_flag[e]=!1):(local_items_flag[e]=!0,item_crown=t.add.sprite(dic_items[a].pos_x,dic_items[a].pos_y,"item_crown"),item_crown.anims.play("item_crown",!0),item_crown.anims.isPlaying=!1,item_crown.setScale(.3),item_crown.setInteractive({useHandCursor:!0}),item_crown.on("pointerdown",(()=>{item_crown.anims.isPlaying?item_crown.anims.stop():(item_crown.anims.isPlaying=!0,sound_hat.play())})),item_crown.depth=item_bear.depth+1,0!=local_items[e+64]&&draw_glitter(t,item_crown),count_sync>3&&draw_flower3(t,item_crown.x,item_crown.y)),a="Fortune Statue",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_fortune_statue&&(item_fortune_statue.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let w=dic_items[a].pos_x,v=dic_items[a].pos_y,k="pos_item_fortune_status";if(null!=localStorage.getItem(k)&&local_owner==local_wallet){let F=localStorage.getItem(k);_pos=JSON.parse(F),w=_pos[0],v=_pos[1]}item_fortune_statue=t.add.sprite(w,v,"item_fortune_statue").setScale(.35).setOrigin(.5).setDepth(v).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_fortune_statue.x=game.input.activePointer.x,item_fortune_statue.y=game.input.activePointer.y):(item_fortune_statue.x=game.input.activePointer.y,item_fortune_statue.y=960-game.input.activePointer.x),item_fortune_statue.depth=item_fortune_statue.y})).on("dragend",(()=>{let t=[item_fortune_statue.x,item_fortune_statue.y];local_owner==local_wallet&&localStorage.setItem(k,JSON.stringify(t)),item_fortune_statue.x>=100&&item_fortune_statue.x<=1100&&item_fortune_statue.y>=500&&item_fortune_statue.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_fortune_statue.x,item_fortune_statue.y))})),0!=local_items[e+64]&&draw_glitter(t,item_fortune_statue),count_sync>3&&draw_flower3(t,item_fortune_statue.x,item_fortune_statue.y)}if(a="Music Box",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_musicbox&&(item_musicbox.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let S=dic_items[a].pos_x,M=dic_items[a].pos_y,T="pos_item_musicbox";if(null!=localStorage.getItem(T)&&local_owner==local_wallet){let A=localStorage.getItem(T);_pos=JSON.parse(A),S=_pos[0],M=_pos[1]}item_musicbox=t.add.sprite(S,M,"item_musicbox").setOrigin(.5).setScale(.3).setInteractive({useHandCursor:!0,draggable:!0}).setDepth(M).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_musicbox.x=game.input.activePointer.x,item_musicbox.y=game.input.activePointer.y):(item_musicbox.x=game.input.activePointer.y,item_musicbox.y=960-game.input.activePointer.x),item_musicbox.depth=item_musicbox.y})).on("dragend",(()=>{let t=[item_musicbox.x,item_musicbox.y];local_owner==local_wallet&&localStorage.setItem(T,JSON.stringify(t)),item_musicbox.x>=100&&item_musicbox.x<=1100&&item_musicbox.y>=500&&item_musicbox.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_musicbox.x,item_musicbox.y))})).on("pointerdown",(()=>music())),0!=local_items[e+64]&&draw_glitter(t,item_musicbox),count_sync>3&&draw_flower3(t,item_musicbox.x,item_musicbox.y)}if(a="Straw Hat",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_hat_mugiwara&&(item_hat_mugiwara.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let C=dic_items[a].pos_x,I=dic_items[a].pos_y;item_hat_mugiwara=t.add.sprite(C,I,"item_hat_mugiwara").setOrigin(.5).setScale(.25).setAngle(90),item_hat_mugiwara.setInteractive({useHandCursor:!0});let H="item_hat_mugiwara";if(item_hat_mugiwara.on("pointerdown",(()=>{0==item_wearing_hat?(item_wearing_hat=item_hat_mugiwara,murasakisan.on_click(),sound_hat.play(),item_hat_mugiwara.setAngle(0),local_owner==local_wallet&&localStorage.setItem(H,JSON.stringify(1))):item_wearing_hat==item_hat_mugiwara&&(item_wearing_hat=0,item_hat_mugiwara.x=C,item_hat_mugiwara.y=I,item_hat_mugiwara.setAngle(90),local_owner==local_wallet&&localStorage.setItem(H,JSON.stringify(0)))})),null!=localStorage.getItem(H)&&local_owner==local_wallet){let D=localStorage.getItem(H);JSON.parse(D)&&(item_wearing_hat=item_hat_mugiwara,item_hat_mugiwara.setAngle(0))}0!=local_items[e+64]&&draw_glitter(t,item_hat_mugiwara),count_sync>3&&draw_flower3(t,item_hat_mugiwara.x,item_hat_mugiwara.y)}if(a="Score Meter",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e]?0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&group_scoreMeter.getLength()>0&&(group_scoreMeter.clear(!0),local_items_flag[e]=!1):(local_items_flag[e]=!0,summon_scoreMeter(t),count_sync>3&&draw_flower3(t,510,510)),a="Ms. Ether",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e]?0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof ms_ether&&(ms_ether.destroy(!0),local_items_flag[e]=!1):(local_items_flag[e]=!0,ms_ether=new Pet(t,dic_items[a].pos_x-25+50*Math.random(),dic_items[a].pos_y-25+50*Math.random(),"ms_ether_right","ms_ether_left","farming").setScale(.12),group_update.add(ms_ether),group_pet.add(ms_ether),0!=local_items[e+64]&&draw_glitter(t,ms_ether),count_sync>3&&draw_flower3(t,ms_ether.x,ms_ether.y)),a="Rug-Pull",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_rugg&&(item_rugg.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let O=dic_items[a].pos_x,N=dic_items[a].pos_y;item_rugg=t.add.image(O,N,"item_rugg").setScale(1.7).setOrigin(.5).setDepth(2),0!=local_items[e+64]&&draw_glitter(t,item_rugg),count_sync>3&&draw_flower3(t,item_rugg.x,item_rugg.y)}if(a="Window",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_window&&(item_window.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let P=dic_items[a].pos_x,B=dic_items[a].pos_y;item_window=t.add.image(P,B,"item_window_sunny").setScale(.58).setOrigin(.5).setDepth(2).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{sound_window.play(),item_window.texture==game.textures.get(item_window.texture_opened)?item_window.setTexture(item_window.texture_closed):item_window.texture==game.textures.get(item_window.texture_closed)?item_window.setTexture(item_window.texture_opened):item_window.texture==game.textures.get("item_window_night")?item_window.setTexture("item_window_night_closed"):item_window.texture==game.textures.get("item_window_night_closed")&&item_window.setTexture("item_window_night")})),local_astar_priceChange_h24>1?(item_window.texture_opened="item_window_sunny",item_window.texture_closed="item_window_sunny_closed",item_window.setTexture(item_window.texture_opened)):local_astar_priceChange_h24<-1?(item_window.texture_opened="item_window_rain",item_window.texture_closed="item_window_rain_closed",item_window.setTexture(item_window.texture_opened)):(item_window.texture_opened="item_window_cloudy",item_window.texture_closed="item_window_cloudy_closed",item_window.setTexture(item_window.texture_opened)),0!=local_items[e+64]&&draw_glitter(t,item_window),count_sync>3&&draw_flower3(t,item_window.x,item_window.y)}if(a="Cat Cushion",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e]?0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_cushion&&(item_cushion.destroy(!0),text_sending_interval.destroy(!0),cat.destroy(!0),mail.destroy(!0),local_items_flag[e]=!1):(local_items_flag[e]=!0,item_cushion=t.add.sprite(dic_items[a].pos_x,dic_items[a].pos_y,"item_cushion").setScale(.5).setOrigin(.5),item_cushion.depth=item_cushion.y-50,0!=local_items[e+64]&&draw_glitter(t,item_cushion),count_sync>3&&draw_flower3(t,item_cushion.x,item_cushion.y),text_sending_interval=t.add.text(52,660,"00h:00m",{font:"15px Arial",fill:"#222222"}).setDepth(item_cushion.depth+1),group_info.add(text_sending_interval),cat=new HomeCat(t,90,610).setOrigin(.5).setScale(.4),group_update.add(cat),mail=t.add.sprite(75,655,"item_mail").setScale(.6).setOrigin(.5).setDepth(item_cushion.y-50+2).setVisible(!1)),1==local_items_flag[e]){if(-1!=local_mail_sending_interval&&"undefined"!=typeof text_sending_interval&&"undefined"!=typeof cat)if(0==local_mail_sending_interval)text_sending_interval.setText("");else{let R=Math.floor(local_mail_sending_interval/86400)+"d:"+Math.floor(local_mail_sending_interval%86400/3600)+"h:"+Math.floor(local_mail_sending_interval%3600/60)+"m";text_sending_interval.setText(R).setFill("#222222")}local_items[196]>0?mail.visible=!0:mail.visible=!1}if(a="Picture Frame",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_frame&&(item_frame.destroy(!0),item_frame_inside.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let E=dic_items[a].pos_x,V=dic_items[a].pos_y;async function s(){let e=await get_nft_url();t.load.image("pic_nft",e),t.load.start(),t.load.on("complete",(()=>{item_frame_inside.setTexture("pic_nft"),item_frame_inside.setDisplaySize(67,82)}))}item_frame=t.add.image(E,V,"item_frame").setOrigin(.5).setScale(.25).setDepth(10),item_frame_inside=t.add.sprite(E,V,"item_frame_inside_loading").setOrigin(.5).setScale(.25).setDepth(11).setInteractive({useHandCursor:!0}).on("pointerdown",(async()=>{sound_hat.play(),item_frame_inside.setTexture("item_frame_inside_loading"),item_frame_inside.setScale(.25);let e=await get_nft_url();t.textures.remove("pic_nft"),t.load.image("pic_nft",e),t.load.start(),t.load.on("complete",(()=>{item_frame_inside.setTexture("pic_nft"),item_frame_inside.setDisplaySize(67,82)}))})),s(),0!=local_items[e+64]&&draw_glitter(t,item_frame),count_sync>3&&draw_flower3(t,item_frame.x,item_frame.y)}if(a="Crayon",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_crayon&&(item_crayon.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let L=dic_items[a].pos_x,z=dic_items[a].pos_y,W="pos_item_crayon";if(null!=localStorage.getItem(W)&&local_owner==local_wallet){let J=localStorage.getItem(W);_pos=JSON.parse(J),L=_pos[0],z=_pos[1]}item_crayon=t.add.sprite(L,z,"item_crayon").setScale(.2).setOrigin(.5).setDepth(z).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_crayon.x=game.input.activePointer.x,item_crayon.y=game.input.activePointer.y):(item_crayon.x=game.input.activePointer.y,item_crayon.y=960-game.input.activePointer.x),item_crayon.depth=item_crayon.y})).on("dragend",(()=>{let t=[item_crayon.x,item_crayon.y];local_owner==local_wallet&&localStorage.setItem(W,JSON.stringify(t))})),0!=local_items[e+64]&&draw_glitter(t,item_crayon),count_sync>3&&draw_flower3(t,item_crayon.x,item_crayon.y)}if(1==local_items_flag[e]&&update_achv(),a="Fishbowl",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_clock&&(item_fishbowl.destroy(!0),local_items_flag[e]=!1);else{let G,q;local_items_flag[e]=!0;let U="pos_item_fishbowl";if(null!=localStorage.getItem(U)&&local_owner==local_wallet){let j=localStorage.getItem(U);_pos=JSON.parse(j),G=_pos[0],q=_pos[1]}else G=dic_items[a].pos_x,q=dic_items[a].pos_y;item_fishbowl=t.add.sprite(G,q,"item_fishbowl").setOrigin(.5).setScale(.3).setDepth(q).anims.play("item_fishbowl_1",!0).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_fishbowl.x=game.input.activePointer.x,item_fishbowl.y=game.input.activePointer.y):(item_fishbowl.x=game.input.activePointer.y,item_fishbowl.y=960-game.input.activePointer.x),item_fishbowl.depth=item_fishbowl.y})).on("dragend",(()=>{let t=[item_fishbowl.x,item_fishbowl.y];local_owner==local_wallet&&localStorage.setItem(U,JSON.stringify(t)),item_fishbowl.x>=100&&item_fishbowl.x<=1100&&item_fishbowl.y>=500&&item_fishbowl.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_fishbowl.x,item_fishbowl.y))})),0!=local_items[e+64]&&draw_glitter(t,item_fishbowl),count_sync>3&&draw_flower3(t,item_fishbowl.x,item_fishbowl.y)}if(1==local_items_flag[e]&&(local_wallet_age>=20?item_fishbowl.anims.play("item_fishbowl_5",!0):local_wallet_age>=15?item_fishbowl.anims.play("item_fishbowl_4",!0):local_wallet_age>=10?item_fishbowl.anims.play("item_fishbowl_3",!0):local_wallet_age>=5?item_fishbowl.anims.play("item_fishbowl_2",!0):item_fishbowl.anims.play("item_fishbowl_1",!0)),a="Piano",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_piano&&(item_piano.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let X=dic_items[a].pos_x,Y=dic_items[a].pos_y,$="pos_item_piano";if(null!=localStorage.getItem($)&&local_owner==local_wallet){let K=localStorage.getItem($);_pos=JSON.parse(K),X=_pos[0],Y=_pos[1]}item_piano=t.add.image(X,Y,"item_piano").setScale(.4).setOrigin(.5).setDepth(2).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_piano.x=game.input.activePointer.x,item_piano.y=game.input.activePointer.y):(item_piano.x=game.input.activePointer.y,item_piano.y=960-game.input.activePointer.x),item_piano.depth=item_piano.y})).on("dragend",(()=>{let t=[item_piano.x,item_piano.y];local_owner==local_wallet&&localStorage.setItem($,JSON.stringify(t)),item_piano.x>=100&&item_piano.x<=1100&&item_piano.y>=500&&item_piano.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_piano.x,item_piano.y))})).on("pointerdown",(()=>{item_piano.texture==game.textures.get("item_piano")?(flag_onLight?sound_piano1.play():sound_piano2.play(),item_piano.setTexture("item_piano_opened")):item_piano.setTexture("item_piano")})),0!=local_items[e+64]&&draw_glitter(t,item_piano),count_sync>3&&draw_flower3(t,item_piano.x,item_piano.y)}if(a="Asnya",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_asnya&&(item_asnya.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let Z=dic_items[a].pos_x,Q=dic_items[a].pos_y,tt="pos_item_asnya";if(null!=localStorage.getItem(tt)&&local_owner==local_wallet){let et=localStorage.getItem(tt);_pos=JSON.parse(et),Z=_pos[0],Q=_pos[1]}item_asnya=t.add.sprite(Z,Q,"item_asnya").setScale(.25).setOrigin(.5).setDepth(Q).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_asnya.x=game.input.activePointer.x,item_asnya.y=game.input.activePointer.y):(item_asnya.x=game.input.activePointer.y,item_asnya.y=960-game.input.activePointer.x),item_asnya.depth=item_asnya.y})).on("dragend",(()=>{let t=[item_asnya.x,item_asnya.y];local_owner==local_wallet&&localStorage.setItem(tt,JSON.stringify(t)),item_asnya.x>=100&&item_asnya.x<=1100&&item_asnya.y>=500&&item_asnya.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_asnya.x,item_asnya.y))})),0!=local_items[e+64]&&draw_glitter(t,item_asnya),count_sync>3&&draw_flower3(t,item_asnya.x,item_asnya.y)}if(a="Tablet",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_pad&&(item_pad.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let it=dic_items[a].pos_x,at=dic_items[a].pos_y,st="pos_item_tablet";if(null!=localStorage.getItem(st)&&local_owner==local_wallet){let nt=localStorage.getItem(st);_pos=JSON.parse(nt),it=_pos[0],at=_pos[1]}item_pad=t.add.sprite(it,at,"item_pad_on").setScale(.25).setOrigin(.5).setDepth(at).setInteractive({useHandCursor:!0,draggable:!0}).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_pad.x=game.input.activePointer.x,item_pad.y=game.input.activePointer.y):(item_pad.x=game.input.activePointer.y,item_pad.y=960-game.input.activePointer.x),item_pad.depth=item_pad.y})).on("dragend",(()=>{let t=[item_pad.x,item_pad.y];local_owner==local_wallet&&localStorage.setItem(st,JSON.stringify(t)),item_pad.x>=100&&item_pad.x<=1100&&item_pad.y>=500&&item_pad.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_pad.x,item_pad.y))})).on("pointerdown",(()=>{if(0==flag_radarchart)flag_radarchart=1,flag_info=1,group_info.setVisible(!0),local_level>=5&&wallet==local_owner&&("undefined"!=typeof item_clarinet||"undefined"!=typeof item_piano||"undefined"!=typeof item_violin||"undefined"!=typeof item_horn||"undefined"!=typeof item_timpani||"undefined"!=typeof item_harp)?button_practice.visible=!0:button_practice.visible=!1,draw_radarchart(t),item_pad.setTexture("item_pad_on"),sound_pad.play(),text_select_item.setText(">> Select Item <<");else{flag_radarchart=0,flag_info=0,group_info.setVisible(!1),group_info2.setVisible(!1),group_chart.destroy(!0);try{group_item_indicator.destroy(!0)}catch(t){}item_pad.setTexture("item_pad_off")}})),flag_radarchart=1,draw_radarchart(t),0!=local_items[e+64]&&draw_glitter(t,item_pad),count_sync>3&&draw_flower3(t,item_pad.x,item_pad.y)}if(a="Flower Wreath",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_wreath&&(item_wreath.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let ot=dic_items[a].pos_x,_t=dic_items[a].pos_y,rt="pos_item_wreath";if(null!=localStorage.getItem(rt)&&local_owner==local_wallet){let mt=localStorage.getItem(rt);_pos=JSON.parse(mt),ot=_pos[0],_t=_pos[1]}let lt="";lt+=" Wallet score:         \n",lt+="   (token             ) \n",lt+="   (nft                  ) \n",lt+="   (staking           ) \n",lt+="   (special           ) ",item_wreath_text1=t.add.text(ot-15,_t+75,lt,{font:"17px Arial",fill:"#000000",backgroundColor:"#ffffff"}).setOrigin(.4).setVisible(!1).setDepth(2e3),lt="",lt+="                       "+(local_achv_onChain_score/100).toFixed(2)+" \n",lt+="                 "+(local_achv_onChain_score_token/100).toFixed(2)+" \n",lt+="                 "+(local_achv_onChain_score_nft/100).toFixed(2)+" \n",lt+="                 "+(local_achv_onChain_score_staking/100).toFixed(2)+" \n",lt+="                 "+(local_achv_onChain_score_murasaki_nft/100).toFixed(2)+" ",item_wreath_text2=t.add.text(ot-15,_t+75,lt,{font:"17px Arial",fill:"#E5004F"}).setOrigin(.4).setVisible(!1).setDepth(2001),item_wreath_click=0,item_wreath=t.add.sprite(ot,_t,"item_wreath").setOrigin(.5).setScale(.2).setInteractive({useHandCursor:!0,draggable:!0}).on("pointerdown",(()=>{item_wreath_text1.setVisible(!0),item_wreath_text2.setVisible(!0),item_wreath_click+=1;let t=item_wreath_click;setTimeout((()=>{item_wreath_click==t&&(item_wreath_text1.setVisible(!1),item_wreath_text2.setVisible(!1))}),2e3)})).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_wreath.x=game.input.activePointer.x,item_wreath.y=game.input.activePointer.y):(item_wreath.x=game.input.activePointer.y,item_wreath.y=960-game.input.activePointer.x),item_wreath.depth=item_wreath.y,item_wreath_text1.visible=!1,item_wreath_text2.visible=!1})).on("dragend",(()=>{let t=[item_wreath.x,item_wreath.y];local_owner==local_wallet&&localStorage.setItem(rt,JSON.stringify(t)),item_wreath_text1.x=item_wreath.x-15,item_wreath_text1.y=item_wreath.y+75,item_wreath_text2.x=item_wreath.x-15,item_wreath_text2.y=item_wreath.y+75})),0!=local_items[e+64]&&draw_glitter(t,item_wreath),count_sync>3&&draw_flower3(t,item_wreath.x,item_wreath.y)}if(a="Ribbon",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e]?0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_ribbon&&(item_ribbon.destroy(!0),local_items_flag[e]=!1):(local_items_flag[e]=!0,item_ribbon=t.add.sprite(dic_items[a].pos_x,dic_items[a].pos_y,"item_ribbon").setScale(.15).setOrigin(.5),item_ribbon.depth=item_bear.depth+1,0!=local_items[e+64]&&draw_glitter(t,item_ribbon),count_sync>3&&draw_flower3(t,item_ribbon.x,item_ribbon.y)),a="Dr. Bitco",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e]?0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof dr_bitco&&(dr_bitco.destroy(!0),local_items_flag[e]=!1):(local_items_flag[e]=!0,dr_bitco=new Pet(t,dic_items[a].pos_x-25+50*Math.random(),dic_items[a].pos_y-25+50*Math.random(),"dr_bitco_right","dr_bitco_left","crafting").setScale(.11),group_update.add(dr_bitco),group_pet.add(dr_bitco),0!=local_items[e+64]&&draw_glitter(t,dr_bitco),count_sync>3&&draw_flower3(t,dr_bitco.x,dr_bitco.y)),a="Light Switch",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e]?0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_switch&&(item_switch.destroy(!0),local_items_flag[e]=!1):(local_items_flag[e]=!0,back_black=t.add.image(640,480,"back_black").setDepth(3300).setVisible(!1),murasaki_neon=new Neon(t,50+900*Math.random(),50+350*Math.random(),"murasaki_neon_right","murasaki_neon_left").setVisible(!1).setDepth(3302).setOrigin(.5).setScale(.35),group_update.add(murasaki_neon),item_wall_sticker_neon=t.add.sprite(640,480,"item_wall_sticker_neon").anims.play("wall_sticker_neon",!0).setDepth(3301).setAlpha(.7).setVisible(!1),item_switch=t.add.sprite(dic_items[a].pos_x,dic_items[a].pos_y,"item_switch").setOrigin(.5).setScale(.25).setInteractive({useHandCursor:!0}),item_switch.anims.play("item_switch_off",!0),item_switch.on("pointerdown",(()=>{try{bgm.stop()}catch(t){}"listning"==murasakisan.mode&&(murasakisan.mode="resting",murasakisan.count=0),"item_switch_off"==item_switch.anims.currentAnim.key?(item_switch.anims.play("item_switch_on",!0),back_black.visible=!0,sound_switch.play(),murasaki_neon.visible=!0,text_kanban.setColor("white"),"undefined"!=typeof item_lantern&&(item_lantern.anims.play("item_lantern"),item_lantern.setDepth(3301)),"undefined"!=typeof item_window&&(item_window.texture==game.textures.get(item_window.texture_opened)?item_window.setTexture("item_window_night"):item_window.setTexture("item_window_night_closed")),"undefined"!=typeof item_wall_sticker&&local_score>=18e5&&item_wall_sticker_neon.setVisible(!0),flag_onLight=!1):(item_switch.anims.play("item_switch_off",!0),back_black.visible=!1,sound_switch.play(),murasaki_neon.visible=!1,group_neonStar.clear(!0),text_kanban.setColor("black"),"undefined"!=typeof item_lantern&&(item_lantern.anims.stop(),item_lantern.setFrame(0),item_lantern.setDepth(item_lantern.y)),"undefined"!=typeof item_window&&(item_window.texture==game.textures.get("item_window_night")?item_window.setTexture(item_window.texture_opened):item_window.setTexture(item_window.texture_closed)),"undefined"!=typeof item_wall_sticker&&local_score>=18e5&&item_wall_sticker_neon.setVisible(!1),flag_onLight=!0)})),item_switch.depth=item_switch.y,0!=local_items[e+64]&&draw_glitter(t,item_switch),count_sync>3&&draw_flower3(t,item_switch.x,item_switch.y)),a="Mortarboard",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_hat_mortarboard&&(item_hat_mortarboard.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let ct=dic_items[a].pos_x,dt=dic_items[a].pos_y;item_hat_mortarboard=t.add.sprite(ct,dt,"item_hat_mortarboard").setOrigin(.5).setScale(.2).setAngle(90),item_hat_mortarboard.setInteractive({useHandCursor:!0});let gt="item_hat_mortarboard";if(item_hat_mortarboard.on("pointerdown",(()=>{0==item_wearing_hat?(item_wearing_hat=item_hat_mortarboard,murasakisan.on_click(),sound_hat.play(),item_hat_mortarboard.setAngle(0),local_owner==local_wallet&&localStorage.setItem(gt,JSON.stringify(1))):item_wearing_hat==item_hat_mortarboard&&(item_wearing_hat=0,item_hat_mortarboard.x=ct,item_hat_mortarboard.y=dt,item_hat_mortarboard.setAngle(90),local_owner==local_wallet&&localStorage.setItem(gt,JSON.stringify(0)))})),null!=localStorage.getItem(gt)&&local_owner==local_wallet){let ht=localStorage.getItem(gt);JSON.parse(ht)&&(item_wearing_hat=item_hat_mortarboard,item_hat_mortarboard.setAngle(0))}0!=local_items[e+64]&&draw_glitter(t,item_hat_mortarboard),count_sync>3&&draw_flower3(t,item_hat_mortarboard.x,item_hat_mortarboard.y)}if(a="News Board",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_newspaper&&(item_newspaper.destroy(!0),item_newspaper_text1.destroy(!0),item_newspaper_text2.destroy(!0),item_newspaper_text3.destroy(!0),item_newspaper_text4.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let ut=dic_items[a].pos_x,pt=dic_items[a].pos_y;item_newspaper=t.add.image(ut,pt,"item_newspaper").setOrigin(.5).setScale(.19).setDepth(2),item_newspaper_text1=t.add.text(ut,pt-20,local_newsText[0],{font:"14px Arial",fill:"#000000"}).setOrigin(.5).setDepth(3),item_newspaper_text2=t.add.text(ut,pt+0,local_newsText[1],{font:"14px Arial",fill:"#000000"}).setOrigin(.5).setDepth(3),item_newspaper_text3=t.add.text(ut,pt+20,local_newsText[2],{font:"14px Arial",fill:"#000000"}).setOrigin(.5).setDepth(3),item_newspaper_text4=t.add.text(ut,pt+40,local_newsText[3],{font:"14px Arial",fill:"#000000"}).setOrigin(.5).setDepth(3),count_to_newsUpdate=0,0!=local_items[e+64]&&draw_glitter(t,item_newspaper),count_sync>3&&draw_flower3(t,item_newspaper.x,item_newspaper.y)}if(1==local_items_flag[e]&&(count_to_newsUpdate+=1,count_to_newsUpdate%30==0&&(contract_update_event_random(),item_newspaper_text1.setText(local_newsText[0]),item_newspaper_text2.setText(local_newsText[1]),item_newspaper_text3.setText(local_newsText[2]),item_newspaper_text4.setText(local_newsText[3]))),a="Diary Book",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e]){if(0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_clock)item_book.destroy(!0),item_book_text.destroy(!0),local_items_flag[e]=!1;else if(1==local_items_flag[e]){let ft="";ft+=" total exp: "+local_total_exp_gained+" \n",ft+=" total coin: "+local_total_coin_mined+" \n",ft+=" total leaf: "+local_total_material_farmed+"\n",ft+=" total craft: "+local_total_item_crafted+" \n",ft+=" total fluffy: "+local_total_precious_received+" ",item_book_text.setText(ft)}}else{let yt,xt;local_items_flag[e]=!0;let bt="pos_item_book";if(null!=localStorage.getItem(bt)&&local_owner==local_wallet){let vt=localStorage.getItem(bt);_pos=JSON.parse(vt),yt=_pos[0],xt=_pos[1]}else yt=dic_items[a].pos_x,xt=dic_items[a].pos_y;let wt="";wt+=" total exp: "+local_total_exp_gained+" \n",wt+=" total coin: "+local_total_coin_mined+" \n",wt+=" total leaf: "+local_total_material_farmed+"\n",wt+=" total craft: "+local_total_item_crafted+" \n",wt+=" total fluffy: "+local_total_precious_received+" ",item_book_text=t.add.text(yt,xt-90,wt,{font:"20px Arial",fill:"#000000",backgroundColor:"#ffffff"}).setOrigin(.5).setVisible(!1).setDepth(2e3),item_book_click=0,item_book=t.add.sprite(yt,xt,"item_book").setScale(.1).setOrigin(.5).setInteractive({draggable:!0,useHandCursor:!0}).on("pointerdown",(()=>{if(1==flag_info){item_book_click+=1;let t=item_book_click;item_book_text.visible=!0,setTimeout((()=>{item_book_click==t&&(item_book_text.visible=!1)}),2e3)}})).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_book.x=game.input.activePointer.x,item_book.y=game.input.activePointer.y):(item_book.x=game.input.activePointer.y,item_book.y=960-game.input.activePointer.x),item_book.depth=item_book.y,item_book_text.visible=!1})).on("dragend",(()=>{item_book_text.x=item_book.x,item_book_text.y=item_book.y-90,item_book.depth=item_book.y;let t=[item_book.x,item_book.y];local_owner==local_wallet&&localStorage.setItem(bt,JSON.stringify(t))})),0!=local_items[e+64]&&draw_glitter(t,item_book),count_sync>3&&draw_flower3(t,item_book.x,item_book.y)}if(a="Cuckoo Clock",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_clock&&(item_clock.destroy(!0),item_clock_long.destroy(!0),item_clock_short.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let kt=dic_items[a].pos_x,Ft=dic_items[a].pos_y;item_clock=t.add.sprite(kt,Ft,"item_clock").setFrame(0).setScale(.45).setOrigin(.5).setDepth(2).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{item_clock.anims.play("item_clock_anim_1"),sound_clock.play(),setTimeout((()=>{sound_clock.play()}),2e3)})),0!=local_items[e+64]&&draw_glitter(t,item_clock),count_sync>3&&draw_flower3(t,item_clock.x,item_clock.y),item_clock_short=t.add.sprite(kt,Ft,"item_clock").setFrame(2).setScale(.45).setOrigin(.5).setDepth(3),item_clock_long=t.add.sprite(kt,Ft,"item_clock").setFrame(1).setScale(.45).setOrigin(.5).setDepth(3)}if(1==local_items_flag[e]){let St=local_nonce%1440;item_clock_short.setAngle(.5*St),item_clock_long.setAngle(6*St)}if(a="Violin",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_violin&&(item_violin.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let Mt=dic_items[a].pos_x,Tt=dic_items[a].pos_y,At="pos_item_violin";if(null!=localStorage.getItem(At)&&local_owner==local_wallet){let Ct=localStorage.getItem(At);_pos=JSON.parse(Ct),Mt=_pos[0],Tt=_pos[1]}item_violin=t.add.sprite(Mt,Tt,"item_violin").setScale(.2).setOrigin(.5).setDepth(Tt).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_violin.x=game.input.activePointer.x,item_violin.y=game.input.activePointer.y):(item_violin.x=game.input.activePointer.y,item_violin.y=960-game.input.activePointer.x),item_violin.depth=item_violin.y})).on("dragend",(()=>{let t=[item_violin.x,item_violin.y];local_owner==local_wallet&&localStorage.setItem(At,JSON.stringify(t)),item_violin.x>=100&&item_violin.x<=1100&&item_violin.y>=500&&item_violin.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_violin.x,item_violin.y))})),0!=local_items[e+64]&&draw_glitter(t,item_violin),count_sync>3&&draw_flower3(t,item_violin.x,item_violin.y)}if(a="Flowerpot",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_vase&&(item_vase.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let It=dic_items[a].pos_x,Ht=dic_items[a].pos_y,Dt="pos_item_vase";if(null!=localStorage.getItem(Dt)&&local_owner==local_wallet){let Ot=localStorage.getItem(Dt);_pos=JSON.parse(Ot),It=_pos[0],Ht=_pos[1]}item_vase=t.add.sprite(It,Ht,"item_vase").setScale(.4).setOrigin(.5).setDepth(Ht).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_vase.x=game.input.activePointer.x,item_vase.y=game.input.activePointer.y):(item_vase.x=game.input.activePointer.y,item_vase.y=960-game.input.activePointer.x),item_vase.depth=item_vase.y})).on("dragend",(()=>{let t=[item_vase.x,item_vase.y];local_owner==local_wallet&&localStorage.setItem(Dt,JSON.stringify(t))})),0!=local_items[e+64]&&draw_glitter(t,item_vase),count_sync>3&&draw_flower3(t,item_vase.x,item_vase.y)}if(a="Lantern",e=dic_items[a].item_id,0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]||1==local_items_flag[e])0==local_items[e]&&0==local_items[e+64]&&0==local_items[e+128]&&"undefined"!=typeof item_lantern&&(item_lantern.destroy(!0),local_items_flag[e]=!1);else{local_items_flag[e]=!0;let Nt=dic_items[a].pos_x,Pt=dic_items[a].pos_y,Bt="pos_item_lantern";if(null!=localStorage.getItem(Bt)&&local_owner==local_wallet){let Rt=localStorage.getItem(Bt);_pos=JSON.parse(Rt),Nt=_pos[0],Pt=_pos[1]}item_lantern=t.add.sprite(Nt,Pt,"item_lantern_list").setFrame(0).setScale(.275).setOrigin(.5).setDepth(Pt).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_lantern.x=game.input.activePointer.x,item_lantern.y=game.input.activePointer.y):(item_lantern.x=game.input.activePointer.y,item_lantern.y=960-game.input.activePointer.x),item_lantern.depth=item_lantern.y})).on("dragend",(()=>{let t=[item_lantern.x,item_lantern.y];local_owner==local_wallet&&localStorage.setItem(Bt,JSON.stringify(t))})),0!=local_items[e+64]&&draw_glitter(t,item_lantern),count_sync>3&&draw_flower3(t,item_lantern.x,item_lantern.y)}if(local_items[194]!=previous_local_item194){async function s(e){let i=get_userItems(194);try{group_item194.destroy(!0)}catch(t){}group_item194=e.add.group();let a=[],s=[],n=[];for(let o=0;o<i.length;o++){let _=650,r=500;a[o]=e.add.sprite(_+50*o,r,"item_bank").setScale(.275).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",(()=>a[o].setTexture("item_bank_broken"))).on("pointerover",(()=>sound_button_select.play())).on("pointerover",(()=>{s[o].visible=!0})).on("pointerover",(()=>{n[o].visible=!0})).on("pointerout",(()=>a[o].setTexture("item_bank"))).on("pointerout",(()=>{s[o].visible=!1})).on("pointerout",(()=>{n[o].visible=!1})).on("pointerdown",(()=>unpack_bag(summoner,i[o]))).on("pointerdown",(()=>sound_button_on.play())),a[o].depth=a[o].y,s[o]=e.add.text(_+10+50*o,r-50,"+1000",{font:"17px Arial",fill:"#000000"}).setOrigin(.5).setVisible(!1),n[o]=e.add.sprite(_-30+50*o,r-50,"icon_ohana").setOrigin(.5).setScale(.07).setVisible(!1),group_item194.add(a[o]),group_item194.add(s[o]),group_item194.add(n[o]),count_sync>3&&draw_flower3(t,a[o].x,a[o].y)}}s(t)}if(local_items[195]!=previous_local_item195){async function s(e){let i=get_userItems(195);try{group_item195.destroy(!0)}catch(t){}group_item195=e.add.group();let a=[],s=[],n=[];for(let o=0;o<i.length;o++){let _=550,r=490;a[o]=e.add.sprite(_-50*o,r,"item_pouch").setScale(.225).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",(()=>a[o].setTexture("item_pouch_broken"))).on("pointerover",(()=>sound_button_select.play())).on("pointerover",(()=>{s[o].visible=!0})).on("pointerover",(()=>{n[o].visible=!0})).on("pointerout",(()=>a[o].setTexture("item_pouch"))).on("pointerout",(()=>{s[o].visible=!1})).on("pointerout",(()=>{n[o].visible=!1})).on("pointerdown",(()=>unpack_bag(summoner,i[o]))).on("pointerdown",(()=>sound_button_on.play())),a[o].depth=a[o].y,s[o]=e.add.text(_+15-50*o,r-50,"+1000",{font:"17px Arial",fill:"#000000"}).setOrigin(.5).setVisible(!1),n[o]=e.add.sprite(_-22-50*o,r-50,"icon_kusa").setOrigin(.5).setScale(.09).setVisible(!1),group_item195.add(a[o]),group_item195.add(s[o]),group_item195.add(n[o]),count_sync>3&&draw_flower3(t,a[o].x,a[o].y)}}s(t)}if(local_items[200]>previous_local_item200){get_itemIds_from_itemType(local_myListsAt_withItemType,200).forEach((async e=>{if(!summoned_presentbox.includes(e)){let i=["item_presentbox_01","item_presentbox_02","item_presentbox_03","item_presentbox_04","item_presentbox_05","item_presentbox_06","item_presentbox_07","item_presentbox_08"],a=i[Math.floor(Math.random()*i.length)],s=170+830*Math.random(),n=510+170*Math.random(),o=await call_item_info(e),_=await call_name_from_summoner(o.crafted_summoner);""==_&&(_="#"+o.crafted_summoner);let r=o.memo,l=new PresentBox(t,s,n,a,e,_,r).setOrigin(.5).setScale(.1).setAlpha(1).setDepth(n);summoned_presentbox.push(e),group_update.add(l),draw_flower3(t,s,n)}}))}if(local_fluffy_count!=previous_local_fluffy_count){let Et=0,Vt=0,Lt=0,zt=0,Wt=0;for(let Gt=201;Gt<=212;Gt++){let qt=local_items[Gt];if(qt>0){get_itemIds_from_itemType(local_myListsAt_withItemType,Gt).forEach((e=>{summoned_fluffies.includes(e)||(setTimeout((()=>{summon_fluffy2(t,Gt,e)}),Et,e),Et+=0,summoned_fluffies.push(e))})),Vt+=qt}}for(let Ut=213;Ut<=224;Ut++){let jt=local_items[Ut];if(jt>0){get_itemIds_from_itemType(local_myListsAt_withItemType,Ut).forEach((e=>{summoned_fluffies.includes(e)||(setTimeout((()=>{summon_fluffy2(t,Ut,e)}),Et,e),Et+=0,summoned_fluffies.push(e))})),Lt+=jt}}for(let Xt=225;Xt<=236;Xt++){let Yt=local_items[Xt];if(Yt>0){get_itemIds_from_itemType(local_myListsAt_withItemType,Xt).forEach((e=>{summoned_fluffies.includes(e)||(setTimeout((()=>{summon_fluffy2(t,Xt,e)}),Et,e),Et+=0,summoned_fluffies.push(e))})),zt+=Yt}}for(let $t=237;$t<=248;$t++){if(local_items[$t]>0){get_itemIds_from_itemType(local_myListsAt_withItemType,$t).forEach((e=>{Wt+=1,summoned_fluffies.includes(e)||(summon_nuichan(t,e,$t,Wt),summoned_fluffies.push(e))}))}}let Jt="";Jt+=" fluffy x "+Vt+"\n",Jt+=" fluffier x "+Lt+"\n",Jt+=" fluffiest x "+zt+"\n",Jt+=" fluffy doll x "+Wt+" ",text_fluffy.setText(Jt)}if(local_dapps_staking_amount>0&&("undefined"==typeof item_staking||void 0===item_staking.scene)&&"regular"==gamemode){let Kt,Zt,Qt="pos_item_staking";if(null!=localStorage.getItem(Qt)&&local_owner==local_wallet){let ee=localStorage.getItem(Qt);_pos=JSON.parse(ee),Kt=_pos[0],Zt=_pos[1]}else Kt=330,Zt=900;let te="";te+=" Staking: "+local_dapps_staking_amount+" $ASTR \n",te+=" Complete: "+local_staking_reward_percent+"%",item_staking_text=t.add.text(Kt,Zt-60,te,{font:"20px Arial",fill:"#000000",backgroundColor:"#ffffff"}).setOrigin(.5).setVisible(!1).setDepth(2e3),item_staking_bar_back=makeMiniProgressBar(t,Kt-20-2,Zt+30-2,44,14,16766421).setDepth(Zt+1),item_staking_bar=makeMiniProgressBar(t,Kt-20,Zt+30,40,10,15007823).setDepth(Zt+2),item_staking_bar.scaleX=.01,item_staking_click=0,item_staking=t.add.sprite(Kt,Zt,"item_staking").setOrigin(.5).setScale(.3).setDepth(Zt).setInteractive({draggable:!0,useHandCursor:!0}).on("pointerdown",(()=>{item_staking_text.visible=!0,item_staking_click+=1;let t=item_staking_click;setTimeout((()=>{item_staking_click==t&&(item_staking_text.visible=!1)}),2e3),100==local_staking_reward_percent&&(open_staking_reward(summoner),sound_button_on.play())})).on("drag",(()=>{1280==t.sys.game.scale.gameSize._width?(item_staking.x=game.input.activePointer.x,item_staking.y=game.input.activePointer.y):(item_staking.x=game.input.activePointer.y,item_staking.y=960-game.input.activePointer.x),item_staking.depth=item_staking.y,item_staking_bar_back.x=item_staking.x-20-2,item_staking_bar_back.y=item_staking.y+30-2,item_staking_bar_back.depth=item_staking.y+1,item_staking_bar.x=item_staking.x-20,item_staking_bar.y=item_staking.y+30,item_staking_bar.depth=item_staking.y+2,item_staking_text.visible=!1})).on("dragend",(()=>{item_staking_text.x=item_staking.x,item_staking_text.y=item_staking.y-60,item_staking_text.depth=item_staking.y;let t=[item_staking.x,item_staking.y];local_owner==local_wallet&&localStorage.setItem(Qt,JSON.stringify(t))}))}else if(0==local_dapps_staking_amount)try{item_staking.destroy(!0),item_staking_text.destroy(!0)}catch{}else if("undefined"!=typeof item_staking&&void 0!==item_staking.scene){let ie="";ie+=" Staking: "+local_dapps_staking_amount+" $ASTR \n",ie+=" Complete: "+local_staking_reward_percent+"%",item_staking_text.setText(ie),item_staking_bar.scaleX=local_staking_reward_percent/100}if(count_sync>=3&&1==local_receiving_mail&&("undefined"==typeof cat_visitor||void 0===cat_visitor.scene)){!async function(t){let e=await contract_callMailDetail(summoner),i=e[0],a=e[1];cat_visitor=new VisitorCat(t,0,0,i,a).setOrigin(.5).setScale(.4),group_update.add(cat_visitor),murasakisan.on_click()}(t)}if(0!=summoner&&("undefined"==typeof festligheter||"destroy"==festligheter.mode)&&(local_ff_next_festival_block-local_blockNumber<=7200||1==local_ff_inSession)){console.log("summon, festligheter");let ae=200+700*Math.random(),se=550+200*Math.random();festligheter=new Festligheter(t,ae,se,"ff_preFestival").setOrigin(.5).setScale(.25).setAlpha(1).setDepth(3),group_update.add(festligheter)}"trial"==gamemode&&local_level>=3&&local_total_item_crafted>=2&&0==flag_mogumogu?(summon_mogumogu(t),flag_mogumogu=1):1==flag_mogumogu&&"trial"!=gamemode&&(group_mogumogu.destroy(!0),flag_mogumogu=0),previous_local_items=local_items,previous_local_item194=local_items[194],previous_local_item195=local_items[195],previous_local_item196=local_items[196],previous_local_item200=local_items[200],previous_local_rolled_dice=local_rolled_dice,previous_local_name_str=local_name_str,previous_local_score=local_score,previous_local_fluffy_count=local_fluffy_count}function calc_fps(){let t=Date.now();if(t>=time_forFPS+1e3){time_forFPS=t;let e=turn-turn_forFPS;turn_forFPS=turn,text_fps.setText(e+" fps")}}async function updateFirst(t){1==flag_radarchart&&draw_radarchart(t),update_syncTime(t),update_numericAnimation(t),update_parametersWithAnimation(t),update_parametersWithoutAnimation(t),update_checkModeChange(t),update_checkButtonActivation(t),update_checkItem(t),update_astarPrice(),update_house_price()}async function checkChainId(t,e){let i=await window.ethereum.request({method:"eth_chainId"});parseInt(i)!=e&&t.scene.start("SomethingWrong")}function update(t){turn+=1,calc_fps(),turn%100==0&&summoner>0&&0==flag_doneFp&&local_wallet==local_owner&&(send_fp_get(local_wallet,summoner),flag_doneFp=1),turn%1e3==0&&summoner>0&&1==flag_radarchart&&draw_radarchart(t),turn%20==0&&update_syncTime(t),1!=turn&&turn%2!=0||update_numericAnimation(t),1!=turn&&turn%150!=0||update_parametersWithAnimation(t),1!=turn&&turn%150!=10||update_parametersWithoutAnimation(t),1!=turn&&turn%150!=20||update_checkModeChange(t),1!=turn&&turn%150!=30||update_checkButtonActivation(t),1!=turn&&turn%150!=40||update_checkItem(t),turn%300==50&&text_system_message.setText(""),turn%150!=60&&1!=turn&&1!=count_sync||update_systemMessage(),turn%500==0&&checkChainId(t,CORRECT_CHAINID),1!=flag_sync||turn%250!=70&&1!=flag_syncNow||(flag_syncNow=0,0==count_sync||0==local_notPetrified||0==summoner?contract_update_all():summoner>0&&contract_update_dynamic_status(summoner))}class FirstCheck extends Phaser.Scene{constructor(){super({key:"FirstCheck",active:!0}),this.flag_start=0,console.log("scene: FirstCheck")}preload(){this.load.image("icon_error","src/png/icon_error.png"),this.load.image("icon_wrong","src/png/icon_wrong.png")}create(){let t=this.add.text(640,480,"Check Network").setFontSize(80).setFontFamily("Arial").setOrigin(.5).setFill("#ff1694"),e=this.add.text(640,560,"Connecting...").setFontSize(40).setFontFamily("Arial").setOrigin(.5).setFill("#ffebf7"),i=this.add.image(640,360,"icon_error").setOrigin(.5).setScale(.5).setVisible(!1);async function a(a){let n=0,o=0;try{o=(await window.ethereum.request({method:"eth_requestAccounts"}))[0];let t=await window.ethereum.request({method:"eth_chainId"});n=parseInt(t)}catch(i){console.log("error"),console.error(i),0==o&&(t.setText("Connect Wallet"),e.setText("Please install Metamask and allow wallet connection."))}0!=o&&n==CORRECT_CHAINID?(t.setText("Check Network"),e.setText("Connecting...OK!"),i.setVisible(!1),0==a.flag_start&&(setTimeout((()=>{a.scene.start("Loading")}),500,a),setTimeout((()=>{a.scene.launch("Loading_overlap")}),100,a),a.flag_start=1),clearInterval(s)):0==o?(t.setText("Connect Wallet"),e.setText("Please install Metamask and allow wallet connection."),i.setVisible(!0)):n!=CORRECT_CHAINID&&(t.setText("Wrong Network"),e.setText("Please connect to the Astar Network RPC."),i.setVisible(!0))}a(this);const s=setInterval(a,5e3,this)}}class Loading extends Phaser.Scene{constructor(){super({key:"Loading",active:!1}),this.flag_start=0}async update_web3(){let t=Date.now();this.count_web3Loading=0,console.log("load: web3"),await init_web3(),console.log("  OK",Date.now()-t),this.count_web3Loading+=1,console.log("load: summoner"),await contract_update_summoner_of_wallet(),console.log("  OK",Date.now()-t),this.count_web3Loading+=1,console.log("load: static"),await contract_update_static_status(summoner),console.log("  OK",Date.now()-t),this.count_web3Loading+=1,console.log("load: dynamic"),await contract_update_dynamic_status(summoner),console.log("  OK",Date.now()-t),this.count_web3Loading+=1,console.log("load: item"),local_myListsAt_withItemType=await get_myListsAt_withItemType(local_owner),console.log("  OK",Date.now()-t),this.count_web3Loading+=1,console.log("load: festival"),await contract_update_festival_info(summoner),console.log("  OK",Date.now()-t),this.count_web3Loading+=1,this.flag_start=1}preload(){console.log("scene: Loading"),this.update_web3(),preload(this),this.load.scenePlugin({key:"rexuiplugin",url:"lib/rexuiplugin.min.js",sceneKey:"rexUI"})}create(){this._msg1=this.add.text(640,480,"").setFontSize(30).setFontFamily("Arial").setOrigin(.5).setFill("#ffebf7")}update(){if(1==this.flag_start)this._msg1.setText(""),this.scene.stop("Loading_overlap"),this.scene.start("Opeaning");else{let t="Loading On-Chain Data... (";t+=this.count_web3Loading+"/6)",this._msg1.setText(t)}}}class Loading_overlap extends Phaser.Scene{constructor(){super({key:"Loading_overlap",active:!1}),this.turn=0,this.flowerCount_present=0}preload(){this.load.spritesheet("nyui_loading","src/png/nyui_moving.png",{frameWidth:370,frameHeight:320}),this.load.spritesheet("nyui_loading2","src/png/nyui_happy.png",{frameWidth:370,frameHeight:320}),this.load.spritesheet("ohana_loading","src/particle/flowers.png",{frameWidth:370,frameHeight:320})}create(){let t=400+300*Math.random(),e=800+20*Math.random();this.nyui_text=this.add.text(t,e-50,"").setFontSize(20).setFontFamily("Arial").setOrigin(.5).setFill("#ff1694").setVisible(!1);let i="";i+="This count is stored locally\n",i+="and does not affect gameplay :)",this.nyui_text2=this.add.text(t,e+60,"This count is stored locally\nand does not affect gameplay :)").setFontSize(16).setFontFamily("Arial").setOrigin(.5).setFill("#888888").setVisible(!1),this.nyui=this.add.sprite(t,e,"nyui_loading").setOrigin(.5).setScale(.25).setDepth(1e3).setInteractive({useHandCursor:!0}).on("pointerdown",(()=>{this.flowerCount_present+=1,localStorage_flowerCount+=1,this.nyui_text.setText(localStorage_flowerCount+" flowers"),this.nyui_text.setVisible(!0),this.nyui_text2.setVisible(!0);this.add.image(t-150+300*Math.random(),e-20+40*Math.random(),"ohana_loading").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.1).setAngle(360*Math.random()).setDepth(999);localStorage.setItem("flowerCount_inGame",JSON.stringify(localStorage_flowerCount))}))}update(){this.turn+=1,this.flowerCount_present>=10?this.nyui.setTexture("nyui_loading2"):this.turn%80==40?this.nyui.setFrame(1):this.turn%80==0&&this.nyui.setFrame(0)}}class Opeaning extends Phaser.Scene{constructor(){super({key:"Opeaning",active:!1})}preload(){console.log("scene: Opeaning")}create(){this.cameras.main.fadeOut(300,255,255,255),this.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,(()=>{this.scene.start("Main")}))}}class SomethingWrong extends Phaser.Scene{constructor(){super({key:"SomethingWrong",active:!1})}create(){let t=this.add.text(640,480,"").setFontSize(80).setFontFamily("Arial").setOrigin(.5).setFill("#ff1694"),e=this.add.text(640,560,"").setFontSize(40).setFontFamily("Arial").setOrigin(.5).setFill("#ffebf7"),i=this.add.image(640,360,"icon_wrong").setOrigin(.5).setScale(.5).setVisible(!1);t.setText("Something Wrong"),e.setText("Please reload the page."),i.setVisible(!0)}}class Main extends Phaser.Scene{constructor(){super({key:"Main",active:!1})}create(){let t=Date.now();console.log("create..."),create(this),console.log("  OK",Date.now()-t),updateFirst(this)}update(){0==flag_fadein&&(this.cameras.main.fadeIn(600,255,255,255),flag_fadein=1),update(this)}}let config={type:Phaser.CANVAS,parent:"canvas",backgroundColor:"F4B4D0",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1280,height:960},scene:[FirstCheck,Loading,Loading_overlap,Opeaning,SomethingWrong,Main],fps:{target:60},dom:{createContainer:!0}};game=new Phaser.Game(config);