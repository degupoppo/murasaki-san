async function init_global_variants(){summoner=-1,local_birth_time=Date.now(),SPEED=1,BASE_SEC=86400,CORRECT_CHAINID=4369,STAKING_REWARD_SEC=2592e3,ELECTED_FLUFFY_TYPE=0,local_class=0,local_strength=0,local_dexterity=0,local_intelligence=0,local_luck=0,local_level=0,local_last_feeding_time=0,local_last_grooming_time=0,local_coin=0,local_exp=0,local_mining_status=0,local_mining_start_time=0,local_next_exp_required=0,local_material=0,local_farming_status=0,local_farming_start_time=0,local_crafting_status=0,local_crafting_start_time=0,local_crafting_item_type=0,local_items=Array(320).fill(0),local_precious=0,local_wallet="0x0000000000000000000000000000000000000001",local_owner="0x0000000000000000000000000000000000000000",local_name_str="(unnamed)",local_notPetrified=1,local_isActive=0,local_rolled_dice=0,local_last_rolled_dice=0,local_last_dice_roll_time=Date.now(),local_mail_sending_interval=-1,local_score=0,local_receiving_mail=0,local_receiving_mail_from="",local_satiety=0,local_happy=0,local_age=0,local_myListsAt_withItemType=[],local_myListsAt_withItemTypeAndSubtype=[],local_luck_challenge_of_mffg=0,local_luck_challenge_of_mfmf=0,local_luck_challenge_of_mfc=0,local_newsText=["Peaceful","Today !","","ฅ•ω•ฅ"],local_itemIds=[],local_wallet_score=0,local_birthplace="",local_personality="",local_character="",local_weakpoint="",local_scent="",local_staking_reward_counter=2592e3,local_check_votable=0,local_total_exp_gained=0,local_total_coin_mined=0,local_total_material_farmed=0,local_total_item_crafted=0,local_total_precious_received=0,local_dapps_staking_amount=0,local_staking_reward_speed=0,local_coin_calc=0,local_material_calc=0,local_calc_feeding=0,local_calc_grooming=0,local_blockNumber=0,local_fluffy_count=0,local_price=0,local_flower="",local_street="",local_city="",local_crafting_resume_flag=0,local_crafting_resume_item_type=0,local_crafting_resume_item_dc=0,local_total_staking_reward_counter=0,local_achv=Array(32).fill(!1),local_nonce=0,local_wallet_age=0,local_achv_onChain_score=0,local_achv_onChain_score_token=0,local_achv_onChain_score_nft=0,local_achv_onChain_score_staking=0,local_achv_onChain_score_murasaki_nft=0,local_exp_rate_twinkle=0,local_mining_perDay=0,local_farming_perDay=0,local_ff_each_voting_count=Array(256).fill(0),local_ff_next_festival_block=0,local_ff_inSession=0,local_ff_isVotable=0,local_ff_last_voting_block=0,local_ff_last_voting_type=0,local_ff_subject_now=0,local_ff_subject_start_block=0,local_ff_subject_end_block=0,local_ff_isEndable=0,local_ff_elected_type=0,local_ff_previous_elected_type=0,previous_local_last_feeding_time=0,previous_local_last_grooming_time=0,previous_local_level=0,previous_local_mining_status=-1,previous_local_farming_status=-1,previous_local_crafting_status=-1,previous_local_exp=.01,previous_local_coin=0,previous_local_material=0,previous_local_items=local_items,previous_local_name_str="[0] * 256",previous_local_item194=0,previous_local_item195=0,previous_local_item196=0,previous_local_item197=0,previous_local_rolled_dice=0,previous_local_score=0,previous_satiety=0,previous_happy=0,previous_local_precious=0,previous_local_precious2=0,previous_local_item200=0,last_local_coin_calc=0,last_local_material_calc=0,last_local_calc_feeding=0,last_local_calc_grooming=0,previous_local_fluffy_count=0,previous_local_blockNumber=0,li_achv=[0],local_practice_exp_clarinet=0,local_practice_exp_piano=0,local_practice_exp_violin=0,local_practice_exp_horn=0,local_practice_exp_timpani=0,local_practice_exp_cello=0,local_practice_status=0,local_practice_item_id=0,local_practice_start_time=0,local_practice_level_clarinet=0,local_practice_level_piano=0,local_practice_level_violin=0,local_practice_level_horn=0,local_practice_level_timpani=0,local_practice_level_cello=0,previous_local_practice_item_id=0,local_strolling_status=0,local_stroll_endable=0,local_total_strolledDistance=0,local_total_strolledDistance_ofCompanion_01=0,local_total_strolledDistance_ofCompanion_02=0,local_total_strolledDistance_ofCompanion_03=0,local_total_metSummoners=0,local_metSummoners_01=0,local_metSummoners_02=0,local_metSummoners_03=0,local_metSummoners_04=0,local_metSummoners_05=0,local_total_strolling_direction_01=0,local_total_strolling_direction_02=0,local_total_strolling_direction_03=0,local_total_strolling_direction_04=0,local_total_strolling_companion_01=0,local_total_strolling_companion_02=0,local_total_strolling_companion_03=0,local_stroll_level=0,local_met_level=0,local_direction=0,local_companion=0,local_strollingDistance=0,local_reminingSec=0,local_coolingSec=0,local_strollEndable=0,turn=0,local_coin_calc=0,local_material_calc=0,local_crafting_calc=-1,bgm=0,local_items_flag=Array(320).fill(0),global_selected_crafting_item=0,global_selected_crafting_item_dc=0,global_selected_crafting_item_required_heart=0,last_sync_time=0,mode="",screen_coin=0,screen_coin_delta=0,screen_material=0,screen_material_delta=0,screen_exp=0,screen_exp_delta=0,count_sync=0,happy=.1,satiety=0,screen_happy=0,screen_happy_delta=0,screen_satiety=0,screen_satiety_delta=0,item_wearing_hat=0,active_nui_id=0,active_nui_score=0,active_nui_exp_rate=0,text_event_random=(text_event_random="[Murasaki news]").padStart(116," "),turn_forFPS=0,time_forFPS=Date.now(),summoned_fluffies=[],summoned_presentbox=[],item_wearing_hat_pet=0,staking_reward_percent=0,local_astar_priceChange_h24=0,local_staking_percent=0,local_house_price=0,local_isTrial=-1,gamemode="",tx_counts=[0,0,0],tx_counts_forPinwheel=0,local_check_pippel=0,local_pippel_score=0,previous_local_pippel_score=0,local_tba="",flag_music=0,flag_radarchart=0,flag_doneFp=0,flag_dice_rolling=0,flag_name_minting=0,flag_mail=!1,flag_tokenBall=0,flag_loaded=0,flag_item_update=0,flag_summon_fluffy=0,flag_onLight=!0,flag_window_craft=0,flag_sync=1,flag_fadein=0,flag_debug=0,flag_info=1,flag_syncNow=0,flag_fluffy_house_click=0,flag_mogumogu=0,flag_firstCelebration=localStorage.getItem("flag_firstCelebration"),flag_summoner_specified=0,pointer_x=0,pointer_y=0;try{let e=localStorage.getItem("flowerCount_inGame");localStorage_flowerCount=JSON.parse(e)}catch(t){localStorage_flowerCount=0}}version="v0.1.30",init_global_variants();var urlParam=location.search.substring(1);if(urlParam){var param=urlParam.split("&"),paramArray=[];for(i=0;i<param.length;i++){var paramItem=param[i].split("=");paramArray[paramItem[0]]=paramItem[1]}summoner=Number(paramArray.summoner),flag_summoner_specified=1}async function send_fp_get(e,t){let s=FingerprintJS.load(),a=0;await s.then(e=>e.get()).then(e=>{a=e.visitorId});var n=new XMLHttpRequest;let o="";o+="fp=",o+=a,o+="&",o+="summoner=",o+=t,o+="&",o+="wallet=";let r="https://api.murasaki-san.com/index.html?"+(o+=e);n.open("GET",r,!0),n.send()}async function get_myListsAt_withItemType(e){return"regular"==gamemode?await contract_mc_wss.methods.myListsAt_withItemType(e,0,await contract_mc_wss.methods.myListLength(e).call()).call():"trial"==gamemode||"not_summoned"==gamemode?await contract_trial_mc_wss.methods.myListsAt_withItemType(e,0,await contract_trial_mc_wss.methods.myListLength(e).call()).call():void 0}async function get_myListsAt_withItemTypeAndSubtype(e){return"regular"==gamemode?await contract_mc_wss.methods.myListsAt_withItemTypeAndSubtype(e,0,await contract_mc_wss.methods.myListLength(e).call()).call():"trial"==gamemode||"not_summoned"==gamemode?await contract_trial_mc_wss.methods.myListsAt_withItemTypeAndSubtype(e,0,await contract_trial_mc_wss.methods.myListLength(e).call()).call():void 0}function get_allItemBalance_from_allItemId_withItemType(e){let t=Array(320).fill(0);for(i=0;i<e.length;i+=2){e[i];let s=e[i+1];t[s]+=1}return t}function get_itemIds_from_itemType(e,t){let s=[];for(i=0;i<e.length;i+=2){let a=e[i];e[i+1]==t&&s.push(Number(a))}return s}function get_itemIds(e){let t=[];for(i=0;i<e.length;i+=2){let s=e[i];t.push(Number(s))}return t}function get_itemType(e,t){for(i=0;i<e.length;i+=2){let s=e[i],a=e[i+1];if(s==t)return a}return 0}function get_upgradable_itemIds2(e){let t={};for(i=0;i<e.length;i+=2){let s=Number(e[i]),a=Number(e[i+1]);try{t[a].push(s)}catch(n){t[a]=[s]}}let o={};return Object.keys(t).forEach(e=>{(e<=128&&t[e].length>=3||201<=e&&e<=212&&t[e].length>=5||213<=e&&e<=224&&t[e].length>=4||225<=e&&e<=236&&t[e].length>=3)&&(o[e]=t[e])}),o}async function contract_update_static_status(e){if(0==summoner)return 0;let t=0;try{"regular"==gamemode?t=await contract_info_wss.methods.allStaticStatus(e).call({from:wallet}):"trial"==gamemode&&(t=await contract_trial_info_wss.methods.allStaticStatus(e).call({from:wallet}))}catch(s){console.log("***ERROR***: update_static_status")}if(0==t)return local_isActive=!1,0;local_class=Number(t[0]),local_owner=t[1],local_name_str=t[2],local_price=t[5],"trial"==gamemode&&(local_price=await contract_info.methods.price().call());let a=t[3];local_birthplace=a[0],local_personality=a[1],local_character=a[2],local_weakpoint=a[3],local_scent=a[4],local_flower=a[5],local_street=a[6],local_city=a[7],SPEED=Number(t[4])/100,STAKING_REWARD_SEC=Number(t[6]),ELECTED_FLUFFY_TYPE=Number(t[7]),update_wallet_age(local_owner),local_tba=await contract_pf.methods.call_tba(e).call()}function get_myListstAt_withItemType_from_withItemTypeAndSubtype(e){let t=[];for(let s=0;s<e.length;s+=3)t.push(Number(e[s])),t.push(Number(e[s+1]));return t}async function contract_update_dynamic_status(e){let t=Date.now();if(0==e)return count_sync+=1,0;let s,a=0,n=0;try{n=await get_myListsAt_withItemTypeAndSubtype(local_owner),a=get_myListstAt_withItemType_from_withItemTypeAndSubtype(n)}catch(o){console.log("***ERROR***: update_dynamic_status, call item")}if(0===a)return console.log("***ERROR***: _myListsAt_withItemType == 0"),0;local_myListsAt_withItemType=a,local_myListsAt_withItemTypeAndSubtype=n;local_items=get_allItemBalance_from_allItemId_withItemType(a),local_itemIds=get_itemIds(a);let r=0;for(i=201;i<=248;i++)r+=local_items[i];if(local_fluffy_count=r,1==flag_debug){for(let $=1;$<=64;$++)local_items[$]+=1;local_wallet_age=5,local_score=5e5}else if(2==flag_debug){for(let l=65;l<=128;l++)local_items[l]+=1;local_wallet_age=10,local_score=1e6}else if(3==flag_debug){for(let d=129;d<=192;d++)local_items[d]+=1;local_wallet_age=20,local_score=22e5}else 4==flag_debug&&(local_items[41]+=1);local_items[28]+=1,local_items[44]+=1,local_items[11]+=1,local_items[42]+=1;let h=0;try{"regular"==gamemode?h=await contract_info_wss.methods.allDynamicStatus(e).call({from:wallet}):"trial"==gamemode&&(h=await contract_trial_info_wss.methods.allDynamicStatus(e).call({from:wallet}))}catch(m){console.log("***ERROR***: update_dynamic_status, call status")}if(0===h)return console.log("***ERROR***: _all_dynamic_status == 0"),0;local_achv=await call_achv(e),update_nonce(local_wallet=wallet),previous_local_blockNumber!=(local_blockNumber=Number(h[0]))&&(update_txCount(),previous_local_blockNumber=local_blockNumber),local_isActive=1==(s=Number(h[45])),local_inHouse=1==(s=h[49]),local_level=Number(h[2]),local_exp=Number(h[3]),local_strength=Number(h[4])/100,local_dexterity=Number(h[5])/100,local_intelligence=Number(h[6])/100,local_luck=Number(h[7])/100,local_next_exp_required=Number(h[8]),local_age=Number(h[1]),local_strength_withItems=Number(h[35])/100,local_dexterity_withItems=Number(h[36])/100,local_intelligence_withItems=Number(h[37])/100,local_luck_withItems=Number(h[38])/100,local_luck_withItems_withDice=Number(h[42])/100,local_coin=Number(h[9]),local_material=Number(h[10]),local_precious=Number(h[30]),local_last_feeding_time=Number(h[11]),local_last_grooming_time=Number(h[12]),local_mining_start_time=Number(h[14]),local_farming_start_time=Number(h[16]),local_crafting_start_time=Number(h[18]),local_crafting_item_type=Number(h[19]),0==(local_working_status=Number(h[86]))?(local_mining_status=0,local_farming_status=0,local_crafting_status=0,local_practice_status=0,local_strolling_status=0):1==local_working_status?(local_mining_status=1,local_farming_status=0,local_crafting_status=0,local_practice_status=0,local_strolling_status=0):2==local_working_status?(local_mining_status=0,local_farming_status=1,local_crafting_status=0,local_practice_status=0,local_strolling_status=0):3==local_working_status?(local_mining_status=0,local_farming_status=0,local_crafting_status=1,local_practice_status=0,local_strolling_status=0):4==local_working_status?(local_mining_status=0,local_farming_status=0,local_crafting_status=0,local_practice_status=1,local_strolling_status=0):5==local_working_status&&(local_mining_status=0,local_farming_status=0,local_crafting_status=0,local_practice_status=0,local_strolling_status=1,contract_update_stroll_info(e)),local_last_rolled_dice=Number(h[40]),local_last_dice_roll_time=Number(h[41]),local_score=Number(h[34]),local_satiety=Number(h[28]),local_happy=Number(h[29]),local_mail_sending_interval=Number(h[44]),local_receiving_mail=Number(h[43]),local_lastMailOpen=Number(h[50]),local_coin_calc=Number(h[46]),local_material_calc=Number(h[47]),local_crafting_calc=Number(h[48]),local_notPetrified=Number(h[31]),local_dapps_staking_amount=Number(h[32]),local_staking_reward_counter=Number(h[56]),local_staking_reward_speed=Number(h[58]),local_total_staking_reward_counter=Number(h[59]),local_ff_next_festival_block=Number(h[60]),local_total_exp_gained=Number(h[23]),local_total_coin_mined=Number(h[24]),local_total_material_farmed=Number(h[25]),local_total_item_crafted=Number(h[26]),local_total_precious_received=Number(h[27]),local_calc_feeding=Number(h[54]),local_calc_grooming=Number(h[55]),local_crafting_resume_flag=Number(h[61]),local_crafting_resume_item_type=Number(h[62]),local_crafting_resume_item_dc=Number(h[63]),local_achv_onChain_score=Number(h[64]),local_achv_onChain_score_token=Number(h[65]),local_achv_onChain_score_nft=Number(h[66]),local_achv_onChain_score_staking=Number(h[67]),local_achv_onChain_score_murasaki_nft=Number(h[68]),local_practice_exp_clarinet=Number(h[69]),local_practice_exp_piano=Number(h[70]),local_practice_exp_violin=Number(h[71]),local_practice_exp_horn=Number(h[72]),local_practice_exp_timpani=Number(h[73]),local_practice_exp_cello=Number(h[74]),local_practice_item_id=Number(h[76]),local_practice_start_time=Number(h[77]),local_practice_level_clarinet=Number(h[78]),local_practice_level_piano=Number(h[79]),local_practice_level_violin=Number(h[80]),local_practice_level_horn=Number(h[81]),local_practice_level_timpani=Number(h[82]),local_practice_level_cello=Number(h[83]),local_staking_reward_percent=Number(h[84]),local_exp_rate_twinkle=Number(h[85]),local_stroll_total_strolledDistance=Number(h[87]),local_stroll_total_metSummoners=Number(h[88]),local_check_pippel=Number(h[94]),local_pippel_score=Number(h[95]),last_sync_time=Date.now(),((count_sync+=1)<=10||count_sync%10==0)&&console.log("[update_dynamic]","turn:",turn,"count_sync:",count_sync,"msec:",Date.now()-t)}async function contract_update_all(){await contract_update_summoner_of_wallet(),await contract_update_static_status(summoner),await contract_update_dynamic_status(summoner)}async function contract_update_event_random(){let e=await web3.eth.getBlockNumber(),t=e-7200,s=await contract_mfsl_wss.getPastEvents("Level_up",{fromBlock:t,toBlock:e}),a=await contract_mfc_wss.getPastEvents("Crafting",{fromBlock:t,toBlock:e}),n=await contract_mml_wss.getPastEvents("Open_Mail",{fromBlock:t,toBlock:e}),o=[];o=o.concat(s,a,n);let r=["Peaceful","Today !","","ฅ•ω•ฅ"];if(o.length>0){let $=o[Math.floor(Math.random()*o.length)],l=(await web3.eth.getBlock($.blockNumber)).timestamp,d=Math.round((Date.now()/1e3-l)/60),h="";h=0==d?"just now: ":d+" min ago: ",r[0]=h;let m=$.event,g=$.returnValues[0],c=await call_name_from_summoner(g);""==c&&(c="#"+g),r[1]=c;let p=$.returnValues[1],u,f;if("Level_up"==m)u="Leveled up to ",f=p,f+=" !!";else if("Crafting"==m){let _;u="Crafted",f=dic_items_reverse[p],f+=" !!"}else"Open_Mail"==m&&(""==(_summoner_from_name=await call_name_from_summoner(p))&&(_summoner_from_name="#"+p),u="Got Mail from",f=_summoner_from_name,f+=" !");r[2]=u,r[3]=f}local_newsText=r}async function contract_update_festival_info(e){if(0==summoner)return 0;let t=0;try{"regular"==gamemode?t=await contract_ff_wss.methods.get_info(e).call({from:wallet}):"trial"==gamemode&&(t=await contract_trial_ff_wss.methods.get_info(e).call({from:wallet}))}catch(s){console.log("***ERROR***: update_festival_info")}if(0==t)return 0;local_ff_each_voting_count[201]=Number(t[1]),local_ff_each_voting_count[202]=Number(t[2]),local_ff_each_voting_count[203]=Number(t[3]),local_ff_each_voting_count[204]=Number(t[4]),local_ff_each_voting_count[205]=Number(t[5]),local_ff_each_voting_count[206]=Number(t[6]),local_ff_each_voting_count[207]=Number(t[7]),local_ff_each_voting_count[208]=Number(t[8]),local_ff_each_voting_count[209]=Number(t[9]),local_ff_each_voting_count[210]=Number(t[10]),local_ff_each_voting_count[211]=Number(t[11]),local_ff_each_voting_count[212]=Number(t[12]),local_ff_next_festival_block=Number(t[13]),local_ff_inSession=Number(t[14]),local_ff_isVotable=Number(t[15]),local_ff_last_voting_block=Number(t[16]),local_ff_last_voting_type=Number(t[17]),local_ff_subject_now=Number(t[18]),local_ff_subject_start_block=Number(t[19]),local_ff_subject_end_block=Number(t[20]),local_ff_isEndable=Number(t[21]),local_ff_elected_type=Number(t[22]),local_ff_previous_elected_type=Number(t[23])}async function contract_update_stroll_info(e){if(0==summoner)return 0;let t=0;try{"regular"==gamemode&&(t=await contract_st_wss.methods.get_strollInfo(e).call({from:wallet}))}catch(s){console.log("***ERROR***: update_stroll_info")}local_total_strolledDistance=Number(t[1]),local_total_strolledDistance_ofCompanion_01=Number(t[2]),local_total_strolledDistance_ofCompanion_02=Number(t[3]),local_total_strolledDistance_ofCompanion_03=Number(t[4]),local_total_metSummoners=Number(t[5]),local_metSummoners_01=Number(t[6]),local_metSummoners_02=Number(t[7]),local_metSummoners_03=Number(t[8]),local_metSummoners_04=Number(t[9]),local_metSummoners_05=Number(t[10]),local_total_strolling_direction_01=Number(t[11]),local_total_strolling_direction_02=Number(t[12]),local_total_strolling_direction_03=Number(t[13]),local_total_strolling_direction_04=Number(t[14]),local_total_strolling_companion_01=Number(t[15]),local_total_strolling_companion_02=Number(t[16]),local_total_strolling_companion_03=Number(t[17]),local_stroll_level=Number(t[18]),local_met_level=Number(t[19]),local_direction=Number(t[20]),local_companion=Number(t[21]),local_reminingSec=Number(t[22]),local_strollingDistance=Number(t[23]),local_strollEndable=Number(t[24]),local_coolingSec=Number(t[25])}async function contract_callMailDetail(e){if("trial"==gamemode)return 0;let t=(await contract_mml_wss.methods.mails(await contract_mml_wss.methods.receiving(e).call()).call())[2],s=await contract_mfs_wss.methods.call_name_from_summoner(t).call();return[t,s]}async function contract_get_item_nui(e){if("trial"==gamemode)return 0;let t=await contract_msn_wss.methods.summoner(e).call(),s=await contract_msn_wss.methods.class(e).call(),a=await contract_msn_wss.methods.score(e).call(),n=await contract_mfs_wss.methods.calc_exp_addition_rate_from_nui(summoner,e).call(),o=(await contract_mc_wss.methods.items(e).call()).memo;return[t,s,a,n,o]}async function call_name_from_summoner(e){return"regular"==gamemode?await contract_mfs_wss.methods.call_name_from_summoner(e).call():"trial"==gamemode?await contract_trial_mfs_wss.methods.call_name_from_summoner(e).call():void 0}async function call_amount_of_token(e){let t=local_owner,s=await new web3wss.eth.Contract([{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"balanceOf",outputs:[{name:"balance",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],type:"function"},],e),a;return await s.methods.balanceOf(t).call()/10**await s.methods.decimals().call()}async function contract_update_summoner_of_wallet(){if(1==flag_summoner_specified)gamemode="regular";else if(0==flag_summoner_specified){let e=await contract_mm_wss.methods.tokenOf(wallet).call();e=Number(e);let t=await contract_trial_mm_wss.methods.tokenOf(wallet).call();(t=Number(t))>0?(gamemode="trial",summoner=t):e>0?(gamemode="regular",summoner=e):(gamemode="trial",summoner=0)}}async function contract_get_nonce(e){return Number(await web3wss.eth.getTransactionCount(e))}async function update_nonce(e){local_nonce=await contract_get_nonce(e)}async function contract_get_age(e){let t=await web3wss.eth.getBlockNumber(),s=1;for(let a=t;a>=2592e3;a-=2592e3){let n;try{n=await web3.eth.getTransactionCount(e,a)}catch(o){n=0}if(n>0)s+=1;else break}return s}async function update_wallet_age(e){local_wallet_age=await contract_get_age(e)}async function calc_wallet_score(e){let t=await contract_get_nonce(e);local_nonce=t;let s=150*await contract_get_age(e),a=t;return a>s&&(a=s),a}async function update_local_wallet_score(){local_wallet_score=await calc_wallet_score(local_owner)}async function contract_get_item_dc(e){return"regular"==gamemode?await contract_mfc_wss.methods.get_item_dc(e).call():"trial"==gamemode?await contract_trial_mfc_wss.methods.get_item_dc(e).call():void 0}async function contract_get_modified_dc(e,t){return"regular"==gamemode?await contract_mfc_wss.methods.get_modified_dc(e,t).call():"trial"==gamemode?await contract_trial_mfc_wss.methods.get_modified_dc(e,t).call():void 0}function get_userItems(e){return get_itemIds_from_itemType(local_myListsAt_withItemType,e)}async function call_item_info(e){return"regular"==gamemode?await contract_mc_wss.methods.items(e).call():"trial"==gamemode?await contract_trial_mc_wss.methods.items(e).call():void 0}async function call_achv(e){return"regular"==gamemode?await contract_mfa_wss.methods.get_achievement(e).call():"trial"==gamemode?await contract_trial_mfa_wss.methods.get_achievement(e).call():void 0}async function update_achv(){for(i=1;i<=20;i++)!0==local_achv[i]&&(li_achv[i].visible=!0)}async function call_AstarCats(){let e;return await fetch(await contract_AstarCats.methods.tokenURI(1e3+Math.floor(6777*Math.random())).call()).then(e=>e.json()).then(t=>{e=t}),e.image}async function get_nft_url(){return await call_AstarCats()}async function update_house_price(){if("trial"==gamemode)return 0;let e=await contract_bt.methods.calc_buybackPrice_asArray().call(),t=0;for(i=1;i<=16;i++)t+=local_items[i]*e[i],t+=local_items[i+64]*e[i]*3,t+=local_items[i+64+64]*e[i]*9,t+=local_items[i+16]*e[i],t+=local_items[i+16+64]*e[i]*3,t+=local_items[i+16+64+64]*e[i]*9,t+=local_items[i+16+16]*e[i],t+=local_items[i+16+16+64]*e[i]*3,t+=local_items[i+16+16+64+64]*e[i]*9;for(i=1;i<=12;i++)t+=local_items[200+i]*e[21],t+=local_items[212+i]*e[22],t+=local_items[224+i]*e[23],t+=local_items[236+i]*e[24];t/=1e18,local_house_price=t=Math.floor(100*t)/100}async function update_mining_perDay(e){let t;"regular"==gamemode?t=await contract_mfmf_wss.methods.calc_mining_perDay(e).call():"trial"==gamemode&&(t=await contract_trial_mfmf_wss.methods.calc_mining_perDay(e).call()),local_mining_perDay=t}async function update_farming_perDay(e){let t;"regular"==gamemode?t=await contract_mfmf_wss.methods.calc_farming_perDay(e).call():"trial"==gamemode&&(t=await contract_trial_mfmf_wss.methods.calc_farming_perDay(e).call()),local_farming_perDay=t}async function contract_summon(e){if("regular"==gamemode){let t=await contract_mp.methods.PRICE().call();t=Number(t),contract_mfsl.methods.summon(e).send({from:wallet,value:t}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}else if("trial"==gamemode){let s=await contract_trial_mp.methods.PRICE().call();s=Number(s),contract_trial_mfsl.methods.summon(e).send({from:wallet,value:s}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}}async function contract_convert(){if("regular"==gamemode)return 0;if("trial"==gamemode){let e=await contract_mp.methods.PRICE().call();e=Number(e),contract_trial_tc.methods.converting_summon().send({from:wallet,value:e}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}}async function contract_curePetrification(e){if("regular"==gamemode){let t=await contract_mp.methods.PRICE().call();t=Number(t),contract_mffg.methods.cure_petrification(e).send({from:wallet,value:t}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}else if("trial"==gamemode){let s=await contract_trial_mp.methods.PRICE().call();s=Number(s),contract_trial_mffg.methods.cure_petrification(e).send({from:wallet,value:s}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}}async function contract_burn(e){"regular"==gamemode?contract_mfsl.methods.burn(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfsl.methods.burn(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_level_up(e){"regular"==gamemode?contract_mfsl.methods.level_up(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfsl.methods.level_up(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_feeding(e){if(0==e)return 0;"regular"==gamemode?contract_mffg.methods.feeding(e,active_nui_id).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>{update_tx_text("done",e.transactionHash),flag_syncNow=1}):"trial"==gamemode&&contract_trial_mffg.methods.feeding(e,active_nui_id).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>{update_tx_text("done",e.transactionHash),flag_syncNow=1})}async function contract_grooming(e){"regular"==gamemode?contract_mffg.methods.grooming(e,active_nui_id).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>{update_tx_text("done",e.transactionHash),flag_syncNow=1}):"trial"==gamemode&&contract_trial_mffg.methods.grooming(e,active_nui_id).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>{update_tx_text("done",e.transactionHash),flag_syncNow=1})}async function contract_mining(e){"regular"==gamemode?0==local_mining_status?contract_mfmf.methods.start_mining(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):contract_mfmf.methods.stop_mining(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&(0==local_mining_status?contract_trial_mfmf.methods.start_mining(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):contract_trial_mfmf.methods.stop_mining(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)))}async function contract_farming(e){"regular"==gamemode?0==local_farming_status?contract_mfmf.methods.start_farming(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):contract_mfmf.methods.stop_farming(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&(0==local_farming_status?contract_trial_mfmf.methods.start_farming(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):contract_trial_mfmf.methods.stop_farming(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)))}async function contract_start_crafting(e,t){"regular"==gamemode?contract_mfc.methods.start_crafting(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfc.methods.start_crafting(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_pause_crafting(e){"regular"==gamemode?contract_mfc.methods.pause_crafting(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfc.methods.pause_crafting(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_resume_crafting(e){"regular"==gamemode?contract_mfc.methods.resume_crafting(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfc.methods.resume_crafting(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_cancel_crafting(e){"regular"==gamemode?contract_mfc.methods.cancel_crafting(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfc.methods.cancel_crafting(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_complete_crafting(e){"regular"==gamemode?contract_mfc.methods.complete_crafting(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfc.methods.complete_crafting(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_send_mail(e,t){"regular"==gamemode?wallet==local_owner&&contract_mml.methods.send_mail(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&wallet==local_owner&&contract_trial_mml.methods.send_mail(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_open_mail(e){"regular"==gamemode?wallet==local_owner&&contract_mml.methods.open_mail(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&wallet==local_owner&&contract_trial_mml.methods.open_mail(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_mint_name(e,t){"regular"==gamemode?wallet==local_owner&&contract_mfn.methods.mint(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&wallet==local_owner&&contract_trial_mfn.methods.mint(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_burn_name(e){"regular"==gamemode?contract_mfn.methods.burn(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfn.methods.burn(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function unpack_bag(e,t){"regular"==gamemode?wallet==local_owner&&contract_mfc2.methods.unpack_bag(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&wallet==local_owner&&contract_trial_mfc2.methods.unpack_bag(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function dice_roll(e){"regular"==gamemode?wallet==local_owner&&contract_md.methods.dice_roll(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&wallet==local_owner&&contract_trial_md.methods.dice_roll(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function upgrade_item(e,t,s,a){"regular"==gamemode?contract_mfc2.methods.upgrade_item(e,t,s,a).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfc2.methods.upgrade_item(e,t,s,a).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function upgrade_fluffy2fluffier(e,t,s,a,n,o){"regular"==gamemode?contract_mfc2.methods.upgrade_fluffy(e,t,s,a,n,o).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfc2.methods.upgrade_fluffy(e,t,s,a,n,o).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function upgrade_fluffier2fluffiest(e,t,s,a,n){"regular"==gamemode?contract_mfc2.methods.upgrade_fluffy(e,t,s,a,n,0).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfc2.methods.upgrade_fluffy(e,t,s,a,n,0).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function upgrade_fluffiest2doll(e,t,s,a){"regular"==gamemode?contract_mfc2.methods.upgrade_fluffy(e,t,s,a,0,0).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfc2.methods.upgrade_fluffy(e,t,s,a,0,0).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function open_presentbox(e,t){"regular"==gamemode?wallet==local_owner&&contract_mfc2.methods.open_presentbox(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&wallet==local_owner&&contract_trial_mfc2.methods.open_presentbox(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_voting(e,t){"regular"==gamemode?wallet==local_owner&&contract_ff.methods.voting(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&wallet==local_owner&&contract_trial_ff.methods.voting(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_end_voting(e){"regular"==gamemode?wallet==local_owner&&contract_ff.methods.end_voting(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&wallet==local_owner&&contract_trial_ff.methods.end_voting(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_start_practice(e,t){"regular"==gamemode?contract_mfp.methods.start_practice(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfp.methods.start_practice(e,t).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_stop_practice(e){"regular"==gamemode?contract_mfp.methods.stop_practice(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&contract_trial_mfp.methods.stop_practice(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function open_staking_reward(e){"regular"==gamemode?wallet==local_owner&&contract_mfst.methods.open_staking_reward(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash)):"trial"==gamemode&&wallet==local_owner&&contract_trial_mfst.methods.open_staking_reward(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_start_stroll(e,t,s,a){"regular"==gamemode&&contract_st.methods.startStroll(e,t,s,a).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function contract_end_stroll(e){"regular"==gamemode&&contract_st.methods.endStroll(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}async function eventMonitor(e,t){(async()=>{e.events.allEvents({},(e,s)=>{let a=JSON.parse(JSON.stringify(s,null,"    ")),n,o=[a.event,a.transactionHash];for(let r=0;r<=5;r++){let $=a.returnValues[r];void 0!==$&&o.push($)}console.log(o),t.push(o)})})()}function start_eventMonitor(){eventMonitor(contract_mfsl_wss,li_eventLog=[]),eventMonitor(contract_mffg_wss,li_eventLog),eventMonitor(contract_mfmf_wss,li_eventLog),eventMonitor(contract_mfc_wss,li_eventLog),eventMonitor(contract_mfc2_wss,li_eventLog),eventMonitor(contract_mfn_wss,li_eventLog),eventMonitor(contract_md_wss,li_eventLog),eventMonitor(contract_mml_wss,li_eventLog),eventMonitor(contract_ff_wss,li_eventLog),eventMonitor(contract_bt_wss,li_eventLog)}function update_astarPrice(){let e=new XMLHttpRequest;e.open("GET","https://api.dexscreener.com/latest/dex/pairs/astar/0x806f746a7c4293092ac7aa604347be123322df1e",URL,!0),e.onload=function(){local_astar_priceChange_h24=JSON.parse(this.response).pair.priceChange.h24},e.send()}async function update_txCount(){tx_counts.shift();let e=await web3.eth.getBlockTransactionCount(local_blockNumber);tx_counts.push(e),tx_counts_forPinwheel<=0&&(tx_counts_forPinwheel=tx_counts.reduce((e,t)=>Math.max(e,t)))}async function get_strollInfo(e){return await contract_st.methods.get_strollInfo(e).call()}async function contract_mint_pippel(e){"regular"==gamemode&&wallet==local_owner&&contract_pf.methods.mint_pippel(e).send({from:wallet}).on("transactionHash",e=>update_tx_text("sending",e)).on("receipt",e=>update_tx_text("done",e.transactionHash))}class Murasakisan extends Phaser.GameObjects.Sprite{constructor(e,t,s){super(e,t,s,"murasaki_sleeping"),this.x=t,this.y=s,this.scene.add.existing(this),this.anims.play("murasaki_sleeping",!0),this.mode="resting",this.submode=0,this.subcount=0,this.count=0,this.dist="right",this.target_x=0,this.target_y=0,this.setInteractive(),this.on("pointerdown",function(e){this.on_click()},this),this.exemption_resting_count=0,this.followingTwinkle=0}checkOverlap(e,t){var s=e.getBounds();s.x+=s.width/4,s.y+=s.height/2,s.width/=2,s.height/=3;var a=t.getBounds();return Phaser.Geom.Intersects.RectangleToRectangle(s,a)}set set_mode(e){this.mode=e,this.count=0,!1==item_bear.visible&&"grooming"!=this.mode&&(item_bear.visible=!0)}get get_mode(){return this.mode}on_click(){("resting"==this.mode||"moving"==this.mode)&&(this.count=0,this.mode="hugging")}resting(){if(this.count+=1,1==this.count){if("right"==this.dist?this.anims.play("murasaki_right",!0):"left"==this.dist&&this.anims.play("murasaki_left",!0),this.resting_count=70+30*Math.random(),0!=local_practice_status)try{this.item_practice.destroy()}catch(e){}}else if(this.count>=this.resting_count){let t=100*Math.random();if(t<=5)this.check_hammock()?(this.mode="hammock",this.count=0,this.submode=0):(this.mode="sleeping",this.count=0);else if(t<=15&&local_happy>=80){for(let s=0;s<group_pet.getLength();s++)if(this.checkOverlap(this,group_pet.getChildren()[s])){this.mode="meet_a_pet",this.count=0;break}}else t<=30&&satiety<=20&&count_sync>3?(this.mode="hungry",this.count=0):t<=30&&happy<=20&&count_sync>3?(this.mode="crying",this.count=0):t<=30&&1==flag_music&&count_sync>3?(this.mode="listning",this.count=0):(this.mode="moving",this.count=0)}}moving(){if(this.count+=1,1==this.count){var e=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=e[Math.floor(Math.random()*e.length)],this.x<200&&this.moving_degree>90&&this.moving_degree<270?this.moving_degree+=180:this.x>1e3&&(this.moving_degree<90||this.moving_degree>270)&&(this.moving_degree+=180),this.moving_degree=this.moving_degree%360,this.y>760&&this.moving_degree>180?this.moving_degree=360-this.moving_degree:this.y<550&&this.moving_degree<180&&(this.moving_degree=360-this.moving_degree),this.moving_speed=.5+.4*Math.random(),this.moving_count=70+30*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.anims.play("murasaki_left",!0)):(this.dist="right",this.anims.play("murasaki_right",!0))}else if(this.count<this.moving_count){if(this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed,2==flag_tokenBall&&2==this.count&&100*Math.random()>=50){for(let t=0;t<group_tokenBall.getLength();t++)if(this.checkOverlap(this,group_tokenBall.getChildren()[t])){group_tokenBall.getChildren()[t].on_click();break}}if(3==this.count&&100*Math.random()>=50){for(let s=0;s<group_star.getLength();s++)if(this.checkOverlap(this,group_star.getChildren()[s])){group_star.getChildren()[s].on_kick();break}}if(4==this.count&&100*Math.random()>=50){for(let a=0;a<group_scoreMeter.getLength();a++)if(this.checkOverlap(this,group_scoreMeter.getChildren()[a])){group_scoreMeter.getChildren()[a].on_kick();break}}}else this.count>=this.moving_count&&(this.mode="resting",this.count=0)}drop_followingTwinkle(){0!=this.followingTwinkle&&(this.followingTwinkle.on_kick(),this.followingTwinkle.flag_follow=0,this.followingTwinkle=0)}feeding(){if(this.count+=1,0==this.submode)this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_feeding_happy_right",!0)):(this.dist="left",this.anims.play("murasaki_feeding_happy_left",!0)),this.drop_followingTwinkle(),this.submode=1;else if(1==this.submode){let e=this.target_x-this.x,t=this.target_y-this.y,s=e/(Math.abs(e)+Math.abs(t))*2.2,a=t/(Math.abs(e)+Math.abs(t))*2.2;this.x+=s,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.submode=2)}else if(2==this.submode){this.anims.play("murasaki_feeding",!0),sound_happy.play();try{group_food.getChildren().length>0?group_food.getChildren()[Math.floor(Math.random()*group_food.getChildren().length)].destroy():group_food.destroy(!0)}catch(n){}this.count=0,this.count_limit=this.count+1150,this.submode=3}else if(3==this.submode){if(this.count%200==0){sound_happy.play();try{group_food.getChildren()[Math.floor(Math.random()*group_food.getChildren().length)].destroy()}catch(o){}}this.count>=this.count_limit&&(this.mode="resting",this.count=0)}}crying(){this.count+=1,1==this.count?this.anims.play("murasaki_crying",!0):this.count>=500&&(this.mode="resting",this.count=0),this.count%200==10&&sound_unhappy.play()}hungry(){this.count+=1,1==this.count?this.anims.play("murasaki_hungry",!0):this.count>=500&&(this.mode="resting",this.count=0),this.count%200==10&&sound_unhappy.play()}petrified(){this.count+=1,1==this.count&&this.anims.play("murasaki_stone",!0)}sleeping(){this.count+=1,1==this.count?this.anims.play("murasaki_sleeping",!0):this.count>=1500&&(this.mode="resting",this.count=0)}sleeping_continue(){this.count+=1,1==this.count?this.anims.play("murasaki_sleeping",!0):this.count>=9999999999&&(this.mode="resting",this.count=0)}try_hammock(){("resting"==this.mode||"moving"==this.mode)&&this.check_hammock()&&(this.mode="hammock",this.count=0,this.submode=0)}check_hammock(){return"undefined"!=typeof item_bed&&!!(item_bed.x>=100)&&!!(item_bed.x<=1180)&&!!(item_bed.y>=420)&&!!(item_bed.y<=800)&&!1==flag_onLight}sleeping_withHammock(){if(this.count+=1,0==this.submode){this.target_x=item_bed.x,this.target_y=item_bed.y,item_bed.disableInteractive();this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_right",!0)):(this.dist="left",this.anims.play("murasaki_left",!0)),this.drop_followingTwinkle(),this.submode=1}else if(1==this.submode){let e=this.target_x-this.x,t=this.target_y-this.y,s=e/(Math.abs(e)+Math.abs(t))*1.5,a=t/(Math.abs(e)+Math.abs(t))*1.5;this.x+=s,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.submode=2)}else 2==this.submode?(this.x=this.target_x,this.y=this.target_y,this.setScale(.8),this.anims.play("item_hammock",!0),this.submode=3,item_bed.visible=!1):3==this.submode&&!0==flag_onLight&&turn%100==0&&100*Math.random()<=10&&(this.setScale(.45),this.y+=50,item_bed.visible=!0,item_bed.setInteractive(),"right"==this.dist?this.anims.play("murasaki_right",!0):"left"==this.dist&&this.anims.play("murasaki_left",!0),this.mode="resting",this.count=0)}listning(){this.count+=1,1==this.count?this.anims.play("murasaki_listning",!0):this.count>=750&&(this.mode="resting",this.count=0)}grooming(){if(this.count+=1,0==this.submode)this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_feeding_happy_right",!0)):(this.dist="left",this.anims.play("murasaki_feeding_happy_left",!0)),this.drop_followingTwinkle(),this.submode=1;else if(1==this.submode){let e=this.target_x-this.x,t=this.target_y-this.y,s=e/(Math.abs(e)+Math.abs(t))*2.2,a=t/(Math.abs(e)+Math.abs(t))*2.2;this.x+=s,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.submode=2)}else 2==this.submode?(this.x=this.target_x,this.y=this.target_y-50,this.anims.play("murasaki_grooming",!0),this.count_limit=this.count+1500,this.submode=3,item_bear.visible=!1):3==this.submode&&(this.count%200==10&&sound_happy.play(),this.count>=this.count_limit&&("right"==this.dist?this.anims.play("murasaki_right",!0):"left"==this.dist&&this.anims.play("murasaki_left",!0),this.x=950,this.y=480,this.mode="resting",this.count=0,item_bear.visible=!0))}mining(){if(this.count+=1,0==this.submode)this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_working_right",!0)):(this.dist="left",this.anims.play("murasaki_working_left",!0)),this.drop_followingTwinkle(),this.submode=1;else if(1==this.submode){let e=this.target_x-this.x,t=this.target_y-this.y,s=e/(Math.abs(e)+Math.abs(t))*1.5,a=t/(Math.abs(e)+Math.abs(t))*1.5;this.x+=s,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.submode=2,this.subcount=0,this.anims.play("murasaki_mining",!0))}else 2==this.submode&&(this.count%300==1&&this.anims.play("murasaki_mining",!0),this.count%600==10&&(sound_mining_during.play(),summon_coin(this.scene),this.subcount+=1,this.subcount>=30&&100*Math.random()<=10&&(this.count=0,this.subcount=0,this.submode=0,this.mode="resting",this.exemption_resting_count=18e3)))}hugging(){this.count+=1,this.count%200==50&&sound_happy.play(),1==this.count?this.anims.play("murasaki_click",!0):this.count>=300&&(this.mode="resting",this.count=0)}meet_a_pet(){if(this.count+=1,this.count%200==50&&sound_happy.play(),1==this.count){this.anims.play("murasaki_click",!0);for(let e=0;e<group_pet.getLength();e++)this.checkOverlap(this,group_pet.getChildren()[e])&&(group_pet.getChildren()[e].count=0,group_pet.getChildren()[e].mode="meet")}else this.count>=300&&(this.mode="resting",this.count=0)}farming(){if(this.count+=1,0==this.submode)this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_working_right",!0)):(this.dist="left",this.anims.play("murasaki_working_left",!0)),this.drop_followingTwinkle(),this.submode=1;else if(1==this.submode){let e=this.target_x-this.x,t=this.target_y-this.y,s=e/(Math.abs(e)+Math.abs(t))*1.5,a=t/(Math.abs(e)+Math.abs(t))*1.5;this.x+=s,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.submode=2,this.subcount=0,this.anims.play("murasaki_farming",!0))}else 2==this.submode&&(this.count%300==1&&this.anims.play("murasaki_farming",!0),this.count%400==10&&(sound_farming_during.play(),summon_leaf(this.scene),this.subcount>=30&&100*Math.random()<=10&&(this.count=0,this.subcount=0,this.submode=0,this.mode="resting",this.exemption_resting_count=18e3)))}crafting(){if(this.count+=1,0==this.submode)this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_working_right",!0)):(this.dist="left",this.anims.play("murasaki_working_left",!0)),this.drop_followingTwinkle(),this.submode=1;else if(1==this.submode){let e=this.target_x-this.x,t=this.target_y-this.y,s=e/(Math.abs(e)+Math.abs(t))*1.5,a=t/(Math.abs(e)+Math.abs(t))*1.5;this.x+=s,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.submode=2,this.subcount=0,this.anims.play("murasaki_crafting",!0))}else 2==this.submode&&(this.count%300==1&&(0==local_crafting_calc?this.anims.play("murasaki_sleeping",!0):this.anims.play("murasaki_crafting",!0)),this.count%600==10&&(sound_crafting_during.play(),summon_flower(this.scene),this.subcount+=1,this.subcount>=30&&100*Math.random()<=10&&(this.count=0,this.subcount=0,this.submode=0,this.mode="resting",this.exemption_resting_count=18e3)))}try_attenting(e,t){("resting"==this.mode||"moving"==this.mode)&&(this.mode="attenting",this.submode=0,this.target_x=e,this.target_y=t)}attenting(){if(0==this.submode)this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_right",!0)):(this.dist="left",this.anims.play("murasaki_left",!0)),this.submode+=1;else if(1==this.submode){let e=this.target_x-this.x,t=this.target_y-this.y,s=e/(Math.abs(e)+Math.abs(t))*1.5,a=t/(Math.abs(e)+Math.abs(t))*1.5;this.x+=s,this.y+=a,this.x>this.target_x-75&&this.x<this.target_x+75&&this.y>this.target_y-25&&this.y<this.target_y+25&&(this.submode=2)}else 2==this.submode&&(this.mode="hugging",this.submode=0,this.count=0)}practice(){if(this.count+=1,0==this.submode)this.target_x-this.x>0?(this.dist="right",this.anims.play("murasaki_working_right",!0)):(this.dist="left",this.anims.play("murasaki_working_left",!0)),this.drop_followingTwinkle(),this.submode=1;else if(1==this.submode){let e=this.target_x-this.x,t=this.target_y-this.y,s=e/(Math.abs(e)+Math.abs(t))*1.5,a=t/(Math.abs(e)+Math.abs(t))*1.5;this.x+=s,this.y+=a,this.x>this.target_x-5&&this.x<this.target_x+5&&this.y>this.target_y-5&&this.y<this.target_y+5&&(this.submode=2)}else if(2==this.submode){let n=get_itemType(local_myListsAt_withItemType,local_practice_item_id),o="";n==dic_items.Clarinet.item_id?(item_clarinet.visible=!1,o="practice_clarinet"):n==dic_items.Piano.item_id?(item_piano.visible=!1,o="practice_piano"):n==dic_items.Violin.item_id&&(item_violin.visible=!1,o="practice_violin");try{this.item_practice.destroy()}catch(r){}this.item_practice=this.scene.add.sprite(this.target_x-100,this.target_y,o).setOrigin(.5).setScale(.4).setDepth(this.target_y).anims.play(o,!0),this.submode=3}else 3==this.submode&&(this.anims.play("murasaki_listning",!0),this.count%200==10&&(sound_practice.play(),summon_note(this.scene)),happy<=0&&(this.anims.play("murasaki_sleeping",!0),this.submode=4))}strolling_start(){if(this.count+=1,0==this.submode)this.waterbottle=this.scene.add.sprite(this.x,this.y,"stroll_waterbottle").setScale(.45).setOrigin(.5).setDepth(this.depth+1),this.x>=strolling_companion.x?this.dist="left":(this.dist="right",this.waterbottle.flipX=!0),"right"==this.dist?this.anims.play("murasaki_right",!0):"left"==this.dist&&this.anims.play("murasaki_left",!0),strolling_companion.mode="strolling_start",strolling_companion.submode=0,this.submode+=1;else if(1==this.submode){let e=strolling_companion.x-this.x,t=strolling_companion.y-this.y,s=e/(Math.abs(e)+Math.abs(t))*1.2,a=t/(Math.abs(e)+Math.abs(t))*1.2;this.x+=s,this.y+=a,this.waterbottle.x=this.x,this.waterbottle.y=this.y,this.waterbottle.depth=this.depth+1,this.count%200==0&&(sound_mining_during.play(),summon_heart(this.scene)),50>=Math.abs(e)&&50>=Math.abs(t)&&(this.submode+=1)}else 2==this.submode?this.count%200==0&&(sound_mining_during.play(),summon_heart(this.scene)):3==this.submode?(1==this.count&&this.anims.play("murasaki_click",!0),this.count%200==50&&sound_happy.play(),this.count>=300&&(this.count=0,this.submode+=1,strolling_companion.submode+=1)):4==this.submode?(1==this.count&&(this.speed_x=-.8,this.speed_y=.8*Math.random(),this.anims.play("murasaki_left",!0),sound_mining.play()),this.x+=this.speed_x,this.y+=this.speed_y,this.waterbottle.x=this.x,this.waterbottle.y=this.y,this.waterbottle.depth=this.depth+1,this.count%100==0&&(sound_mining_during.play(),summon_heart(this.scene)),this.count>200&&(this.count=0,this.submode=5),(this.x<-200||this.y>1100)&&(this.count=0,this.submode=6)):5==this.submode?(this.anims.play("murasaki_click",!0),this.flipX=!0,this.waterbottle.flipX=!0,this.count%200==50&&sound_happy.play(),this.count>300&&(this.submode=4,this.count=1,this.anims.play("murasaki_left",!0),this.flipX=!1,this.waterbottle.flipX=!1)):6==this.submode?(open_window_strollingDuring(this.scene,local_direction),this.submode+=1):this.submode}strolling_end(){if(0==this.submode)this.target_x=400+400*Math.random(),this.target_y=550+200*Math.random(),this.anims.play("murasaki_right",!0),this.flipX=!1,this.submode=1;else if(1==this.submode){let e=this.target_x-this.x,t=this.target_y-this.y,s=e/(Math.abs(e)+Math.abs(t))*1.5,a=t/(Math.abs(e)+Math.abs(t))*1.5;this.x+=s,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.submode=2,this.subcount=0)}else if(2==this.submode){this.subcount=0,this.submode=0,this.mode="resting";let n="Friends +"+this.delta_total_metSummoners+"\nDistance +"+this.delta_total_strolledDistance+" m",o=this.scene.add.text(this.x,this.y-80,n).setOrigin(.5).setDepth(2e3).setFontSize(20).setFontFamily("Arial").setFill("#FF4264");setTimeout(()=>{o.destroy()},1e4),this.on_click(),item_waterBottle.visible=!0}}update_item_wearing_hat(){"resting"==this.mode||"moving"==this.mode||"hugging"==this.mode||"hungry"==this.mode||"crying"==this.mode||"listning"==this.mode||"attenting"==this.mode||"meet_a_pet"==this.mode||"strolling_start"==this.mode||"strolling_end"==this.mode?(item_wearing_hat.x=this.x,item_wearing_hat.y=this.y-65):"sleeping"==this.mode||"murasaki_sleeping"==this.texture.key?(item_wearing_hat.x=this.x-26,item_wearing_hat.y=this.y-22):"hammock"==this.mode?this.submode<2?(item_wearing_hat.x=this.x,item_wearing_hat.y=this.y-65):(item_wearing_hat.x=this.x,item_wearing_hat.y=this.y-135):"mining"==this.mode&&1==this.submode&&"left"==this.dist?(item_wearing_hat.x=this.x-5,item_wearing_hat.y=this.y-50):"mining"==this.mode&&1==this.submode&&"right"==this.dist?(item_wearing_hat.x=this.x+5,item_wearing_hat.y=this.y-50):"mining"==this.mode&&2==this.submode?(item_wearing_hat.x=this.x+27,item_wearing_hat.y=this.y-72):"farming"==this.mode&&1==this.submode&&"left"==this.dist?(item_wearing_hat.x=this.x-5,item_wearing_hat.y=this.y-50):"farming"==this.mode&&1==this.submode&&"right"==this.dist?(item_wearing_hat.x=this.x+5,item_wearing_hat.y=this.y-50):"farming"==this.mode&&2==this.submode?(item_wearing_hat.x=this.x+25,item_wearing_hat.y=this.y-55):"crafting"==this.mode&&1==this.submode&&"left"==this.dist?(item_wearing_hat.x=this.x-5,item_wearing_hat.y=this.y-50):"crafting"==this.mode&&1==this.submode&&"right"==this.dist?(item_wearing_hat.x=this.x+7,item_wearing_hat.y=this.y-50):"crafting"==this.mode&&2==this.submode?(item_wearing_hat.x=this.x+0,item_wearing_hat.y=this.y-80):"feeding"==this.mode&&1==this.submode&&"right"==this.dist?(item_wearing_hat.x=this.x+8,item_wearing_hat.y=this.y-55):"feeding"==this.mode&&1==this.submode&&"left"==this.dist?(item_wearing_hat.x=this.x-8,item_wearing_hat.y=this.y-55):"feeding"==this.mode&&3==this.submode?(item_wearing_hat.x=this.x-2,item_wearing_hat.y=this.y-65):"grooming"==this.mode&&1==this.submode&&"right"==this.dist?(item_wearing_hat.x=this.x+8,item_wearing_hat.y=this.y-55):"grooming"==this.mode&&1==this.submode&&"left"==this.dist?(item_wearing_hat.x=this.x-8,item_wearing_hat.y=this.y-55):"grooming"==this.mode&&3==this.submode?(item_wearing_hat.x=this.x-25,item_wearing_hat.y=this.y+45):"practice"==this.mode&&1==this.submode&&"left"==this.dist?(item_wearing_hat.x=this.x-5,item_wearing_hat.y=this.y-50):"practice"==this.mode&&1==this.submode&&"right"==this.dist?(item_wearing_hat.x=this.x+5,item_wearing_hat.y=this.y-50):"practice"==this.mode&&this.submode>=2&&(item_wearing_hat.x=this.x,item_wearing_hat.y=this.y-65),"undefined"!=typeof item_hat_helmet&&item_wearing_hat==item_hat_helmet?(item_wearing_hat.x+=0,item_wearing_hat.y+=5):"undefined"!=typeof item_hat_mortarboard&&item_wearing_hat==item_hat_mortarboard&&(item_wearing_hat.x+=4,item_wearing_hat.y+=8),item_wearing_hat.depth=this.y+1}update(){count_sync>0&&local_level>0&&("resting"==this.mode?this.resting():"moving"==this.mode?this.moving():"feeding"==this.mode?this.feeding():"crying"==this.mode?this.crying():"sleeping"==this.mode?this.sleeping():"sleeping_continue"==this.mode?this.sleeping_continue():"grooming"==this.mode?this.grooming():"mining"==this.mode?this.mining():"hugging"==this.mode?this.hugging():"farming"==this.mode?this.farming():"crafting"==this.mode?this.crafting():"hungry"==this.mode?this.hungry():"petrified"==this.mode?this.petrified():"listning"==this.mode?this.listning():"attenting"==this.mode?this.attenting():"hammock"==this.mode?this.sleeping_withHammock():"practice"==this.mode?this.practice():"meet_a_pet"==this.mode?this.meet_a_pet():"strolling_start"==this.mode?this.strolling_start():"strolling_end"==this.mode&&this.strolling_end(),0!=item_wearing_hat&&this.update_item_wearing_hat(),this.depth=this.y),this.exemption_resting_count>0&&(this.exemption_resting_count-=1)}}class Neon extends Phaser.GameObjects.Sprite{constructor(e,t,s,a,n){super(e,t,s,a),this.scene.add.existing(this),this.sprite_right=a,this.sprite_left=n,this.anims.play(a,!0),this.mode="resting",this.submode=0,this.count=0,this.dist="right",this.target_x=0,this.target_y=0,this.depth=3101,this.setInteractive({useHandCursor:!0}),this.on("pointerdown",function(e){this.on_click()},this)}on_click(){summon_star(this.scene)}resting(){this.count+=1,1==this.count?("right"==this.dist?this.anims.play(this.sprite_right,!0):"left"==this.dist&&this.anims.play(this.sprite_left,!0),this.resting_count=200+50*Math.random()):this.count>=this.resting_count&&(this.mode="moving",this.count=0)}moving(){if(this.count+=1,1==this.count){var e=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=e[Math.floor(Math.random()*e.length)],this.x<100&&this.moving_degree>90&&this.moving_degree<270?this.moving_degree-=180:this.x>1e3&&(this.moving_degree<90||this.moving_degree>270)&&(this.moving_degree-=180),this.moving_degree=this.moving_degree%360,this.y>450&&this.moving_degree>180?this.moving_degree=360-this.moving_degree:this.y<200&&this.moving_degree<180&&(this.moving_degree=360-this.moving_degree),this.moving_degree<0&&(this.moving_degree+=360),this.moving_speed=.3+.2*Math.random(),this.moving_count=70+30*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.anims.play(this.sprite_left,!0)):(this.dist="right",this.anims.play(this.sprite_right,!0))}else this.count<this.moving_count?(this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed):this.count>=this.moving_count&&(this.mode="resting",this.count=0)}update(){"resting"==this.mode?this.resting():"moving"==this.mode&&this.moving()}}class Pet extends Phaser.GameObjects.Sprite{constructor(e,t,s,a,n,o){super(e,t,s,a),this.scene.add.existing(this),this.sprite_right=a,this.sprite_left=n,this.type=o,this.anims.play(a,!0),this.mode="resting",this.submode=0,this.count=0,this.dist="right",this.target_x=0,this.target_y=0,this.on("pointerdown",function(e){this.on_click()},this),1==local_strolling_status&&(1==local_companion&&"mining"==this.type||2==local_companion&&"farming"==this.type||3==local_companion&&"crafting"==this.type)&&(this.mode="strolling_start",this.x=-150,this.y=900,this.submode=4)}set set_mode(e){this.mode=e,this.count=0}get get_mode(){return this.mode}on_click(){}meet(){this.count+=1,1==this.count?"mining"==this.type?this.anims.play("mr_astar_meet",!0):"farming"==this.type?this.anims.play("ms_ether_meet",!0):"crafting"==this.type&&this.anims.play("dr_bitco_meet",!0):this.count>=300&&(this.mode="resting",this.count=0)}resting(){this.count+=1,1==this.count?("right"==this.dist?this.anims.play(this.sprite_right,!0):"left"==this.dist&&this.anims.play(this.sprite_left,!0),this.resting_count=200+50*Math.random()):this.count>=this.resting_count&&(murasakisan.mode==this.type?(this.mode="working","mining"==this.type?(this.target_x=murasakisan.target_x+50,this.target_y=murasakisan.target_y+20):"farming"==this.type?(this.target_x=murasakisan.target_x+45,this.target_y=murasakisan.target_y+45):"crafting"==this.type&&(this.target_x=murasakisan.target_x+45,this.target_y=murasakisan.target_y+20),this.count=0,this.submode=0):"practice"==murasakisan.mode?(this.mode="practice","mining"==this.type?(this.target_x=murasakisan.target_x-65,this.target_y=murasakisan.target_y+55):"farming"==this.type?(this.target_x=murasakisan.target_x+0,this.target_y=murasakisan.target_y+70):"crafting"==this.type&&(this.target_x=murasakisan.target_x+65,this.target_y=murasakisan.target_y+55),this.count=0,this.submode=0):(this.mode="moving",this.count=0))}moving(){if(this.count+=1,1==this.count){var e=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=e[Math.floor(Math.random()*e.length)],this.x<100&&this.moving_degree>90&&this.moving_degree<270?this.moving_degree-=180:this.x>1100&&(this.moving_degree<90||this.moving_degree>270)&&(this.moving_degree-=180),this.moving_degree=this.moving_degree%360,this.y>860&&this.moving_degree>180?this.moving_degree=360-this.moving_degree:this.y<500&&this.moving_degree<180&&(this.moving_degree=360-this.moving_degree),this.moving_degree<0&&(this.moving_degree+=360),this.moving_speed=.3+.2*Math.random(),this.moving_count=70+30*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.anims.play(this.sprite_left,!0)):(this.dist="right",this.anims.play(this.sprite_right,!0))}else this.count<this.moving_count?(this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y<500&&(this.y=500),this.x<50&&(this.x=50)):this.count>=this.moving_count&&(this.mode="resting",this.count=0)}working(){if(this.count+=1,0==this.submode)this.target_x-this.x>0?(this.dist="right",this.anims.play(this.sprite_right,!0)):(this.dist="left",this.anims.play(this.sprite_left,!0)),this.submode=1;else if(1==this.submode){let e=this.target_x-this.x,t=this.target_y-this.y,s=e/(Math.abs(e)+Math.abs(t))*.6,a=t/(Math.abs(e)+Math.abs(t))*.6;this.x+=s,this.y+=a,this.x>this.target_x-1&&this.x<this.target_x+1&&this.y>this.target_y-1&&this.y<this.target_y+1&&(this.dist="left",this.anims.play(this.sprite_left,!0),this.submode=2)}else 2==this.submode&&murasakisan.mode!=this.type&&(this.mode="resting",this.count=0)}practice(){if(this.count+=1,0==this.submode)this.target_x-this.x>0?(this.dist="right",this.anims.play(this.sprite_right,!0)):(this.dist="left",this.anims.play(this.sprite_left,!0)),this.submode=1;else if(1==this.submode){let e=this.target_x-this.x,t=this.target_y-this.y,s=e/(Math.abs(e)+Math.abs(t))*.6,a=t/(Math.abs(e)+Math.abs(t))*.6;this.x+=s,this.y+=a,this.x>this.target_x-1&&this.x<this.target_x+1&&this.y>this.target_y-1&&this.y<this.target_y+1&&(this.dist="left",this.anims.play(this.sprite_left,!0),this.submode=2)}else 2==this.submode&&"practice"!=murasakisan.mode&&(this.mode="resting",this.count=0)}strolling_start(){if(0==this.submode)murasakisan.x-this.x>0?(this.dist="right",this.anims.play(this.sprite_right,!0)):(this.dist="left",this.anims.play(this.sprite_left,!0)),this.submode=1;else if(1==this.submode){let e=murasakisan.x+25-this.x,t=murasakisan.y+25-this.y,s=e/(Math.abs(e)+Math.abs(t))*.6,a=t/(Math.abs(e)+Math.abs(t))*.6;this.x+=s,this.y+=a,this.x>murasakisan.x+25-10&&this.x<murasakisan.x+25+10&&this.y>murasakisan.y+25-10&&this.y<murasakisan.y+25+10&&(this.submode=2,murasakisan.submode+=1,murasakisan.count=0)}else if(2==this.submode)"mining"==this.type?this.anims.play("mr_astar_meet",!0):"farming"==this.type?this.anims.play("ms_ether_meet",!0):"crafting"==this.type&&this.anims.play("dr_bitco_meet",!0);else if(3==this.submode){murasakisan.x-this.x>0?(this.dist="right",this.anims.play(this.sprite_right,!0)):(this.dist="left",this.anims.play(this.sprite_left,!0));let n=murasakisan.x+30-this.x,o=murasakisan.y+30-this.y,r=n/(Math.abs(n)+Math.abs(o))*.6,$=o/(Math.abs(n)+Math.abs(o))*.6;this.x+=r,this.y+=$,this.x<-100&&(this.submode=4)}else this.submode}strolling_end(){if(0==this.submode)this.dist="right",this.anims.play(this.sprite_right,!0),this.submode=1;else if(1==this.submode){murasakisan.x-this.x>0?(this.dist="right",this.anims.play(this.sprite_right,!0)):(this.dist="left",this.anims.play(this.sprite_left,!0));let e=murasakisan.x+30-this.x,t=murasakisan.y+30-this.y,s=e/(Math.abs(e)+Math.abs(t))*.6,a=t/(Math.abs(e)+Math.abs(t))*.6;this.x+=s,this.y+=a,this.x>300&&this.y<800&&(this.submode=2)}else 2==this.submode&&(this.subcount=0,this.submode=0,this.mode="resting")}update_item_wearing_hat(){"mining"==this.type?("right"==this.dist?item_wearing_hat_pet[1].x=this.x-9:item_wearing_hat_pet[1].x=this.x+10,0==this.frame.name&&"right"==this.dist||1==this.frame.name&&"left"==this.dist?item_wearing_hat_pet[1].y=this.y-22:item_wearing_hat_pet[1].y=this.y-24,item_wearing_hat_pet[1].depth=this.y+1):"farming"==this.type?("right"==this.dist?item_wearing_hat_pet[1].x=this.x:item_wearing_hat_pet[1].x=this.x+1,1==this.frame.name&&"right"==this.dist||0==this.frame.name&&"left"==this.dist?item_wearing_hat_pet[1].y=this.y-24:item_wearing_hat_pet[1].y=this.y-27,item_wearing_hat_pet[1].depth=this.y+1):"crafting"==this.type&&("right"==this.dist?item_wearing_hat_pet[1].x=this.x:item_wearing_hat_pet[1].x=this.x+2,1==this.frame.name&&"right"==this.dist||0==this.frame.name&&"left"==this.dist?item_wearing_hat_pet[1].y=this.y-29:item_wearing_hat_pet[1].y=this.y-31,item_wearing_hat_pet[1].depth=this.y+1)}update(){"resting"==this.mode?this.resting():"moving"==this.mode?this.moving():"working"==this.mode?this.working():"practice"==this.mode?this.practice():"meet"==this.mode?this.meet():"strolling_start"==this.mode?this.strolling_start():"strolling_end"==this.mode&&this.strolling_end(),this.depth=this.y,0!=item_wearing_hat_pet&&item_wearing_hat_pet[0]==this.type&&this.update_item_wearing_hat()}}class HomeCat extends Phaser.GameObjects.Sprite{constructor(e,t,s){super(e,t,s),this.x=t,this.y=s,this.scene.add.existing(this),this.submode=0,this.on("pointerdown",async()=>{if(local_items[196]>0){sound_button_on.play();contract_send_mail(summoner,get_userItems(196)[0])}}),this.on("pointerover",()=>{local_items[196]>0&&(sound_button_select.play(),this.anims.play("cat_standing_withMail",!0))}),this.on("pointerout",()=>{local_items[196]>0&&this.anims.play("cat_standing",!0)}),this.disableInteractive(),this.firstDecideMode()}firstDecideMode(){0==local_mail_sending_interval?this.mode="standing":local_mail_sending_interval>0&&1==local_lastMailOpen?this.mode="sleeping":this.mode="leaving",this.submode=0}standing(){0==this.submode?(this.x=90,this.y=575,this.anims.play("cat_standing",!0),this.setInteractive({useHandCursor:!0}),this.submode+=1):turn%100==0&&local_mail_sending_interval>0&&(this.mode="mailSending",this.submode=0)}mailSending(){0==this.submode?(this.speed_x=1,this.speed_y=.5+.5*Math.random(),this.disableInteractive(),this.anims.play("cat_walking_right_withMail_fast",!0),sound_cat1.play(),this.submode+=1):(this.x+=this.speed_x,this.y+=this.speed_y,(this.x>=1400||this.y>=1100)&&(this.mode="leaving",this.submode=0))}leaving(){0==this.submode?(this.anims.isPlaying=!1,this.disableInteractive(),this.submode+=1):turn%100==0&&(1==local_lastMailOpen||0==local_mail_sending_interval)&&(this.mode="goingHome",this.submode=0)}goingHome(){if(0==this.submode)this.anims.play("cat_walking_left_fast",!0),this.disableInteractive(),this.x=1300,this.y=800+200*Math.random(),this.target_x=100,this.target_y=590,sound_cat2.play(),this.submode+=1;else{let e=this.target_x-this.x,t=this.target_y-this.y,s=e/(Math.abs(e)+Math.abs(t))*1.5,a=t/(Math.abs(e)+Math.abs(t))*1.5;this.x+=s,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.mode="sleeping",this.submode=0)}}sleeping(){0==this.submode?(this.x=100,this.y=590,this.disableInteractive(),this.anims.play("cat_sleeping",!0),this.submode+=1):turn%100==0&&0==local_mail_sending_interval&&(this.mode="standing",this.submode=0)}update(){"sleeping"==this.mode?this.sleeping():"standing"==this.mode?this.standing():"mailSending"==this.mode?this.mailSending():"leaving"==this.mode?this.leaving():"goingHome"==this.mode&&this.goingHome(),this.depth=this.y}}class VisitorCat extends Phaser.GameObjects.Sprite{constructor(e,t,s,a,n){super(e,t,s),this.scene=e,this.x=t,this.y=s,this.summoner_from_id=a,this.summoner_from_name=n,this.scene.add.existing(this),this.submode=0,this.firstDecideMode();let o=" Mail from "+n+" ",r={font:"20px Arial",fill:"#000000",backgroundColor:"#ffffff"};this.text=this.scene.add.text(this.x,this.y-60,o,r).setOrigin(.5).setVisible(!1).setDepth(2e3),this.on("pointerdown",()=>{sound_button_on.play(),contract_open_mail(summoner)}),this.on("pointerover",()=>{sound_button_select.play(),1==flag_info&&(this.text.setVisible(!0),setTimeout(()=>{this.text.setVisible(!1)},3e3))})}firstDecideMode(){this.mode="visiting",this.submode=0}visiting(){if(0==this.submode)this.anims.play("cat_walking_left_withMail_fast",!0),this.x=1300,this.y=600+200*Math.random(),this.target_x=400+400*Math.random(),this.target_y=500+200*Math.random(),sound_cat1.play(),this.submode+=1;else{let e=this.target_x-this.x,t=this.target_y-this.y,s=e/(Math.abs(e)+Math.abs(t))*1.5,a=t/(Math.abs(e)+Math.abs(t))*1.5;this.x+=s,this.y+=a,this.x>this.target_x-10&&this.x<this.target_x+10&&this.y>this.target_y-10&&this.y<this.target_y+10&&(this.mode="standing",this.submode=0)}}standing(){0==this.submode?(this.standing_count=1e3+1e3*Math.random(),this.anims.play("cat_standing_withMail",!0),this.setInteractive({useHandCursor:!0}),this.submode+=1):this.submode<this.standing_count?this.submode+=1:(100*Math.random()<=95?this.mode="moving":this.mode="sleeping",this.submode=0)}moving(){if(0==this.submode){this.disableInteractive();var e=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=e[Math.floor(Math.random()*e.length)],this.x<100&&this.moving_degree>90&&this.moving_degree<270?this.moving_degree-=180:this.x>1100&&(this.moving_degree<90||this.moving_degree>270)&&(this.moving_degree-=180),this.moving_degree=this.moving_degree%360,this.y>800&&this.moving_degree>180?this.moving_degree=360-this.moving_degree:this.y<550&&this.moving_degree<180&&(this.moving_degree=360-this.moving_degree),this.moving_degree<0&&(this.moving_degree+=360),this.moving_speed=.3+.2*Math.random(),this.moving_count=200+200*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.anims.play("cat_walking_left_withMail",!0)):(this.dist="right",this.anims.play("cat_walking_right_withMail",!0)),this.submode+=1}else this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y<500&&(this.y=500),this.x<50&&(this.x=50),this.submode+=1,this.submode>=this.moving_count&&(this.mode="standing",this.submode=0)}sleeping(){0==this.submode?(this.anims.play("cat_sleeping_withMail",!0),this.disableInteractive(),this.submode+=1):(this.submode+=1,this.submode>=4e3&&(this.mode="standing",this.submode=0))}goingHome(){0==this.submode?(this.speed_x=-1,this.speed_y=1*Math.random(),this.disableInteractive(),this.anims.play("cat_walking_left_fast",!0),sound_cat2.play(),this.submode+=1):(this.x+=this.speed_x,this.y+=this.speed_y,this.x<-100&&cat_visitor.destroy())}update(){"visiting"==this.mode?this.visiting():"standing"==this.mode?this.standing():"moving"==this.mode?this.moving():"sleeping"==this.mode?this.sleeping():"goingHome"==this.mode&&this.goingHome(),this.depth=this.y,this.text.x=this.x,this.text.y=this.y-60,turn%100==0&&0==local_receiving_mail&&"goingHome"!=this.mode&&(this.mode="goingHome",this.submode=0)}}class Dice extends Phaser.GameObjects.Sprite{constructor(e,t,s){super(e,t,s,"item_dice"),this.scene.add.existing(this),this.setInteractive({useHandCursor:!0}),this.on("pointerdown",function(e){this.on_click()},this),this.speed_x=0,this.speed_y=0,this.text_rolled_number=e.add.text(t,s,"88",{font:"bold 20px Arial",fill:"#ffffff"}).setOrigin(.5),this.text_next_time=e.add.text(t,s+40,"---",{font:"14px Arial",fill:"#000000"}).setOrigin(.5).setDepth(3),group_info.add(this.text_next_time),this.flag_tx=0,this.count=0,this.line_y=s,this.line_y_max=500,this.line_y_min=700,this.line_x_r=1200,this.line_x_l=50,this.buffer_sec=14400,this.on("pointerover",()=>{1==this.flag_tx&&(this.setTexture("item_dice_pointerover"),sound_button_select.play())}),this.on("pointerout",()=>{this.setTexture("item_dice")})}on_click(){this.speed_x=8+5*Math.random(),pointer_x>this.x&&(this.speed_x*=-1),this.speed_y=8+5*Math.random(),this.count=0,this.text_rolled_number.visible=!1,this.text_next_time.visible=!1,1==this.flag_tx&&local_owner==wallet&&(dice_roll(summoner),flag_dice_rolling=1),this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,sound_dice.play()}update(){if(this.count+=1,this.depth=this.line_y,this.text_rolled_number.depth=this.line_y+1,this.count%200==1){this.text_rolled_number.setText(local_last_rolled_dice/10);let e=BASE_SEC-(Date.now()/1e3-local_last_dice_roll_time)*SPEED;if(e>=BASE_SEC&&(e=BASE_SEC-1),e<=0)this.text_next_time.setText("Dice Roll").setFill("#ff0000"),this.flag_tx=1;else if(e<=.95*this.buffer_sec){let t=Math.floor(e%86400/3600)+"h:"+Math.floor(e%3600/60)+"m";this.text_next_time.setText(t).setFill("#ff0000"),this.flag_tx=1}else{let s=Math.floor(e%86400/3600)+"h:"+Math.floor(e%3600/60)+"m";this.text_next_time.setText(s).setFill("#000000"),this.flag_tx=0,flag_dice_rolling=0}}.5>=Math.abs(this.speed_x)&&.5>=Math.abs(this.speed_y)&&this.line_y-this.y<=1?(this.text_rolled_number.visible=!0,this.text_rolled_number.x=this.x,this.text_rolled_number.y=this.y,1==flag_info&&(this.text_next_time.visible=!0),this.text_next_time.x=this.x,this.text_next_time.y=this.y+40):(this.line_y=this.b-this.a*this.x,this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_x>0?.5>=Math.abs(this.speed_y)?this.speed_x-=.25:this.speed_x-=.1:.5>=Math.abs(this.speed_y)?this.speed_x+=.25:this.speed_x+=.1,this.speed_y-=.75,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=3*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,Math.abs(this.speed_y)>.5&&sound_dice_impact.play()),this.y>500?this.line_x_r=(this.y+115746/205)/(208/205):this.line_x_r=1060,this.x>=this.line_x_r?(this.x=this.line_x_r,this.speed_x*=-.9,sound_dice_impact.play()):this.x<=this.line_x_l&&(this.x=this.line_x_l,this.speed_x*=-.9,sound_dice_impact.play())),1==flag_dice_rolling&&this.count%4==0&&(this.text_rolled_number.setText(this.count/2%20+1),this.text_next_time.setText("Rolling!").setFill("#ff0000"))}}class tokenBall extends Phaser.GameObjects.Sprite{constructor(e,t,s,a){super(e,t,s,a),this.scene.add.existing(this),this.setInteractive({useHandCursor:!0}),this.on("pointerdown",function(e){this.on_click()},this),this.speed_x=0,this.speed_y=0,this.count=0,this.line_y=s,this.line_y_max=500,this.line_y_min=800,this.line_x_r=1200,this.line_x_l=50}on_click(){this.speed_x=6+4*Math.random(),pointer_x>this.x&&(this.speed_x*=-1),this.speed_y=6+4*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,sound_dice.play()}on_summon(){this.speed_x=-1*(5+10*Math.random()),this.speed_y=8+8*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x}update(){this.count+=1,this.depth=this.line_y,.5>=Math.abs(this.speed_x)&&.5>=Math.abs(this.speed_y)&&this.line_y-this.y<=1||(this.line_y=this.b-this.a*this.x,this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_x>0?.5>=Math.abs(this.speed_y)?this.speed_x-=.2:this.speed_x-=.1:.5>=Math.abs(this.speed_y)?this.speed_x+=.2:this.speed_x+=.1,this.speed_y-=.75,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=5*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,Math.abs(this.speed_y)>.5&&sound_dice_impact.play()),this.y>500?this.line_x_r=(this.y+115746/205)/(208/205):this.line_x_r=1060,this.x>=this.line_x_r?(this.x=this.line_x_r,this.speed_x*=-.9,sound_dice_impact.play()):this.x<=this.line_x_l&&(this.x=this.line_x_l,this.speed_x*=-.9,sound_dice_impact.play()))}}class Star extends Phaser.GameObjects.Sprite{constructor(e,t,s,a){super(e,t,s,a),this.scene.add.existing(this),this.setInteractive({useHandCursor:!0}),this.on("pointerdown",function(e){this.on_click()},this),this.speed_x=0,this.speed_y=0,this.count=0,this.line_y=s,this.line_y_max=500,this.line_y_min=800,this.line_x_r=1200,this.line_x_l=50}on_click(){this.speed_x=6+4*Math.random(),Math.random()>.5&&(this.speed_x*=-1),this.speed_y=6+4*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,sound_dice.play()}on_summon(){this.x=800+600*Math.random(),this.y=-50,this.speed_x=-10-5*Math.random(),this.speed_y=-10,this.count=0,this.a=.8*Math.random()-.4,this.b=this.line_y_max+100+this.a*this.x,sound_star.play()}update(){this.count+=1,.5>=Math.abs(this.speed_x)&&.5>=Math.abs(this.speed_y)&&this.line_y-this.y<=1||(this.line_y=this.b-this.a*this.x,this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_x>0?.5>=Math.abs(this.speed_y)?this.speed_x-=.25:this.speed_x-=.1:.5>=Math.abs(this.speed_y)?this.speed_x+=.25:this.speed_x+=.1,this.speed_y-=.75,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=5*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,Math.abs(this.speed_y)>.5&&sound_dice_impact.play()),this.x>=this.line_x_r?(this.x=this.line_x_r,this.speed_x*=-.9,sound_dice_impact.play()):this.x<=this.line_x_l&&(this.x=this.line_x_l,this.speed_x*=-.9,sound_dice_impact.play())),!0==flag_onLight?this.depth=3:this.depth=3301}}class Note extends Phaser.GameObjects.Sprite{constructor(e,t,s,a){super(e,t,s,a),this.scene.add.existing(this),this.setInteractive({useHandCursor:!0}),this.on("pointerdown",function(e){this.on_click()},this),this.speed_x=0,this.speed_y=0,this.count=0,this.line_y=s,this.line_y_max=500,this.line_y_min=1200,this.line_x_r=1200,this.line_x_l=50,this.on_summon()}on_click(){this.speed_x=2+1*Math.random(),Math.random()>.5&&(this.speed_x*=-1),this.speed_y=5+2*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,sound_dice.play()}on_summon(){this.x=murasakisan.x-50+100*Math.random(),this.y=murasakisan.y-50+100*Math.random(),this.speed_x=2+1*Math.random(),Math.random()>.5&&(this.speed_x*=-1),this.speed_y=5+2*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.line_y_max+100+this.a*this.x;let e=[sound_piano_a,sound_piano_b,sound_piano_c,sound_piano_d,sound_piano_e,sound_piano_f,sound_piano_g];this.sound=e[Math.floor(Math.random()*e.length)],this.count_bounch=0}update(){this.count+=1,this.x>1400||this.x<-100||this.y>1e3?this.destroy():(this.line_y=this.b-this.a*this.x,this.setDepth(this.line_y),this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_y-=.2,this.x+=this.speed_x,this.y-=this.speed_y,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-1*(.7+.6*Math.random()),this.speed_y>0&&this.speed_y<5?this.speed_y=5:this.speed_y<0&&this.speed_y>-5&&(this.speed_y=-5),this.count_bounch,this.count_bounch+=1))}}class Coin extends Phaser.GameObjects.Sprite{constructor(e,t,s,a){super(e,t,s,a),this.scene.add.existing(this),this.speed_x=0,this.speed_y=0,this.line_y=0,this.count=0,this.on_summon()}on_summon(){this.x=murasakisan.x+5*Math.random(),this.y=murasakisan.y+10*Math.random(),this.line_y=this.y,this.line_y<510&&(this.line_y=510),this.speed_x=3+1*Math.random(),"mining"!=murasakisan.mode&&Math.random()>.5&&(this.speed_x*=-1),this.speed_y=9+3*Math.random(),this.count=0}update(){this.count+=1,this.count>=100&&this.destroy(),this.setDepth(this.line_y),this.speed_y-=.6,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=5*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,this.speed_x*=.9)}}class Fluffy2 extends Phaser.GameObjects.Sprite{constructor(e,t,s,a,n,o){super(e,t,s,a),this.x=0,this.y=0,this.type=n,this.itemId=o,this.scene.add.existing(this),this.setInteractive({useHandCursor:!0}),this.on("pointerdown",function(e){this.on_click()},this),this.speed_x=0,this.speed_y=0,this.line_y=s,this.line_y_max=500,this.line_y_min=900,this.line_x_r=1200,this.line_x_l=50,this.mode="",this.submode=0,this.resting_count=200,this.type<=212?(this.rarity="common",this.setScale(.07)):this.type<=224?(this.rarity="uncommon",this.setScale(.1)):this.type<=236&&(this.rarity="rare",this.setScale(.15)),"common"==this.rarity?201==this.type?this.setFrame(0):202==this.type?this.setFrame(10):203==this.type?this.setFrame(20):204==this.type?this.setFrame(30):205==this.type?this.setFrame(40):206==this.type?this.setFrame(50):207==this.type?this.setFrame(60):208==this.type?this.setFrame(70):209==this.type?this.setFrame(80):210==this.type?this.setFrame(90):211==this.type?this.setFrame(100):212==this.type&&this.setFrame(110):"uncommon"==this.rarity?setTimeout(()=>{213==this.type?this.anims.play("fluffy_fluffier_01",!0):214==this.type?this.anims.play("fluffy_fluffier_02",!0):215==this.type?this.anims.play("fluffy_fluffier_03",!0):216==this.type?this.anims.play("fluffy_fluffier_04",!0):217==this.type?this.anims.play("fluffy_fluffier_05",!0):218==this.type?this.anims.play("fluffy_fluffier_06",!0):219==this.type?this.anims.play("fluffy_fluffier_07",!0):220==this.type?this.anims.play("fluffy_fluffier_08",!0):221==this.type?this.anims.play("fluffy_fluffier_09",!0):222==this.type?this.anims.play("fluffy_fluffier_10",!0):223==this.type?this.anims.play("fluffy_fluffier_11",!0):224==this.type&&this.anims.play("fluffy_fluffier_12",!0)},1e3*Math.random()):"rare"==this.rarity&&(225==this.type?(this.frontFrame=3,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_01_right",this.anim_left="fluffy_fluffiest_01_left",this.anim_front="fluffy_fluffiest_01_front"):226==this.type?(this.frontFrame=13,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_02_right",this.anim_left="fluffy_fluffiest_02_left",this.anim_front="fluffy_fluffiest_02_front"):227==this.type?(this.frontFrame=23,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_03_right",this.anim_left="fluffy_fluffiest_03_left",this.anim_front="fluffy_fluffiest_03_front"):228==this.type?(this.frontFrame=33,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_04_right",this.anim_left="fluffy_fluffiest_04_left",this.anim_front="fluffy_fluffiest_04_front"):229==this.type?(this.frontFrame=43,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_05_right",this.anim_left="fluffy_fluffiest_05_left",this.anim_front="fluffy_fluffiest_05_front"):230==this.type?(this.frontFrame=53,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_06_right",this.anim_left="fluffy_fluffiest_06_left",this.anim_front="fluffy_fluffiest_06_front"):231==this.type?(this.frontFrame=63,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_07_right",this.anim_left="fluffy_fluffiest_07_left",this.anim_front="fluffy_fluffiest_07_front"):232==this.type?(this.frontFrame=73,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_08_right",this.anim_left="fluffy_fluffiest_08_left",this.anim_front="fluffy_fluffiest_08_front"):233==this.type?(this.frontFrame=83,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_09_right",this.anim_left="fluffy_fluffiest_09_left",this.anim_front="fluffy_fluffiest_09_front"):234==this.type?(this.frontFrame=93,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_10_right",this.anim_left="fluffy_fluffiest_10_left",this.anim_front="fluffy_fluffiest_10_front"):235==this.type?(this.frontFrame=103,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_11_right",this.anim_left="fluffy_fluffiest_11_left",this.anim_front="fluffy_fluffiest_11_front"):236==this.type&&(this.frontFrame=113,this.setFrame(this.frontFrame),this.anim_right="fluffy_fluffiest_12_right",this.anim_left="fluffy_fluffiest_12_left",this.anim_front="fluffy_fluffiest_12_front")),this.on_summon()}on_click(){this.speed_x=6+4*Math.random(),pointer_x>this.x&&(this.speed_x*=-1),this.speed_y=6+4*Math.random(),this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x;let e=[sound_fluffy2,sound_fluffy3,sound_fluffy4,sound_fluffy5];e[Math.floor(Math.random()*e.length)].play(),this.mode="rolling","rare"==this.rarity&&this.anims.stop()}on_click_fromHouse(){this.x=item_fluffy_house.x,this.y=item_fluffy_house.y,this.speed_x=4+10*Math.random(),this.speed_y=4+10*Math.random(),this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,this.mode="rolling","rare"==this.rarity&&this.anims.stop(),this.visible=!0}on_kick(){this.speed_x=4+3*Math.random(),pointer_x>this.x&&(this.speed_x*=-1),this.speed_y=4+3*Math.random(),this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x;let e=[sound_fluffy2,sound_fluffy3,sound_fluffy4,sound_fluffy5,];e[Math.floor(Math.random()*e.length)].play(),this.mode="rolling","rare"==this.rarity&&this.anims.stop()}on_summon(){"rare"==this.rarity&&this.anims.stop(),count_sync<=5?(this.x=200+800*Math.random(),this.y=520+200*Math.random(),this.angle=360*Math.random(),this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,this.mode="resting",this.submode=-50-Math.round(50*Math.random())):(this.x=300+500*Math.random(),this.y=600+100*Math.random(),this.speed_x=6+4*Math.random(),Math.random()>.5&&(this.speed_x*=-1),this.speed_y=10+4*Math.random(),this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,this.mode="rolling"),(this.type==local_ff_elected_type||this.type-12==local_ff_elected_type||this.type-24==local_ff_elected_type)&&draw_glitter(this.scene,this)}_checkOverlap(e,t){var s=e.getBounds();s.x+=s.width/4,s.y+=s.height/4,s.width/=2,s.height/=2;var a=t.getBounds();return Phaser.Geom.Intersects.RectangleToRectangle(s,a)}rolling(){this.line_y=this.b-this.a*this.x,this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_x>0?.5>=Math.abs(this.speed_y)?this.speed_x-=.25:this.speed_x-=.1:.5>=Math.abs(this.speed_y)?this.speed_x+=.25:this.speed_x+=.1,this.speed_y-=.75,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=5*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,this.speed_y),this.y>500?this.line_x_r=(this.y+115746/205)/(208/205):this.line_x_r=1060,this.x>=this.line_x_r?(this.x=this.line_x_r,this.speed_x*=-.9):this.x<=this.line_x_l&&(this.x=this.line_x_l,this.speed_x*=-.9),.5>=Math.abs(this.speed_x)&&.5>=Math.abs(this.speed_y)&&this.line_y-this.y<=1&&(this.mode="resting",this.submode=-100),"undefined"!=typeof item_fluffy_house&&this._checkOverlap(item_fluffy_house,this)&&1!=flag_fluffy_house_click&&(this.x=item_fluffy_house.x,this.y=item_fluffy_house.y,this.speed_x=0,this.speed_y=0,this.mode="resting",this.submode=-1e4,group_fluffy_house_in.add(this),this.visible=!1,sound_fluiffy_house.play())}resting(){"common"==this.rarity||"uncommon"==this.rarity||(this.submode<0?(this.submode+=1,"rare"==this.rarity&&this.anims.stop()):0==this.submode?(this.angle=0,this.anims.play(this.anim_front,!0),this.resting_count=200+50*Math.random(),this.submode+=1):this.submode<this.resting_count?this.submode+=1:(this.mode="moving",this.submode=0))}moving(){if(0==this.submode){let e=this.calc_distance(murasakisan.x,murasakisan.y),t=400;if("practice"==murasakisan.mode&&(t=200),e>t)this.moving_degree=this.get_degree(murasakisan.x,murasakisan.y);else{var s=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=s[Math.floor(Math.random()*s.length)]}this.x<100&&this.moving_degree>90&&this.moving_degree<270?this.moving_degree-=180:this.x>1100&&(this.moving_degree<90||this.moving_degree>270)&&(this.moving_degree-=180),this.y>900&&this.moving_degree>180?this.moving_degree=360-this.moving_degree:this.y<500&&this.moving_degree<180&&(this.moving_degree=360-this.moving_degree),this.moving_degree<0&&(this.moving_degree+=360),this.moving_degree=this.moving_degree%360,this.moving_speed=.3+.2*Math.random(),this.moving_count=70+30*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.anims.play(this.anim_left,!0)):(this.dist="right",this.anims.play(this.anim_right,!0)),this.angle=0,this.submode+=1}else this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y<500&&(this.y=500),this.x<50&&(this.x=50),this.submode+=1,this.submode>=100&&(this.mode="resting",this.submode=0)}calc_distance(e,t){let s=e-this.x;return Math.sqrt((t-this.y)**2+s**2)}get_degree(e,t){let s=e-this.x;return Math.atan2(-1*(t-this.y),s)/(Math.PI/180)}update(){"rolling"==this.mode?this.rolling():"resting"==this.mode?this.resting():"moving"==this.mode&&this.moving(),turn%100!=0||local_itemIds.includes(this.itemId)||(summoned_fluffies=summoned_fluffies.filter(e=>e!==this.itemId),this.destroy())}}class Nuichan extends Phaser.GameObjects.Sprite{constructor(e,t,s,a,n,o,r,$,l){super(e,t,s,a);let d="pos_item_nui_"+o;if(this._pos_local=d,null!=localStorage.getItem(d)&&local_owner==local_wallet){let h=JSON.parse(localStorage.getItem(d));this.x=h[0],this.y=h[1]}this.type=n,this.itemId=o,this.scene.add.existing(this),this.setInteractive({draggable:!0,useHandCursor:!0});let m=(l-1e4)/100,g="";g+=" id: #"+o+" \n",g+=" crafter: "+r+" \n",g+=" score: "+$+" \n",g+=" exp: +"+m+"% ",this.msg=this.scene.add.text(this.x,this.y+68,g,{font:"15px Arial",fill:"#000000",backgroundColor:"#ffffff"}).setOrigin(.5).setDepth(2e3).setVisible(!1),this.on("drag",()=>{1280==this.scene.sys.game.scale.gameSize._width?(this.x=game.input.activePointer.x,this.y=game.input.activePointer.y):(this.x=game.input.activePointer.y,this.y=960-game.input.activePointer.x),this.depth=this.y,this.msg.visible=!1}),this.on("dragend",()=>{if(this.msg.x=this.x,this.msg.y=this.y+68,sound_nui.play(),local_owner==local_wallet){let e=[this.x,this.y];localStorage.setItem(this._pos_local,JSON.stringify(e))}this.x>=100&&this.x<=1100&&this.y>=500&&this.y<=800&&murasakisan.try_attenting(this.x,this.y)}),this.click=0,this.on("pointerdown",()=>{if(1==flag_info){this.click+=1;let e=this.click;this.msg.visible=!0,setTimeout(()=>{e==this.click&&(this.msg.visible=!1)},2e3)}}),237==this.type?this.setFrame(0):238==this.type?this.setFrame(1):239==this.type?this.setFrame(2):240==this.type?this.setFrame(3):241==this.type?this.setFrame(4):242==this.type?this.setFrame(5):243==this.type?this.setFrame(6):244==this.type?this.setFrame(7):245==this.type?this.setFrame(8):246==this.type?this.setFrame(9):247==this.type?this.setFrame(10):248==this.type&&this.setFrame(11),this.setOrigin(.5).setScale(.38)}update(){}}class PresentBox extends Phaser.GameObjects.Sprite{constructor(e,t,s,a,n,o,r){super(e,t,s,a),this.scene.add.existing(this),this.setInteractive({useHandCursor:!0}),this.on("pointerdown",function(e){this.on_click()},this),this.itemId=Number(n),this.summoner_from=o,this.memo=r,this.on_summon();let $="";$+=" Gift of "+this.memo+" \n",$+=" from "+this.summoner_from+" ",this.text=e.add.text(this.x,this.y-55,$,{font:"20px Arial",fill:"#000000",backgroundColor:"#ffffff"}).setOrigin(.5).setDepth(2e3).setVisible(!1),this.on("pointerover",()=>{1==flag_info&&(this.text.visible=!0),sound_button_select.play(),this.setFrame(1)}),this.on("pointerout",()=>{this.text.visible=!1,this.setFrame(0)})}on_click(){open_presentbox(summoner,this.itemId),sound_button_on.play()}on_summon(){}update(){turn%100!=0||local_itemIds.includes(this.itemId)||(summoned_presentbox=summoned_presentbox.filter(e=>e!==this.itemId),draw_flower(this.scene,this.x,this.y),this.destroy())}}class Festligheter extends Phaser.GameObjects.Sprite{constructor(e,t,s,a){super(e,t,s,a),this.scene=e,this.x=t,this.y=s,this.img_right="ff_preFestival_right",this.img_left="ff_preFestival_left",this.setTexture(this.img_right),this.scene.add.existing(this),this.mode="",this.submode=0,this.resting_count=200,this.movingMode="",this.movingSubmode="",this.setInteractive({useHandCursor:!0}),this.on("pointerdown",function(e){this.on_click()},this),this.text=e.add.text(this.x,this.y-40,"test",{font:"20px Arial",fill:"#000000",backgroundColor:"#ffffff"}).setOrigin(.5).setDepth(2e3).setVisible(!1),this.checkFestival()}on_click(){"duringFestival"==this.mode?open_window_voting(this.scene):"duringFestival_isEndable"==this.mode?contract_end_voting(summoner):(this.text.visible=!0,setTimeout(()=>{this.text.visible=!1},3e3))}checkFestival(){let e=7200;0==local_ff_inSession&&local_ff_next_festival_block-local_blockNumber>e?(console.log("destroy festligheter"),this.mode="destroy",this.destroy()):0==local_ff_inSession&&local_ff_next_festival_block-local_blockNumber<=e&&local_ff_next_festival_block>=local_blockNumber&&"preFestival"!=this.mode?(this.mode="preFestival",this.submode=0):(0==local_ff_inSession||1==local_ff_inSession)&&1==local_ff_isVotable&&"duringFestival"!=this.mode?(this.mode="duringFestival",this.submode=0):1==local_ff_inSession&&0==local_ff_isVotable&&0==local_ff_isEndable&&"duringFestival_afterVoting"!=this.mode?(this.mode="duringFestival_afterVoting",this.submode=0):1==local_ff_inSession&&0==local_ff_isVotable&&1==local_ff_isEndable&&"duringFestival_isEndable"!=this.mode&&(this.mode="duringFestival_isEndable",this.submode=0)}preFestival(){if(0==this.submode)this.img_right="ff_preFestival_right",this.img_left="ff_preFestival_left",this.setTexture(this.img_right),this.x=340,this.y=960,this.text.setText(""),this.text.x=this.x,this.text.y=this.y-40,this.movingMode="";else if(this.submode%100==1){let e="";e+=" Festival is comming...  \n",e+=" ("+(local_ff_next_festival_block-local_blockNumber)+" blocks later) ",this.text.setText(e)}this.submode+=1}duringFestival(){0==this.submode&&(this.img_right="ff_duringFestival_right",this.img_left="ff_duringFestival_left",this.setTexture(this.img_right),this.x=200+700*Math.random(),this.y=550+200*Math.random(),this.text.setText(""),this.text.x=this.x,this.text.y=this.y-40,this.movingMode="resting"),this.submode+=1}duringFestival_afterVoting(){if(0==this.submode)this.anims.stop(),this.setTexture("ff_reports").setOrigin(.5).setScale(.1),this.anims.play("ff_report",!0),this.text.setText(""),this.text.x=this.x,this.text.y=this.y-60,this.movingMode="",this.dist="",draw_flower(this.scene,this.x,this.y),sound_nainai2.play();else if(this.submode%500==1){let e=this._get_ranking_sorted(),t="";t+=" Your vote: "+dic_items_reverse[local_ff_last_voting_type]+" \n",t+="   1st: "+dic_items_reverse[e[0][0]]+" ("+e[0][1]+" votes) \n",t+="   2nd: "+dic_items_reverse[e[1][0]]+" ("+e[1][1]+" votes) \n",t+="   3rd: "+dic_items_reverse[e[2][0]]+" ("+e[2][1]+" votes) \n",t+=" ("+(local_ff_subject_end_block-local_blockNumber)+" blocks remaining) ",this.text.setText(t)}this.submode+=1}_get_winner_now(){let e=0,t=0;for(i=201;i<=212;i++)local_ff_each_voting_count[i]>e&&(e=local_ff_each_voting_count[i],t=i);return[t,e]}_get_ranking_sorted(){let e=[];for(i=201;i<=212;i++)e.push([i,local_ff_each_voting_count[i]]);return e.sort(function(e,t){return t[1]-e[1]})}duringFestival_isEndable(){if(0==this.submode)this.anims.play("ff_report_close",!0).setOrigin(.5).setScale(.1),this.text.setText(""),this.text.x=this.x,this.text.y=this.y-40,this.movingMode="",this.dist="";else if(this.submode%100==1){let e="";e+=" Close the Festival ",this.text.setText(e)}this.submode+=1}resting(){0==this.movingSubmode?(this.resting_count=200+50*Math.random(),this.movingSubmode+=1):this.movingSubmode<this.resting_count?this.movingSubmode+=1:(this.movingMode="moving",this.movingSubmode=0)}moving(){if(0==this.movingSubmode){var e=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=e[Math.floor(Math.random()*e.length)],this.x<150&&this.moving_degree>90&&this.moving_degree<270?this.moving_degree-=180:this.x>1050&&(this.moving_degree<90||this.moving_degree>270)&&(this.moving_degree-=180),this.moving_degree=this.moving_degree%360,this.y>750&&this.moving_degree>180?this.moving_degree=360-this.moving_degree:this.y<500&&this.moving_degree<180&&(this.moving_degree=360-this.moving_degree),this.moving_degree<0&&(this.moving_degree+=360),this.moving_speed=.3+.2*Math.random(),this.moving_count=70+30*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.setTexture(this.img_left)):(this.dist="right",this.setTexture(this.img_right)),this.movingSubmode+=1}else this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed,this.depth=this.y,this.text.x=this.x,this.text.y=this.y-40,this.movingSubmode+=1,this.movingSubmode>=100&&(this.movingMode="resting",this.movingSubmode=0)}update(){"preFestival"==this.mode?this.preFestival():"duringFestival"==this.mode?this.duringFestival():"duringFestival_afterVoting"==this.mode?this.duringFestival_afterVoting():"duringFestival_isEndable"==this.mode&&this.duringFestival_isEndable(),"moving"==this.movingMode?this.moving():"resting"==this.movingMode&&this.resting(),turn%100==0&&this.checkFestival(),turn%300==0&&1==flag_sync&&contract_update_festival_info(summoner),turn%250==0&&("duringFestival"==this.mode||"duringFestival_isEndable"==this.mode)&&(sound_nainai1.play(),"right"==this.dist?draw_flower(this.scene,this.x+30,this.y):"left"==this.dist?draw_flower(this.scene,this.x-30,this.y):draw_flower(this.scene,this.x,this.y))}}class Nyuinyui extends Phaser.GameObjects.Sprite{constructor(e,t,s,a){super(e,t,s,a),this.img="nyui_moving",this.scene=e,this.x=t,this.y=s,this.img_right="nyui_moving_right",this.img_left="nyui_moving_left",this.scene.add.existing(this),this.mode="",this.submode=0,this.resting_count=200,this.movingMode="resting",this.movingSubmode=0,this.setInteractive({useHandCursor:!0}),this.on("pointerdown",function(e){this.on_click()},this),this.flowerCount=0,this.nyui_text=e.add.text(590,870,"").setFontSize(20).setFontFamily("Arial").setOrigin(.5).setFill("#0000ff").setVisible(!1).setDepth(5002)}on_click(){let e=this.scene.add.image(650+400*Math.random(),850+30*Math.random(),"par_flowers").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.1).setAngle(360*Math.random()).setDepth(5001);if(group_nyuinyui_ohana.add(e),sound_nyui.play(),this.flowerCount+=1,localStorage_flowerCount+=1,10==this.flowerCount&&(this.anims.play("nyui_happy"),this.movingMode="resting",this.movingSubmode=1,this.resting_count=99999,sound_nyui2.play()),this.nyui_text.setVisible(!0),this.nyui_text.setText(localStorage_flowerCount+" flowers"),localStorage.setItem("flowerCount_inGame",JSON.stringify(localStorage_flowerCount)),localStorage_flowerCount%100==0){let t=50;local_dapps_staking_amount<500?t+=0:local_dapps_staking_amount<1e3?t+=10:local_dapps_staking_amount<2e3?t+=20:local_dapps_staking_amount<4e3?t+=30:local_dapps_staking_amount<8e3?t+=40:local_dapps_staking_amount<16e3?t+=50:local_dapps_staking_amount<32e3?t+=60:local_dapps_staking_amount<64e3?t+=70:local_dapps_staking_amount>=64e3&&(t+=80);for(let s=1;s<=t;s++)summon_fallingFlower(this.scene);sound_hat.play()}}reset(){group_nyuinyui_ohana.clear(!0),this.flowerCount=0,this.movingMode="resting",this.anims.play("nyui_moving_left"),this.movingSubmode=0,this.nyui_text.setVisible(!1)}resting(){0==this.movingSubmode?(this.resting_count=200+50*Math.random(),this.movingSubmode+=1):this.movingSubmode<this.resting_count?this.movingSubmode+=1:(this.movingMode="moving",this.movingSubmode=0)}moving(){if(0==this.movingSubmode){var e=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=e[Math.floor(Math.random()*e.length)],this.x<650&&this.moving_degree>90&&this.moving_degree<270?this.moving_degree-=180:this.x>1e3&&(this.moving_degree<90||this.moving_degree>270)&&(this.moving_degree-=180),this.moving_degree=this.moving_degree%360,this.y>850&&this.moving_degree>180?this.moving_degree=360-this.moving_degree:this.y<820&&this.moving_degree<180&&(this.moving_degree=360-this.moving_degree),this.moving_degree<0&&(this.moving_degree+=360),this.moving_speed=.2+.1*Math.random(),this.moving_count=70+30*Math.random(),this.moving_degree>90&&this.moving_degree<=270?(this.dist="left",this.anims.play(this.img_left)):(this.dist="right",this.anims.play(this.img_right)),this.movingSubmode+=1}else this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed,this.movingSubmode+=1,this.movingSubmode>=100&&(this.movingMode="resting",this.movingSubmode=0)}update(){"moving"==this.movingMode?this.moving():"resting"==this.movingMode&&this.resting()}}class FallingFlower extends Phaser.GameObjects.Sprite{constructor(e,t,s,a){super(e,t,s,a),this.scene.add.existing(this),this.speed_x=0,this.speed_y=0,this.count=0,this.line_y_limit=1e3,this.depth=6100,this.setOrigin(.5),this.setAlpha(.9),this.count=0,this.on_summon()}on_summon(){this.x=1480*Math.random(),this.y=-50-500*Math.random(),this.speed_x=-.1-1.5*Math.random(),this.speed_y=2+4*Math.random(),this.setScale(.1+.1*Math.random()),this.setAngle(360*Math.random()),this.setFrame(Math.floor(5*Math.random())),this.count_update=Math.floor(40*Math.random())}update(){this.count+=1,this.x+=this.speed_x,this.y+=this.speed_y,this.count%50==this.count_update&&(this.angle+=30),this.y>=this.line_y_limit&&this.destroy(!0)}}class Alphabet extends Phaser.GameObjects.Sprite{constructor(e,t,s,a,n=0,o=.1){super(e,t,s,a),this.scene=e,this.x=t,this.y=s,this.scale=o,this.flag_keep=n,this.img=a,this.scene.add.existing(this),this.depth=2e3,this.setOrigin(.5),this.on_summon()}on_summon(){this.mode="waiting",this.submode=0,this.count=Math.round(100*Math.random()),this.count_limit=this.count+500,this.speed_x=0,this.speed_y=0,this.setAlpha(.8),this.setScale(this.scale),this.flag_fall=0,0==this.flag_keep&&(this.setInteractive({useHandCursor:!0}),this.on("pointerdown",()=>{this.on_click()})),draw_flower2(this.scene,this.x,this.y)}on_click(){if("waiting"==this.mode){let e=["stretching","rising","shrinking","dissolving","falling","flipping",],t={stretching:sound_stretching,rising:sound_rising,shrinking:sound_shrinking,dissolving:sound_dissolving,falling:sound_falling,flipping:sound_flipping};this.mode=e[Math.floor(Math.random()*e.length)],t[this.mode].play(),this.submode=0,this.on_click_otherAlp()}}on_click_otherAlp(){let e=0,t=3;group_alp.shuffle();let s=group_alp.getChildren(),a=0;for(i=0;i<s.length;i++)"waiting"==s[i].mode&&(a+=1);for(i=0;i<s.length;i++){let n=s[i];if("waiting"==n.mode&&(n.mode=this.mode,a-=1,(e+=1)>=t&&a>1))break}}shrinking(){this.scale*=.98,this.angle+=10,this.scale<=.03&&(draw_miniAlphabet2(this.scene,this.x,this.y,this.img),this.destroy(!0))}falling(){0==this.submode?(this.line_y=550,this.speed_x=-2+4*Math.random(),this.submode+=1):1==this.submode&&(this.rolling(),(this.x>=1500||this.x<=-300)&&this.destroy(!0))}rolling(){this.speed_y-=.5,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=3*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_x>0?this.speed_x=5+2*Math.random():this.speed_x=-((5+2*Math.random())*1),this.speed_y=10+5*Math.random())}rising(){0==this.submode?(this.speed_y=-.05,this.submode+=1):1==this.submode&&(this.speed_y*=1.05,this.y+=this.speed_y,this.count%4==0?this.x+=1:this.count%4==2&&(this.x-=1),this.y<=-100&&this.destroy(!0))}dissolving(){0==this.submode?(draw_miniAlphabet(this.scene,this.x,this.y,this.img),this.submode+=1):1==this.submode&&(this.alpha-=.01,this.y+=.1,this.scale*=.995,this.alpha<=0&&this.destroy(!0))}stretching(){this.scaleX+=.006,this.scaleY-=.003,this.angle-=.5,this.scaleY<=0&&this.destroy(!0)}flipping(){0==this.submode?(this.scaleX_org=this.scaleX,this.submode=1):1==this.submode?(this.scaleX-=.01,this.scaleX<0&&(this.submode=2,this.flipX=!this.flipX)):2==this.submode&&(this.scaleX+=.01,this.scaleX>=this.scaleX_org&&(this.submode=1)),this.y-=1,this.alpha-=.01,this.alpha<=0&&this.destroy(!0)}waiting(){this.count%240==0?this.y+=5:this.count%240==120&&(this.y-=5),this.count>=this.count_limit&0==this.flag_keep&&(draw_flower2(this.scene,this.x,this.y),this.destroy(!0))}update(){this.count+=1,"falling"==this.mode?this.falling():"rising"==this.mode?this.rising():"shrinking"==this.mode?this.shrinking():"dissolving"==this.mode?this.dissolving():"stretching"==this.mode?this.stretching():"flipping"==this.mode?this.flipping():"waiting"==this.mode&&this.waiting()}}class WoodCube extends Phaser.GameObjects.Sprite{constructor(e,t,s,a){super(e,t,s,"item_woodcube"),this.scene.add.existing(this),this.setInteractive({draggable:!0,useHandCursor:!0}),this.on("drag",()=>{1280==this.scene.sys.game.scale.gameSize._width?(this.x=game.input.activePointer.x,this.y=game.input.activePointer.y):(this.x=game.input.activePointer.y,this.y=960-game.input.activePointer.x),this.depth=this.y,this.text_score.depth=this.depth+1,this.angle=0,this.text_score.x=this.x,this.text_score.y=this.y,this.text_score.angle=0,this.flag_drag=1}),this.on("dragend",()=>{this.text_score.visible=!0,this.flag_drag=0,sound_woodcube.play();for(let e=0;e<group_scoreMeter.getLength();e++){let t=group_scoreMeter.getChildren()[e];this.checkOverlap(this,t)&&this.y<t.y&&this.depth<t.depth&&(this.depth=group_scoreMeter.getChildren()[e].depth+1,this.text_score.depth=this.depth+1)}}),this.speed_x=0,this.speed_y=0,this.score_position=a;let n=("00000000"+local_score).slice(-8).split("")[this.score_position];this.text_score=e.add.text(t,s,n,{font:"bold 16px Arial",fill:"#864A2B"}).setOrigin(.5),this.count=0,this.line_y=s,this.line_y_max=500,this.line_y_min=900,this.line_x_r=1200,this.line_x_l=50,this.scale=.13,this.flag_drag=0,this.flag_kick=0,group_update.add(this),this.depth=this.y,this.text_score.depth=this.depth+1}checkOverlap(e,t){var s=e.getBounds(),a=t.getBounds();return Phaser.Geom.Intersects.RectangleToRectangle(s,a)}on_kick(){this.speed_x=4+3*Math.random(),Math.random()>.5&&(this.speed_x*=-1),this.speed_y=4+3*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,sound_dice.play(),this.flag_kick=1}update(){if(this.count+=1,this.count%500==1){let e=("00000000"+local_score).slice(-8).split("")[this.score_position];this.text_score.setText(e)}.5>=Math.abs(this.speed_x)&&.5>=Math.abs(this.speed_y)&&this.line_y-this.y<=1&&0==this.flag_drag?(this.text_score.x=this.x,this.text_score.y=this.y,this.text_score.angle=this.angle,this.flag_kick=0):1==this.flag_kick&&0==this.flag_drag&&(this.depth=this.line_y,this.text_score.depth=this.depth+1,this.line_y=this.b-this.a*this.x,this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_x>0?.5>=Math.abs(this.speed_y)?this.speed_x-=.25:this.speed_x-=.1:.5>=Math.abs(this.speed_y)?this.speed_x+=.25:this.speed_x+=.1,this.speed_y-=.75,this.x+=this.speed_x,this.y-=this.speed_y,this.text_score.x=this.x,this.text_score.y=this.y,this.angle+=3*this.speed_x,this.text_score.angle=this.angle,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,Math.abs(this.speed_y)>.5&&sound_dice_impact.play()),this.y>500?this.line_x_r=(this.y+115746/205)/(208/205):this.line_x_r=1060,this.x>=this.line_x_r?(this.x=this.line_x_r,this.speed_x*=-.9,sound_dice_impact.play()):this.x<=this.line_x_l&&(this.x=this.line_x_l,this.speed_x*=-.9,sound_dice_impact.play()))}}function summon_twinkles(e,t,s,a=500,n=600){let o,r=["twinkle_01","twinkle_01","twinkle_01","twinkle_01","twinkle_01","twinkle_01","twinkle_01","twinkle_01","twinkle_01","twinkle_01","twinkle_01","twinkle_01",],$=["sparkle_01","sparkle_01","sparkle_01","sparkle_01","sparkle_01","sparkle_01","sparkle_01","sparkle_01","sparkle_01","sparkle_01","sparkle_01","sparkle_01",],l=["glitter_01","glitter_01","glitter_01","glitter_01","glitter_01","glitter_01","glitter_01","glitter_01","glitter_01","glitter_01","glitter_01","glitter_01",];"twinkle"==t?o=r[s]:"sparkle"==t?o=$[s]:"glitter"==t&&(o=l[s]),new Twinkles(e,a,n,o)}class Twinkles extends Phaser.GameObjects.Sprite{constructor(e,t,s,a,n=23,o=20){super(e,t,s,a),this.x=t,this.y=s,this.pos_x=n,this.pos_y=o,this.scene.add.existing(this),this.setInteractive({draggable:!0,useHandCursor:!0}),this.on("drag",()=>{1280==this.scene.sys.game.scale.gameSize._width?(this.x=game.input.activePointer.x,this.y=game.input.activePointer.y):(this.x=game.input.activePointer.y,this.y=960-game.input.activePointer.x),this.depth=this.y,this.angle=0,this.flag_drag=1}),this.on("dragend",()=>{this.checkOverlap(this,murasakisan)&&0==murasakisan.followingTwinkle&&("moving"==murasakisan.mode||"resting"==murasakisan.mode||"sleeping"==murasakisan.mode)?(this.flag_follow=1,murasakisan.on_click(),sound_hat.play(),murasakisan.followingTwinkle=this):(this.flag_follow=0,murasakisan.followingTwinkle==this&&(murasakisan.followingTwinkle=0)),this.flag_drag=0}),this.speed_x=0,this.speed_y=0,this.count=0,this.line_y=this.y,this.line_y_max=500,this.line_y_min=900,this.line_x_r=1200,this.line_x_l=50,this.scale=.1,this.flag_drag=0,this.flag_kick=0,this.flag_follow=0,group_update.add(this),this.depth=this.y}checkOverlap(e,t){var s=e.getBounds(),a=t.getBounds();return Phaser.Geom.Intersects.RectangleToRectangle(s,a)}on_follow(){this.x=murasakisan.x+this.pos_x,this.y=murasakisan.y+this.pos_y,this.depth=murasakisan.depth+1}on_kick(){this.speed_x=4+3*Math.random(),Math.random()>.5&&(this.speed_x*=-1),this.speed_y=4+3*Math.random(),this.count=0,this.a=.8*Math.random()-.4,this.b=this.y+this.a*this.x,this.flag_kick=1}_during_kick(){this.depth=this.line_y,this.line_y=this.b-this.a*this.x,this.line_y<this.line_y_max&&(this.line_y=this.line_y_max),this.line_y>this.line_y_min&&(this.line_y=this.line_y_min),this.speed_x>0?.5>=Math.abs(this.speed_y)?this.speed_x-=.25:this.speed_x-=.1:.5>=Math.abs(this.speed_y)?this.speed_x+=.25:this.speed_x+=.1,this.speed_y-=.75,this.x+=this.speed_x,this.y-=this.speed_y,this.angle+=3*this.speed_x,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y*=-.3,this.speed_y),this.y>500?this.line_x_r=(this.y+115746/205)/(208/205):this.line_x_r=1060,this.x>=this.line_x_r?(this.x=this.line_x_r,this.speed_x*=-.9):this.x<=this.line_x_l&&(this.x=this.line_x_l,this.speed_x*=-.9),.5>=Math.abs(this.speed_x)&&.5>=Math.abs(this.speed_y)&&this.line_y-this.y<=1&&0==this.flag_drag&&(this.flag_kick=0)}update(){this.count+=1,1==this.flag_drag||(1==this.flag_kick?this._during_kick():1==this.flag_follow&&this.on_follow())}}function summon_pinwheel(e,t=350,s=750){(group_pinwheel=e.add.group()).x=t,group_pinwheel.y=s;let a=new Pinwheel(e,t,s,"item_pinwheel",15,0,.7+.25*Math.random(),.05+.2*Math.random(),3+3*Math.random(),1,0),n=new Pinwheel(e,t,s,"item_pinwheel",-10,-10,.7+.25*Math.random(),.05+.2*Math.random(),3+3*Math.random(),0,1),o=new Pinwheel(e,t,s,"item_pinwheel",-10,10,.7+.25*Math.random(),.05+.2*Math.random(),3+3*Math.random(),0,2);group_pinwheel.add(a),group_pinwheel.add(n),group_pinwheel.add(o),group_pinwheel.flag_spin=1}class Pinwheel extends Phaser.GameObjects.Sprite{constructor(e,t,s,a="item_pinwheel",n,o,r,$,l,d,h){super(e,t,s,a),this.x=t+n,this.y=s+o,this.delta_x=n,this.delta_y=o,this.scene.add.existing(this),this.setInteractive({draggable:!0,useHandCursor:!0}),this.on("drag",()=>{1280==this.scene.sys.game.scale.gameSize._width?(group_pinwheel.x=game.input.activePointer.x,group_pinwheel.y=game.input.activePointer.y):(group_pinwheel.x=game.input.activePointer.y,group_pinwheel.y=960-game.input.activePointer.x),this.depth=this.y,group_pinwheel.flag_drag=1}),this.on("dragend",()=>{if(sound_wheel.play(),group_pinwheel.flag_drag=0,local_owner==local_wallet){let e=[group_pinwheel.x,group_pinwheel.y];localStorage.setItem("pos_item_pinwheel",JSON.stringify(e))}group_pinwheel.children.iterate(function(e){e.tx_counts_forPinwheel=1+3*Math.random()})}),this.on("pointerdown",()=>{}),this.flag_spin=1,this.count=0,this.scale=.2,this.flag_drag=0,group_update.add(this),this.depth=this.y,this.dynamic_friction=r,this.static_friction=$,this.coff=l,this.tx_counts_forPinwheel=-1,this.previous_tx_counts_forPinwheel=-1,this.flag_primary=d,this.setFrame(h)}update(){this.count+=1,this.x=group_pinwheel.x+this.delta_x,this.y=group_pinwheel.y+this.delta_y,1==group_pinwheel.flag_spin&&(this.tx_counts_forPinwheel>0&&(this.angle-=this.tx_counts_forPinwheel*this.coff),this.count%30==0&&(tx_counts_forPinwheel>this.previous_tx_counts_forPinwheel&&tx_counts_forPinwheel>0&&(this.tx_counts_forPinwheel=tx_counts_forPinwheel,this.dynamic_friction=.7+.25*Math.random(),this.static_friction=.05+.05*Math.random(),this.coff=3+3*Math.random()),this.previous_tx_counts_forPinwheel=tx_counts_forPinwheel,this.tx_counts_forPinwheel*=this.dynamic_friction,this.tx_counts_forPinwheel-=this.static_friction,this.tx_counts_forPinwheel<0&&(this.tx_counts_forPinwheel=0)),1==this.flag_primary&&tx_counts_forPinwheel>0&&(tx_counts_forPinwheel-=.1))}}class RetroAlphabet extends Phaser.GameObjects.Sprite{constructor(e,t,s,a,n,o,r,$,l){super(e,t,s,l),this.scene.add.existing(this),this.speed_x=0,this.speed_y=0,this.line_y=0,this.count=0,this.x=t,this.y=s,this.direction=a,this.scale=n,this.setFrame(o),this.delay=r,this.speedMod_y=$,this.depth=this.y,group_update.add(this),this.on_summon()}on_summon(){this.line_y=this.y,this.line_y<510&&(this.line_y=510),this.speed_x=1.5*this.direction,this.speed_y=2+4*Math.random(),this.count=0}update(){if(this.count+=1,this.delay>0)return this.delay-=1,this.depth=-1,0;this.count>=500&&this.destroy(),this.setDepth(this.line_y),this.speed_y-=.6,this.x+=this.speed_x,this.y-=this.speed_y,this.y>=this.line_y&&(this.y=this.line_y,this.speed_y=0),this.count%this.speedMod_y==0&&(this.line_y+=1)}}const shuffleArray=e=>{let t=[...e];for(let s=t.length-1;s>=0;s--){let a=Math.floor(Math.random()*(s+1)),n=t[s];t[s]=t[a],t[a]=n}return t};function summon_retroAlphabet(e,t,s){let a=1;100*Math.random()<=50&&(a=-1);let n=[0,0,0,0,0,0,8,9,10,11,12,13,14,15],o=n[Math.floor(Math.random()*n.length)],r=.2,$=["band1","band2","band3","band4","df1","df2","df3","dda1","dda2","dda3",],l=$[Math.floor(Math.random()*$.length)];if("band1"==l){let d=[0,1,2,3,4,5,6,7,8],h=4+Math.floor(6*Math.random()),m=0;for(new RetroAlphabet(e,t,s,a,r,30,0,o,"retro_ascii"),i=0;i<=h;i++){m+=1;let g=d[Math.floor(Math.random()*d.length)];new RetroAlphabet(e,t,s,a,r,g,20+10*m,o,"retro_ascii")}}else if("band2"==l){let c=[9],p=6+Math.floor(4*Math.random()),u=0;for(new RetroAlphabet(e,t,s,a,r,30,0,o,"retro_ascii"),i=0;i<=p;i++){u+=1;let f=c[Math.floor(Math.random()*c.length)];new RetroAlphabet(e,t,s,a,r,f,30+5*u,o,"retro_ascii")}}else if("band3"==l){let _=[39,47,48,49];_=shuffleArray(_);let y=1+Math.floor(2*Math.random()),x=0;for(i=0;i<y;i++){let b=_.pop();new RetroAlphabet(e,t,s,a,r,b,10*x,o,"retro_ascii"),x+=1}new RetroAlphabet(e,t,s,a,r,30,20+10*x,o,"retro_ascii")}else if("band4"==l){let v=[40,41,42,43,44,45,46],w=2+Math.floor(2*Math.random()),k=0;for(new RetroAlphabet(e,t,s,a,r,30,0,o,"retro_ascii"),i=0;i<w;i++){k+=1;let F=v[Math.floor(Math.random()*v.length)];new RetroAlphabet(e,t,s,a,r,F,30+10*k,o,"retro_ascii")}}else if("df1"==l){let S=0,A=[32,32,32,32,32,33,34,35,36],T=1+Math.floor(2*Math.random());for(i=0;i<=T;i++){let C=A[Math.floor(Math.random()*A.length)];new RetroAlphabet(e,t,s,a,r,C,10*S,o,"retro_ascii"),S+=1}let D=[20,21,21,21,21,21,21,21,22];for(i=0,T=4+Math.floor(4*Math.random());i<=T;i++){S+=1;let I=D[Math.floor(Math.random()*D.length)];new RetroAlphabet(e,t,s,a,r,I,10+10*S,o,"retro_ascii")}}else if("df2"==l){let H=0,O=[20,21,21,21,21,21,21,21,22],P=2+Math.floor(2*Math.random());for(i=0;i<=P;i++){let R=O[Math.floor(Math.random()*O.length)];new RetroAlphabet(e,t,s,a,r,R,10*H,o,"retro_ascii"),H+=1}let M=[37,38];for(i=0,P=2+Math.floor(2*Math.random());i<=P;i++){H+=1;let B=M[Math.floor(Math.random()*M.length)];new RetroAlphabet(e,t,s,a,r,B,15*H,o,"retro_ascii")}}else if("df3"==l){let V=0,z=[32,32,32,32,32,33,34,35,36],E=3+Math.floor(3*Math.random());for(i=0;i<=E;i++){let N=z[Math.floor(Math.random()*z.length)];new RetroAlphabet(e,t,s,a,r,N,10*V,o,"retro_ascii"),V+=1}let W=[25,26,27,28,29];for(i=0,E=1;i<E;i++){V+=1;let L=W[Math.floor(Math.random()*W.length)];new RetroAlphabet(e,t,s,a,r,L,10+10*V,o,"retro_ascii")}}else if("dda1"==l){let G=[10,10,10,10,10,10,10,11,12,13,14,15,15,15],X=4+Math.floor(6*Math.random()),j=0;for(new RetroAlphabet(e,t,s,a,r,30,0,o,"retro_ascii"),i=0;i<=X;i++){j+=1;let U=G[Math.floor(Math.random()*G.length)];new RetroAlphabet(e,t,s,a,r,U,10+10*j,o,"retro_ascii")}}else if("dda2"==l){let q=[16,17],Y=1+Math.floor(2*Math.random()),K=0;for(new RetroAlphabet(e,t,s,a,r,30,0,o,"retro_ascii"),i=0;i<=Y;i++){K+=1;let J=q[Math.floor(Math.random()*q.length)];new RetroAlphabet(e,t,s,a,r,J,20+10*K,o,"retro_ascii")}}else if("dda3"==l){let Z=[18,19],Q=2+Math.floor(2*Math.random()),ee=0;for(new RetroAlphabet(e,t,s,a,r,30,0,o,"retro_ascii"),i=0;i<=Q;i++){ee+=1;let et=Z[Math.floor(Math.random()*Z.length)];new RetroAlphabet(e,t,s,a,r,et,20+10*ee,o,"retro_ascii")}}}class Runpa extends Phaser.GameObjects.Sprite{constructor(e,t,s,a,n){super(e,t,s,n),this.scene.add.existing(this),this.anims.play("item_runpa",!0),this.mode="resting",this.submode=0,this.count=0,this.dist="right",this.target_x=0,this.target_y=0,this.scale=a,this.setInteractive({useHandCursor:!0}),this.on("pointerdown",function(e){this.on_click()},this),group_update.add(this)}checkOverlap(e,t){var s=e.getBounds();s.x+=s.width/2,s.y+=s.height*(3/4),s.width/=2,s.height/=6;var a=t.getBounds();return Phaser.Geom.Intersects.RectangleToRectangle(s,a)}on_click(){"moving"==this.mode|"resting"==this.mode?(this.mode="sleeping",this.count=0,this.submode=0,this.anims.play("item_runpa_sleeping",!0)):"sleeping"==this.mode&&(this.mode="resting",this.count=0,this.submode=0,this.anims.play("item_runpa",!0),sound_pad.play())}resting(){this.count+=1,0==this.submode?(this.resting_count=150+50*Math.random(),this.submode=1):1==this.submode&&this.count>=this.resting_count&&(this.mode="moving",this.count=0,this.submode=0)}moving(){if(this.count+=1,1==this.count){var e=[0,10,20,30,150,160,170,180,190,200,210,330,340,350];this.moving_degree=e[Math.floor(Math.random()*e.length)],this.x<100&&this.moving_degree>90&&this.moving_degree<270?this.moving_degree-=180:this.x>1100&&(this.moving_degree<90||this.moving_degree>270)&&(this.moving_degree-=180),this.moving_degree=this.moving_degree%360,this.y>860&&this.moving_degree>180?this.moving_degree=360-this.moving_degree:this.y<500&&this.moving_degree<180&&(this.moving_degree=360-this.moving_degree),this.moving_degree<0&&(this.moving_degree+=360),this.moving_speed=.5,this.moving_count=150+50*Math.random(),this.moving_degree>90&&this.moving_degree<=270?this.dist="left":this.dist="right"}else if(this.count<this.moving_count){if(this.x+=Math.cos(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y-=Math.sin(this.moving_degree*(Math.PI/180))*this.moving_speed,this.y<500&&(this.y=500),this.x<50&&(this.x=50),2==flag_tokenBall&&2==this.count&&100*Math.random()>=0){for(let t=0;t<group_tokenBall.getLength();t++)if(this.checkOverlap(this,group_tokenBall.getChildren()[t])){group_tokenBall.getChildren()[t].on_click();break}}if(3==this.count&&100*Math.random()>=0){for(let s=0;s<group_star.getLength();s++)if(this.checkOverlap(this,group_star.getChildren()[s])){group_star.getChildren()[s].on_kick();break}}if(4==this.count&&100*Math.random()>=0){for(let a=0;a<group_scoreMeter.getLength();a++)if(this.checkOverlap(this,group_scoreMeter.getChildren()[a])){group_scoreMeter.getChildren()[a].on_kick();break}}}else this.count>=this.moving_count&&(this.mode="resting",this.count=0)}sleeping(){}update(){"resting"==this.mode?this.resting():"moving"==this.mode?this.moving():"sleeping"==this.mode&&this.sleeping(),this.depth=this.y}}function summon_runpa(e,t,s){return new Runpa(e,t,s,.4,"item_runpa")}function makeBar(e,t,s,a){let n=e.add.graphics();return n.fillStyle(a,1),n.fillRect(0,0,150,20),n.x=t,n.y=s,n}function makeMiniProgressBar(e,t,s,a,n,o){let r=e.add.graphics();return r.fillStyle(o,1),r.fillRect(0,0,a,n),r.x=t,r.y=s,r.depth=s+10,r}class Button{constructor(e,t,s,a,n){let o=24,r=a.add.text(e,t,s).setFontSize(o).setFontFamily("Arial").setFill("#000000").setInteractive({useHandCursor:!0}).on("pointerdown",()=>n()).on("pointerover",()=>r.setStyle({fontSize:o,fontFamily:"Arial",fill:"#ffff00"})).on("pointerout",()=>r.setStyle({fontSize:o,fontFamily:"Arial",fill:"#000000"}))}}function music(){0==flag_music?((bgm=1==flag_onLight?bgm==bgm1?bgm2:bgm==bgm2?bgm3:bgm1:bgm_n1).play(),flag_music=1,item_musicbox.anims.play("item_musicbox_on",!0)):(bgm.stop(),flag_music=0,item_musicbox.anims.play("item_musicbox_off",!0),"listning"==murasakisan.mode&&(murasakisan.mode="resting",murasakisan.count=0))}function radarchart2(e,t,s,a,n,o,r,$,l,d,h,m,g){let c=30,p=0,u=-a*n/c,f=a*o/c,_=0,y=0,x=a*(($-3)/(c/2)+3/c),b=-a*r/c,v=0,w=-a*l/c,k=a*d/c,F=a*((m-3)/(c/2)+3/c),S=-a*h/c,A=-a*l/c,T=a*d/c,C=a*((g-3)/(c/2)+3/c),D=-a*h/c;try{group_chart.destroy(!0)}catch(I){}(group_chart=e.add.group()).add(e.add.polygon(t+a,s+a,[0,-a,a,0,0,a,-a,0],14342874,.4)),group_chart.add(e.add.polygon(t+.75*a,s+.75*a,[0,-(.75*a),.75*a,0,0,.75*a,-(.75*a),0],14342874,.4)),group_chart.add(e.add.polygon(t+a/2,s+a/2,[0,-a/2,a/2,0,0,a/2,-a/2,0],14342874,.4)),group_chart.add(e.add.polygon(t+(-D+T)/2,s+(-A+C)/2,[p,A,T,_,y,C,D,v],15899510,1)),group_chart.add(e.add.polygon(t+(-S+k)/2,s+(-w+F)/2,[p,w,k,_,y,F,S,v],16368240,1)),group_chart.add(e.add.polygon(t+(-b+f)/2,s+(-u+x)/2,[p,u,f,_,y,x,b,v],16774783,1));let H={font:"17px Arial",fill:"#000000"};group_chart.add(e.add.text(t-15,s-a-25,"STR\n"+(Math.round(100*l)/100).toFixed(2),H)),group_chart.add(e.add.text(t+a-5,s-10,"DEX\n"+(Math.round(100*d)/100).toFixed(2),H)),group_chart.add(e.add.text(t-15,s+a-7,"LUK\n"+(Math.round(100*g)/100).toFixed(2),H)),group_chart.add(e.add.text(t-a-20,s-12,"INT\n"+(Math.round(100*h)/100).toFixed(2),H)),group_chart.add(e.add.sprite(t-15-10,s-a-25+20,"icon_str").setOrigin(.5).setScale(.12)),group_chart.add(e.add.sprite(t+a-5+10,s-30,"icon_dex").setOrigin(.5).setScale(.12)),group_chart.add(e.add.sprite(t-15-12,s+a-5+14,"icon_luk").setOrigin(.5).setScale(.1)),group_chart.add(e.add.sprite(t-a-20+16,s-10-16,"icon_int").setOrigin(.5).setScale(.1))}async function draw_radarchart(e){radarchart2(e,1160,115,70,local_strength,local_dexterity,local_intelligence,local_luck,local_strength_withItems,local_dexterity_withItems,local_intelligence_withItems,local_luck_withItems,local_luck_withItems_withDice)}function open_window_summon(e){let t=0,s=0,a="";function n(e){group_window_summon.destroy(!0),window_summon_murasaki_back.destroy(!0),e>=0?(contract_summon(e),sound_button_on.play()):sound_window_select.play()}function o(e,t,s,a,o,r,$){let m=r.add.text(e,t,s).setFontSize($).setFontFamily("Arial").setFill(a).setInteractive({useHandCursor:!0}).on("pointerdown",()=>n(o)).on("pointerover",()=>m.setStyle({fontSize:$,fontFamily:"Arial",fill:"#ffff00"})).on("pointerout",()=>m.setStyle({fontSize:$,fontFamily:"Arial",fill:a})).on("pointerover",()=>sound_window_pointerover.play());return m.on("pointerover",()=>{window_summon_murasaki_back.destroy(),window_summon_murasaki_back=r.add.graphics().setDepth(5001).fillStyle(a.replace("#","0x"),.5).fillRoundedRect(l-h/2,d-h/2,h,h,16)}),m}group_window_summon=e.add.group(),sound_window_open.play();let r=e.add.sprite(640,480,"window").setInteractive();a="",a+="Start Free Trial!\n",a+="Some gas fee is all you need to try the game.\n",a+="\n",a+="Choose your favorite flower to summon trial Murasaki-san.\n",a+="(This does not affect any gameplays at the moment :)\n";let $=e.add.text(180,120,a).setFontSize(24).setFontFamily("Arial").setFill("#333333"),l=t=950,d=s=180,h=96;window_summon_murasaki_back=e.add.graphics().setDepth(5001).fillStyle(15073298,.5).fillRoundedRect(l-h/2,d-h/2,h,h,16);let m=e.add.sprite(t,s,"murasaki_left").setDepth(5002).setOrigin(.5).setScale(.3).anims.play("murasaki_left",!0),g=70,c=o(t=240,(s=280)+0*g,"✿ Rose","#E60012",0,e,40),p=o(t,s+1*g,"✿ Marigold","#F39800",1,e,40),u=o(t,s+2*g,"✿ Dandelion","#FFF100",2,e,40),f=o(t,s+3*g,"✿ Rosemary","#8FC31F",3,e,40),_=o(t,s+4*g,"✿ Olive","#009944",4,e,40),y=o(t,s+5*g,"✿ Holly","#009E96",5,e,40),x=o(t+460,s+0*g,"✿ Nemophila","#00A0E9",6,e,40),b=o(t+460,s+1*g,"✿ Hydrangea","#0068B7",7,e,40),v=o(t+460,s+2*g,"✿ Forget-me-not","#1D2088",8,e,40),w=o(t+460,s+3*g,"✿ Sumire","#920783",9,e,40),k=o(t+460,s+4*g,"✿ Gerbera","#E4007F",10,e,40),F=o(t+460,s+5*g,"✿ Anemone","#E5004F",11,e,40),S=o(1080,840,"Cancel","#000000",-1,e,30);a="",a+="Trial limitations:\n",a+="  ♣ Level cap is 4.\n",a+="  ♣ Item crafting cap is 3.\n",a+="  ♣ Resouse correcting cap is 3000.\n",a+="  ♣ Marketplace is unavailable.\n";let A=e.add.text(700,720,a).setFontSize(20).setFontFamily("Arial").setFill("#0000ff");a="",a+="All status and NFTs owned in the trial\n",a+="will be taken on to the main gameplay.\n";let T=e.add.text(200,720,a).setFontSize(24).setFontFamily("Arial").setFill("#E62E8B"),C=e.add.sprite(1100,680,"ff_duringFestival_isEndable_left").setOrigin(.5).setScale(.25);function D(e){e.setAngle(e.angle+30),setTimeout(()=>{D(e)},1e3)}for(i=0;i<3;i++)setTimeout(()=>{if(void 0!==group_window_summon.scene){let t=e.add.image(1040+20*Math.random(),630+40*Math.random(),"par_flowers").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.1+.05*Math.random()).setAngle(360*Math.random()).setDepth(5001);D(t),group_window_summon.add(t),sound_nyui.play()}},500+500*i);group_window_summon.add(r),group_window_summon.add($),group_window_summon.add(A),group_window_summon.add(T),group_window_summon.add(C),group_window_summon.add(c),group_window_summon.add(p),group_window_summon.add(u),group_window_summon.add(f),group_window_summon.add(_),group_window_summon.add(y),group_window_summon.add(x),group_window_summon.add(b),group_window_summon.add(v),group_window_summon.add(w),group_window_summon.add(k),group_window_summon.add(F),group_window_summon.add(S),group_window_summon.add(window_summon_murasaki_back),group_window_summon.add(m),group_window_summon.setDepth(5e3),m.setDepth(5002)}function open_window_convert(e){function t(t){group_window_convert.destroy(!0),t>=0?(sound_button_on.play(),contract_convert(),open_window_reload(e)):sound_window_select.play()}function s(e,s,a,n,o,r,$){let l=r.add.text(e,s,a).setFontSize($).setFontFamily("Arial").setFill(n).setInteractive({useHandCursor:!0}).on("pointerdown",()=>t(o)).on("pointerover",()=>l.setStyle({fontSize:$,fontFamily:"Arial",fill:"#ffff00"})).on("pointerout",()=>l.setStyle({fontSize:$,fontFamily:"Arial",fill:n})).on("pointerover",()=>sound_window_pointerover.play());return l}sound_window_open.play(),group_window_convert=e.add.group();let a=e.add.sprite(640,480,"window").setInteractive(),n="";n+="End trial and continue game!\n",n+="All status and NFTs that you own in the trial will be taken on.\n";let o=e.add.text(210,120,n).setFontSize(28).setFontFamily("Arial").setFill("#333333");n="",n+="After trial finished:\n",n+="   ✿ can grow beyond Lv4.\n",n+="   ✿ all items will be craftable.\n",n+="   ✿ presentbox as crafting bonus will be activated.\n",n+="   ✿ dApps staking bonus will be activated.\n",n+="   ✿ a cat from other player can visit your house.\n",n+="   ✿ Marketplace will be available.\n";let r=e.add.text(230,210,n).setFontSize(24).setFontFamily("Arial").setFill("#E62E8B"),$=s(640,480,n=">> Start House of Murasaki-san <<","#E60012",0,e,40).setOrigin(.5);n="",n+="Current Fee: "+local_price/1e18+" $ASTR\n";let l=e.add.text(640,545,n).setOrigin(.5).setFontSize(30).setFontFamily("Arial").setFill("#0000ff");n="",n+="90% of fees are kept to grow the ecosystem.\n",n+="    ♦ 45% will be stored in the staking vault to control inflation.\n",n+="    ♦ 45% will be stored in the buyback treasury as player assets.\n",n+="    ♦ the remaining 10% will be sent to the developer wallets.\n",n+="    ♦ fee will increase as the ecosystem grows.\n";let d=e.add.text(230,630,n).setFontSize(24).setFontFamily("Arial").setFill("#0000ff"),h=s(1070,840,"Cancel","#000000",-1,e,30),m=e.add.sprite(1060,510,"ff_duringFestival_isEndable_left").setOrigin(.5).setScale(.25);function g(e){e.setAngle(e.angle+30),setTimeout(()=>{g(e)},1e3)}for(i=0;i<3;i++)setTimeout(()=>{if(void 0!==group_window_convert.scene){let t=e.add.image(1e3+20*Math.random(),460+40*Math.random(),"par_flowers").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.1+.05*Math.random()).setAngle(360*Math.random()).setDepth(5001);g(t),group_window_convert.add(t),sound_nyui.play()}},500+500*i);let c=e.add.sprite(260,490,"cats").setOrigin(.5).setScale(.4).setFrame(4);group_window_convert.add(a),group_window_convert.add(o),group_window_convert.add(r),group_window_convert.add(l),group_window_convert.add(d),group_window_convert.add($),group_window_convert.add(h),group_window_convert.add(m),group_window_convert.add(c),group_window_convert.setDepth(5e3)}function open_window_reload(e){group_window_reload=e.add.group();let t=e.add.sprite(640,480,"window").setInteractive();function s(e,t,s,a,n,o,r){let $=o.add.text(e,t,s).setFontSize(r).setFontFamily("Arial").setFill(a).setInteractive({useHandCursor:!0}).on("pointerover",()=>$.setStyle({fontSize:r,fontFamily:"Arial",fill:"#ffff00"})).on("pointerout",()=>$.setStyle({fontSize:r,fontFamily:"Arial",fill:a})).on("pointerover",()=>sound_window_pointerover.play()).on("pointerdown",()=>{localStorage.setItem("flag_firstCelebration",1),location.reload()});return $}let a="";a+="After transaction confirmed,\n",a+="please reload the game.\n";let n=e.add.text(640,350,a).setFontSize(32).setFontFamily("Arial").setFill("#333333").setOrigin(.5);text_tx.setOrigin(.5),text_tx.x=640,text_tx.y=460,text_tx.setFontSize(24),text_tx.depth=5001;let o=s(640,550,a=">> Reload Game <<","#E60012",0,e,40).setOrigin(.5);function r(e){e.setAngle(e.angle+30),setTimeout(()=>{r(e)},1e3)}let $=e.add.image(390,550,"par_flowers").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.3).setAngle(360*Math.random()).setDepth(5001);r($);let l=e.add.image(890,550,"par_flowers").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.3).setAngle(360*Math.random()).setDepth(5001);r(l),group_window_reload.add($),group_window_reload.add(l),group_window_reload.add(t),group_window_reload.add(n),group_window_reload.add(o),group_window_reload.setDepth(5e3)}function create_item_indicator(e,t){try{group_item_indicator.destroy(!0)}catch(s){}if(t<=128){if(local_items[t]>0||local_items[t+64]>0||local_items[t+128]>0)return 0}else if(local_items[t]>0)return 0;let a=dic_items_reverse[t],n=dic_items[a].img_name,o=dic_items[a].pos_x,r=dic_items[a].pos_y,$=dic_items[a].scale,l=dic_items[a].description;group_item_indicator=e.add.group(),item_indicator_text=e.add.text(o,r,l,{font:"18px Arial",fill:"#0000ff",backgroundColor:"#ffffff"}).setOrigin(.5).setDepth(r+1).setVisible(!1),group_item_indicator.add(item_indicator_text),item_indicator_click=0,(item_indicator=e.add.sprite(o,r,n).setScale($).setOrigin(.5).setAlpha(.3).setDepth(2).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{item_indicator_text.setVisible(!0);let e=item_indicator_click+=1;setTimeout(()=>{e==item_indicator_click&&item_indicator_text.setVisible(!1)},2e3)})).item_type=t,["Helmet","Straw Hat","Mortarboard"].includes(a)&&item_indicator.setAngle(90),group_item_indicator.add(item_indicator)}async function update_item_indicator_bar(){let e,t=1-local_crafting_calc/86400*1e3/await contract_get_modified_dc(summoner,local_crafting_item_type);try{item_indicator_bar.scaleX=t}catch(s){}}function open_window_craft(scene){if("undefined"!=typeof nyuinyui&&(nyuinyui.setVisible(!0),nyuinyui.reset()),0==local_level)return 0;if(count_sync>1&&sound_window_open.play(),"undefined"!=typeof group_window_crafting)return group_window_crafting.setVisible(!0),0;async function close_crafting_window(e){if(e>=0&&"undefined"!=typeof nyuinyui&&(nyuinyui.setVisible(!1),nyuinyui.reset()),e<0&&(e=0),flag_window_craft=0,group_window_crafting.setVisible(!1),1==local_crafting_status||!0==button_crafting_resume.visible||1==local_crafting_resume_flag)return 0;global_selected_crafting_item=e;if((global_selected_crafting_item_dc=await get_cost_of_item(e))[0]>0&&e>0&&wallet==local_owner){if("trial"==gamemode&&1!=global_selected_crafting_item&&17!=global_selected_crafting_item&&33!=global_selected_crafting_item)text_crafting_selected_item_ohana.setText(""),text_crafting_selected_item_kusa.setText(""),text_crafting_selected_item_time.setText(""),text_crafting_selected_item_heart.setText(""),icon_crafting_ohana.visible=!1,icon_crafting_kusa.visible=!1,icon_crafting_time.visible=!1,text_select_item.setText('"'+dic_items_reverse[e]+'"'),text_crafting_selected_item_ohana.setText("Not available in trial."),text_crafting_selected_item_ohana.setColor("#0000ff"),create_item_indicator(murasakisan.scene,e);else{let t=await get_modified_dc(summoner,e)/1e3*BASE_SEC,s=Math.floor(t/86400),a=Math.floor(t%86400/3600),n=Math.floor(t%3600/60),o=global_selected_crafting_item_dc[2],r=global_selected_crafting_item_dc[3];text_crafting_selected_item_ohana.setText(o),text_crafting_selected_item_ohana.setColor("#000000"),text_crafting_selected_item_kusa.setText(r),text_crafting_selected_item_time.setText(s+"d:"+a+"h:"+n+"m"),text_crafting_selected_item_ohana.visible=!0,text_crafting_selected_item_kusa.visible=!0,text_crafting_selected_item_time.visible=!0,icon_crafting_ohana.visible=!0,icon_crafting_kusa.visible=!0,icon_crafting_time.visible=!0,text_select_item.setText('"'+dic_items_reverse[e]+'"'),create_item_indicator(murasakisan.scene,e)}}else{text_crafting_selected_item_ohana.setText(""),text_crafting_selected_item_kusa.setText(""),text_crafting_selected_item_time.setText(""),text_crafting_selected_item_heart.setText(""),icon_crafting_ohana.visible=!1,icon_crafting_kusa.visible=!1,icon_crafting_time.visible=!1,text_select_item.setText(">> Select Item <<");try{group_item_indicator.destroy(!0)}catch($){}}}async function get_cost_of_item(e){return await contract_get_item_dc(e)}async function get_modified_dc(e,t){return await contract_get_modified_dc(e,t)}function create_button(e,t,s,a,n,o){let r="black";r="common"==o?"black":"uncommon"==o?"blue":"rare"==o?"#be5504":"gray";let $=n.add.text(e,t,s).setFontSize(30).setFontFamily("Arial").setInteractive({useHandCursor:!0}).setFill(r).on("pointerdown",()=>close_crafting_window(a)).on("pointerdown",()=>sound_window_select.play()).on("pointerover",()=>$.setStyle({fontSize:30,fontFamily:"Arial",fill:"#ffff00"})).on("pointerover",()=>sound_window_pointerover.play()).on("pointerout",()=>$.setStyle({fontSize:30,fontFamily:"Arial",fill:r}));return $}(group_window_crafting=scene.add.group()).add(scene.add.sprite(640,480,"window").setInteractive());let _text1="[A,B,C]:                                                              (item count)",_text2="              A=Common,",_text3="                                   B=Uncommon,",_text4="                                                            C=Rare",_text5="Higher INT reduces the time required for crafting.";group_window_crafting.add(scene.add.text(140,90,_text1).setFontFamily("Arial").setFontSize(16).setFill("black")),group_window_crafting.add(scene.add.text(140,90,_text2).setFontFamily("Arial").setFontSize(16).setFill("black")),group_window_crafting.add(scene.add.text(140,90,_text3).setFontFamily("Arial").setFontSize(16).setFill("blue")),group_window_crafting.add(scene.add.text(140,90,_text4).setFontFamily("Arial").setFontSize(16).setFill("#be5504")),group_window_crafting.add(scene.add.text(820,90,_text5).setFontFamily("Arial").setFontSize(16).setFill("blue"));let _x=170,_y=80,_y_add=40,_item_count=0;for(var i=1;i<=16;i++){let _rarity;_rarity=local_items[i+128]>0?"rare":local_items[i+64]>0?"uncommon":local_items[i]>0?"common":"empty",eval(`_button  = create_button(_x, _y + _y_add *  ${i}, '[' + local_items[${i}] + ',' + local_items[${i+64}] + ',' + local_items[${i+128}] + '] ' + dic_items_reverse[${i}],  ${i},  scene, _rarity);`),group_window_crafting.add(_button)}for(var i=1;i<=16;i++){let _item_name=dic_items_reverse[i],_item_img=dic_items[_item_name].img_name,_scale=44/game.textures.get(_item_img).source[0].height,_icon=scene.add.image(_x-25,_y+15+_y_add*i,_item_img).setOrigin(.5).setScale(_scale);group_window_crafting.add(_icon)}_x=520;for(var i=17;i<=32;i++){let _rarity;_rarity=local_items[i+128]>0?"rare":local_items[i+64]>0?"uncommon":local_items[i]>0?"common":"empty",eval(`_button  = create_button(_x, _y + _y_add *  ${i-16}, '[' + local_items[${i}] + ',' + local_items[${i+64}] + ',' + local_items[${i+128}] + '] ' + dic_items_reverse[${i}],  ${i},  scene, _rarity);`),group_window_crafting.add(_button)}for(var i=17;i<=32;i++){let _item_name=dic_items_reverse[i],_item_img=dic_items[_item_name].img_name,_scale=44/game.textures.get(_item_img).source[0].height,_icon=scene.add.image(_x-25,_y+15+_y_add*(i-16),_item_img).setOrigin(.5).setScale(_scale);"Score Meter"==_item_name&&(_icon.x-=8,_icon.scale*=.9),group_window_crafting.add(_icon)}_x=870;for(var i=33;i<=48;i++){let _rarity;_rarity=local_items[i+128]>0?"rare":local_items[i+64]>0?"uncommon":local_items[i]>0?"common":"empty",eval(`_button  = create_button(_x, _y + _y_add *  ${i-32}, '[' + local_items[${i}] + ',' + local_items[${i+64}] + ',' + local_items[${i+128}] + '] ' + dic_items_reverse[${i}],  ${i},  scene, _rarity);`),group_window_crafting.add(_button)}for(var i=33;i<=48;i++){let _item_name=dic_items_reverse[i],_item_img=dic_items[_item_name].img_name,_scale=44/game.textures.get(_item_img).source[0].height,_icon=scene.add.image(_x-25,_y+15+_y_add*(i-32),_item_img).setOrigin(.5).setScale(_scale);group_window_crafting.add(_icon)}let _rarity;_rarity=local_items[194]>0?"common":null;let button_crafting_item194=create_button(170,760,"["+local_items[194]+"] Coin Bank",194,scene,_rarity);_rarity=local_items[195]>0?"common":null;let button_crafting_item195=create_button(520,760,"["+local_items[195]+"] Leaf Pouch",195,scene,_rarity),item194_icon=scene.add.sprite(145,777,"item_bank").setScale(.16),item195_icon=scene.add.sprite(495,777,"item_pouch").setScale(.14);group_window_crafting.add(button_crafting_item194),group_window_crafting.add(button_crafting_item195),group_window_crafting.add(item194_icon),group_window_crafting.add(item195_icon),_rarity=local_items[196]>0?"common":null;let button_crafting_item196=create_button(870,760,"["+local_items[196]+"] Cat Mail",196,scene,_rarity),item196_icon=scene.add.sprite(870,790,"item_mail").setScale(.6);group_window_crafting.add(button_crafting_item196),group_window_crafting.add(item196_icon);let button_crafting_close=create_button(1070,840,"Cancel",0,scene,_rarity="common");if(group_window_crafting.add(button_crafting_close),wallet==local_owner){let obj_upgrade=scene.add.text(220,810,">> Upgrade Item <<").setFontSize(30).setFontFamily("Arial").setInteractive({useHandCursor:!0}).setFill("black").setBackgroundColor("#ecd9ff").on("pointerdown",()=>close_crafting_window(-1)).on("pointerdown",()=>sound_window_open.play()).on("pointerover",()=>obj_upgrade.setStyle({fontSize:30,fontFamily:"Arial",fill:"#d19dff"})).on("pointerover",()=>sound_window_pointerover.play()).on("pointerout",()=>obj_upgrade.setStyle({fontSize:30,fontFamily:"Arial",fill:"black"})).on("pointerdown",()=>open_window_upgrade(scene));group_window_crafting.add(obj_upgrade)}group_window_crafting.setDepth(5e3)}function open_window_upgrade(e){function t(){group_window_upgrade.destroy(!0),"undefined"!=typeof nyuinyui&&(nyuinyui.setVisible(!1),nyuinyui.reset())}group_window_upgrade=e.add.group();let s=e.add.sprite(640,480,"window3").setInteractive(),a="";a+="[ Upgrade item ]\n",a+="  Craft Item: Mint an item of one higher rarity by burning three items of the same rarity.\n",a+="  Fluffy: Mint a fluffy of one higher grade by burning 3-5 fluffies (Fluffy:5, Fluffier:4, Fluffiest:3).\n",a+="\n";let n=e.add.text(140,110,a).setFontSize(24).setFontFamily("Arial").setFill("#333333");group_window_upgrade.add(s),group_window_upgrade.add(n);let o=get_upgradable_itemIds2(local_myListsAt_withItemType),r=0;Object.keys(o).forEach(s=>{dic_items_reverse[s];let a;s<=128?a=dic_items_reverse[Number(s)+64]:s<=236&&(a=dic_items_reverse[Number(s)+12]);let n="",$="",l="",d="",h="#000000";s<=64?(n="Common ",$="Uncommon ",l="200",d="200",h="#0000FF"):s<=128?(n="Uncommon ",$="Rare ",l="400",d="400",h="#FFA500"):s<=212?(l="200",d="200",h="#0000FF"):s<=224?(l="400",d="400",h="#E05A00"):s<=236&&(l="600",d="600",h="#E85298");let m="";for(m+=$+a,m+=" (burn itemId: ",i=0;i<o[s].length;i++)m+=o[s][i]+", ";m=m.slice(0,-2),m+=")",m+="\n";let g=e.add.text(220,220+70*r+20,m).setFontSize(30).setFontFamily("Arial").setFill(h).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{s<=128?upgrade_item(summoner,o[s][0],o[s][1],o[s][2]):s<=212?upgrade_fluffy2fluffier(summoner,o[s][0],o[s][1],o[s][2],o[s][3],o[s][4]):s<=224?upgrade_fluffier2fluffiest(summoner,o[s][0],o[s][1],o[s][2],o[s][3]):s<=236&&upgrade_fluffiest2doll(summoner,o[s][0],o[s][1],o[s][2]),t()}).on("pointerdown",()=>sound_window_select.play()).on("pointerover",()=>g.setStyle({fontSize:30,fontFamily:"Arial",fill:"#ffff00"})).on("pointerover",()=>sound_window_pointerover.play()).on("pointerout",()=>g.setStyle({fontSize:30,fontFamily:"Arial",fill:h})),c=e.add.text(270,223+70*r+30+20,l).setFontSize(24).setFontFamily("Arial").setFill("#000000"),p=e.add.text(360,223+70*r+30+20,d).setFontSize(24).setFontFamily("Arial").setFill("#000000"),u=e.add.sprite(250,235+70*r+30+20,"icon_ohana").setScale(.07),f=e.add.sprite(350,235+70*r+30+20,"icon_kusa").setScale(.07);if(group_window_upgrade.add(g),group_window_upgrade.add(c),group_window_upgrade.add(p),group_window_upgrade.add(u),group_window_upgrade.add(f),s<=200){let _=dic_items[a].img_name,y=44/game.textures.get(_).source[0].height,x=e.add.image(190,235+70*r+20,_).setOrigin(.5).setScale(y);group_window_upgrade.add(x)}else if(s>=201){let b=dic_items[a].img_name,v=dic_items[a].frame_no,w=e.add.image(190,235+70*r+20,b).setOrigin(.5).setScale(.15).setFrame(v);group_window_upgrade.add(w)}r+=1});let $=e.add.text(1070,840,"Cancel").setFontSize(30).setFontFamily("Arial").setFill("#000000").setInteractive({useHandCursor:!0}).on("pointerdown",()=>t()).on("pointerdown",()=>sound_window_select.play()).on("pointerover",()=>$.setStyle({fontSize:30,fontFamily:"Arial",fill:"#ffff00"})).on("pointerover",()=>sound_window_pointerover.play()).on("pointerout",()=>$.setStyle({fontSize:30,fontFamily:"Arial",fill:"black"}));group_window_upgrade.add($),group_window_upgrade.setDepth(5e3)}function open_window_practice(e){if(sound_window_open.play(),local_owner!=local_wallet)return 0;function t(e,t){group_window_practice.destroy(!0),t>0?(sound_button_on.play(),contract_start_practice(e,t)):sound_window_select.play()}function s(e,s,a,n,o,r,$,l){let d=$.add.text(e,s,a).setFontSize(l).setFontFamily("Arial").setFill(n).setInteractive({useHandCursor:!0}).on("pointerdown",()=>t(summoner,r)).on("pointerover",()=>d.setStyle({fontSize:l,fontFamily:"Arial",fill:"#ffff00"})).on("pointerout",()=>d.setStyle({fontSize:l,fontFamily:"Arial",fill:n})).on("pointerover",()=>sound_window_pointerover.play());return d}function a(e){if(0==e)return"\xabInexperienced\xbb";if(e<=2)return"✿ Beginner ✿";if(e<=4)return"★ Talented ★";if(e<=6)return"♩ Skilled ♩";if(e<=8)return"♪ Intermediate ♪";else if(e<=10)return"♫ Skillful ♫";else if(e<=12)return"♦ Seasoned ♦";else if(e<=14)return"♣ Proficient ♣";else if(e<=16)return"♠ Advanced ♠";else if(e<=18)return"♥ Expert ♥";else if(e<=20)return"＊Master＊"}function n(e){if(0==e)return"#999999";if(e<=2)return"#228b22";if(e<=4)return"#006400";if(e<=6)return"#0000ff";if(e<=8)return"#000080";else if(e<=10)return"#ff8c00";else if(e<=12)return"#d2691e";else if(e<=14)return"#ff0000";else if(e<=16)return"#ff00ff";else if(e<=18)return"#8a2be2";else if(e<=20)return"#800080"}function o(){let e=["Harmony is next to Godliness. - Johann Sebastian Bach -","It is the special province of music to move the heart. - Johann Sebastian Bach -","One does not play the piano with one's fingers, one plays the piano with one's mind.\n- Glenn Gould -","Art is the most beautiful of all lies. - Claude Debussy -","The shorter way to do many things is to do only one thing at a time.\n- Wolfgang Amadeus Mozart -","When words can no longer be expressed, music begins.\n- Claude Debussy -","To Regret the Past, To Hope in the Future, And never to be satisfied with the Present.\n- Peter Ilyich Tchaikovsky -","There is no top. There are always further heights to reach.\n- Jascha Heifetz -","Only the sound the ear permits is music.\n- Fryderyk Franciszek Chopin -","Because I have a dream, a life is brilliant.\n- Wolfgang Amadeus Mozart -","The music is not in the notes, but in the silence between.\n- Wolfgang Amadeus Mozart -","The violin sings, but the fiddle dances. - Unknown -","Music is enough for a lifetime, but a lifetime is not enough for music.\n- Sergei Vasil'evich Rachmaninov -","Ars longa, vita brevis.\n- Hippocrates -",];return e[Math.floor(Math.random()*e.length)]}function r(e){let t=dic_items[e].item_id,s=get_userItems(t),a=get_userItems(t+64),n=get_userItems(t+127);return n.length>0?n[0]:a.length>0?a[0]:s.length>0?s[0]:0}group_window_practice=e.add.group();let $=e.add.sprite(640,480,"window").setInteractive(),l="";l+="Choose an instrument to start practice.\n",l+="Mastery speed is slightly increased by the corresponding status value.\n",l+="(Clarinet & Horn: STR, Piano &Timpani: DEX, Violin & Harp: INT)";let d=e.add.text(140,110,l).setFontSize(24).setFontFamily("Arial").setFill("#333333");l=o();let h=e.add.text(250,750,l).setFontSize(18).setFontFamily("Arial").setFill("#666666");function m(t,o,$,l,d,h,m){let g=dic_items[$].item_id,c=r($);if(local_items[g]>0||local_items[g+64]>0||local_items[g+128]>0){let p=n(l),u=s(t,o,$,p,"#000000",c,e,36).setOrigin(0,.5),f="expertise: "+a(l)+"\n";f+="(Lv: "+l+", exp: "+d+")";let _=e.add.text(t+0,o+20,f).setFontSize(24).setFontFamily("Arial").setFill(p),y=e.add.image(t-45,o+10,dic_items[$].img_name).setOrigin(.5).setScale(m);h.add(u),h.add(_),h.add(y)}else{let x=n(0),b=s(t,o,$,x,"#000000",g,e,36).setOrigin(0,.5).disableInteractive(),v="[not possessed]",w=e.add.text(t+0,o+20,v).setFontSize(24).setFontFamily("Arial").setFill(x),k=e.add.image(t-45,o+10,dic_items[$].img_name_inactive).setOrigin(.5).setScale(m);h.add(b),h.add(w),h.add(k)}}let g=280,c=300,p=150,u=475;m(g,c+0*p,"Clarinet",local_practice_level_clarinet,local_practice_exp_clarinet,group_window_practice,.25),m(g,c+1*p,"Piano",local_practice_level_piano,local_practice_exp_piano,group_window_practice,.25),m(g,c+2*p,"Violin",local_practice_level_violin,local_practice_exp_violin,group_window_practice,.125),m(g+u,c+0*p,"Horn",local_practice_level_horn,local_practice_exp_horn,group_window_practice,.25),m(g+u,c+1*p,"Timpani",local_practice_level_timpani,local_practice_exp_timpani,group_window_practice,.25),m(g+u,c+2*p,"Harp",local_practice_level_cello,local_practice_exp_cello,group_window_practice,.25);let f=s(1070,840,"Cancel","#000000","",-1,e,30);group_window_practice.add($),group_window_practice.add(d),group_window_practice.add(h),group_window_practice.add(f),group_window_practice.setDepth(5e3)}function open_window_voting(scene){if(sound_window_open.play(),local_owner!=local_wallet)return 0;function close_window(e,t){group_window_voting.destroy(!0),t>=0?(contract_voting(e,t),sound_button_on.play()):sound_window_select.play()}function create_button(e,t,s,a,n,o,r,$){let l=r.add.text(e,t,s).setFontSize($).setFontFamily("Arial").setFill(a).setStyle({backgroundColor:n}).setInteractive({useHandCursor:!0}).on("pointerdown",()=>close_window(summoner,o)).on("pointerover",()=>l.setStyle({fontSize:$,fontFamily:"Arial",fill:"#ffff00"})).on("pointerout",()=>l.setStyle({fontSize:$,fontFamily:"Arial",fill:a})).on("pointerover",()=>sound_window_pointerover.play());return l}group_window_voting=scene.add.group();let window_voting=scene.add.sprite(640,480,"window2").setInteractive(),_text="";_text+="Fluffy Festival is Underway! Vote for your Favorite Fluffy!\n",_text+="\n",_text+="・The festival lasts 24 hours. You can vote only once and get Participation Award.\n",_text+="・The winner fluffy will get x2 luck boost until the next festival.\n";let msg1=scene.add.text(140,110,_text).setFontSize(24).setFontFamily("Arial").setFill("#333333");_text="",_text+="・Festival selection is held at candle auction method.\n",_text+="・The present and previsou winner fluffy are not selectable.\n",_text+="・The first voter and the final voter will get additional award.\n";let msg2=scene.add.text(200,730,_text).setFontSize(18).setFontFamily("Arial").setFill("#333333"),_x=250,_y=270,_y_add=80,_button201=create_button(_x,_y+0*_y_add," "+dic_items_reverse[201]+" ","#b3bfc7","#e7f3fb",201,scene,36).setOrigin(0,.5),_button202=create_button(_x,_y+1*_y_add," "+dic_items_reverse[202]+" ","#d8bfac","#fff3e0",202,scene,36).setOrigin(0,.5),_button203=create_button(_x,_y+2*_y_add," "+dic_items_reverse[203]+" ","#b7ffd0","#9de5b6",203,scene,36).setOrigin(0,.5),_button204=create_button(_x,_y+3*_y_add," "+dic_items_reverse[204]+" ","#a9e8ff","#8fcee5",204,scene,36).setOrigin(0,.5),_button205=create_button(_x,_y+4*_y_add," "+dic_items_reverse[205]+" ","#8dabff","#c1dfff",205,scene,36).setOrigin(0,.5),_button206=create_button(_x,_y+5*_y_add," "+dic_items_reverse[206]+" ","#dab3ff","#ffe7ff",206,scene,36).setOrigin(0,.5),_button207=create_button(_x+500,_y+0*_y_add," "+dic_items_reverse[207]+" ","#fdbeff","#fff2ff",207,scene,36).setOrigin(0,.5),_button208=create_button(_x+500,_y+1*_y_add," "+dic_items_reverse[208]+" ","#ff686b","#ffb6b9",208,scene,36).setOrigin(0,.5),_button209=create_button(_x+500,_y+2*_y_add," "+dic_items_reverse[209]+" ","#ffbda8","#fff1dc",209,scene,36).setOrigin(0,.5),_button210=create_button(_x+500,_y+3*_y_add," "+dic_items_reverse[210]+" ","#ffd5d5","#ffffff",210,scene,36).setOrigin(0,.5),_button211=create_button(_x+500,_y+4*_y_add," "+dic_items_reverse[211]+" ","#ffe381","#e5c967",211,scene,36).setOrigin(0,.5),_button212=create_button(_x+500,_y+5*_y_add," "+dic_items_reverse[212]+" ","#fbfff0","#c7cbbc",212,scene,36).setOrigin(0,.5),_button_cancel=create_button(1070,840,"Cancel","#000000","",-1,scene,30),_icon201=scene.add.image(_x-35,_y+0*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(3),_icon202=scene.add.image(_x-35,_y+1*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(13),_icon203=scene.add.image(_x-35,_y+2*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(23),_icon204=scene.add.image(_x-35,_y+3*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(33),_icon205=scene.add.image(_x-35,_y+4*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(43),_icon206=scene.add.image(_x-35,_y+5*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(53),_icon207=scene.add.image(_x+500-35,_y+0*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(63),_icon208=scene.add.image(_x+500-35,_y+1*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(73),_icon209=scene.add.image(_x+500-35,_y+2*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(83),_icon210=scene.add.image(_x+500-35,_y+3*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(93),_icon211=scene.add.image(_x+500-35,_y+4*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(103),_icon212=scene.add.image(_x+500-35,_y+5*_y_add,"fluffy_fluffys").setOrigin(.5).setScale(.16).setFrame(113);if(local_ff_previous_elected_type>0){eval("_button"+local_ff_previous_elected_type).setText(" ("+eval("_button"+local_ff_previous_elected_type).text+") ").disableInteractive(),_text="--- \uD83D\uDC51 Previous Winner ---",_x=eval("_button"+local_ff_previous_elected_type).x,_y=eval("_button"+local_ff_previous_elected_type).y;let msg3=scene.add.text(_x,_y+22,_text).setFontSize(20).setFontFamily("Arial").setFill("#0000ff");group_window_voting.add(msg3)}if(local_ff_elected_type>0){eval("_button"+local_ff_elected_type).setText(" ("+eval("_button"+local_ff_elected_type).text+") ").disableInteractive(),_text="--- \uD83D\uDC51 Present Winner ---",_x=eval("_button"+local_ff_elected_type).x,_y=eval("_button"+local_ff_elected_type).y;let msg4=scene.add.text(_x,_y+22,_text).setFontSize(20).setFontFamily("Arial").setFill("#ff0000");group_window_voting.add(msg4)}let _text_msg3;_text_msg3=local_ff_next_festival_block-local_blockNumber<0?"The festival is about to start.\nYou can get the First Voting Bonus now!":local_ff_isEndable?"The festival is almost over.\nYou can get the Final Voting Bonus now!":"The festival is underway!\n"+(local_ff_subject_end_block-local_blockNumber)+" blocks remaining.";let msg3=scene.add.text(750,730,_text_msg3).setFontSize(24).setFontFamily("Arial").setFill("blue");group_window_voting.add(window_voting),group_window_voting.add(msg1),group_window_voting.add(msg2),group_window_voting.add(msg3),group_window_voting.add(_button201),group_window_voting.add(_button202),group_window_voting.add(_button203),group_window_voting.add(_button204),group_window_voting.add(_button205),group_window_voting.add(_button206),group_window_voting.add(_button207),group_window_voting.add(_button208),group_window_voting.add(_button209),group_window_voting.add(_button210),group_window_voting.add(_button211),group_window_voting.add(_button212),group_window_voting.add(_button_cancel),group_window_voting.add(_icon201),group_window_voting.add(_icon202),group_window_voting.add(_icon203),group_window_voting.add(_icon204),group_window_voting.add(_icon205),group_window_voting.add(_icon206),group_window_voting.add(_icon207),group_window_voting.add(_icon208),group_window_voting.add(_icon209),group_window_voting.add(_icon210),group_window_voting.add(_icon211),group_window_voting.add(_icon212),group_window_voting.setDepth(5e3)}async function open_window_strolling(e){function t(e,t,s,a,n,o,r,$,l,d,h,m=0){let g=e.add.sprite(t,s,a).setOrigin(.5).setScale(n).setInteractive({useHandCursor:!0});0!=o&&g.anims.play(o),group_window_strolling.add(g),0!=m&&(r=r+" ("+m+")");let c=e.add.text(t,s+50,r).setFontSize($).setOrigin(.5).setFontFamily("Arial").setFill(l);group_window_strolling.add(c),g.on("pointerover",()=>{sound_window_pointerover.play(),c.setFill("#ffff00")}),g.on("pointerout",()=>{c.setFill(l)}),g.on("pointerdown",()=>{sound_window_select.play(),1==d?(f.x=t-90,f.y=s-70,f.visible=!0,group_window_strolling.selected_direction=h):2==d?(_.x=t-90,_.y=s-70,_.visible=!0,group_window_strolling.selected_companion=h):3==d&&(y.x=t-90,y.y=s-70,y.visible=!0,group_window_strolling.selected_drink=h)})}function s(e,t,s,a,n,o,r,$,l,d=!0){let h=$.add.text(e,t,s).setFontSize(l).setFontFamily("Arial").setFill(a);d&&(h.setInteractive({useHandCursor:!0}),h.on("pointerover",()=>{h.setStyle({fontSize:l,fontFamily:"Arial",fill:"#ffff00"}),sound_window_pointerover.play()}),h.on("pointerout",()=>{h.setStyle({fontSize:l,fontFamily:"Arial",fill:a})}),h.on("pointerdown",()=>{-1==o?(group_window_strolling.destroy(!0),sound_window_select.play()):0==o&&(sound_button_on.play(),group_window_strolling.selected_direction>0&&group_window_strolling.selected_companion>0&&group_window_strolling.selected_drink>0&&(contract_start_stroll(summoner,group_window_strolling.selected_direction,group_window_strolling.selected_companion,group_window_strolling.selected_drink),group_window_strolling.destroy(!0)))})),group_window_strolling.add(h)}if(sound_window_open.play(),local_owner!=local_wallet)return 0;(group_window_strolling=e.add.group()).selected_direction=0,group_window_strolling.selected_companion=0,group_window_strolling.selected_drink=0;let a=e.add.sprite(640,480,"window2").setInteractive();group_window_strolling.add(a).setDepth(5e3);let n="";n+="Loading...";let o=e.add.text(140,110,n).setFontSize(24).setFontFamily("Arial").setFill("#333333").setDepth(5001);group_window_strolling.add(o),contract_update_stroll_info(summoner);let r=await get_strollInfo(summoner);r[0];let $=Number(r[1]);r[2],r[3],r[4];let l=Number(r[5]);r[6],r[7],r[8],r[9],r[10];let d=Number(r[11]),h=Number(r[12]),m=Number(r[13]);r[14];let g=Number(r[15]),c=Number(r[16]),p=Number(r[17]);r[18],r[19];let u=Number(r[25]),f=e.add.graphics().fillStyle(4286945,.4).fillRoundedRect(0,0,180,150,16).setVisible(!1),_=e.add.graphics().fillStyle(16776960,.5).fillRoundedRect(0,0,180,150,16).setVisible(!1),y=e.add.graphics().fillStyle(16716947,.3).fillRoundedRect(0,0,180,150,16).setVisible(!1);function x(e,t){group_window_strolling.destroy(!0),t>=0?sound_button_on.play():sound_window_select.play()}group_window_strolling.add(f),group_window_strolling.add(_),group_window_strolling.add(y),n="",n+="Choose the direction, companion, and drink to begin the stroll!\n",n+="Your Murasaki-san has strolled a total of ",n+=$,n+="m and met ",n+=l,n+=" friends to date.\n",o.setText(n),n="",n+="・Strolling takes 4 hours with a 16 hour cool time. Murasaki-san walks 500 meter per hour.\n",n+="・During the stroll, Murasaki-san has a chance to meet friends who have chosen the same direction and companion.\n",n+="・Meeting friends makes Murasaki-san happy and slightly increases the distance of the stroll.\n",n+="・Matching drinks with the friends met also makes Murasaki-san even happier.\n",n+="・Murasaki-san will discover twinkling NFTs depending on the total distance strolled or the number of friends met.\n";let b=e.add.text(200,670,n).setFontSize(18).setFontFamily("Arial").setFill("blue");group_window_strolling.add(b);let v=350,w=260,k=250,F=150;t(e,v+0*k,w+0*F,"stroll_direction_01",.3,0,"Mountain",36,"#000000",1,1,d),t(e,v+1*k,w+0*F,"stroll_direction_03",.3,0,"Seaside",36,"#000000",1,2,h),t(e,v+2*k,w+0*F,"stroll_direction_04",.3,0,"Grassland",36,"#000000",1,3,m);let S,A;if(S="Mr. Astar",A=dic_items[S].item_id,!0==local_items_flag[A]&&t(e,v+0*k,w+1*F,"mr_astar_left",.12,"mr_astar_left","Mr. Astar",36,"#000000",2,1,g),S="Ms. Ether",A=dic_items[S].item_id,!0==local_items_flag[A]&&t(e,v+1*k,w+1*F,"ms_ether_left",.12,"ms_ether_left","Ms. Ether",36,"#000000",2,2,c),S="Dr. Bitco",A=dic_items[S].item_id,!0==local_items_flag[A]&&t(e,v+2*k,w+1*F,"dr_bitco_left",.12,"dr_bitco_left","Dr. Bitco",36,"#000000",2,3,p),t(e,v+0*k,w+2*F,"stroll_drink_01",.2,0,"Water",36,"#000000",3,1),t(e,v+1*k,w+2*F,"stroll_drink_03",.2,0,"Tea",36,"#000000",3,2),t(e,v+2*k,w+2*F,"stroll_drink_04",.2,0,"Juice",36,"#000000",3,3),s(1030,820,"Cancel","#000000","",-1,0,e,36),1==local_mining_status||1==local_farming_status||1==local_crafting_status||1==local_practice_status){let T=e.add.text(830,812,"- Murasaki-san is working now -").setFontSize(18).setFontFamily("Arial").setFill("red").setOrigin(.5);group_window_strolling.add(T),s(650,820,">> Go for a Stroll <<","#888888","",0,0,e,36,!1)}else if(u>0){let C=e.add.text(830,812,"- Cooling Time: "+local_coolingSec+" sec -").setFontSize(18).setFontFamily("Arial").setFill("red").setOrigin(.5);group_window_strolling.add(C),s(650,820,">> Go for a Stroll <<","#888888","",0,0,e,36,!1)}else s(650,820,">> Go for a Stroll <<","#000000","",0,0,e,36);group_window_strolling.setDepth(5e3)}function open_window_strollingDuring(e,t){function s(e,t,s,a,n,o,r,$=0,l=0,d=0){let h=e.add.sprite(t,s,a).setScale(n).setDepth(r).setOrigin(.5);h.flag_backgroundMoving=$,h.update=function(){(1==group_window_strollingDuring.flag_walk||1==this.flag_backgroundMoving)&&(this.x+=o),this.x>=1600&&(this.x=-200),1==d&&turn%120==0&&(this.angle+=30)},l>0&&h.setFrame(l),1==d&&(h.angle=360*Math.random(),h.spinSalt=Math.round(120*Math.random())),group_update.add(h),group_window_strollingDuring.add(h)}sound_nyui.play();let a="";if((group_window_strollingDuring=e.add.group()).flag_walk=1,1==t){let n=e.add.sprite(640,480,"stroll_during_01_back").setDepth(4001).setScale(1).setInteractive();group_window_strollingDuring.add(n),s(e,-300,360,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,200,360,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,400,320,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,600,300,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,1e3,350,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,-300,570,"stroll_during_01_mountain",1.2,.1,4001),s(e,100,570,"stroll_during_01_mountain",1.2,.1,4001),s(e,500,570,"stroll_during_01_mountain",1.2,.1,4001),s(e,800,570,"stroll_during_01_mountain",1.2,.1,4001),s(e,1200,570,"stroll_during_01_mountain",1.2,.1,4001),s(e,-500,625,"stroll_during_01_grass",.4,.4,4002),s(e,-400,625,"stroll_during_01_grass",.4,.4,4002),s(e,-300,625,"stroll_during_01_grass",.4,.4,4002),s(e,-200,625,"stroll_during_01_grass",.4,.4,4002),s(e,-100,625,"stroll_during_01_grass",.4,.4,4002),s(e,100,625,"stroll_during_01_grass",.4,.4,4002),s(e,200,625,"stroll_during_01_grass",.4,.4,4002),s(e,300,625,"stroll_during_01_grass",.4,.4,4002),s(e,400,625,"stroll_during_01_grass",.4,.4,4002),s(e,500,625,"stroll_during_01_grass",.4,.4,4002),s(e,600,625,"stroll_during_01_grass",.4,.4,4002),s(e,800,625,"stroll_during_01_grass",.4,.4,4002),s(e,900,625,"stroll_during_01_grass",.4,.4,4002),s(e,1e3,625,"stroll_during_01_grass",.4,.4,4002),s(e,1100,625,"stroll_during_01_grass",.4,.4,4002)}else if(2==t){let o=e.add.sprite(640,480,"stroll_during_02_back").setDepth(4001).setScale(1).setInteractive();group_window_strollingDuring.add(o);let r=e.add.sprite(320,625,"stroll_during_02_wave").setDepth(4002).setScale(.8);r.update=function(){(1==group_window_strollingDuring.flag_walk||1==this.flag_backgroundMoving)&&(this.x+=.4),this.x>=690&&(this.x=320)},group_update.add(r),group_window_strollingDuring.add(r),s(e,-300,360,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,200,360,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,400,320,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,600,300,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,1e3,350,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,-400,675,"stroll_during_02_starfish",.08,.4,4002),s(e,-200,660,"stroll_during_02_shell",.08,.4,4002),s(e,200,696,"stroll_during_02_starfish",.08,.4,4002),s(e,510,661,"stroll_during_02_shell",.08,.4,4002),s(e,912,691,"stroll_during_02_starfish",.08,.4,4002),s(e,1110,651,"stroll_during_02_shell",.08,.4,4002),s(e,108,550,"stroll_during_02_yacht",.15,.1,4002,1),s(e,982,540,"stroll_during_02_fune",.15,.1,4002,1)}else if(3==t){let $=e.add.sprite(640,480,"stroll_during_03_back").setDepth(4001).setScale(1).setInteractive();group_window_strollingDuring.add($),s(e,-300,360,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,200,360,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,400,320,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,600,300,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,1e3,350,"stroll_during_01_cloud",.1+.3*Math.random(),.1+.3*Math.random(),4001,1),s(e,-200,580,"stroll_during_03_mountain",1.2,.025,4001),s(e,300,580,"stroll_during_03_mountain",1.2,.025,4001),s(e,600,580,"stroll_during_03_mountain",1,.025,4001),s(e,1100,575,"stroll_during_03_mountain",1.5,.025,4001);let l=[-400,-200,0,200,400,600,800,1e3,1200];for(let d=0;d<l.length;d++){let h=l[d],m=650+40*Math.random(),g=Math.round(6*Math.random());s(e,h,m+10*Math.random(),"par_flowers",.13,.4,4002,0,g,1),s(e,h+20,m+10*Math.random(),"par_flowers",.13,.4,4002,0,g,1),s(e,h+40,m+10*Math.random(),"par_flowers",.13,.4,4002,0,g,1)}s(e,50,570,"stroll_during_03_tree1",.2,.1,4002),s(e,982,570,"stroll_during_03_tree2",.2,.1,4002),s(e,200,450,"stroll_during_03_baloon",.2,.2,4002,1)}let c=e.add.sprite(640,640,"murasaki_left").setDepth(4003).setScale(.4).setOrigin(.5).anims.play("murasaki_left",!0);if(c.count=0,c.countBuffer=0,c.flag_endable=0,c.update=function(){if(1==local_strollEndable){if(0==this.flag_endable){group_window_strollingDuring.flag_walk=0,this.anims.play("murasaki_sleeping",!0),u.setTexture("item_waterbottle"),u.x=570;let t=e.add.text(640,600,">> Click to End Stroll <<").setDepth(4004).setOrigin(.5).setFontSize(24).setFontFamily("Arial").setFill("#ffff00");group_window_strollingDuring.add(t),this.setInteractive({useHandCursor:!0}),this.on("pointerover",()=>{sound_window_pointerover.play()}),this.on("pointerdown",()=>{sound_window_select.play(),contract_end_stroll(summoner)}),this.flag_endable=1}}else 0==group_window_strollingDuring.flag_walk&&this.countBuffer<=0?(this.anims.play("murasaki_click",!0),this.count+=1,this.count%200==50&&sound_happy.play(),this.count>=300&&(group_window_strollingDuring.flag_walk=1,this.anims.play("murasaki_left",!0),this.count=0,this.countBuffer=100)):group_window_strollingDuring.flag_walk=1;if(this.countBuffer>0&&(this.countBuffer-=1),60==turn&&0!=item_wearing_hat){let s=e.add.sprite(637,585,item_wearing_hat.texture).setDepth(4004).setOrigin(.5).setScale(.22);group_window_strollingDuring.add(s),group_update.add(s)}},group_window_strollingDuring.add(c),group_update.add(c),0!=item_wearing_hat){let p=e.add.sprite(637,585,item_wearing_hat.texture).setDepth(4004).setOrigin(.5).setScale(.22);group_window_strollingDuring.add(p),group_update.add(p)}let u=e.add.sprite(640,640,"stroll_waterbottle").setScale(.4).setOrigin(.5).setDepth(4004);group_window_strollingDuring.add(u);let f=e.add.sprite(670,660,"mr_astar_left").setDepth(4005).setScale(.1).setOrigin(.5).anims.play("mr_astar_left",!0);group_window_strollingDuring.add(f),a="";let _;a+="⌛ "+Math.floor(local_reminingSec%86400/3600)+"h:"+Math.floor(local_reminingSec%3600/60)+"m\n",a+="\uD83E\uDD7E "+local_strollingDistance+"m\n";let y=e.add.text(1150,260,a).setDepth(4009).setFontSize(24).setFontFamily("Arial").setFill("#1D2088");function x(e,t){let s="",a;s+="⌛ "+Math.floor(local_reminingSec%86400/3600)+"h:"+Math.floor(local_reminingSec%3600/60)+"m\n",s+="\uD83E\uDD7E "+local_strollingDistance+"m\n",t.setText(s),setTimeout(x,1e4,e,t)}group_window_strollingDuring.add(y),x(e,y),a="",a=local_name_str+" is enjoying stroll.";let b=e.add.text(10,260,a).setDepth(4009).setFontSize(24).setFontFamily("Arial").setFill("#1D2088");function v(e,t){let s=0,a="";local_metSummoners_01>0&&(s+=1),local_metSummoners_02>0&&(s+=1),local_metSummoners_03>0&&(s+=1),local_metSummoners_04>0&&(s+=1),local_metSummoners_05>0&&(s+=1),a=0==s?local_name_str+" is enjoying stroll.":local_name_str+" already met "+s+" friends!",t.setText(a),setTimeout(v,1e4,e,t)}group_window_strollingDuring.add(b),v(e,b),a="",a+=local_name_str+" has met ",a+=local_stroll_total_metSummoners+" friends and strolled a total of ",a+=local_stroll_total_strolledDistance+" meters.";let w=e.add.text(950,700,a).setDepth(4009).setFontSize(12).setFontFamily("Arial").setFill("#FF4264");group_window_strollingDuring.add(w);let k=e.add.sprite(-200,680,"mogumogu").setDepth(4005).setScale(.2).setOrigin(.5).anims.play("mogumogu",!0);k.count=Math.round(18e3*Math.random()),k.update=function(){this.count-=1,this.count<0&&(1==group_window_strollingDuring.flag_walk?this.x+=.4:this.x+=0),this.x>=1600&&(this.x=-200,this.count=18e3*Math.random()),this.x>=580&&this.x<=581&&(group_window_strollingDuring.flag_walk=0)},group_update.add(k),group_window_strollingDuring.add(k);let F=e.add.sprite(-200,660,"cat_walking_right_withMail_fast").setDepth(4006).setScale(.3).setOrigin(.5).anims.play("cat_walking_right_withMail_fast",!0);F.count=Math.round(18e3*Math.random()),F.update=function(){this.count-=1,this.count<0&&(1==group_window_strollingDuring.flag_walk?this.x+=.8:this.x+=.4),this.x>=1600&&(this.x=-200,this.count=18e3*Math.random()),this.x>=580&&this.x<=581&&(group_window_strollingDuring.flag_walk=0)},group_update.add(F),group_window_strollingDuring.add(F)}function draw_firework(e){sound_fireworks2.play();let t={alpha:{start:1,end:0,ease:"Cubic.easeIn"},angle:{start:0,end:360,steps:100},blendMode:"ADD",frame:{frames:["red","yellow","green","blue"],cycle:!0,quantity:500},gravityY:300,lifespan:1e3,quantity:500,stopAfter:500,reserve:500,scale:{min:.05,max:.15},speed:{min:300,max:600}},{width:s,height:a}=e.scale,{FloatBetween:n}=Phaser.Math;for(let o=0;o<=2e3;o+=500)e.time.addEvent({delay:o,callback(){let o=s*n(.25,.75),r=a*n(0,.5);e.add.particles(o,r,"par_flares",t).onParticleEmit(()=>{sound_fireworks.play()})}})}function draw_flower(e,t,s){let a=900,n={alpha:.8,angle:{min:250,max:290},gravityY:900,lifespan:{min:.8*a,max:a},quantity:20,stopAfter:20,timeScale:.9,reserve:20,rotate:{min:0,max:360},scale:{min:.05,max:.15},speed:{min:300,max:600},frame:[0,1,2,3,4,5]};e.add.particles(t,s,"par_flowers",n).setDepth(3100)}function draw_flower2(e,t,s){let a=400,n={alpha:.5,angle:{min:0,max:360},gravityY:400,lifespan:{min:.7*a,max:a},quantity:15,stopAfter:15,timeScale:.9,rotate:{min:0,max:360},scale:{min:.05,max:.08},speed:{min:50,max:300},frame:[0,1,2,3,4,5]};e.add.particles(t,s,"par_flowers",n).setDepth(1e3)}function draw_flower3(e,t,s){let a=600,n={alpha:.8,angle:{min:0,max:360},gravityY:400,lifespan:{min:.7*a,max:a},quantity:20,stopAfter:20,timeScale:.9,rotate:{min:0,max:360},scale:{min:.05,max:.15},speed:{min:100,max:300},frame:[0,1,2,3,4,5]};e.add.particles(t,s,"par_flowers",n).setDepth(1e3)}function draw_miniAlphabet(e,t,s,a){let n=200,o={alpha:.25,angle:{min:0,max:360},gravityY:400,lifespan:{min:.7*n,max:n},quantity:1,stopAfter:50,timeScale:.45,rotate:{min:0,max:360},scale:{min:.01,max:.03},speed:{min:50,max:300},x:{min:-10,max:10},y:{min:-10,max:10},frequency:10};e.add.particles(t,s,a,o).setDepth(1e3)}function draw_miniAlphabet2(e,t,s,a){let n=300,o={alpha:.5,angle:{min:0,max:360},gravityY:400,lifespan:{min:.7*n,max:n},quantity:10,stopAfter:10,timeScale:.9,rotate:{min:0,max:360},scale:{min:.01,max:.03},speed:{min:50,max:200}};e.add.particles(t,s,a,o).setDepth(1e3)}function draw_glitter(e,t){let s=new Phaser.Geom.Rectangle(-t.width*t.scale/2,-t.height*t.scale/2,t.width*t.scale,t.height*t.scale),a={alpha:{start:1,end:0},lifespan:2e3,frequency:2e3,quantity:1,scale:.08,frame:[0,1,2],emitZone:{type:"random",source:s},follow:t,origin:.5},n=e.add.particles(0,0,"par_glitter",a);n.depth=3900}function draw_star(e,t,s){let a=400,n={alpha:.5,angle:{min:0,max:360},gravityY:400,lifespan:{min:.7*a,max:a},quantity:15,stopAfter:15,timeScale:.9,rotate:{min:0,max:360},scale:{min:.05,max:.08},speed:{min:50,max:300},frame:[0,1,2,3,4,5,6,7]},o=e.add.particles(t,s,"par_stars",n);o.setDepth(9e3)}function draw_fluffyBit(e,t,s){let a=900,n={alpha:.5,angle:{min:250,max:290},gravityY:400,lifespan:{min:.7*a,max:a},quantity:20,stopAfter:20,timeScale:.9,reserve:20,rotate:{min:0,max:360},scale:{min:.03,max:.06},speed:{min:50,max:300},frame:[0,1,2,3,4,5,6,7,8,9,10,11]};e.add.particles(t,s,"par_fluffys",n)}function summon_star(e){let t=Math.floor(7*Math.random()),s=new Star(e,300,-100,"par_stars").setOrigin(.5).setScale(.08+.08*Math.random()).setAlpha(.7).setDepth(3).setFrame(t);s.on_summon(),group_neonStar.add(s),group_update.add(s)}function summon_note(e){let t=Math.floor(6*Math.random()),s=new Note(e,100,100,"practice_notes").setOrigin(.5).setScale(.12).setAlpha(1).setDepth(3).setFrame(t);group_update.add(s)}function summon_coin(e){let t=new Coin(e,100,100,"icon_ohana").setOrigin(.5).setScale(.07).setAlpha(1).setDepth(3);group_update.add(t)}function summon_leaf(e){let t=new Coin(e,100,100,"icon_kusa").setOrigin(.5).setScale(.09).setAlpha(1).setDepth(3);group_update.add(t)}function summon_flower(e){let t=new Coin(e,100,100,"par_flowers").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.1).setAlpha(1).setDepth(3);group_update.add(t)}function summon_heart(e){let t=new Coin(e,100,100,"icon_heart").setOrigin(.5).setScale(.07).setAlpha(1).setDepth(3);group_update.add(t)}function summon_fluffy2(e,t,s){let a=new Fluffy2(e,0,0,"fluffy_fluffys",t,s).setOrigin(.5).setAlpha(1).setDepth(3);group_star.add(a),group_update.add(a),count_sync>3&&(murasakisan.on_click(),sound_fluffy.play())}async function summon_nuichan(e,t,s,a){let n=1070+30*a,o=520+30*a,r=await contract_get_item_nui(t),$=r[0];r[1];let l=r[2],d=r[3];l>=active_nui_score&&(active_nui_id=t,active_nui_score=l,active_nui_exp_rate=_ext_rate);let h=await call_name_from_summoner($);""==h&&(h="#"+$),new Nuichan(e,n,o,"item_nui_list",s,t,h,l,d).setDepth(o),count_sync>3&&draw_flower3(this_scene,n,o)}function summon_fallingFlower(e){let t=new FallingFlower(e,0,0,"par_flowers");group_update.add(t)}function summon_mogumogu(e){let t=350,s=600;mogumogu=e.add.sprite(t,s,"mogumogu").anims.play("mogumogu",!0).setOrigin(.5).setScale(.3).setDepth(s).setInteractive({draggable:!0,useHandCursor:!0}).on("pointerover",()=>{sound_button_select.play()}).on("pointerdown",()=>{open_window_convert(e)});let a="";a+="✿ End Trial ✿",mogumogu_text=e.add.text(t,s+35,a).setFontSize(20).setFontFamily("Arial").setFill("#E62E8B").setOrigin(.5),(group_mogumogu=e.add.group()).add(mogumogu),group_mogumogu.add(mogumogu_text)}function summon_alphabet(e,t,s,a,n=0,o=.1){let r={a:"alp_a",b:"alp_b",c:"alp_c",d:"alp_d",e:"alp_e",f:"alp_f",g:"alp_g",h:"alp_h",i:"alp_i",j:"alp_j",k:"alp_k",l:"alp_l",m:"alp_m",n:"alp_n",o:"alp_o",p:"alp_p",q:"alp_q",r:"alp_r",s:"alp_s",t:"alp_t",u:"alp_u",v:"alp_v",w:"alp_w",x:"alp_x",y:"alp_y",z:"alp_z","!":"alp_ext"},$=new Alphabet(e,s,a,r[t],n,o);group_update.add($),0==n&&group_alp.add($)}function summon_sentence(e,t,s=250,a=100){for(i=0;i<t.length;i++){let n=t.charAt(i);if(" "!=n){let o=i;setTimeout(()=>{summon_alphabet(e,n,s+40*o,a)},50*o,e,n,o)}}}function summon_trial(e,t="trial",s=860,a=210){for(i=0;i<t.length;i++){let n=t.charAt(i);if(" "!=n){let o=i;setTimeout(()=>{summon_alphabet(e,n,s+30*o,a,1,.075)},50*o,e,n,o)}}}function summon_scoreMeter(e,t=510,s=510){for(i=0;i<8;i++){let a=new WoodCube(e,t+32*i,s,i);group_scoreMeter.add(a),group_scoreMeter.add(a.text_score)}}function update_tx_text(e,t){"undefined"!=typeof timeout_tx&&clearTimeout(timeout_tx);let s,a=" ("+t.substring(0,8)+"..."+t.slice(-8)+")";group_tx.setVisible(!0),"sending"==e?(text_tx.setText("Sending Transaction..."+a).setColor("#0000FF"),timeout_tx=setTimeout(()=>{group_tx.setVisible(!1)},3e4)):"done"==e&&(text_tx.setText("Transaction Confirmed!"+a).setColor("#FF0000"),timeout_tx=setTimeout(()=>{group_tx.setVisible(!1)},1e4))}function firstCelebration(e){draw_firework(e),murasakisan.on_click(),summon_sentence(e,"hello murasaki san!")}async function contract_get_flowerList_withType(e){let t=await contract_pf.methods.call_tba(e).call(),s=await contract_pn.methods.myListLength(t).call(),a=await contract_pn.methods.myListsAt_withItemTypeAndSubtype(t,0,s).call(),n=[];for(let o=0;o<3*s;o+=3){let r=a[o],$=a[o+1],l=a[o+2];n.push([r,$,l])}return[t,n]}async function draw_pippelSummary(e){sound_window_open.play(),group_pippelSummary=e.add.group();let t=e.add.sprite(640,480,"window2").setInteractive().setDepth(5e3);group_pippelSummary.add(t);let s=e.add.text(140,110,"Loading...").setFontSize(24).setFontFamily("Arial").setFill("#333333").setDepth(5001);group_pippelSummary.add(s);let a=e.add.image(652,340,"pippel_stem").setOrigin(.5).setScale(2.8).setAlpha(.6).setDepth(5001);function n(e,t,s,a,n,o,r,$,l,d=!0){let h=$.add.text(e,t,s).setFontSize(l).setFontFamily("Arial").setFill(a).setDepth(5200);d&&(h.setInteractive({useHandCursor:!0}),h.on("pointerover",()=>{h.setStyle({fontSize:l,fontFamily:"Arial",fill:"#ffff00"}),sound_window_pointerover.play()}),h.on("pointerout",()=>{h.setStyle({fontSize:l,fontFamily:"Arial",fill:a})}),h.on("pointerdown",()=>{-1==o&&(group_pippelSummary.destroy(!0),sound_window_select.play())})),group_pippelSummary.add(h)}group_pippelSummary.add(a);let o=300,r=100,$=28,l=Math.sqrt($**2-($/2)**2),d=[[12,12],[11,12],[12,11],[12,13],[13,12],[11,11],[11,13],[13,11],[13,13],[10,12],[12,10],[12,14],[14,12],[10,11],[10,13],[11,10],[11,14],[13,10],[13,14],[14,11],[14,13],[10,10],[10,14],[14,10],[14,14],[9,12],[12,9],[12,15],[15,12],[9,11],[9,13],[11,9],[11,15],[13,9],[13,15],[15,11],[15,13],[9,10],[9,14],[10,9],[10,15],[14,9],[14,15],[15,10],[15,14],[8,12],[12,8],[12,16],[16,12],[8,11],[8,13],[11,8],[11,16],[13,8],[13,16],[16,11],[16,13],[9,9],[9,15],[15,9],[15,15],[8,10],[8,14],[10,8],[10,16],[14,8],[14,16],[16,10],[16,14],[7,12],[12,7],[12,17],[17,12],[8,9],[8,15],[9,8],[9,16],[15,8],[15,16],[16,9],[16,15],[7,11],[7,13],[11,7],[11,17],[13,7],[13,17],[17,11],[17,13],[7,10],[7,14],[10,7],[10,17],[14,7],[14,17],[17,10],[17,14],[8,8],[8,16],[16,8],[16,16],[7,9],[7,15],[9,7],[9,17],[15,7],[15,17],[17,9],[17,15],[6,12],[12,6],[12,18],[18,12],[6,11],[6,13],[11,6],[11,18],[13,6],[13,18],[18,11],[18,13],[6,10],[6,14],[10,6],[10,18],[14,6],[14,18],[18,10],[18,14],[7,8],[7,16],[8,7],[8,17],[16,7],[16,17],[17,8],[17,16],[6,9],[6,15],[9,6],[9,18],[15,6],[15,18],[18,9],[18,15],[5,12],[12,5],[12,19],[19,12],[5,11],[5,13],[11,5],[11,19],[13,5],[13,19],[19,11],[19,13],[7,7],[7,17],[17,7],[17,17],[6,8],[6,16],[8,6],[8,18],[16,6],[16,18],[18,8],[18,16],[5,10],[5,14],[10,5],[10,19],[14,5],[14,19],[19,10],[19,14],[5,9],[5,15],[9,5],[9,19],[15,5],[15,19],[19,9],[19,15],[6,7],[6,17],[7,6],[7,18],[17,6],[17,18],[18,7],[18,17],[4,12],[12,4],[12,20],[20,12],[4,11],[4,13],[11,4],[11,20],[13,4],[13,20],[20,11],[20,13],[5,8],[5,16],[8,5],[8,19],[16,5],[16,19],[19,8],[19,16],[4,10],[4,14],[10,4],[10,20],[14,4],[14,20],[20,10],[20,14],[6,6],[6,18],[18,6],[18,18],[4,9],[4,15],[9,4],[9,20],[15,4],[15,20],[20,9],[20,15],[5,7],[5,17],[7,5],[7,19],[17,5],[17,19],[19,7],[19,17],[4,8],[4,16],[8,4],[8,20],[16,4],[16,20],[20,8],[20,16],[3,12],[12,3],[12,21],[21,12],[3,11],[3,13],[11,3],[11,21],[13,3],[13,21],[21,11],[21,13],[3,10],[3,14],[10,3],[10,21],[14,3],[14,21],[21,10],[21,14],[5,6],[5,18],[6,5],[6,19],[18,5],[18,19],[19,6],[19,18],[4,7],[4,17],[7,4],[7,20],[17,4],[17,20],[20,7],[20,17],[3,9],[3,15],[9,3],[9,21],[15,3],[15,21],[21,9],[21,15],[3,8],[3,16],[8,3],[8,21],[16,3],[16,21],[21,8],[21,16],[5,5],[5,19],[19,5],[19,19],[2,12],[12,2],[12,22],[22,12],[4,6],[4,18],[6,4],[6,20],[18,4],[18,20],[20,6],[20,18],[2,11],[2,13],[11,2],[11,22],[13,2],[13,22],[2,10],[2,14],[10,2],[10,22],[14,2],[14,22],[22,10],[22,14],[3,7],[3,17],[7,3],[7,21],[17,3],[17,21],[2,9],[2,15],[9,2],[9,22],[15,2],[15,22],[4,5],[4,19],[5,4],[5,20],[19,4],[19,20],[8,2],[8,22],[16,2],[16,22],[6,3],[6,21],[18,3],[18,21],[12,1],[12,23],[11,1],[11,23],[13,1],[13,23],[10,1],[10,23],[14,1],[14,23],[7,2],[7,22],[17,2],[17,22],[9,1],[9,23],[15,1],[15,23],[5,3],[5,21],[8,1],[8,23],],[h,m]=await contract_get_flowerList_withType(summoner),g=m.length,c={1:"Closed",2:"Opening",3:"Blossoming",4:"Blooming",5:"Bloomed"},p=[0,0,0,0,0,0];function u(t){sound_nyui.play();let s=m[t][0],a=m[t][1],n=m[t][2];p[n]+=1;let h=d[t][0],g=d[t][1],u=o+h*$,f=r+g*l;g%2==1&&(u+=$/2);let _=dic_pippel[a].color,y=Phaser.Display.Color.ComponentToHex(_);y="#"+("000000"+y).slice(-6);let x=Phaser.Display.Color.IntegerToRGB(_),b="#000000";x.r+x.g+x.b<300&&(b="#FFFFFF");let v=[0,.2,.3,.4,.5,.6][n],w=e.add.circle(u,f,$/10*8,_).setOrigin(.5).setDepth(5e3+10*Math.random()).setAlpha(v),k=dic_pippel[a].name,F=dic_pippel[a].day,S=" "+c[n]+" "+k+" ("+F+", id: "+s+") ";w.msg=e.add.text(u+$/10*7,f,S,{font:"24px Arial",fill:b,backgroundColor:y}).setVisible(!1).setDepth(5500).setOrigin(0,.5),w.setInteractive({useHandCursor:!0}).on("pointerover",()=>{w.msg.visible=!0,sound_window_pointerover.play()}).on("pointerout",()=>{w.msg.visible=!1}),group_pippelSummary.add(w)}let f=1,_=1e3/g;for(let y=0;y<g;y++)setTimeout(()=>{u(y)},_*f),f+=1;setTimeout(()=>{sound_hat.play(),n(1030,820,"Close","#000000","",-1,0,e,36);let t="";t+="Pippel NFTs in the Token Bound Account of your Murasaki-san.\n",s.setText(t),t="",t+="TBA address: "+h;let a=e.add.text(140,140,t).setFontSize(16).setFontFamily("Arial").setFill("#0000FF").setDepth(5001);group_pippelSummary.add(a),t="",t+="Total Pippels: "+g+"\n",t+="  - Closed: "+p[1]+"\n",t+="  - Opening: "+p[2]+"\n",t+="  - Blossoming: "+p[3]+"\n",t+="  - Blooming: "+p[4]+"\n",t+="  - Bloomed: "+p[5]+"\n";let o=e.add.text(720,670,t).setFontSize(20).setFontFamily("Arial").setFill("#005731").setDepth(5001);group_pippelSummary.add(o),t="",t+="✿ Pippel NFTs are considered as different colored petals,\n",t+="    and unique Pippel picture in various colors are formed.\n",t+="\n",t+="✿ Pippel blooms for only 3 hours a day.\n",t+="    Clicking on it will mint an NFT in TBA.\n",t+="\n",t+="✿ You can mint a different type of flower every day.\n",t+="    There are a total of 366 varieties.\n",t+="\n",t+="✿ Pippels will increase fluffy score by an average of 1.\n",t+="    (depending on its rarity)";let r=e.add.text(120,550,t).setFontSize(18).setFontFamily("Arial").setFill("#0000FF").setDepth(5001);group_pippelSummary.add(r)},_*(f-1))}function preload(e){let t=100*Math.random(),s;s=t<=50?e.add.image(640,350,"logolist").setScale(.3):t<=67?e.add.image(640,350,"logolist2").setScale(.3):t<=84?e.add.image(640,350,"logolist3").setScale(.3):e.add.image(640,350,"logolist4").setScale(.3);let a=e.add.graphics(),n=e.add.graphics();n.fillStyle(16642037,.4),n.fillRect(480,450,320,50);let o=e.add.text(490,520,"",{font:"20px monospace",fill:"#3D3D3D"}),r=e.add.text(490,420,"Loading...",{font:"20px monospace",fill:"#3D3D3D"}),$=e.add.text(510,465,"",{font:"20px monospace",fill:"#3D3D3D"}),l=["Making roasted sweet potatoes...","Brushing a teddy bear...","Looking for your shovel...","Polishing the watering can...","Assembling the sewing machine...","Counting flowers and grass...","Cleaning up the house...","Replacing the sand in the sandbox...","Adding fertilizer to the flowerpot...","Treating a needle puncture wound...","Washing the dishes...","Putting a flower on the teddy bear...","Painting your murasaki-san purple...","Bathing the teddy bear...","Polishing the floor...","Counting the number of hairs on Fluffy...","Charging the Murasaki-san battery...","Shopping for cat food...","Filling a fountain pen with ink...","Baking pancakes...","Writing Solidity code...","Refactoring JavaScript code...","Thinking about the peace of the world...","Calling Mr. Sota Watanabe...","Studying nuclear fusion...","Chaingng a violin strings...","Tuning the toy piano...","Debugging Rust code...","Drawing with ink! on the palette on the pallet...","Smartly contracting to the smart contract...","Assembling WebAssembly...",];o.setText(l[Math.floor(Math.random()*l.length)]);let d=.25,h=0;e.load.on("progress",function(e){0==flag_loaded&&(a.clear(),a.fillStyle(15085195,1),a.fillRect(490,460,300*e,30),$.setText(Math.round(100*e)+"%"),e>d&&(o.setText(l[Math.floor(Math.random()*l.length)]),d+=.25,h+=1,s.setFrame(h)))}),e.load.on("complete",function(){a.destroy(),n.destroy(),o.destroy(),r.destroy(),$.destroy(),flag_loaded=1}),e.load.image("back","src/png/background.png"),e.load.image("back_sandbox","src/png/background_sandbox.png"),e.load.image("back_black","src/png/background_black.png"),e.load.image("window","src/png/background_window.png"),e.load.image("window2","src/png/background_window2.png"),e.load.image("window3","src/png/background_window3.png"),e.load.image("window4","src/png/background_window4.png"),e.load.image("achv_01","src/png/achv_01.png"),e.load.image("achv_02","src/png/achv_02.png"),e.load.image("achv_03","src/png/achv_03.png"),e.load.image("achv_04","src/png/achv_04.png"),e.load.image("achv_05","src/png/achv_05.png"),e.load.image("achv_06","src/png/achv_06.png"),e.load.image("achv_07","src/png/achv_07.png"),e.load.image("achv_08","src/png/achv_08.png"),e.load.image("achv_09","src/png/achv_09.png"),e.load.image("achv_10","src/png/achv_10.png"),e.load.image("achv_11","src/png/achv_11.png"),e.load.image("achv_12","src/png/achv_12.png"),e.load.image("achv_13","src/png/achv_13.png"),e.load.image("achv_14","src/png/achv_14.png"),e.load.image("achv_15","src/png/achv_15.png"),e.load.image("achv_16","src/png/achv_16.png"),e.load.image("achv_17","src/png/achv_17.png"),e.load.image("achv_18","src/png/achv_18.png"),e.load.image("achv_19","src/png/achv_19.png"),e.load.image("achv_20","src/png/achv_20.png"),e.load.spritesheet("murasaki_right","src/png/murasaki_right.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_left","src/png/murasaki_left.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_sleeping","src/png/murasaki_sleeping2.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_feeding","src/png/murasaki_feeding.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_feeding_happy_right","src/png/murasaki_feeding_happy_right.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_feeding_happy_left","src/png/murasaki_feeding_happy_left.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_crying","src/png/murasaki_crying.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_mining","src/png/murasaki_mining.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_hugging","src/png/murasaki_hugging.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_farming","src/png/murasaki_farming.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_grooming","src/png/murasaki_grooming3.png",{frameWidth:720,frameHeight:622}),e.load.spritesheet("murasaki_crafting","src/png/murasaki_crafting.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_working_left","src/png/murasaki_working_left.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_working_right","src/png/murasaki_working_right.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_click","src/png/murasaki_click.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_stone","src/png/murasaki_stone.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_hungry","src/png/murasaki_hungry.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_listning","src/png/murasaki_listning.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_neon_right","src/png/murasaki_neon_right.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("murasaki_neon_left","src/png/murasaki_neon_left.png",{frameWidth:370,frameHeight:320}),e.load.image("button_feeding","src/png/button_feeding.png"),e.load.image("button_feeding_pointerover","src/png/button_feeding_pointerover.png"),e.load.image("button_mining_enable","src/png/button_mining_enable.png"),e.load.image("button_mining_unable","src/png/button_mining_unable.png"),e.load.image("button_mining_pointerover","src/png/button_mining_pointerover.png"),e.load.image("button_mining_working","src/png/button_mining_working.png"),e.load.image("button_mining_pointerover_stop","src/png/button_mining_pointerover_stop.png"),e.load.image("button_farming_enable","src/png/button_farming_enable.png"),e.load.image("button_farming_unable","src/png/button_farming_unable.png"),e.load.image("button_farming_pointerover","src/png/button_farming_pointerover.png"),e.load.image("button_farming_working","src/png/button_farming_working.png"),e.load.image("button_farming_pointerover_stop","src/png/button_farming_pointerover_stop.png"),e.load.image("button_grooming_enable","src/png/button_grooming_enable.png"),e.load.image("button_grooming_unable","src/png/button_grooming_unable.png"),e.load.image("button_grooming_pointerover","src/png/button_grooming_pointerover.png"),e.load.image("button_levelup_enable","src/png/button_levelup_enable.png"),e.load.image("button_levelup_unable","src/png/button_levelup_unable.png"),e.load.image("button_levelup_pointerover","src/png/button_levelup_pointerover.png"),e.load.image("back_level","src/png/button_level.png"),e.load.image("button_crafting_unable","src/png/button_crafting_unable.png"),e.load.image("button_crafting_start_on","src/png/button_crafting_start_on.png"),e.load.image("button_crafting_start_off","src/png/button_crafting_start_off.png"),e.load.image("button_crafting_pause_on","src/png/button_crafting_pause_on.png"),e.load.image("button_crafting_pause_off","src/png/button_crafting_pause_off.png"),e.load.image("button_crafting_complete_on","src/png/button_crafting_complete_on.png"),e.load.image("button_crafting_complete_off","src/png/button_crafting_complete_off.png"),e.load.image("button_crafting_resume_on","src/png/button_crafting_resume_on.png"),e.load.image("button_crafting_resume_off","src/png/button_crafting_resume_off.png"),e.load.image("button_crafting_cancel_on","src/png/button_crafting_cancel_on.png"),e.load.image("button_crafting_cancel_off","src/png/button_crafting_cancel_off.png"),e.load.image("button_practice_enable","src/png/button_practice_enable.png"),e.load.image("button_practice_unable","src/png/button_practice_unable.png"),e.load.image("button_practice_pointerover","src/png/button_practice_pointerover.png"),e.load.image("button_practice_working","src/png/button_practice_working.png"),e.load.image("button_practice_pointerover_stop","src/png/button_practice_pointerover_stop.png"),e.load.spritesheet("mr_astar_right","src/png/pet_mr_astar_right.png",{frameWidth:600,frameHeight:600}),e.load.spritesheet("mr_astar_left","src/png/pet_mr_astar_left.png",{frameWidth:600,frameHeight:600}),e.load.spritesheet("mr_astar_meet","src/png/pet_mr_astar_meet.png",{frameWidth:600,frameHeight:600}),e.load.spritesheet("ms_ether_right","src/png/pet_ms_ether_right.png",{frameWidth:600,frameHeight:600}),e.load.spritesheet("ms_ether_left","src/png/pet_ms_ether_left.png",{frameWidth:600,frameHeight:600}),e.load.spritesheet("ms_ether_meet","src/png/pet_ms_ether_meet.png",{frameWidth:600,frameHeight:600}),e.load.spritesheet("dr_bitco_right","src/png/pet_dr_bitco_right.png",{frameWidth:600,frameHeight:600}),e.load.spritesheet("dr_bitco_left","src/png/pet_dr_bitco_left.png",{frameWidth:600,frameHeight:600}),e.load.spritesheet("dr_bitco_meet","src/png/pet_dr_bitco_meet.png",{frameWidth:600,frameHeight:600}),e.load.image("item_table","src/png/item_basic_table.png"),e.load.image("item_misin","src/png/item_basic_misin.png"),e.load.image("item_tree0","src/png/item_basic_tree0.png"),e.load.image("item_tree1","src/png/item_basic_tree1.png"),e.load.image("item_tree2","src/png/item_basic_tree2.png"),e.load.image("item_tree3","src/png/item_basic_tree3.png"),e.load.image("item_bear","src/png/item_basic_bear.png"),e.load.image("item_gold1","src/png/item_basic_gold1.png"),e.load.image("item_gold2","src/png/item_basic_gold2.png"),e.load.image("item_gold3","src/png/item_basic_gold3.png"),e.load.image("item_food_potato","src/png/item_food_potato.png"),e.load.image("item_food_bread","src/png/item_food_bread.png"),e.load.image("item_food_cake","src/png/item_food_cake.png"),e.load.image("item_food_onigiri","src/png/item_food_onigiri.png"),e.load.image("item_food_pancake","src/png/item_food_pancake.png"),e.load.spritesheet("item_musicbox","src/png/item_musicbox.png",{frameWidth:370,frameHeight:320}),e.load.image("item_violin","src/png/item_violin.png"),e.load.image("item_violin_inactive","src/png/item_violin_inactive.png"),e.load.image("item_vase","src/png/item_vase.png"),e.load.image("item_kanban","src/png/item_kanban4.png"),e.load.spritesheet("item_crown","src/png/item_crown.png",{frameWidth:370,frameHeight:320}),e.load.image("item_fortune_statue","src/png/item_fortune_statue.png"),e.load.image("item_ribbon","src/png/item_ribbon3.png"),e.load.image("item_dice","src/png/item_dice.png"),e.load.image("item_dice_pointerover","src/png/item_dice_pointerover.png"),e.load.image("item_hat_knit","src/png/item_hat_knit.png"),e.load.image("item_hat_mugiwara","src/png/item_hat_mugiwara.png"),e.load.image("item_bank","src/png/item_bank.png"),e.load.image("item_bank_broken","src/png/item_bank_broken.png"),e.load.image("item_hat_helmet","src/png/item_hat_helmet.png"),e.load.image("item_asnya","src/png/item_asnya.png"),e.load.spritesheet("item_nui","src/png/item_nui2.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("item_switch","src/png/item_switch.png",{frameWidth:370,frameHeight:320}),e.load.image("item_pouch","src/png/item_pouch.png"),e.load.image("item_pouch_broken","src/png/item_pouch_broken.png"),e.load.image("item_hat_mortarboard","src/png/item_hat_mortarboard.png"),e.load.image("item_pad_on","src/png/item_pad_on.png"),e.load.image("item_pad_off","src/png/item_pad_off.png"),e.load.spritesheet("item_tokenChest","src/png/item_tokenChest.png",{frameWidth:370,frameHeight:320}),e.load.image("item_frame","src/png/item_frame.png"),e.load.image("item_wall_sticker_01","src/png/item_wall_sticker_01.png"),e.load.image("item_wall_sticker_02","src/png/item_wall_sticker_02.png"),e.load.image("item_wall_sticker_03","src/png/item_wall_sticker_03.png"),e.load.image("item_wall_sticker_04","src/png/item_wall_sticker_04.png"),e.load.image("item_wall_sticker_05","src/png/item_wall_sticker_05.png"),e.load.image("item_wall_sticker_06","src/png/item_wall_sticker_06.png"),e.load.image("item_wall_sticker_07","src/png/item_wall_sticker_07.png"),e.load.image("item_wall_sticker_08","src/png/item_wall_sticker_08.png"),e.load.image("item_wall_sticker_09","src/png/item_wall_sticker_09.png"),e.load.image("item_wall_sticker_10","src/png/item_wall_sticker_10.png"),e.load.image("item_wall_sticker_11","src/png/item_wall_sticker_11.png"),e.load.image("item_wall_sticker_12","src/png/item_wall_sticker_12.png"),e.load.image("item_wall_sticker_icon","src/icon/wall_sticker.png"),e.load.spritesheet("item_wall_sticker_neon","src/png/item_wall_sticker_neon.png",{frameWidth:1280,frameHeight:960}),e.load.image("item_fluffy_house_1","src/png/item_fluffy_house_1.png"),e.load.image("item_fluffy_house_2","src/png/item_fluffy_house_2.png"),e.load.image("item_fluffy_house_3","src/png/item_fluffy_house_3.png"),e.load.image("item_fluffy_house_4","src/png/item_fluffy_house_4.png"),e.load.image("item_fluffy_house_5","src/png/item_fluffy_house_5.png"),e.load.image("item_pancake","src/png/item_pancake.png"),e.load.image("item_rugg","src/png/item_rugg.png"),e.load.image("item_piano","src/png/item_piano.png"),e.load.image("item_piano_inactive","src/png/item_piano_inactive.png"),e.load.image("item_piano_opened","src/png/item_piano_opened.png"),e.load.image("item_window_sunny","src/png/item_window_sunny.png"),e.load.image("item_window_sunny_closed","src/png/item_window_sunny_closed.png"),e.load.image("item_window_cloudy","src/png/item_window_cloudy.png"),e.load.image("item_window_cloudy_closed","src/png/item_window_cloudy_closed.png"),e.load.image("item_window_rain","src/png/item_window_rain.png"),e.load.image("item_window_rain_closed","src/png/item_window_rain_closed.png"),e.load.image("item_window_night","src/png/item_window_night.png"),e.load.image("item_window_night_closed","src/png/item_window_night_closed.png"),e.load.image("item_newspaper","src/png/item_newspaper.png"),e.load.image("item_book","src/png/item_book.png"),e.load.spritesheet("item_presentboxes","src/png/item_presentboxes.png",{frameWidth:370,frameHeight:320}),e.load.image("item_box","src/png/item_box.png"),e.load.image("item_crayon","src/png/item_crayon.png"),e.load.spritesheet("item_fishbowl_list","src/png/item_fishbowl_list.png",{frameWidth:370,frameHeight:320}),e.load.image("item_bed","src/png/item_bed.png"),e.load.image("item_frame_inside_loading","src/png/item_frame_inside_loading.png"),e.load.spritesheet("item_hammock_list","src/png/item_hammock_list.png",{frameWidth:230,frameHeight:320}),e.load.spritesheet("item_lantern_list","src/png/item_lantern_list.png",{frameWidth:370,frameHeight:320}),e.load.image("item_staking","src/png/item_staking.png"),e.load.image("item_waterbottle","src/png/item_waterbottle.png"),e.load.image("item_wreath","src/png/item_wreath.png"),e.load.image("item_cushion","src/png/item_cushion.png"),e.load.image("item_woodcube","src/png/item_woodcube.png"),e.load.spritesheet("item_pinwheel","src/png/item_pinwheel.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("item_candle","src/png/item_candle.png",{frameWidth:370,frameHeight:320}),e.load.image("item_retrogame","src/png/item_retrogame.png"),e.load.spritesheet("retro_ascii","src/png/retro_ascii.png",{frameWidth:100,frameHeight:100}),e.load.spritesheet("item_runpa","src/png/item_runpa.png",{frameWidth:370,frameHeight:320}),e.load.image("item_staking_01","src/png/item_staking_01.png"),e.load.image("item_staking_02","src/png/item_staking_02.png"),e.load.image("item_staking_03","src/png/item_staking_03.png"),e.load.image("item_staking_04","src/png/item_staking_04.png"),e.load.image("item_staking_05","src/png/item_staking_05.png"),e.load.image("item_staking_06","src/png/item_staking_06.png"),e.load.image("item_staking_07","src/png/item_staking_07.png"),e.load.image("item_staking_08","src/png/item_staking_08.png"),e.load.image("item_clarinet","src/png/item_clarinet.png"),e.load.image("item_timpani","src/png/item_timpani.png"),e.load.image("item_harp","src/png/item_harp.png"),e.load.image("item_horn","src/png/item_horn.png"),e.load.image("item_clarinet_inactive","src/png/item_clarinet_inactive.png"),e.load.image("item_timpani_inactive","src/png/item_timpani_inactive.png"),e.load.image("item_harp_inactive","src/png/item_harp_inactive.png"),e.load.image("item_horn_inactive","src/png/item_horn_inactive.png"),e.load.spritesheet("practice_clarinet","src/png/practice_piano.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("practice_piano","src/png/practice_piano.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("practice_violin","src/png/practice_piano.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("practice_horn","src/png/practice_piano.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("practice_timpani","src/png/practice_piano.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("practice_harp","src/png/practice_piano.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("practice_notes","src/png/practice_notes.png",{frameWidth:370,frameHeight:320}),e.load.image("alp_a","src/png/alp_a.png"),e.load.image("alp_b","src/png/alp_b.png"),e.load.image("alp_c","src/png/alp_c.png"),e.load.image("alp_d","src/png/alp_d.png"),e.load.image("alp_e","src/png/alp_e.png"),e.load.image("alp_f","src/png/alp_f.png"),e.load.image("alp_g","src/png/alp_g.png"),e.load.image("alp_h","src/png/alp_h.png"),e.load.image("alp_i","src/png/alp_i.png"),e.load.image("alp_j","src/png/alp_j.png"),e.load.image("alp_k","src/png/alp_k.png"),e.load.image("alp_l","src/png/alp_l.png"),e.load.image("alp_m","src/png/alp_m.png"),e.load.image("alp_n","src/png/alp_n.png"),e.load.image("alp_o","src/png/alp_o.png"),e.load.image("alp_p","src/png/alp_p.png"),e.load.image("alp_q","src/png/alp_q.png"),e.load.image("alp_r","src/png/alp_r.png"),e.load.image("alp_s","src/png/alp_s.png"),e.load.image("alp_t","src/png/alp_t.png"),e.load.image("alp_u","src/png/alp_u.png"),e.load.image("alp_v","src/png/alp_v.png"),e.load.image("alp_w","src/png/alp_w.png"),e.load.image("alp_x","src/png/alp_x.png"),e.load.image("alp_y","src/png/alp_y.png"),e.load.image("alp_z","src/png/alp_z.png"),e.load.image("alp_ext","src/png/alp_ext.png"),e.load.image("ff_preFestival_left","src/png/ff_preFestival_left.png"),e.load.image("ff_duringFestival_left","src/png/ff_duringFestival_left.png"),e.load.image("ff_duringFestival_pointerOver_left","src/png/ff_duringFestival_pointerOver_left.png"),e.load.image("ff_duringFestival_afterVoting_left","src/png/ff_duringFestival_afterVoting_left.png"),e.load.image("ff_duringFestival_isEndable_left","src/png/ff_duringFestival_isEndable_left.png"),e.load.image("ff_preFestival_right","src/png/ff_preFestival_right.png"),e.load.image("ff_duringFestival_right","src/png/ff_duringFestival_right.png"),e.load.image("ff_duringFestival_pointerOver_right","src/png/ff_duringFestival_pointerOver_right.png"),e.load.image("ff_duringFestival_afterVoting_right","src/png/ff_duringFestival_afterVoting_right.png"),e.load.image("ff_duringFestival_isEndable_right","src/png/ff_duringFestival_isEndable_right.png"),e.load.spritesheet("ff_reports","src/png/ff_reports.png",{frameWidth:615,frameHeight:693}),e.load.spritesheet("item_clock","src/png/item_clock_list.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("item_nui_list","src/png/item_nui_list.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("nyui_moving","src/png/nyui_moving.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("nyui_happy","src/png/nyui_happy.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("mogumogu","src/png/mogumogu.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("fluffy_fluffys","src/png/fluffy_fluffys3.png",{frameWidth:370,frameHeight:320}),e.load.image("item_mail","src/png/item_mail.png"),e.load.spritesheet("cats","src/png/cats.png",{frameWidth:370,frameHeight:320}),e.load.image("icon_kusa","src/png/icon_system_kusa.png"),e.load.image("icon_ohana","src/png/icon_system_ohana.png"),e.load.image("icon_clock","src/png/icon_system_clock.png"),e.load.image("icon_heart","src/png/icon_system_heart.png"),e.load.image("icon_rotate","src/png/icon_system_rotate.png"),e.load.image("icon_home","src/png/icon_system_home.png"),e.load.image("icon_satiety","src/png/icon_system_satiety.png"),e.load.image("icon_happy","src/png/icon_system_happy.png"),e.load.image("icon_reload","src/png/icon_reload.png"),e.load.image("icon_str","src/png/icon_status_str.png"),e.load.image("icon_dex","src/png/icon_status_dex.png"),e.load.image("icon_int","src/png/icon_status_int.png"),e.load.image("icon_luk","src/png/icon_status_luk.png"),e.load.image("twinkle_01","src/png/twinkle_01.png"),e.load.image("sparkle_01","src/png/sparkle_01.png"),e.load.image("glitter_01","src/png/glitter_01.png"),e.load.image("stroll_drink_01","src/png/stroll_drink_01.png"),e.load.image("stroll_drink_02","src/png/stroll_drink_02.png"),e.load.image("stroll_drink_03","src/png/stroll_drink_03.png"),e.load.image("stroll_drink_04","src/png/stroll_drink_04.png"),e.load.image("stroll_direction_01","src/png/stroll_direction_01.png"),e.load.image("stroll_direction_02","src/png/stroll_direction_02.png"),e.load.image("stroll_direction_03","src/png/stroll_direction_03.png"),e.load.image("stroll_direction_04","src/png/stroll_direction_04.png"),e.load.image("stroll_direction_during_01","src/png/stroll_direction_during_01.png"),e.load.image("stroll_during_01a","src/png/stroll_during_01a.png"),e.load.image("stroll_during_01b","src/png/stroll_during_01b.png"),e.load.image("stroll_during_01c","src/png/stroll_during_01c.png"),e.load.image("stroll_during_01_back","src/png/stroll_during_01_back.png"),e.load.image("stroll_during_01_cloud","src/png/stroll_during_01_cloud.png"),e.load.image("stroll_during_01_mountain","src/png/stroll_during_01_mountain.png"),e.load.image("stroll_during_01_grass","src/png/stroll_during_01_grass.png"),e.load.image("stroll_waterbottle","src/png/stroll_waterbottle.png"),e.load.image("stroll_during_02_back","src/png/stroll_during_02_back.png"),e.load.image("stroll_during_02_wave","src/png/stroll_during_02_wave.png"),e.load.image("stroll_during_02_starfish","src/png/stroll_during_02_starfish.png"),e.load.image("stroll_during_02_shell","src/png/stroll_during_02_shell.png"),e.load.image("stroll_during_02_yacht","src/png/stroll_during_02_yacht.png"),e.load.image("stroll_during_02_fune","src/png/stroll_during_02_fune.png"),e.load.image("stroll_during_03_back","src/png/stroll_during_03_back.png"),e.load.image("stroll_during_03_tree1","src/png/stroll_during_03_tree1.png"),e.load.image("stroll_during_03_tree2","src/png/stroll_during_03_tree2.png"),e.load.image("stroll_during_03_baloon","src/png/stroll_during_03_baloon.png"),e.load.image("stroll_during_03_mountain","src/png/stroll_during_03_mountain.png"),e.load.spritesheet("neon_ufo","src/png/neon_ufo.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("neon_moon","src/png/neon_moon.png",{frameWidth:370,frameHeight:320}),e.load.image("neon_saturn","src/png/neon_saturn.png"),e.load.image("pippel_basic","src/png/pippel_basic.png"),e.load.image("pippel_house","src/png/pippel_house.png"),e.load.image("pippel_stem","src/png/pippel_stem.png"),e.load.audio("bgm1","src/music/Morning_2.mp3"),e.load.audio("bgm2","src/music/Roll_Roll_Roll.mp3"),e.load.audio("bgm3","src/music/amaoto.mp3"),e.load.audio("bgm_n1","src/music/kiyoshi.mp3"),e.load.audio("button_on","src/sound/button_on.mp3"),e.load.audio("button_select","src/sound/button_select.mp3"),e.load.audio("feeding","src/sound/feeding.mp3"),e.load.audio("grooming","src/sound/grooming.mp3"),e.load.audio("mining","src/sound/mining.mp3"),e.load.audio("mining_during","src/sound/mining_during.mp3"),e.load.audio("farming","src/sound/farming.mp3"),e.load.audio("farming_during","src/sound/farming_during.mp3"),e.load.audio("crafting","src/sound/crafting.mp3"),e.load.audio("crafting_during","src/sound/crafting_during.mp3"),e.load.audio("happy","src/sound/happy.mp3"),e.load.audio("earn","src/sound/earn.wav"),e.load.audio("dice","src/sound/dice.mp3"),e.load.audio("dice_impact","src/sound/dice_impact.mp3"),e.load.audio("hat","src/sound/hat.mp3"),e.load.audio("unhappy","src/sound/unhappy.mp3"),e.load.audio("switch","src/sound/switch.mp3"),e.load.audio("window_open","src/sound/window_open.mp3"),e.load.audio("window_pointerover","src/sound/window_pointerover.mp3"),e.load.audio("window_select","src/sound/window_select.mp3"),e.load.audio("window_cancel","src/sound/window_cancel.mp3"),e.load.audio("system","src/sound/system.mp3"),e.load.audio("nui","src/sound/nui.mp3"),e.load.audio("pad","src/sound/pad2.mp3"),e.load.audio("fireworks","src/sound/fireworks.mp3"),e.load.audio("fireworks2","src/sound/fireworks2.mp3"),e.load.audio("basket","src/sound/basket.mp3"),e.load.audio("cat1","src/sound/cat1.mp3"),e.load.audio("cat2","src/sound/cat2.mp3"),e.load.audio("clock","src/sound/clock.mp3"),e.load.audio("window","src/sound/window.mp3"),e.load.audio("piano1","src/sound/piano1.mp3"),e.load.audio("piano2","src/sound/piano2.mp3"),e.load.audio("nainai1","src/sound/nainai1.mp3"),e.load.audio("nainai2","src/sound/nainai2.mp3"),e.load.audio("fluffy","src/sound/fluffy.mp3"),e.load.audio("fluffy2","src/sound/fluffy2.mp3"),e.load.audio("fluffy3","src/sound/fluffy3.mp3"),e.load.audio("fluffy4","src/sound/fluffy4.mp3"),e.load.audio("fluffy5","src/sound/fluffy5.mp3"),e.load.audio("tokenChest","src/sound/tokenChest.mp3"),e.load.audio("star","src/sound/star.mp3"),e.load.audio("nyui","src/sound/nyui.mp3"),e.load.audio("nyui2","src/sound/nyui2.mp3"),e.load.audio("fluffy_house","src/sound/fluffy_house.mp3"),e.load.audio("practice","src/sound/practice.mp3"),e.load.audio("piano_a","src/sound/piano_a.mp3"),e.load.audio("piano_b","src/sound/piano_b.mp3"),e.load.audio("piano_c","src/sound/piano_c.mp3"),e.load.audio("piano_d","src/sound/piano_d.mp3"),e.load.audio("piano_e","src/sound/piano_e.mp3"),e.load.audio("piano_f","src/sound/piano_f.mp3"),e.load.audio("piano_g","src/sound/piano_g.mp3"),e.load.audio("alp_dissolving","src/sound/alp_dissolving.mp3"),e.load.audio("alp_rising","src/sound/alp_rising.mp3"),e.load.audio("alp_stretching","src/sound/alp_stretching.mp3"),e.load.audio("alp_falling","src/sound/alp_falling.mp3"),e.load.audio("alp_flipping","src/sound/alp_flipping.mp3"),e.load.audio("alp_shrinking","src/sound/alp_shrinking.mp3"),e.load.audio("woodcube","src/sound/woodcube.mp3"),e.load.audio("ufo","src/sound/ufo.mp3"),e.load.audio("wheel","src/sound/wheel.mp3"),e.load.audio("pippel","src/sound/pippel.wav"),e.load.atlas("par_flares","src/particle/flares.png","src/particle/flares.json"),e.load.spritesheet("par_flowers","src/particle/flowers.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("par_stars","src/particle/stars.png",{frameWidth:200,frameHeight:191}),e.load.spritesheet("par_fluffys","src/particle/fluffy.png",{frameWidth:370,frameHeight:320}),e.load.spritesheet("par_glitter","src/particle/glitter.png",{frameWidth:370,frameHeight:320}),e.load.image("coin_color_ACA","src/png/coin_color_ACA.png"),e.load.image("coin_color_ASTR","src/png/coin_color_ASTR.png"),e.load.image("coin_color_BNB","src/png/coin_color_BNB.png"),e.load.image("coin_color_BTC","src/png/coin_color_BTC.png"),e.load.image("coin_color_BUSD","src/png/coin_color_BUSD.png"),e.load.image("coin_color_DAI","src/png/coin_color_DAI.png"),e.load.image("coin_color_DOT","src/png/coin_color_DOT.png"),e.load.image("coin_color_ETH","src/png/coin_color_ETH.png"),e.load.image("coin_color_GLMR","src/png/coin_color_GLMR.png"),e.load.image("coin_color_KSM","src/png/coin_color_KSM.png"),e.load.image("coin_color_LAY","src/png/coin_color_LAY.png"),e.load.image("coin_color_MATIC","src/png/coin_color_MATIC.png"),e.load.image("coin_color_SDN","src/png/coin_color_SDN.png"),e.load.image("coin_color_USDC","src/png/coin_color_USDC.png"),e.load.image("coin_color_USDT","src/png/coin_color_USDT.png"),array_image_tokenBall=["coin_color_ACA","coin_color_ASTR","coin_color_BNB","coin_color_BTC","coin_color_BUSD","coin_color_DAI","coin_color_DOT","coin_color_ETH","coin_color_GLMR","coin_color_KSM","coin_color_LAY","coin_color_MATIC","coin_color_SDN","coin_color_USDC","coin_color_USDT",],dic_tokenBall_img={ACA:"coin_color_ACA",ASTR:"coin_color_ASTR",BNB:"coin_color_BNB",BTC:"coin_color_BTC",BUSD:"coin_color_BUSD",DAI:"coin_color_DAI",DOT:"coin_color_DOT",ETH:"coin_color_ETH",GLMR:"coin_color_GLMR",KSM:"coin_color_KSM",LAY:"coin_color_LAY",MATIC:"coin_color_MATIC",SDN:"coin_color_SDN",USDC:"coin_color_USDC",USDT:"coin_color_USDT"},dic_tokenBall_contract={ACA:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",ASTR:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",BNB:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",BTC:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",BUSD:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",DAI:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",DOT:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",ETH:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",GLMR:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",KSM:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",LAY:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",MATIC:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",SDN:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",USDC:"0x6d315468D2457F541FA15c1275A5cDAF5f950622",USDT:"0x6d315468D2457F541FA15c1275A5cDAF5f950622"}}function create(e){group_star=e.add.group(),(group_update=e.add.group()).runChildUpdate=!0,group_info=e.add.group(),group_info2=e.add.group(),group_nyuinyui_ohana=e.add.group(),group_neonStar=e.add.group(),group_pet=e.add.group(),group_alp=e.add.group(),group_scoreMeter=e.add.group(),e.add.image(640,480,"back");let t=.7;for(achv_01=e.add.image(1155,568,"achv_01").setAlpha(t).setVisible(!1),achv_02=e.add.image(1190,595,"achv_02").setAlpha(t).setVisible(!1),achv_03=e.add.image(1248,660,"achv_03").setAlpha(t).setVisible(!1),achv_04=e.add.image(600,480,"achv_04").setAlpha(t).setVisible(!1),achv_05=e.add.image(632,489,"achv_05").setAlpha(t).setVisible(!1),achv_06=e.add.image(330,472,"achv_06").setAlpha(t).setVisible(!1),achv_07=e.add.image(285,472,"achv_07").setAlpha(t).setVisible(!1),achv_08=e.add.image(240,474,"achv_08").setAlpha(t).setVisible(!1),achv_09=e.add.image(310,420,"achv_09").setAlpha(t).setVisible(!1),achv_10=e.add.image(255,420,"achv_10").setAlpha(t).setVisible(!1),achv_11=e.add.image(1255,619,"achv_11").setAlpha(t).setVisible(!1),achv_12=e.add.image(1263,683,"achv_12").setAlpha(t).setVisible(!1),achv_13=e.add.image(1140,533,"achv_13").setAlpha(t).setVisible(!1),achv_14=e.add.image(1190,540,"achv_14").setAlpha(t).setVisible(!1),achv_15=e.add.image(365,408,"achv_15").setAlpha(t).setVisible(!1),achv_16=e.add.image(825,480,"achv_16").setAlpha(t).setVisible(!1),achv_17=e.add.image(1215,633,"achv_17").setAlpha(t).setVisible(!1),achv_18=e.add.image(836,448,"achv_18").setAlpha(t).setVisible(!1),li_achv=[0,achv_01,achv_02,achv_03,achv_04,achv_05,achv_06,achv_07,achv_08,achv_09,achv_10,achv_11,achv_12,achv_13,achv_14,achv_15,achv_16,achv_17,achv_18,achv_19=e.add.image(1232,580,"achv_19").setAlpha(t).setVisible(!1),achv_20=e.add.image(365,470,"achv_20").setAlpha(t).setVisible(!1),],item_back_sandbox=e.add.image(640,480,"back_sandbox").setDepth(2),item_bear=e.add.sprite(1e3,400,"item_bear").setScale(.45).setDepth(2),item_table=e.add.sprite(600,870,"item_table").setOrigin(.5).setScale(.6).setDepth(2),item_misin=e.add.sprite(950,830,"item_misin").setOrigin(.5).setScale(.8).setDepth(2),item_tree0=e.add.sprite(100,400,"item_tree0").setOrigin(.5).setScale(.7).setDepth(450),item_tree1=e.add.sprite(100,400,"item_tree1").setOrigin(.5).setScale(.7).setDepth(452),item_tree2=e.add.sprite(100,400,"item_tree2").setOrigin(.5).setScale(.7).setDepth(451),item_tree3=e.add.sprite(100,400,"item_tree3").setOrigin(.5).setScale(.7).setDepth(450),item_tree1.visible=!1,item_tree2.visible=!1,item_tree3.visible=!1,item_gold1=e.add.sprite(130,750,"item_gold1").setOrigin(.5).setScale(.7).setDepth(750),item_gold2=e.add.sprite(130,750,"item_gold2").setOrigin(.5).setScale(.7).setDepth(751),item_gold3=e.add.sprite(130,750,"item_gold3").setOrigin(.5).setScale(.7).setDepth(752),item_gold1.visible=!1,item_gold2.visible=!1,item_gold3.visible=!1,e.anims.create({key:"wall_sticker_neon",frames:e.anims.generateFrameNumbers("item_wall_sticker_neon",{frames:[0,0,1,1,2,2]}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_right",frames:e.anims.generateFrameNumbers("murasaki_right",{start:0,end:3}),frameRate:2,repeat:-1}),e.anims.create({key:"murasaki_left",frames:e.anims.generateFrameNumbers("murasaki_left",{start:0,end:3}),frameRate:2,repeat:-1}),e.anims.create({key:"murasaki_sleeping",frames:e.anims.generateFrameNumbers("murasaki_sleeping",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_feeding",frames:e.anims.generateFrameNumbers("murasaki_feeding",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_feeding_happy_right",frames:e.anims.generateFrameNumbers("murasaki_feeding_happy_right",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_feeding_happy_left",frames:e.anims.generateFrameNumbers("murasaki_feeding_happy_left",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_crying",frames:e.anims.generateFrameNumbers("murasaki_crying",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_mining",frames:e.anims.generateFrameNumbers("murasaki_mining",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_hugging",frames:e.anims.generateFrameNumbers("murasaki_hugging",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_farming",frames:e.anims.generateFrameNumbers("murasaki_farming",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_grooming",frames:e.anims.generateFrameNumbers("murasaki_grooming",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_crafting",frames:e.anims.generateFrameNumbers("murasaki_crafting",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_working_left",frames:e.anims.generateFrameNumbers("murasaki_working_left",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_working_right",frames:e.anims.generateFrameNumbers("murasaki_working_right",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_click",frames:e.anims.generateFrameNumbers("murasaki_click",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_stone",frames:e.anims.generateFrameNumbers("murasaki_stone",{start:0,end:0}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_listning",frames:e.anims.generateFrameNumbers("murasaki_listning",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_neon_right",frames:e.anims.generateFrameNumbers("murasaki_neon_right",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_neon_left",frames:e.anims.generateFrameNumbers("murasaki_neon_left",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"mr_astar_right",frames:e.anims.generateFrameNumbers("mr_astar_right",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"mr_astar_left",frames:e.anims.generateFrameNumbers("mr_astar_left",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"mr_astar_meet",frames:e.anims.generateFrameNumbers("mr_astar_meet",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"ms_ether_right",frames:e.anims.generateFrameNumbers("ms_ether_right",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"ms_ether_left",frames:e.anims.generateFrameNumbers("ms_ether_left",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"ms_ether_meet",frames:e.anims.generateFrameNumbers("ms_ether_meet",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"dr_bitco_right",frames:e.anims.generateFrameNumbers("dr_bitco_right",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"dr_bitco_left",frames:e.anims.generateFrameNumbers("dr_bitco_left",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"dr_bitco_meet",frames:e.anims.generateFrameNumbers("dr_bitco_meet",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"item_musicbox_on",frames:e.anims.generateFrameNumbers("item_musicbox",{start:1,end:2}),frameRate:1,repeat:-1}),e.anims.create({key:"item_musicbox_off",frames:e.anims.generateFrameNumbers("item_musicbox",{start:0,end:0}),frameRate:1,repeat:-1}),e.anims.create({key:"item_crown",frames:e.anims.generateFrameNumbers("item_crown",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"murasaki_hungry",frames:e.anims.generateFrameNumbers("murasaki_hungry",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"item_switch_on",frames:e.anims.generateFrameNumbers("item_switch",{start:0,end:0}),frameRate:1,repeat:-1}),e.anims.create({key:"item_switch_off",frames:e.anims.generateFrameNumbers("item_switch",{start:1,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"item_nui",frames:e.anims.generateFrameNumbers("item_nui",{start:0,end:0}),frameRate:1,repeat:-1}),e.anims.create({key:"item_nui_alive",frames:e.anims.generateFrameNumbers("item_nui",{start:1,end:3}),frameRate:1,repeat:-1}),e.anims.create({key:"item_clock_anim_1",frames:e.anims.generateFrameNumbers("item_clock",{frames:[4,3,4,3,0]}),frameRate:1,repeat:0}),e.anims.create({key:"item_fishbowl_1",frames:e.anims.generateFrameNumbers("item_fishbowl_list",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"item_fishbowl_2",frames:e.anims.generateFrameNumbers("item_fishbowl_list",{start:2,end:3}),frameRate:1,repeat:-1}),e.anims.create({key:"item_fishbowl_3",frames:e.anims.generateFrameNumbers("item_fishbowl_list",{start:4,end:5}),frameRate:1,repeat:-1}),e.anims.create({key:"item_fishbowl_4",frames:e.anims.generateFrameNumbers("item_fishbowl_list",{start:6,end:7}),frameRate:1,repeat:-1}),e.anims.create({key:"item_fishbowl_5",frames:e.anims.generateFrameNumbers("item_fishbowl_list",{start:8,end:9}),frameRate:1,repeat:-1}),e.anims.create({key:"item_hammock",frames:e.anims.generateFrameNumbers("item_hammock_list",{start:1,end:2}),frameRate:1,repeat:-1}),e.anims.create({key:"item_lantern",frames:e.anims.generateFrameNumbers("item_lantern_list",{start:2,end:4}),frameRate:1,repeat:-1}),e.anims.create({key:"item_candle",frames:e.anims.generateFrameNumbers("item_candle",{frames:[0,1]}),frameRate:1,repeat:-1}),e.anims.create({key:"item_runpa",frames:e.anims.generateFrameNumbers("item_runpa",{frames:[0,0,1,1]}),frameRate:1,repeat:-1}),e.anims.create({key:"item_runpa_sleeping",frames:e.anims.generateFrameNumbers("item_runpa",{frames:[2,2,3,3]}),frameRate:1,repeat:-1}),e.anims.create({key:"cat_sleeping",frames:e.anims.generateFrameNumbers("cats",{frames:[0,1]}),frameRate:1,repeat:-1}),e.anims.create({key:"cat_standing",frames:e.anims.generateFrameNumbers("cats",{frames:[2,3]}),frameRate:1,repeat:-1}),e.anims.create({key:"cat_standing_withMail",frames:e.anims.generateFrameNumbers("cats",{frames:[4,5]}),frameRate:1,repeat:-1}),e.anims.create({key:"cat_walking_right",frames:e.anims.generateFrameNumbers("cats",{frames:[6,7]}),frameRate:1,repeat:-1}),e.anims.create({key:"cat_walking_right_fast",frames:e.anims.generateFrameNumbers("cats",{frames:[6,7]}),frameRate:2,repeat:-1}),e.anims.create({key:"cat_walking_left",frames:e.anims.generateFrameNumbers("cats",{frames:[8,9]}),frameRate:1,repeat:-1}),e.anims.create({key:"cat_walking_left_fast",frames:e.anims.generateFrameNumbers("cats",{frames:[8,9]}),frameRate:2,repeat:-1}),e.anims.create({key:"cat_walking_right_withMail",frames:e.anims.generateFrameNumbers("cats",{frames:[10,11]}),frameRate:1,repeat:-1}),e.anims.create({key:"cat_walking_right_withMail_fast",frames:e.anims.generateFrameNumbers("cats",{frames:[10,11]}),frameRate:2,repeat:-1}),e.anims.create({key:"cat_walking_left_withMail",frames:e.anims.generateFrameNumbers("cats",{frames:[12,13]}),frameRate:1,repeat:-1}),e.anims.create({key:"cat_walking_left_withMail_fast",frames:e.anims.generateFrameNumbers("cats",{frames:[12,13]}),frameRate:2,repeat:-1}),e.anims.create({key:"cat_sleeping_withMail",frames:e.anims.generateFrameNumbers("cats",{frames:[14,15]}),frameRate:1,repeat:-1}),i=1;i<=12;i++){let s="fluffy_fluffier_"+("00"+i).slice(-2),a=[1+10*(i-1),1+10*(i-1),2+10*(i-1)];e.anims.create({key:s,frames:e.anims.generateFrameNumbers("fluffy_fluffys",{frames:a}),frameRate:1,repeat:-1})}for(i=1;i<=12;i++){let n="fluffy_fluffiest_"+("00"+i).slice(-2)+"_front",o=[3+10*(i-1),4+10*(i-1)];e.anims.create({key:n,frames:e.anims.generateFrameNumbers("fluffy_fluffys",{frames:o}),frameRate:1,repeat:-1})}for(i=1;i<=12;i++){let r="fluffy_fluffiest_"+("00"+i).slice(-2)+"_left",$=[5+10*(i-1),6+10*(i-1)];e.anims.create({key:r,frames:e.anims.generateFrameNumbers("fluffy_fluffys",{frames:$}),frameRate:2,repeat:-1})}for(i=1;i<=12;i++){let l="fluffy_fluffiest_"+("00"+i).slice(-2)+"_right",d=[7+10*(i-1),8+10*(i-1)];e.anims.create({key:l,frames:e.anims.generateFrameNumbers("fluffy_fluffys",{frames:d}),frameRate:2,repeat:-1})}e.anims.create({key:"nyui_moving_left",frames:e.anims.generateFrameNumbers("nyui_moving",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"nyui_moving_right",frames:e.anims.generateFrameNumbers("nyui_moving",{start:2,end:3}),frameRate:1,repeat:-1}),e.anims.create({key:"nyui_happy",frames:e.anims.generateFrameNumbers("nyui_happy",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"mogumogu",frames:e.anims.generateFrameNumbers("mogumogu",{start:0,end:1}),frameRate:1,repeat:-1}),e.anims.create({key:"ff_report",frames:e.anims.generateFrameNumbers("ff_reports",{frames:[0,1]}),frameRate:1,repeat:-1}),e.anims.create({key:"ff_report_close",frames:e.anims.generateFrameNumbers("ff_reports",{frames:[2,3]}),frameRate:1,repeat:-1}),e.anims.create({key:"practice_clarinet",frames:e.anims.generateFrameNumbers("practice_piano",{frames:[0,1]}),frameRate:1,repeat:-1}),e.anims.create({key:"practice_piano",frames:e.anims.generateFrameNumbers("practice_piano",{frames:[0,1]}),frameRate:1,repeat:-1}),e.anims.create({key:"practice_violin",frames:e.anims.generateFrameNumbers("practice_piano",{frames:[0,1]}),frameRate:1,repeat:-1}),e.anims.create({key:"practice_horn",frames:e.anims.generateFrameNumbers("practice_piano",{frames:[0,1]}),frameRate:1,repeat:-1}),e.anims.create({key:"practice_timpani",frames:e.anims.generateFrameNumbers("practice_piano",{frames:[0,1]}),frameRate:1,repeat:-1}),e.anims.create({key:"practice_cello",frames:e.anims.generateFrameNumbers("practice_piano",{frames:[0,1]}),frameRate:1,repeat:-1}),e.anims.create({key:"neon_ufo",frames:e.anims.generateFrameNumbers("neon_ufo",{frames:[0,1]}),frameRate:1,repeat:-1});let h,m;h=460,m=870,button_feeding=e.add.sprite(h,m,"button_feeding").setScale(.16).setDepth(11).setInteractive({useHandCursor:!0}).on("pointerdown",()=>sound_button_on.play()).on("pointerdown",()=>contract_feeding(summoner)).on("pointerover",()=>sound_button_select.play()).on("pointerover",()=>button_feeding.setTexture("button_feeding_pointerover")).on("pointerout",()=>button_feeding.setTexture("button_feeding")),group_info.add(button_feeding),h=1150,m=400,button_grooming=e.add.sprite(h,m,"button_grooming_unable").setScale(.16).setDepth(11).setInteractive({useHandCursor:!0}).on("pointerdown",()=>sound_button_on.play()).on("pointerdown",()=>contract_grooming(summoner)).on("pointerover",()=>sound_button_select.play()).on("pointerover",()=>button_grooming.setTexture("button_grooming_pointerover")).on("pointerout",()=>button_grooming.setTexture("button_grooming")).disableInteractive(),group_info.add(button_grooming),h=60,m=760,button_mining=e.add.sprite(h,m,"button_mining_unable").setScale(.16).setDepth(11).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{if(sound_button_on.play(),happy>10&&satiety>10||"mining"==murasakisan.mode)contract_mining(summoner);else{let t="Too low Satiety or Happy...",s=e.add.text(25,808,t).setFontSize(20).setFontFamily("Arial").setFill("#ff1694");setTimeout(()=>{s.destroy()},3e3,e)}}).on("pointerover",()=>sound_button_select.play()).on("pointerover",()=>button_mining.setTexture("button_mining_pointerover")).on("pointerout",()=>button_mining.setTexture("button_mining_enable")).disableInteractive(),group_info.add(button_mining),icon_mining=e.add.sprite(h+55,m-22,"icon_ohana").setScale(.07).setVisible(!1),text_mining_calc=e.add.text(h+67,m-30,"",{font:"18px Arial",fill:"#000"}),group_info2.add(icon_mining),group_info.add(text_mining_calc),h=240,m=340,button_farming=e.add.sprite(h,m,"button_farming_unable").setScale(.16).setDepth(11).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{if(sound_button_on.play(),happy>10&&satiety>10||"farming"==murasakisan.mode)contract_farming(summoner);else{let t="Too low Satiety or Happy...",s=e.add.text(130,390,t).setFontSize(20).setFontFamily("Arial").setFill("#ff1694");setTimeout(()=>{s.destroy()},3e3,e)}}).on("pointerover",()=>sound_button_select.play()).on("pointerover",()=>button_farming.setTexture("button_farming_pointerover")).on("pointerout",()=>button_farming.setTexture("button_farming_enable")).disableInteractive(),group_info.add(button_farming),icon_farming=e.add.sprite(h+55,m-20,"icon_kusa").setScale(.09).setVisible(!1),text_farming_calc=e.add.text(h+65,m-30,"",{font:"18px Arial",fill:"#000"}),group_info2.add(icon_farming),group_info.add(text_farming_calc),h=1240,m=35,button_levelup_unable_text=e.add.text(1080,70," Level cap in trial: Lv4 ",{font:"20px Arial",fill:"#ff0000",backgroundColor:"#ffeeee"}).setDepth(2001).setVisible(!1),button_levelup=e.add.sprite(h,m,"back_level").setScale(.11).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{sound_button_on.play(),"trial"==gamemode&&local_level>=4?(button_levelup_unable_text.visible=!0,setTimeout(()=>{button_levelup_unable_text.visible=!1},3e3,e)):contract_level_up(summoner)}).on("pointerover",()=>sound_button_select.play()).on("pointerover",()=>button_levelup.setTexture("button_levelup_pointerover")).on("pointerover",()=>text_level.setText("")).on("pointerout",()=>button_levelup.setTexture("button_levelup_enable")).on("pointerout",()=>text_level.setText(local_level)).disableInteractive(),text_level=e.add.text(h,m+7,"0",{font:"bold 26px Verdana",fill:"#E5004F"}).setOrigin(.5),group_info.add(button_levelup),group_info.add(text_level),h=380,m=580,button_practice=e.add.sprite(h,m,"button_practice_unable").setScale(.16).setInteractive({useHandCursor:!0}).on("pointerover",()=>sound_button_select.play()).on("pointerover",()=>button_practice.setTexture("button_practice_pointerover")).on("pointerout",()=>button_practice.setTexture("button_practice_enable")).disableInteractive().on("pointerdown",()=>{0==local_practice_status?open_window_practice(e):(sound_button_on.play(),contract_stop_practice(summoner))}).setVisible(!1),group_info.add(button_practice),h=820,m=870,button_crafting_unable=e.add.sprite(h,m,"button_crafting_unable").setScale(.16).setDepth(3),group_info.add(button_crafting_unable),button_crafting_start=e.add.sprite(h,m,"button_crafting_start_off").on("pointerover",()=>{sound_button_select.play(),button_crafting_start.setTexture("button_crafting_start_on")}).on("pointerout",()=>{button_crafting_start.setTexture("button_crafting_start_off")}).on("pointerdown",()=>{sound_button_on.play(),global_selected_crafting_item>0&&contract_start_crafting(summoner,global_selected_crafting_item)}).setScale(.16).setDepth(11).setInteractive({useHandCursor:!0}).setVisible(!1),group_info2.add(button_crafting_start),button_crafting_pause=e.add.sprite(h,m,"button_crafting_pause_off").on("pointerover",()=>{sound_button_select.play(),button_crafting_pause.setTexture("button_crafting_pause_on")}).on("pointerout",()=>{button_crafting_pause.setTexture("button_crafting_pause_off")}).on("pointerdown",()=>{sound_button_on.play(),contract_pause_crafting(summoner)}).setScale(.16).setDepth(12).setInteractive({useHandCursor:!0}).setVisible(!1),group_info2.add(button_crafting_pause),button_crafting_complete=e.add.sprite(h,m,"button_crafting_complete_off").on("pointerover",()=>{sound_button_select.play(),button_crafting_complete.setTexture("button_crafting_complete_on")}).on("pointerout",()=>{button_crafting_complete.setTexture("button_crafting_complete_off")}).on("pointerdown",()=>{sound_button_on.play(),contract_complete_crafting(summoner)}).setScale(.16).setDepth(13).setInteractive({useHandCursor:!0}).setVisible(!1),group_info2.add(button_crafting_complete),button_crafting_resume=e.add.sprite(h,m,"button_crafting_resume_off").on("pointerover",()=>{sound_button_select.play(),button_crafting_resume.setTexture("button_crafting_resume_on")}).on("pointerout",()=>{button_crafting_resume.setTexture("button_crafting_resume_off")}).on("pointerdown",()=>{sound_button_on.play(),contract_resume_crafting(summoner)}).setScale(.16).setDepth(14).setInteractive({useHandCursor:!0}).setVisible(!1),group_info2.add(button_crafting_resume),button_crafting_cancel=e.add.sprite(h+250,m,"button_crafting_cancel_off").on("pointerover",()=>{sound_button_select.play(),button_crafting_cancel.setTexture("button_crafting_cancel_on")}).on("pointerout",()=>{button_crafting_cancel.setTexture("button_crafting_cancel_off")}).on("pointerdown",()=>{sound_button_on.play(),contract_cancel_crafting(summoner)}).setScale(.16).setDepth(15).setInteractive({useHandCursor:!0}).setVisible(!1),group_info2.add(button_crafting_cancel),icon_crafting_ohana=e.add.sprite(h+58,m+13,"icon_ohana").setDepth(2e3).setScale(.07).setVisible(!1),group_info2.add(icon_crafting_ohana),icon_crafting_kusa=e.add.sprite(h+130,m+15,"icon_kusa").setDepth(2e3).setScale(.09).setVisible(!1),group_info2.add(icon_crafting_kusa),icon_crafting_time=e.add.sprite(h+58,m+42,"icon_clock").setDepth(2e3).setScale(.12).setVisible(!1),group_info2.add(icon_crafting_time),text_crafting_selected_item_ohana=e.add.text(h+72,m+5,"",{font:"18px Arial",fill:"#000",backgroundColor:"#ecd9ff"}).setDepth(2e3),group_info2.add(text_crafting_selected_item_ohana),text_crafting_selected_item_kusa=e.add.text(h+142,m+5,"",{font:"18px Arial",fill:"#000",backgroundColor:"#ecd9ff"}).setDepth(2e3),group_info2.add(text_crafting_selected_item_kusa),text_crafting_selected_item_heart=e.add.text(h+214,m+5,"",{font:"18px Arial",fill:"#000",backgroundColor:"#ecd9ff"}).setDepth(2e3),group_info2.add(text_crafting_selected_item_heart),text_crafting_selected_item_time=e.add.text(h+72,m+32,"",{font:"18px Arial",fill:"#000",backgroundColor:"#ecd9ff"}).setDepth(2e3),group_info2.add(text_crafting_selected_item_time),icon_crafting_time_remining=e.add.image(h+60,m+15,"icon_clock").setDepth(2e3).setScale(.12).setVisible(!1),group_info2.add(icon_crafting_time_remining),text_crafting_calc=e.add.text(h+75,m+5,"",{font:"18px Arial",fill:"#000",backgroundColor:"#ecd9ff"}).setDepth(2e3),group_info2.add(text_crafting_calc),text_select_item=e.add.text(h+50,m-30,">> Select Item <<",{font:"30px Arial",fill:"#000",backgroundColor:"#ecd9ff"}).setDepth(2e3).setFontSize(24).setFontFamily("Arial").setFill("#000000").setInteractive({useHandCursor:!0}).on("pointerdown",()=>{0==flag_window_craft&&0!=summoner&&(flag_window_craft=1,open_window_craft(e))}).on("pointerover",()=>text_select_item.setStyle({fontSize:24,fontFamily:"Arial",fill:"#d19dff"})).on("pointerout",()=>text_select_item.setStyle({fontSize:24,fontFamily:"Arial",fill:"#000000"})),group_info2.add(text_select_item),text_craft_item=e.add.text(h+50,m,"",{font:"18px Arial",fill:"#000"}).setDepth(2e3).setInteractive({useHandCursor:!0}).on("pointerdown",()=>open_window_craft(e)),group_info2.add(text_craft_item),icon_rotate=e.add.sprite(1235,900,"icon_rotate").setOrigin(.5).setScale(.12).setDepth(4100).setInteractive({useHandCursor:!0}).on("pointerdown",()=>sound_system.play()).on("pointerdown",()=>{1280==e.sys.game.scale.gameSize._width?(e.scale.setGameSize(960,1280),e.cameras.main.rotation=90*Math.PI/180,e.cameras.main.centerOn(640,480)):(e.scale.setGameSize(1280,960),e.cameras.main.rotation=0,e.cameras.main.centerOn(640,480))}),group_info.add(icon_rotate),icon_home=e.add.sprite(1160,900,"icon_home").setOrigin(.5).setScale(.15).setDepth(4100).setInteractive({useHandCursor:!0}).on("pointerdown",()=>sound_system.play()).on("pointerdown",()=>{window.location.href="./"}),group_info.add(icon_home),e.sound.pauseOnBlur=!1,bgm1=e.sound.add("bgm1",{volume:.1,loop:!0}),bgm2=e.sound.add("bgm2",{volume:.1,loop:!0}),bgm3=e.sound.add("bgm3",{volume:.1,loop:!0}),bgm_n1=e.sound.add("bgm_n1",{volume:.075,loop:!0}),sound_button_select=e.sound.add("button_select",{volume:.2}),sound_button_on=e.sound.add("button_on",{volume:.2}),sound_feeding=e.sound.add("feeding",{volume:.1}),sound_grooming=e.sound.add("grooming",{volume:.1}),sound_mining=e.sound.add("mining",{volume:.1}),sound_mining_during=e.sound.add("mining_during",{volume:.1}),sound_farming=e.sound.add("farming",{volume:.1}),sound_farming_during=e.sound.add("farming_during",{volume:.2}),sound_crafting=e.sound.add("crafting",{volume:.1}),sound_crafting_during=e.sound.add("crafting_during",{volume:.05}),sound_happy=e.sound.add("happy",{volume:.2}),sound_earn=e.sound.add("earn",{volume:.2}),sound_dice=e.sound.add("dice",{volume:.15}),sound_dice_impact=e.sound.add("dice_impact",{volume:.1}),sound_hat=e.sound.add("hat",{volume:.1}),sound_unhappy=e.sound.add("unhappy",{volume:.2}),sound_switch=e.sound.add("switch",{volume:.2}),sound_window_open=e.sound.add("window_open",{volume:.2}),sound_window_pointerover=e.sound.add("window_pointerover",{volume:.2}),sound_window_select=e.sound.add("window_select",{volume:.2}),sound_window_cancel=e.sound.add("window_cancel",{volume:.2}),sound_system=e.sound.add("system",{volume:.2}),sound_nui=e.sound.add("nui",{volume:.2}),sound_pad=e.sound.add("pad",{volume:.2}),sound_fireworks=e.sound.add("fireworks",{volume:.1}),sound_fireworks2=e.sound.add("fireworks2",{volume:.1}),sound_basket=e.sound.add("basket",{volume:.2}),sound_cat1=e.sound.add("cat1",{volume:.2}),sound_cat2=e.sound.add("cat2",{volume:.2}),sound_clock=e.sound.add("clock",{volume:.2}),sound_window=e.sound.add("window",{volume:.2}),sound_piano1=e.sound.add("piano1",{volume:.3}),sound_piano2=e.sound.add("piano2",{volume:.25}),sound_nainai1=e.sound.add("nainai1",{volume:.2}),sound_nainai2=e.sound.add("nainai2",{volume:.2}),sound_fluffy=e.sound.add("fluffy",{volume:.2}),sound_fluffy2=e.sound.add("fluffy2",{volume:.2}),sound_fluffy3=e.sound.add("fluffy3",{volume:.2}),sound_fluffy4=e.sound.add("fluffy4",{volume:.2}),sound_fluffy5=e.sound.add("fluffy5",{volume:.2}),sound_tokenChest=e.sound.add("tokenChest",{volume:.2}),sound_star=e.sound.add("star",{volume:.1}),sound_nyui=e.sound.add("nyui",{volume:.1}),sound_nyui2=e.sound.add("nyui2",{volume:.1}),sound_fluiffy_house=e.sound.add("fluffy_house",{volume:.1}),sound_practice=e.sound.add("practice",{volume:.1}),sound_piano_a=e.sound.add("piano_a",{volume:.02}),sound_piano_b=e.sound.add("piano_b",{volume:.02}),sound_piano_c=e.sound.add("piano_c",{volume:.02}),sound_piano_d=e.sound.add("piano_d",{volume:.02}),sound_piano_e=e.sound.add("piano_e",{volume:.02}),sound_piano_f=e.sound.add("piano_f",{volume:.02}),sound_piano_g=e.sound.add("piano_g",{volume:.02}),sound_dissolving=e.sound.add("alp_dissolving",{volume:.1}),sound_stretching=e.sound.add("alp_stretching",{volume:.1}),sound_rising=e.sound.add("alp_rising",{volume:.1}),sound_falling=e.sound.add("alp_falling",{volume:.1}),sound_flipping=e.sound.add("alp_flipping",{volume:.1}),sound_shrinking=e.sound.add("alp_shrinking",{volume:.1}),sound_woodcube=e.sound.add("woodcube",{volume:.4}),sound_ufo=e.sound.add("ufo",{volume:.1}),sound_wheel=e.sound.add("wheel",{volume:.1}),sound_pippel=e.sound.add("pippel",{volume:.1}),text_system_message=e.add.text(640,420,"",{font:"32px Arial",fill:"#000000",backgroundColor:"#ffffff",align:"center"}).setOrigin(.5).setDepth(2e3),(text_summon=e.add.text(640,500,">> Summon Trial Murasaki-san <<",{font:"38px Arial",fill:"#E62E8B",backgroundColor:"#FDEFF5"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerdown",()=>open_window_summon(e)).on("pointerover",()=>text_summon.setStyle({fontSize:38,fontFamily:"Arial",fill:"#0000ff"})).on("pointerout",()=>text_summon.setStyle({fontSize:38,fontFamily:"Arial",fill:"#E62E8B"}))).visible=!1;let g="";g="trial"==gamemode?" >> Cure Petrification (Cost: free during trial) << ":" >> Cure Petrification (Cost: "+(local_price/1e18).toFixed(2)+" $ASTR) << ",(text_curePetrification=e.add.text(640,480,g,{font:"28px Arial",fill:"#E62E8B",backgroundColor:"#FDEFF5"}).setOrigin(.5).setInteractive({useHandCursor:!0}).setDepth(2e3).on("pointerdown",()=>contract_curePetrification(summoner)).on("pointerover",()=>text_curePetrification.setStyle({fontSize:28,fontFamily:"Arial",fill:"#0000ff"})).on("pointerout",()=>text_curePetrification.setStyle({fontSize:28,fontFamily:"Arial",fill:"#E62E8B"}))).visible=!1;let c={font:"18px Arial",fill:"#000"};text_fps=e.add.text(5,955,"***",{font:"14px Arial",fill:"#303030"}).setOrigin(0,1).setDepth(200),text_sync_time=e.add.text(1275,955,"***",{font:"14px Arial",fill:"#727171"}).setOrigin(1).setDepth(2e3),text_wallet=e.add.text(1250,955,"***",{font:"14px Arial",fill:"#727171"}).setOrigin(1).setDepth(2e3),group_info.add(text_fps),group_info.add(text_sync_time),group_info.add(text_wallet),icon_satiety=e.add.sprite(30,25,"icon_satiety").setScale(.08).setDepth(2e3),(bar_satiety_back=makeBar(e,55,15,16303532).setDepth(2e3)).scaleX=1,(bar_satiety=makeBar(e,55,15,15073298).setDepth(2e3)).scaleX=0,text_satiety=e.add.text(60,16,"0%",{font:"17px Arial",fill:"#ffffff"}).setDepth(2e3),group_info.add(icon_satiety),group_info.add(bar_satiety_back),group_info.add(bar_satiety),group_info.add(text_satiety),icon_happy=e.add.sprite(245,25,"icon_happy").setScale(.08).setDepth(2e3),(bar_happy_back=makeBar(e,270,15,16573114).setDepth(2e3)).scaleX=1,(bar_happy=makeBar(e,270,15,15964160).setDepth(2e3)).scaleX=0,text_happy=e.add.text(275,16,"0%",{font:"17px Arial",fill:"#ffffff"}).setDepth(2e3),group_info.add(icon_happy),group_info.add(bar_happy_back),group_info.add(bar_happy),group_info.add(text_happy),icon_exp=e.add.text(440,15,"Exp:",c).setDepth(2e3),(bar_exp_back=makeBar(e,480,15,12307689).setDepth(2e3)).scaleX=1,(bar_exp=makeBar(e,480,15,26807).setDepth(2e3)).scaleX=0;let p="";"undefined"!=typeof item_wreath?p+=" wreath boost: +"+(local_achv_onChain_score/100).toFixed(2)+"% \n":p+=" wreath boost: +0% \n",p+=" twinkle boost: +"+(local_exp_rate_twinkle/100).toFixed(2)+"% \n",p+=" doll boost: +"+(active_nui_exp_rate/100).toFixed(2)+"% ",text_exp_boost=e.add.text(480,40,p,{font:"17px Arial",fill:"#000",backgroundColor:"#C6D8F4"}).setVisible(!1).setDepth(2e3),text_exp_boost_click=0,text_exp=e.add.text(485,16,"0 / 0",{font:"17px Arial",fill:"#ffffff"}).setDepth(2e3).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{let e="";"undefined"!=typeof item_wreath?e+=" wreath boost: +"+(local_achv_onChain_score/100).toFixed(2)+"% \n":e+=" wreath boost: +0% \n",e+=" item boost: +"+(local_exp_rate_twinkle/100).toFixed(2)+"% \n",e+=" doll boost: +"+(active_nui_exp_rate/100).toFixed(2)+"% ",text_exp_boost.setText(e),text_exp_boost.setVisible(!0);let t=text_exp_boost_click+=1;setTimeout(()=>{t==text_exp_boost_click&&text_exp_boost.setVisible(!1)},2e3)}),text_exp_earned=e.add.text(480,38,"",{font:"17px Arial",fill:"#000000"}).setDepth(2e3),text_exp_earned_count=0,group_info.add(icon_exp),group_info.add(bar_exp_back),group_info.add(bar_exp),group_info.add(text_exp),icon_ohana=e.add.sprite(668,23,"icon_ohana").setScale(.07).setDepth(2e3),text_coin=e.add.text(685,15,"Coin: 0",{font:"17px Arial",fill:"#000",backgroundColor:"#FFF200"}).setDepth(2e3),text_coin_earned=e.add.text(685,38,"",{font:"17px Arial",fill:"#000000"}).setDepth(2e3),text_coin_earned_count=0,group_info.add(icon_ohana),group_info.add(text_coin),icon_kusa=e.add.sprite(815,25,"icon_kusa").setScale(.09).setDepth(2e3),text_material=e.add.text(830,15,"Leaf: 0",{font:"17px Arial",fill:"#000",backgroundColor:"#D7E7AF"}).setDepth(2e3),text_material_earned=e.add.text(830,38,"",{font:"17px Arial",fill:"#000000"}).setDepth(2e3),text_material_earned_count=0,group_info.add(icon_kusa),group_info.add(text_material),icon_heart=e.add.sprite(960,21,"icon_heart").setScale(.08).setDepth(2e3),text_fluffy=e.add.text(1045,40,"",{font:"17px Arial",fill:"#000",backgroundColor:"#FDEEED"}).setOrigin(1,0).setVisible(!1).setDepth(2e3),text_heart_click=0,text_heart=e.add.text(975,15,"***",{font:"17px Arial",fill:"#000",backgroundColor:"#FDEEED"}).setDepth(2e3).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{text_fluffy.setVisible(!0);let e=text_heart_click+=1;setTimeout(()=>{e==text_heart_click&&text_fluffy.setVisible(!1)},2e3)}),group_info.add(icon_heart),group_info.add(text_heart),h=240,m=955,icon_tx=e.add.sprite(h,m,"coin_color_ASTR").setOrigin(0,1).setScale(.08).setDepth(2e3),text_tx=e.add.text(h+20,m,"",{font:"14px Arial",fill:"#303030"}).setOrigin(0,1).setDepth(2e3),(group_tx=e.add.group()).add(icon_tx),group_tx.add(text_tx),group_tx.setVisible(!1),h=85,m=100,item_kanban=e.add.sprite(85,100,"item_kanban").setScale(.4),text_kanban=e.add.text(h+2,m+17,"",{font:"17px Arial",fill:"#000000"}).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{game.scene.scenes[1].rexUI.edit(text_kanban)},e).setDepth(3301),text_mint_name=e.add.text(h+80,m-5,"[MINT NAME]",{font:"17px Arial",fill:"#000000"}).setInteractive({useHandCursor:!0}).on("pointerover",()=>text_mint_name.setStyle({fontSize:17,fontFamily:"Arial",fill:"#ffff00"})).on("pointerout",()=>text_mint_name.setStyle({fontSize:17,fontFamily:"Arial",fill:"#000000"})).on("pointerdown",()=>{contract_mint_name(summoner,text_kanban.text),flag_name_minting=1}),icon_name_ohana=e.add.sprite(h+88,m+25,"icon_ohana").setScale(.05),text_name_ohana=e.add.text(h+100,m+17,"100",{font:"17px Arial",fill:"#000000"}),icon_name_kusa=e.add.sprite(h+140,m+25,"icon_kusa").setScale(.07),text_name_kusa=e.add.text(h+150,m+17,"100",{font:"17px Arial",fill:"#000000"}),text_id=e.add.text(h-45,m+32,"#100",{font:"14px Arial",fill:"#000000"}),text_age_time=e.add.text(h+10,m+32,"***",{font:"14px Arial",fill:"#000000"});let u={Rose:"#E60012",Marigold:"#F39800",Dandelion:"#FFF100",Rosemary:"#8FC31F",Olive:"#009944",Holly:"#009E96",Nemophila:"#00A0E9",Hydrangea:"#0068B7","Forget-me-not":"#1D2088",Sumire:"#920783",Gerbera:"#E4007F",Anemone:"#E5004F"},f={"Fluffy Wweater":"#EB6100","Fluffy Blanket":"#F39800","Fluffy Carpet":"#FCC800","Fluffy Cushion":"#FFF100","Fluffy Scarf":"#CFDB00","Fluffy Sofa":"#22AC38"},_={Friendly:"#EB6100",Reliable:"#F39800",Frisky:"#FCC800",Thoughtful:"#FFF100",Easygoing:"#CFDB00",Tolerant:"#8FC31F",Affectionate:"#22AC38",Intelligent:"#009944",Faithful:"#009B6B",Innocent:"#009E96",Gentle:"#00A0C1",Cheerful:"#00A0E9"},y={Diligent:"#EB6100",Optimist:"#F39800",Realist:"#FCC800",Ethical:"#FFF100",Sensitive:"#CFDB00",Adventurous:"#8FC31F",Compassionate:"#22AC38",Empathetic:"#009944",Patient:"#009B6B",Courageous:"#009E96",Honest:"#00A0C1"},x={"a bit Moody":"#EB6100","a bit Lonely":"#F39800","a bit Sleeper":"#FCC800","a bit Nervous":"#FFF100","a bit Competitive":"#CFDB00","a bit Obstinate":"#8FC31F","a bit Forgetful":"#22AC38","a bit Perfectionist":"#009944","a bit Shy":"#009B6B","a bit Tomboy":"#009E96"},b="";b+=" Flower:                                 \n",b+=" Birthplace:                             \n",b+=" Personality:                            \n",b+=" Character:                              \n",b+=" Weakpoint:                              ";let v="                       "+local_flower,w="\n                       "+local_birthplace,k="\n\n                       "+local_personality,F="\n\n\n                       "+local_character,S="\n\n\n\n                       "+local_weakpoint,A=e.add.text(h-70,m+60,b,{font:"18px Arial",fill:"#000000",backgroundColor:"#ffffff"}),T=e.add.text(h-70,m+60,v,{font:"18px Arial",fill:u[local_flower]}),C=e.add.text(h-70,m+60,w,{font:"18px Arial",fill:f[local_birthplace]}),D=e.add.text(h-70,m+60,k,{font:"18px Arial",fill:_[local_personality]}),I=e.add.text(h-70,m+60,F,{font:"18px Arial",fill:y[local_character]}),H=e.add.text(h-70,m+60,S,{font:"18px Arial",fill:x[local_weakpoint]});if((group_lootlike=e.add.group()).add(A),group_lootlike.add(T),group_lootlike.add(C),group_lootlike.add(D),group_lootlike.add(I),group_lootlike.add(H),group_lootlike.setVisible(!1),group_lootlike.setDepth(2e3),item_kanban_click=0,item_kanban.setInteractive({useHandCursor:!0}).on("pointerdown",()=>{let e=item_kanban_click+=1;group_lootlike.setVisible(!0),setTimeout(()=>{item_kanban_click==e&&group_lootlike.setVisible(!1)},5e3)}),(group_kanban=e.add.group()).add(item_kanban),group_kanban.add(text_kanban),group_kanban.add(text_id),group_kanban.add(text_age_time),group_kanban.setVisible(!1),(group_mint_name=e.add.group()).add(text_mint_name),group_mint_name.add(icon_name_ohana),group_mint_name.add(text_name_ohana),group_mint_name.add(icon_name_kusa),group_mint_name.add(text_name_kusa),group_mint_name.setVisible(!1),1==local_mining_status?((murasakisan=new Murasakisan(e,100,880).setOrigin(.5).setScale(.45)).set_mode="mining",murasakisan.submode=2,murasakisan.count=0,murasakisan.target_x=100,murasakisan.target_y=880,update_mining_perDay(summoner)):1==local_farming_status?((murasakisan=new Murasakisan(e,180,450).setOrigin(.5).setScale(.45)).set_mode="farming",murasakisan.submode=2,murasakisan.count=0,murasakisan.target_x=180,murasakisan.target_y=455,update_farming_perDay(summoner)):1==local_crafting_status?((murasakisan=new Murasakisan(e,950,740).setOrigin(.5).setScale(.45)).set_mode="crafting",murasakisan.submode=2,murasakisan.count=0,murasakisan.target_x=950,murasakisan.target_y=740,create_item_indicator(e,local_crafting_item_type)):1==local_practice_status?((murasakisan=new Murasakisan(e,640,640).setOrigin(.5).setScale(.45)).set_mode="practice",murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=650,murasakisan.target_y=650):1==local_strolling_status?((murasakisan=new Murasakisan(e,-150,900).setOrigin(.5).setScale(.45)).set_mode="strolling_start",murasakisan.submode=7,murasakisan.count=0,open_window_strollingDuring(e,local_direction)):murasakisan=new Murasakisan(e,500+200*Math.random(),640+100*Math.random()).setOrigin(.5).setScale(.45),group_update.add(murasakisan),scene_main=murasakisan.scene,e.input.on("pointermove",(t,s)=>{1280==e.sys.game.scale.gameSize._width?(pointer_x=game.input.activePointer.x,pointer_y=game.input.activePointer.y):(pointer_x=game.input.activePointer.y,pointer_y=960-game.input.activePointer.x)}),e.input.on("pointerdown",()=>{1280==e.sys.game.scale.gameSize._width?(pointer_x=game.input.activePointer.x,pointer_y=game.input.activePointer.y):(pointer_x=game.input.activePointer.y,pointer_y=960-game.input.activePointer.x),console.log(Math.round(pointer_x),Math.round(pointer_y)),draw_star(e,pointer_x,pointer_y)}),local_level>=3&&wallet==local_owner&&(nyuinyui=new Nyuinyui(e,800,850,"nyui_moving").setOrigin(.5).setScale(.25).setAlpha(.8).setDepth(5002).setVisible(!1),group_update.add(nyuinyui)),1==flag_firstCelebration&"regular"==gamemode&&(firstCelebration(e),localStorage.setItem("flag_firstCelebration",0)),"trial"==gamemode){function O(t){let s,a,n,o,r,$,l,d;"feeding"==t?(a=600,n=870,s="flag_beginingBox_feeding_",o=button_feeding,l=item_table,d=">> Click to Open <<\n   Start Feeding!"):"grooming"==t?(a=1e3,n=520,s="flag_beginingBox_grooming_",o=button_grooming,l=item_bear,d=">> Click to Open <<\n   Start Grooming!"):"mining"==t?(a=100,n=850,s="flag_beginingBox_mining_",o=button_mining,l=item_back_sandbox,d="Required Lv:2"):"farming"==t?(a=110,n=500,s="flag_beginingBox_farming_",o=button_farming,l=item_tree0,d="Required Lv:2"):"crafting"==t&&(a=930,n=850,s="flag_beginingBox_crafting_",o=button_crafting_unable,l=item_misin,d="Required Lv:3"),null==localStorage.getItem(s+summoner)&&murasakisan.mode!=t&&(l.visible=!1,o.visible=!1,"crafting"==t&&(text_select_item.visible=!1),r=e.add.sprite(a,n,"item_box").setOrigin(.5).setDepth(2).setScale(.12).on("pointerdown",()=>{if(0==summoner)return 0;$.destroy(),r.disableInteractive();let d=makeMiniProgressBar(e,a-20-2,n-2,44,14,15522303),h=makeMiniProgressBar(e,a-20,n,40,10,12088052);function m(){h.scaleX+=.005,h.scaleX<1?setTimeout(()=>{m()},10):(sound_hat.play(),draw_flower3(e,a,n-20),l.visible=!0,r.destroy(),murasakisan.on_click(),o.visible=!0,d.destroy(),h.destroy(),"crafting"==t&&(text_select_item.visible=!0),localStorage.setItem(s+summoner,"1"))}h.scaleX=0,m()}),$=e.add.text(a,n+30,d,{font:"Bold 17px Arial",fill:"#0000ff",backgroundColor:"#E3E3E3"}).setDepth(3).setOrigin(.5),"feeding"==t?(r.setInteractive({useHandCursor:!0}),beginingBox_feeding=r,beginingBox_feeding_text=$):"grooming"==t?(r.setInteractive({useHandCursor:!0}),beginingBox_grooming=r,beginingBox_grooming_text=$):"mining"==t?(beginingBox_mining=r,beginingBox_mining_text=$):"farming"==t?(beginingBox_farming=r,beginingBox_farming_text=$):"crafting"==t&&(beginingBox_crafting=r,beginingBox_crafting_text=$))}summon_trial(e),O("feeding"),O("grooming"),O("mining"),O("farming"),O("crafting"),0==summoner&&(beginingBox_feeding.visible=!1,beginingBox_grooming.visible=!1,beginingBox_mining.visible=!1,beginingBox_farming.visible=!1,beginingBox_crafting.visible=!1,beginingBox_feeding_text.visible=!1,beginingBox_grooming_text.visible=!1,beginingBox_mining_text.visible=!1,beginingBox_farming_text.visible=!1,beginingBox_crafting_text.visible=!1)}function P(e){let t=[];for(let s=0;s<local_myListsAt_withItemTypeAndSubtype.length;s+=3){let a=local_myListsAt_withItemTypeAndSubtype[s+1],n=local_myListsAt_withItemTypeAndSubtype[s+2];a==e&&t.push(n)}return t}if("trial"!=gamemode){let R=0;for(let M=251;M<=255;M++)if(local_items[M]>0){let B=P(M);for(let V=0;V<B.length;V++)summon_twinkles(e,"twinkle",B[V],150+20*R,560),R+=1}for(let z=256;z<=260;z++)if(local_items[z]>0){let E=P(z);for(let N=0;N<E.length;N++)summon_twinkles(e,"sparkle",E[N],150+20*R,560),R+=1}for(let W=261;W<=265;W++)if(local_items[W]>0){let L=P(W);for(let G=0;G<L.length;G++)summon_twinkles(e,"glitter",L[G],150+20*R,560),R+=1}}let X=200+150*Math.random(),j=580+50*Math.random();(pippel_basic=e.add.sprite(X,j,"pippel_basic").setOrigin(.5).setScale(.25).setDepth(3e3).setVisible(!1).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{sound_button_on.play(),contract_mint_pippel(summoner)})).text=e.add.text(X,j-40," >> Mint Pippel << ",{fontSize:"24px",fontFamily:"Arial",fill:"#000",backgroundColor:"#ffffff"}).setVisible(!1).setOrigin(.5).setDepth(pippel_basic.depth+1),pippel_basic.on("pointerover",()=>{pippel_basic.text.visible=!0,sound_button_select.play()}),pippel_basic.on("pointerout",()=>{pippel_basic.text.visible=!1})}function protection_code(e){if("murasaki-san.com"!=location.hostname&&"www.murasaki-san.com"!=location.hostname)for(;;){let t=new Date;for(;;){let s=new Date;if(s-t>2e3)break}}}function update_systemMessage(e){0==summoner?(text_system_message.setText(" --- You have not summoned Murasaki-san yet --- "),text_summon.visible=!0,murasakisan.visible=!1):!1==local_isActive?text_system_message.setText(" --- This Murasaki-san is not Available --- "):0==local_notPetrified?(text_system_message.setText(" --- This Murasaki-san has been Petrified --- "),text_curePetrification.visible=!0):(text_system_message.setText(""),text_summon.visible=!1,text_curePetrification.visible=!1,murasakisan.visible=!0)}function update_syncTime(e){if(0==last_sync_time)text_sync_time.setText("##"),text_sync_time.setColor("#ff0000");else{let t=Math.round((Date.now()-last_sync_time)/1e3);t>99&&(t=99),text_sync_time.setText(("00"+t).slice(-2)),t>=30?text_sync_time.setColor("#ff0000"):text_sync_time.setColor("#727171"),t>300&&scene.scene.start("SomethingWrong")}}function update_numericAnimation(e){if(0!=screen_coin_delta){let t=(100-screen_coin_easing)/100;if(t<1){let s=screen_coin+screen_coin_delta*(1-Math.pow(1-t,4));text_coin.setText("Coin: "+Math.round(s)),screen_coin_easing-=1}else text_coin.setText("Coin: "+local_coin),screen_coin_delta=0}if(0!=screen_material_delta){let a=(100-screen_material_easing)/100;if(a<1){let n=screen_material+screen_material_delta*(1-Math.pow(1-a,4));text_material.setText("Leaf: "+Math.round(n)),screen_material_easing-=1}else text_material.setText("Leaf: "+local_material),screen_material_delta=0}if(0!=screen_exp_delta){let o=(100-screen_exp_easing)/100;if(o<1){let r=screen_exp+screen_exp_delta*(1-Math.pow(1-o,4));text_exp.setText(Math.round(r)+" / "+local_next_exp_required);let $=r/local_next_exp_required*100;bar_exp.scaleX=$/100,screen_exp_easing-=1}else{local_exp>local_next_exp_required?(text_exp.setText(local_next_exp_required+" / "+local_next_exp_required),screen_exp=local_next_exp_required):(text_exp.setText(local_exp+" / "+local_next_exp_required),screen_exp=local_exp);let l=local_exp/local_next_exp_required*100;l>100&&(l=100),bar_exp.scaleX=l/100,screen_exp_delta=0}}if(0!=screen_satiety_delta){let d=(100-screen_satiety_easing)/100;if(d<1){let h=screen_satiety+screen_satiety_delta*(1-Math.pow(1-d,4));text_satiety.setText(Math.round(h)+"%"),screen_satiety_easing-=1,bar_satiety.scaleX=h/100}else text_satiety.setText(Math.round(satiety)+"%"),bar_satiety.scaleX=satiety/100,screen_satiety_delta=0}if(0!=screen_happy_delta){let m=(100-screen_happy_easing)/100;if(m<1){let g=screen_happy+screen_happy_delta*(1-Math.pow(1-m,4));text_happy.setText(Math.round(g)+"%"),screen_happy_easing-=1,bar_happy.scaleX=g/100}else text_happy.setText(Math.round(happy)+"%"),bar_happy.scaleX=happy/100,screen_happy_delta=0}}function update_parametersWithAnimation(e){if(previous_local_coin!=local_coin&&(screen_coin=previous_local_coin,screen_coin_delta=local_coin-previous_local_coin,screen_coin_easing=100,count_sync>3)){let t=local_coin-previous_local_coin,s="";t>0&&(s="+"),t>=1.8*last_local_coin_calc&&last_local_coin_calc>0?(text_coin_earned.setText(s+t+" lucky♪"),text_coin_earned.setColor("#0000ff")):(text_coin_earned.setText(s+t),text_coin_earned.setColor("#000000")),text_coin_earned_count=5}if(text_coin_earned_count>0&&0==(text_coin_earned_count-=1)&&text_coin_earned.setText(""),previous_local_material!=local_material&&(screen_material=previous_local_material,screen_material_delta=local_material-previous_local_material,screen_material_easing=100,count_sync>3)){let a=local_material-previous_local_material,n="";a>0&&(n="+"),a>=1.8*last_local_material_calc&&last_local_material_calc>0?(text_material_earned.setText(n+a+" lucky♪"),text_material_earned.setColor("#0000ff")):(text_material_earned.setText(n+a),text_material_earned.setColor("#000000")),text_material_earned_count=5}if(text_material_earned_count>0&&0==(text_material_earned_count-=1)&&text_material_earned.setText(""),previous_local_exp!=local_exp&&screen_exp<local_next_exp_required&&(screen_exp=previous_local_exp,screen_exp_delta=local_exp>local_next_exp_required?local_next_exp_required-previous_local_exp:local_exp-previous_local_exp,screen_exp_easing=100,count_sync>3)){let o=local_exp-previous_local_exp,r="";o>0&&(r="+");let $=0;local_satiety>previous_satiety&&($+=last_local_calc_feeding),local_happy>previous_happy&&($+=last_local_calc_grooming),$+=$*local_achv_onChain_score/100,$+=$*local_exp_rate_twinkle/100,($+=$*active_nui_exp_rate/100)+100<o?(text_exp_earned.setText(r+o+" lucky♪"),text_exp_earned.setColor("#0000ff")):(text_exp_earned.setText(r+o),text_exp_earned.setColor("#000000")),text_exp_earned_count=5}text_exp_earned_count>0&&0==(text_exp_earned_count-=1)&&text_exp_earned.setText(""),(satiety=local_satiety)<0&&(satiety=0),satiety>100&&(satiety=100),satiety!=previous_satiety&&(screen_satiety=previous_satiety,screen_satiety_delta=satiety-previous_satiety,screen_satiety_easing=100),(happy=local_happy)<0&&(happy=0),happy>100&&(happy=100),happy!=previous_happy&&(screen_happy=previous_happy,screen_happy_delta=happy-previous_happy,screen_happy_easing=100),previous_happy=happy,previous_satiety=satiety,previous_local_coin=local_coin,previous_local_material=local_material,previous_local_exp=local_exp,last_local_coin_calc=local_coin_calc,last_local_material_calc=local_material_calc,last_local_calc_feeding=local_calc_feeding,last_local_calc_grooming=local_calc_grooming}function update_parametersWithoutAnimation(e){Date.now();let t=Math.round(local_age*SPEED/86400);text_age_time.setText(("0000"+t).slice(-4)+"d"),"button_levelup_pointerover"!=button_levelup.texture.key&&text_level.setText(local_level),text_heart.setText("Fluffy: "+local_precious);let s;if(1==local_mining_status?s="mining":1==local_farming_status?s="farming":1==local_crafting_status&&(s="crafting"),"mining"==s)1==flag_info&&(icon_mining.visible=!0),text_mining_calc.setText(" +"+local_coin_calc+" Coin\n  ("+local_mining_perDay+" /day)"),local_coin_calc>=500&&(item_gold1.visible=!0),local_coin_calc>=1e3&&(item_gold2.visible=!0),local_coin_calc>=2e3&&(item_gold3.visible=!0);else if("farming"==s)1==flag_info&&(icon_farming.visible=!0),text_farming_calc.setText(" +"+local_material_calc+" Leaf\n  ("+local_farming_perDay+" /day)"),local_material_calc>=500&&(item_tree0.visible=!1,item_tree1.visible=!0,item_tree2.visible=!1,item_tree3.visible=!1),local_material_calc>=1e3&&(item_tree0.visible=!1,item_tree1.visible=!1,item_tree2.visible=!0,item_tree3.visible=!1),local_material_calc>=2e3&&(item_tree0.visible=!1,item_tree1.visible=!1,item_tree2.visible=!1,item_tree3.visible=!0);else if("crafting"==s){if(1==flag_info&&(icon_crafting_time_remining.visible=!0,text_crafting_calc.visible=!0),text_crafting_selected_item_ohana.setText(""),text_crafting_selected_item_kusa.setText(""),text_crafting_selected_item_time.setText(""),text_crafting_selected_item_heart.setText(""),icon_crafting_ohana.visible=!1,icon_crafting_kusa.visible=!1,icon_crafting_time.visible=!1,text_select_item.setText('"'+dic_items_reverse[local_crafting_item_type]+'"'),0==local_crafting_calc)text_crafting_calc.setText("Completed!").setFill("#FF0000");else if(-1==local_crafting_calc)text_crafting_calc.setText("Calculating...").setFill("#0000FF");else{let a=local_crafting_calc,n=Math.floor(a/86400),o=Math.floor(a%86400/3600),r=Math.floor(a%3600/60);text_crafting_calc.setText(n+"d:"+o+"h:"+r+"m").setFill("#0000FF")}}else if(!0==button_crafting_resume.visible&&1==flag_info){text_select_item.setText('"'+dic_items_reverse[local_crafting_resume_item_type]+'"'),icon_crafting_time_remining.visible=!0;let $=local_crafting_calc,l=Math.floor($/86400),d=Math.floor($%86400/3600),h=Math.floor($%3600/60);text_crafting_calc.visible=!0,text_crafting_calc.setText(l+"d:"+d+"h:"+h+"m").setFill("#0000FF")}else text_mining_calc.setText(""),text_farming_calc.setText(""),text_crafting_calc.setText("");1!=local_mining_status&&(icon_mining.visible=!1,item_gold1.visible=!1,item_gold2.visible=!1,item_gold3.visible=!1),1!=local_farming_status&&("undefined"==typeof beginingBox_farming||void 0===beginingBox_farming.scene)&&(icon_farming.visible=!1,item_tree0.visible=!0,item_tree1.visible=!1,item_tree2.visible=!1,item_tree3.visible=!1),1!=local_crafting_status&&1!=local_crafting_resume_flag&&(icon_crafting_time_remining.visible=!1);let m=local_owner.substring(0,5),g=local_owner.slice(-4),c="";local_owner==local_wallet||"0x0000000000000000000000000000000000000000"==local_owner?("regular"==gamemode?c+="House #"+summoner+", ":"trial"==gamemode&&(c+="House #"+summoner+" (Trial), "),c+=m+"..."+g+", ",c+=local_street+", "+local_city+", ",c+="Astar Substrate EVM, Polkadot, Web3. ("+local_house_price+" $ASTR)",text_wallet.setText(c),"regular"==gamemode?text_wallet.setColor("#FF4264"):"trial"==gamemode&&text_wallet.setColor("green")):(c+="House #"+summoner+", ",c+=m+"..."+g+", ",c+=local_street+", "+local_city+", ",c+="Astar Substrate EVM, Polkadot, Web3. ("+local_house_price+" $ASTR)",c+=" (not owner)",text_wallet.setText(c),text_wallet.setColor("blue")),previous_local_rolled_dice!=local_rolled_dice&&1==flag_radarchart&&draw_radarchart(e),previous_local_rolled_dice=local_rolled_dice,previous_local_precious=local_precious}function update_checkModeChange(e){if(0==local_notPetrified)murasakisan.set_mode="petrified";else if(local_level>previous_local_level)count_sync>=3&&1==local_level?(draw_firework(e),murasakisan.on_click(),summon_sentence(e,"welcome aboard!"),draw_flower3(e,murasakisan.x,murasakisan.y)):count_sync>=3&&local_level>=2&&(draw_firework(e),murasakisan.on_click(),summon_sentence(e,"level up! congrats!")),1==flag_radarchart&&draw_radarchart(e),2==local_level&&(button_mining.setTexture("button_mining_enable"),button_mining.on("pointerover",()=>button_mining.setTexture("button_mining_pointerover")),button_mining.on("pointerout",()=>button_mining.setTexture("button_mining_enable")),button_mining.setInteractive(),button_farming.setTexture("button_farming_enable"),button_farming.on("pointerover",()=>button_farming.setTexture("button_farming_pointerover")),button_farming.on("pointerout",()=>button_farming.setTexture("button_farming_enable")),button_farming.setInteractive());else if(local_last_feeding_time>previous_local_last_feeding_time){murasakisan.set_mode="feeding",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=600,murasakisan.target_y=820,"undefined"!=typeof group_food&&group_food.destroy(!0),group_food=e.add.group(),(item_potato=e.add.sprite(600,850,"item_food_potato").setScale(.12).setOrigin(.5)).depth=850,group_food.add(item_potato);{let t=dic_items["Choco Bread"].item_id;(local_items[t]>0||local_items[t+64]>0||local_items[t+128]>0)&&((item_pancake=e.add.sprite(635,850,"item_food_bread").setScale(.2).setOrigin(.5)).depth=850,group_food.add(item_pancake))}{let s=dic_items.Onigiri.item_id;(local_items[s]>0||local_items[s+64]>0||local_items[s+128]>0)&&((item_pancake=e.add.sprite(565,850,"item_food_onigiri").setScale(.1).setOrigin(.5)).depth=850,group_food.add(item_pancake))}{let a=dic_items.Pancake.item_id;(local_items[a]>0||local_items[a+64]>0||local_items[a+128]>0)&&((item_pancake=e.add.sprite(575,822,"item_food_pancake").setScale(.2).setOrigin(.5)).depth=822,group_food.add(item_pancake))}{let n=dic_items.Cake.item_id;(local_items[n]>0||local_items[n+64]>0||local_items[n+128]>0)&&((item_pancake=e.add.sprite(625,822,"item_food_cake").setScale(.15).setOrigin(.5)).depth=822,group_food.add(item_pancake))}setTimeout(()=>{group_food.destroy(!0)},3e4),sound_feeding.play()}else if(local_last_grooming_time>previous_local_last_grooming_time)murasakisan.set_mode="grooming",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=1e3,murasakisan.target_y=450,sound_grooming.play();else if(1==local_mining_status&&"mining"!=murasakisan.mode&&"feeding"!=murasakisan.mode&&"grooming"!=murasakisan.mode&&"sleeping"!=murasakisan.mode&&"hammock"!=murasakisan.mode&&murasakisan.exemption_resting_count<=0&&local_happy>0)murasakisan.set_mode="mining",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=100,murasakisan.target_y=880,sound_mining.play(),update_mining_perDay(summoner);else if(0==local_mining_status&&"mining"==murasakisan.mode)murasakisan.set_mode="hugging",icon_mining.visible=!1,sound_earn.play(),local_coin_calc=0;else if(1==local_farming_status&&"farming"!=murasakisan.mode&&"feeding"!=murasakisan.mode&&"grooming"!=murasakisan.mode&&"sleeping"!=murasakisan.mode&&"hammock"!=murasakisan.mode&&murasakisan.exemption_resting_count<=0&&local_happy>0)murasakisan.set_mode="farming",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=180,murasakisan.target_y=455,sound_farming.play(),update_farming_perDay(summoner);else if(0==local_farming_status&&"farming"==murasakisan.mode)murasakisan.set_mode="hugging",icon_farming.visible=!1,sound_earn.play(),local_material_calc=0;else if(1==local_crafting_status&&"crafting"!=murasakisan.mode&&"feeding"!=murasakisan.mode&&"grooming"!=murasakisan.mode&&"sleeping"!=murasakisan.mode&&"hammock"!=murasakisan.mode&&murasakisan.exemption_resting_count<=0&&local_happy>0&&local_crafting_calc>0)murasakisan.set_mode="crafting",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=950,murasakisan.target_y=740,text_select_item.setText('"'+dic_items_reverse[local_crafting_item_type]+'"'),sound_crafting.play(),local_crafting_calc=-1,("undefined"==typeof group_item_indicator||void 0===group_item_indicator.scene)&&create_item_indicator(e,local_crafting_item_type);else if(0==local_crafting_status&&"crafting"==murasakisan.mode){0==local_crafting_resume_flag?(murasakisan.set_mode="hugging",text_select_item.setText(">> Select Item <<"),icon_crafting_time_remining.visible=!1,sound_earn.play(),flag_item_update=1):murasakisan.set_mode="resting";try{group_item_indicator.destroy(!0)}catch(o){}}else if("crafting"==murasakisan.mode){if("undefined"!=typeof item_indicator&&("undefined"==typeof item_indicator_bar||void 0===item_indicator_bar.scene)){let r=item_indicator.x-20,$=item_indicator.y+item_indicator.height*item_indicator.scaleY*.8/2,l=makeMiniProgressBar(e,r-2,$-2,44,14,15522303);(item_indicator_bar=makeMiniProgressBar(e,r,$,40,10,12088052)).scaleX=.01,group_item_indicator.add(l),group_item_indicator.add(item_indicator_bar)}update_item_indicator_bar()}else if(1==local_practice_status&&"practice"!=murasakisan.mode&&"feeding"!=murasakisan.mode&&"grooming"!=murasakisan.mode&&"sleeping"!=murasakisan.mode&&"hammock"!=murasakisan.mode)murasakisan.set_mode="practice",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,murasakisan.target_x=640,murasakisan.target_y=650,sound_crafting.play();else if(0==local_practice_status&&"practice"==murasakisan.mode){let d=get_itemType(local_myListsAt_withItemType,previous_local_practice_item_id);d==dic_items.Clarinet.item_id?item_clarinet.visible=!0:d==dic_items.Piano.item_id?item_piano.visible=!0:d==dic_items.Violin.item_id&&(item_violin.visible=!0),murasakisan.item_practice.destroy(),murasakisan.set_mode="hugging"}else if(1==local_strolling_status&&"practice"!=murasakisan.mode&&"feeding"!=murasakisan.mode&&"grooming"!=murasakisan.mode&&"sleeping"!=murasakisan.mode&&"hammock"!=murasakisan.mode&&"strolling_start"!=murasakisan.mode)murasakisan.set_mode="strolling_start",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,sound_mining.play(),1==local_companion?strolling_companion=mr_astar:2==local_companion?strolling_companion=ms_ether:3==local_companion&&(strolling_companion=dr_bitco),strolling_companion.mode="strolling_start",strolling_companion.submode=0;else if(0==local_strolling_status&&"strolling_start"==murasakisan.mode){async function h(){await contract_update_stroll_info(summoner),murasakisan.delta_total_strolledDistance=local_total_strolledDistance-previous_local_total_strolledDistance,murasakisan.delta_total_metSummoners=local_total_metSummoners-previous_local_total_metSummoners}group_window_strollingDuring.destroy(!0),murasakisan.set_mode="strolling_end",murasakisan.setScale(.45),murasakisan.submode=0,murasakisan.count=0,1==local_companion?strolling_companion=mr_astar:2==local_companion?strolling_companion=ms_ether:3==local_companion&&(strolling_companion=dr_bitco),h(),strolling_companion.mode="strolling_end",strolling_companion.submode=0}previous_local_last_feeding_time=local_last_feeding_time,previous_local_last_grooming_time=local_last_grooming_time,previous_local_level=local_level,previous_local_practice_item_id=local_practice_item_id,previous_local_total_strolledDistance=local_total_strolledDistance,previous_local_total_metSummoners=local_total_metSummoners}function update_checkButtonActivation(e){if(1==local_farming_status||1==local_crafting_status||1==local_mining_status||1==local_practice_status||0==summoner||wallet!=local_owner?(button_grooming.setTexture("button_grooming_unable"),button_grooming.disableInteractive()):(button_grooming.setTexture("button_grooming_enable"),button_grooming.on("pointerover",()=>button_grooming.setTexture("button_grooming_pointerover")),button_grooming.on("pointerout",()=>button_grooming.setTexture("button_grooming_enable")),button_grooming.setInteractive()),1==local_farming_status||1==local_crafting_status||1==local_practice_status||local_level<=1||wallet!=local_owner?(button_mining.setTexture("button_mining_unable"),button_mining.disableInteractive()):1==local_mining_status?(button_mining.setTexture("button_mining_working"),button_mining.on("pointerover",()=>button_mining.setTexture("button_mining_pointerover_stop")),button_mining.on("pointerout",()=>button_mining.setTexture("button_mining_working")),button_mining.setInteractive()):(button_mining.setTexture("button_mining_enable"),button_mining.on("pointerover",()=>button_mining.setTexture("button_mining_pointerover")),button_mining.on("pointerout",()=>button_mining.setTexture("button_mining_enable")),button_mining.setInteractive()),1==local_mining_status||1==local_crafting_status||1==local_practice_status||local_level<=1||wallet!=local_owner?(button_farming.setTexture("button_farming_unable"),button_farming.disableInteractive()):1==local_farming_status?(button_farming.setTexture("button_farming_working"),button_farming.on("pointerover",()=>button_farming.setTexture("button_farming_pointerover_stop")),button_farming.on("pointerout",()=>button_farming.setTexture("button_farming_working")),button_farming.setInteractive()):(button_farming.setTexture("button_farming_enable"),button_farming.on("pointerover",()=>button_farming.setTexture("button_farming_pointerover")),button_farming.on("pointerout",()=>button_farming.setTexture("button_farming_enable")),button_farming.setInteractive()),local_level<3||1==local_mining_status||1==local_farming_status||1==local_practice_status||wallet!=local_owner)button_crafting_start.visible=!1,button_crafting_pause.visible=!1,button_crafting_resume.visible=!1,button_crafting_cancel.visible=!1,button_crafting_complete.visible=!1;else if(1==flag_info&&("undefined"==typeof beginingBox_crafting||void 0===beginingBox_crafting.scene)){let t=local_crafting_status,s=local_crafting_resume_flag,a=local_crafting_calc;0==t&&0==s?(button_crafting_start.visible=!0,button_crafting_pause.visible=!1,button_crafting_resume.visible=!1,button_crafting_cancel.visible=!1,button_crafting_complete.visible=!1):1==t&&a>0?(button_crafting_start.visible=!1,button_crafting_pause.visible=!0,button_crafting_resume.visible=!1,button_crafting_cancel.visible=!1,button_crafting_complete.visible=!1):0==t&&1==s?(button_crafting_start.visible=!1,button_crafting_pause.visible=!1,button_crafting_resume.visible=!0,button_crafting_cancel.visible=!0,button_crafting_complete.visible=!1):1==t&&0==a&&(button_crafting_start.visible=!1,button_crafting_pause.visible=!1,button_crafting_resume.visible=!1,button_crafting_cancel.visible=!1,button_crafting_complete.visible=!0)}local_level>=5&&wallet==local_owner&&("undefined"!=typeof item_clarinet||"undefined"!=typeof item_piano||"undefined"!=typeof item_violin||"undefined"!=typeof item_horn||"undefined"!=typeof item_timpani||"undefined"!=typeof item_harp)?button_practice.visible=!0:button_practice.visible=!1,1==local_mining_status||1==local_farming_status||1==local_crafting_status||local_level<=5?(button_practice.setTexture("button_practice_unable"),button_practice.disableInteractive()):1==local_practice_status?(button_practice.setTexture("button_practice_working"),button_practice.on("pointerover",()=>button_practice.setTexture("button_practice_pointerover_stop")),button_practice.on("pointerout",()=>button_practice.setTexture("button_practice_working")),button_practice.setInteractive()):(button_practice.setTexture("button_practice_enable"),button_practice.on("pointerover",()=>button_practice.setTexture("button_practice_pointerover")),button_practice.on("pointerout",()=>button_practice.setTexture("button_practice_enable")),button_practice.setInteractive()),1==flag_info&&("undefined"==typeof beginingBox_crafting||void 0===beginingBox_crafting.scene)&&text_select_item.setVisible(!0),local_exp/local_next_exp_required>=1&&0==local_mining_status&&0==local_farming_status&&0==local_crafting_status&&"back_level"==button_levelup.texture.key&&"button_levelup_pointerover"!=button_levelup.texture.key&&wallet==local_owner?(button_levelup.setTexture("button_levelup_enable"),button_levelup.setInteractive()):("back_level"!=button_levelup.texture.key&&local_exp/local_next_exp_required<1||1==local_mining_status||1==local_farming_status||1==local_crafting_status)&&(button_levelup.setTexture("back_level"),button_levelup.disableInteractive()),previous_local_mining_status=local_mining_status,previous_local_farming_status=local_farming_status,previous_local_crafting_status=local_crafting_status}function update_checkItem(e){if("trial"==gamemode&&("undefined"!=typeof beginingBox_feeding&&void 0!==beginingBox_feeding.scene&&0!=summoner&&(beginingBox_feeding.visible=!0,beginingBox_feeding_text.visible=!0),"undefined"!=typeof beginingBox_grooming&&void 0!==beginingBox_grooming.scene&&0!=summoner&&(beginingBox_grooming.visible=!0,beginingBox_grooming_text.visible=!0),"undefined"!=typeof beginingBox_mining&&void 0!==beginingBox_mining.scene&&(0!=summoner&&(beginingBox_mining.visible=!0,beginingBox_mining_text.visible=!0),local_level>=2&&(beginingBox_mining_text.setText(">> Click to Open <<\n     Start Mining!"),beginingBox_mining.setInteractive({useHandCursor:!0}))),"undefined"!=typeof beginingBox_farming&&void 0!==beginingBox_farming.scene&&(0!=summoner&&(beginingBox_farming.visible=!0,beginingBox_farming_text.visible=!0),local_level>=2&&(beginingBox_farming_text.setText(">> Click to Open <<\n     Start Farming!"),beginingBox_farming.setInteractive({useHandCursor:!0}))),"undefined"!=typeof beginingBox_crafting&&void 0!==beginingBox_crafting.scene&&(0!=summoner&&(beginingBox_crafting.visible=!0,beginingBox_crafting_text.visible=!0),local_level>=3&&(beginingBox_crafting_text.setText(">> Click to Open <<\n     Start Crafting!"),beginingBox_crafting.setInteractive({useHandCursor:!0})))),"undefined"!=typeof item_indicator&&void 0!==item_indicator.scene&&local_items[item_indicator.item_type]>0)try{group_item_indicator.destroy(!0)}catch(t){}let s;local_items.reduce((e,t)=>e+t,0)!=previous_local_items.reduce((e,t)=>e+t,0)&&0==flag_window_craft&&"undefined"!=typeof group_window_crafting&&group_window_crafting.destroy(!0);let a,n;if(n="Nameplate",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]?(local_items_flag[a]=!0,group_kanban.setVisible(!0),0!=local_items[a+64]&&draw_glitter(e,item_kanban),count_sync>3&&(draw_flower3(e,85,100),sound_hat.play())):0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&(local_items_flag[a]=!1,group_kanban.setVisible(!1)),!0==local_items_flag[a]&&(""==local_name_str?(""==text_kanban.text&&text_kanban.setText("(enter name)"),text_kanban.setInteractive(),group_mint_name.setVisible(!0),"(unnamed)"!=text_kanban.text&&contract_update_static_status(summoner)):(text_kanban.setText(local_name_str),text_kanban.disableInteractive(),group_mint_name.setVisible(!1)),text_id.setText("#"+summoner)),n="Mr. Astar",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]?(local_items_flag[a]=!0,mr_astar=new Pet(e,dic_items[n].pos_x-25+50*Math.random(),dic_items[n].pos_y-25+50*Math.random(),"mr_astar_right","mr_astar_left","mining").setScale(.12),group_update.add(mr_astar),group_pet.add(mr_astar),0!=local_items[a+64]&&draw_glitter(e,mr_astar),count_sync>3&&(draw_flower3(e,mr_astar.x,mr_astar.y),sound_hat.play())):0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof mr_astar&&(mr_astar.destroy(!0),local_items_flag[a]=!1),n="Helmet",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let o=dic_items[n].pos_x,r=dic_items[n].pos_y;(item_hat_helmet=e.add.sprite(o,r,"item_hat_helmet").setOrigin(.5).setScale(.22).setAngle(90)).setInteractive({useHandCursor:!0});let $="item_hat_helmet";item_hat_helmet.on("pointerdown",()=>{0==item_wearing_hat?(item_wearing_hat=item_hat_helmet,murasakisan.on_click(),sound_hat.play(),item_hat_helmet.setAngle(0),local_owner==local_wallet&&localStorage.setItem($,JSON.stringify(1))):item_wearing_hat==item_hat_helmet&&(item_wearing_hat=0,item_hat_helmet.x=o,item_hat_helmet.y=r,item_hat_helmet.setAngle(90),local_owner==local_wallet&&localStorage.setItem($,JSON.stringify(0)))}),null!=localStorage.getItem($)&&local_owner==local_wallet&&JSON.parse(localStorage.getItem($))&&(item_wearing_hat=item_hat_helmet,item_hat_helmet.setAngle(0)),0!=local_items[a+64]&&draw_glitter(e,item_hat_helmet),count_sync>3&&(draw_flower3(e,item_hat_helmet.x,item_hat_helmet.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_hat_helmet&&(item_hat_helmet.destroy(!0),local_items_flag[a]=!1);if(n="Lucky Dice",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]?(local_items_flag[a]=!0,dice=new Dice(e,dic_items[n].pos_x,dic_items[n].pos_y,600).setScale(.3).setOrigin(.5),group_update.add(dice),0!=local_items[a+64]&&draw_glitter(e,dice),count_sync>3&&(draw_flower3(e,dice.x,dice.y),sound_hat.play())):0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof dice&&(dice.destroy(!0),dice.text_rolled_number.destroy(!0),dice.text_next_time.destroy(!0),local_items_flag[a]=!1),n="Wall Sticker",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let l=640,d=480;0==local_score?local_items_flag[a]=!1:local_score<2e5?item_wall_sticker=e.add.image(l,d,"item_wall_sticker_01"):local_score<4e5?item_wall_sticker=e.add.image(l,d,"item_wall_sticker_02"):local_score<6e5?item_wall_sticker=e.add.image(l,d,"item_wall_sticker_03"):local_score<8e5?item_wall_sticker=e.add.image(l,d,"item_wall_sticker_04"):local_score<1e6?item_wall_sticker=e.add.image(l,d,"item_wall_sticker_05"):local_score<12e5?item_wall_sticker=e.add.image(l,d,"item_wall_sticker_06"):local_score<14e5?item_wall_sticker=e.add.image(l,d,"item_wall_sticker_07"):local_score<16e5?item_wall_sticker=e.add.image(l,d,"item_wall_sticker_08"):local_score<18e5?item_wall_sticker=e.add.image(l,d,"item_wall_sticker_09"):local_score<2e6?item_wall_sticker=e.add.image(l,d,"item_wall_sticker_10"):local_score<22e5?item_wall_sticker=e.add.image(l,d,"item_wall_sticker_11"):local_score>=22e5&&(item_wall_sticker=e.add.image(l,d,"item_wall_sticker_12")),"undefined"!=typeof item_wall_sticker&&item_wall_sticker.setDepth(2).setAlpha(.2)}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_wall_sticker&&(item_wall_sticker.destroy(!0),local_items_flag[a]=!1);if(n="Hammock",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let h=dic_items[n].pos_x,m=dic_items[n].pos_y,g="pos_item_bed";null!=localStorage.getItem(g)&&local_owner==local_wallet&&(h=(_pos=JSON.parse(localStorage.getItem(g)))[0],m=_pos[1]),item_bed=e.add.sprite(h,m,"item_hammock_list").setScale(.8).setOrigin(.5).setDepth(m).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_bed.x=game.input.activePointer.x,item_bed.y=game.input.activePointer.y):(item_bed.x=game.input.activePointer.y,item_bed.y=960-game.input.activePointer.x),item_bed.depth=item_bed.y}).on("dragend",()=>{let e=[item_bed.x,item_bed.y];local_owner==local_wallet&&localStorage.setItem(g,JSON.stringify(e)),murasakisan.check_hammock()&&(sound_hat.play(),murasakisan.try_hammock())}),0!=local_items[a+64]&&draw_glitter(e,item_bed),count_sync>3&&(draw_flower3(e,item_bed.x,item_bed.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_bed&&(item_bed.destroy(!0),local_items_flag[a]=!1);if(n="Token Chest",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let c=dic_items[n].pos_x,p=dic_items[n].pos_y;item_tokenChest=e.add.sprite(c,p,"item_tokenChest").setFrame(0).setScale(.28).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerdown",async function(){if(0==flag_tokenBall){for(let t in flag_tokenBall=1,item_tokenChest.setFrame(1),sound_tokenChest.play(),murasakisan.on_click(),group_tokenBall=e.add.group(),dic_tokenBall_contract){let s=0;if((s="ASTR"==t?1:await call_amount_of_token(dic_tokenBall_contract[t]))>0){let a=dic_tokenBall_img[t];_tokenBall=new tokenBall(e,c,p,a).setOrigin(.5).setScale(.15).setAlpha(1).setDepth(2),group_tokenBall.add(_tokenBall),group_update.add(_tokenBall),_tokenBall.on_summon()}}flag_tokenBall=2}else 2==flag_tokenBall&&(item_tokenChest.setFrame(0),flag_tokenBall=0,group_tokenBall.destroy(!0))}),0!=local_items[a+64]&&draw_glitter(e,item_tokenChest),count_sync>3&&(draw_flower3(e,item_tokenChest.x,item_tokenChest.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_tokenChest&&(item_tokenChest.destroy(!0),local_items_flag[a]=!1);if(n="Knit Hat",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let u=dic_items[n].pos_x,f=dic_items[n].pos_y;(item_hat_knit=e.add.sprite(u,f,"item_hat_knit").setOrigin(.5).setScale(.2)).setInteractive({useHandCursor:!0}),item_hat_knit.on("pointerdown",()=>{if(0==item_wearing_hat_pet){let e=[];"undefined"!=typeof mr_astar&&e.push("mining"),"undefined"!=typeof ms_ether&&e.push("farming"),"undefined"!=typeof dr_bitco&&e.push("crafting"),e!=[]&&(item_wearing_hat_pet=[e[Math.floor(Math.random()*e.length)],item_hat_knit],item_hat_knit.setScale(.1)),sound_hat.play()}else item_wearing_hat_pet=0,item_hat_knit.setScale(.2),item_hat_knit.x=u,item_hat_knit.y=f}),0!=local_items[a+64]&&draw_glitter(e,item_hat_knit),count_sync>3&&(draw_flower3(e,item_hat_knit.x,item_hat_knit.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_hat_knit&&(item_hat_knit.destroy(!0),local_items_flag[a]=!1);if(n="House of Fluffy",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let _=dic_items[n].pos_x,y=dic_items[n].pos_y;group_fluffy_house_in=e.add.group(),item_fluffy_house=e.add.sprite(_,y,"item_fluffy_house_1").setScale(.4).setOrigin(.5).setDepth(2).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{if(0==flag_fluffy_house_click&&group_fluffy_house_in.getChildren().length>0){flag_fluffy_house_click=1;let e=0;for(i=0;i<group_fluffy_house_in.getLength();i++){let t=group_fluffy_house_in.getChildren()[i];setTimeout(()=>{t.on_click_fromHouse()},e),e+=100}group_fluffy_house_in.clear(),setTimeout(()=>{flag_fluffy_house_click=0},3e3),murasakisan.on_click(),item_fluffy_house.setTexture("item_fluffy_house_1"),sound_fluffy.play()}}),0!=local_items[a+64]&&draw_glitter(e,item_fluffy_house),count_sync>3&&(draw_flower3(e,item_fluffy_house.x,item_fluffy_house.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_fluffy_house&&(local_items_flag[a]=!1,item_fluffy_house.destroy(!0));if(!0==local_items_flag[a]&&(group_fluffy_house_in.getChildren().length>=10?item_fluffy_house.setTexture("item_fluffy_house_5"):group_fluffy_house_in.getChildren().length>=7?item_fluffy_house.setTexture("item_fluffy_house_4"):group_fluffy_house_in.getChildren().length>=4?item_fluffy_house.setTexture("item_fluffy_house_3"):group_fluffy_house_in.getChildren().length>=1?item_fluffy_house.setTexture("item_fluffy_house_2"):item_fluffy_house.setTexture("item_fluffy_house_1")),n="Crown",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]?(local_items_flag[a]=!0,(item_crown=e.add.sprite(dic_items[n].pos_x,dic_items[n].pos_y,"item_crown")).anims.play("item_crown",!0),item_crown.anims.isPlaying=!1,item_crown.setScale(.3),item_crown.setInteractive({useHandCursor:!0}),item_crown.on("pointerdown",()=>{item_crown.anims.isPlaying?item_crown.anims.stop():(item_crown.anims.isPlaying=!0,sound_hat.play())}),item_crown.depth=item_bear.depth+1,0!=local_items[a+64]&&draw_glitter(e,item_crown),count_sync>3&&(draw_flower3(e,item_crown.x,item_crown.y),sound_hat.play())):0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_crown&&(item_crown.destroy(!0),local_items_flag[a]=!1),n="Fortune Statue",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let x=dic_items[n].pos_x,b=dic_items[n].pos_y,v="pos_item_fortune_status";null!=localStorage.getItem(v)&&local_owner==local_wallet&&(x=(_pos=JSON.parse(localStorage.getItem(v)))[0],b=_pos[1]),item_fortune_statue=e.add.sprite(x,b,"item_fortune_statue").setScale(.35).setOrigin(.5).setDepth(b).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_fortune_statue.x=game.input.activePointer.x,item_fortune_statue.y=game.input.activePointer.y):(item_fortune_statue.x=game.input.activePointer.y,item_fortune_statue.y=960-game.input.activePointer.x),item_fortune_statue.depth=item_fortune_statue.y}).on("dragend",()=>{let e=[item_fortune_statue.x,item_fortune_statue.y];local_owner==local_wallet&&localStorage.setItem(v,JSON.stringify(e)),item_fortune_statue.x>=100&&item_fortune_statue.x<=1100&&item_fortune_statue.y>=500&&item_fortune_statue.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_fortune_statue.x,item_fortune_statue.y))}),0!=local_items[a+64]&&draw_glitter(e,item_fortune_statue),count_sync>3&&(draw_flower3(e,item_fortune_statue.x,item_fortune_statue.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_fortune_statue&&(item_fortune_statue.destroy(!0),local_items_flag[a]=!1);if(n="Music Box",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let w=dic_items[n].pos_x,k=dic_items[n].pos_y,F="pos_item_musicbox";null!=localStorage.getItem(F)&&local_owner==local_wallet&&(w=(_pos=JSON.parse(localStorage.getItem(F)))[0],k=_pos[1]),item_musicbox=e.add.sprite(w,k,"item_musicbox").setOrigin(.5).setScale(.3).setInteractive({useHandCursor:!0,draggable:!0}).setDepth(k).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_musicbox.x=game.input.activePointer.x,item_musicbox.y=game.input.activePointer.y):(item_musicbox.x=game.input.activePointer.y,item_musicbox.y=960-game.input.activePointer.x),item_musicbox.depth=item_musicbox.y}).on("dragend",()=>{let e=[item_musicbox.x,item_musicbox.y];local_owner==local_wallet&&localStorage.setItem(F,JSON.stringify(e)),item_musicbox.x>=100&&item_musicbox.x<=1100&&item_musicbox.y>=500&&item_musicbox.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_musicbox.x,item_musicbox.y))}).on("pointerdown",()=>music()),0!=local_items[a+64]&&draw_glitter(e,item_musicbox),count_sync>3&&(draw_flower3(e,item_musicbox.x,item_musicbox.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_musicbox&&(item_musicbox.destroy(!0),local_items_flag[a]=!1);if(n="Straw Hat",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let S=dic_items[n].pos_x,A=dic_items[n].pos_y;(item_hat_mugiwara=e.add.sprite(S,A,"item_hat_mugiwara").setOrigin(.5).setScale(.25).setAngle(90)).setInteractive({useHandCursor:!0});let T="item_hat_mugiwara";item_hat_mugiwara.on("pointerdown",()=>{0==item_wearing_hat?(item_wearing_hat=item_hat_mugiwara,murasakisan.on_click(),sound_hat.play(),item_hat_mugiwara.setAngle(0),local_owner==local_wallet&&localStorage.setItem(T,JSON.stringify(1))):item_wearing_hat==item_hat_mugiwara&&(item_wearing_hat=0,item_hat_mugiwara.x=S,item_hat_mugiwara.y=A,item_hat_mugiwara.setAngle(90),local_owner==local_wallet&&localStorage.setItem(T,JSON.stringify(0)))}),null!=localStorage.getItem(T)&&local_owner==local_wallet&&JSON.parse(localStorage.getItem(T))&&(item_wearing_hat=item_hat_mugiwara,item_hat_mugiwara.setAngle(0)),0!=local_items[a+64]&&draw_glitter(e,item_hat_mugiwara),count_sync>3&&(draw_flower3(e,item_hat_mugiwara.x,item_hat_mugiwara.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_hat_mugiwara&&(item_hat_mugiwara.destroy(!0),local_items_flag[a]=!1);if(n="Score Meter",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]?(local_items_flag[a]=!0,summon_scoreMeter(e),count_sync>3&&(draw_flower3(e,510,510),sound_hat.play())):0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&group_scoreMeter.getLength()>0&&(group_scoreMeter.clear(!0),local_items_flag[a]=!1),n="Ms. Ether",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]?(local_items_flag[a]=!0,ms_ether=new Pet(e,dic_items[n].pos_x-25+50*Math.random(),dic_items[n].pos_y-25+50*Math.random(),"ms_ether_right","ms_ether_left","farming").setScale(.12),group_update.add(ms_ether),group_pet.add(ms_ether),0!=local_items[a+64]&&draw_glitter(e,ms_ether),count_sync>3&&(draw_flower3(e,ms_ether.x,ms_ether.y),sound_hat.play())):0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof ms_ether&&(ms_ether.destroy(!0),local_items_flag[a]=!1),n="Rug-Pull",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let C=dic_items[n].pos_x,D=dic_items[n].pos_y;item_rugg=e.add.image(C,D,"item_rugg").setScale(1.7).setOrigin(.5).setDepth(2),0!=local_items[a+64]&&draw_glitter(e,item_rugg),count_sync>3&&(draw_flower3(e,item_rugg.x,item_rugg.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_rugg&&(item_rugg.destroy(!0),local_items_flag[a]=!1);if(n="Window",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let I=dic_items[n].pos_x,H=dic_items[n].pos_y;item_window=e.add.image(I,H,"item_window_sunny").setScale(.58).setOrigin(.5).setDepth(2).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{sound_window.play(),item_window.texture==game.textures.get(item_window.texture_opened)?item_window.setTexture(item_window.texture_closed):item_window.texture==game.textures.get(item_window.texture_closed)?item_window.setTexture(item_window.texture_opened):item_window.texture==game.textures.get("item_window_night")?item_window.setTexture("item_window_night_closed"):item_window.texture==game.textures.get("item_window_night_closed")&&item_window.setTexture("item_window_night")}),local_astar_priceChange_h24>1?(item_window.texture_opened="item_window_sunny",item_window.texture_closed="item_window_sunny_closed",item_window.setTexture(item_window.texture_opened)):local_astar_priceChange_h24<-1?(item_window.texture_opened="item_window_rain",item_window.texture_closed="item_window_rain_closed",item_window.setTexture(item_window.texture_opened)):(item_window.texture_opened="item_window_cloudy",item_window.texture_closed="item_window_cloudy_closed",item_window.setTexture(item_window.texture_opened)),0!=local_items[a+64]&&draw_glitter(e,item_window),count_sync>3&&(draw_flower3(e,item_window.x,item_window.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_window&&(item_window.destroy(!0),local_items_flag[a]=!1);if(!0==local_items_flag[a]&&!0==flag_onLight&&(local_astar_priceChange_h24>1?(item_window.texture_opened="item_window_sunny",item_window.texture_closed="item_window_sunny_closed",item_window.setTexture(item_window.texture_opened)):local_astar_priceChange_h24<-1?(item_window.texture_opened="item_window_rain",item_window.texture_closed="item_window_rain_closed",item_window.setTexture(item_window.texture_opened)):(item_window.texture_opened="item_window_cloudy",item_window.texture_closed="item_window_cloudy_closed",item_window.setTexture(item_window.texture_opened))),n="Cat Cushion",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]?(local_items_flag[a]=!0,(item_cushion=e.add.sprite(dic_items[n].pos_x,dic_items[n].pos_y,"item_cushion").setScale(.5).setOrigin(.5)).depth=item_cushion.y-50,0!=local_items[a+64]&&draw_glitter(e,item_cushion),count_sync>3&&(draw_flower3(e,item_cushion.x,item_cushion.y),sound_hat.play()),text_sending_interval=e.add.text(52,660,"00h:00m",{font:"15px Arial",fill:"#222222"}).setDepth(item_cushion.depth+1),group_info.add(text_sending_interval),cat=new HomeCat(e,90,610).setOrigin(.5).setScale(.4),group_update.add(cat),mail=e.add.sprite(75,655,"item_mail").setScale(.6).setOrigin(.5).setDepth(item_cushion.y-50+2).setVisible(!1)):0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_cushion&&(item_cushion.destroy(!0),text_sending_interval.destroy(!0),cat.destroy(!0),mail.destroy(!0),local_items_flag[a]=!1),!0==local_items_flag[a]){if(-1!=local_mail_sending_interval&&"undefined"!=typeof text_sending_interval&&"undefined"!=typeof cat){if(0==local_mail_sending_interval)text_sending_interval.setText("");else{let O=Math.floor(local_mail_sending_interval/86400),P,R=O+"d:"+Math.floor(local_mail_sending_interval%86400/3600)+"h:"+Math.floor(local_mail_sending_interval%3600/60)+"m";text_sending_interval.setText(R).setFill("#222222")}}local_items[196]>0?mail.visible=!0:mail.visible=!1}if(n="Picture Frame",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let M=dic_items[n].pos_x,B=dic_items[n].pos_y;async function V(){let t=await get_nft_url();e.load.image("pic_nft",t),e.load.start(),e.load.on("complete",()=>{item_frame_inside.setTexture("pic_nft"),item_frame_inside.setDisplaySize(60,93)})}item_frame=e.add.image(M,B,"item_frame").setOrigin(.5).setScale(.35).setDepth(10),item_frame_inside=e.add.sprite(M,B).setOrigin(.5).setDepth(11).setInteractive({useHandCursor:!0}).on("pointerdown",async()=>{sound_hat.play(),item_frame_inside.setTexture("");let t=await get_nft_url();e.textures.remove("pic_nft"),e.load.image("pic_nft",t),e.load.start(),e.load.on("complete",()=>{item_frame_inside.setTexture("pic_nft"),item_frame_inside.setDisplaySize(60,93)})}),V(),0!=local_items[a+64]&&draw_glitter(e,item_frame),count_sync>3&&(draw_flower3(e,item_frame.x,item_frame.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_frame&&(item_frame.destroy(!0),item_frame_inside.destroy(!0),local_items_flag[a]=!1);if(n="Crayon",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let z=dic_items[n].pos_x,E=dic_items[n].pos_y,N="pos_item_crayon";null!=localStorage.getItem(N)&&local_owner==local_wallet&&(z=(_pos=JSON.parse(localStorage.getItem(N)))[0],E=_pos[1]),item_crayon=e.add.sprite(z,E,"item_crayon").setScale(.2).setOrigin(.5).setDepth(E).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_crayon.x=game.input.activePointer.x,item_crayon.y=game.input.activePointer.y):(item_crayon.x=game.input.activePointer.y,item_crayon.y=960-game.input.activePointer.x),item_crayon.depth=item_crayon.y}).on("dragend",()=>{let e=[item_crayon.x,item_crayon.y];local_owner==local_wallet&&localStorage.setItem(N,JSON.stringify(e))}),0!=local_items[a+64]&&draw_glitter(e,item_crayon),count_sync>3&&(draw_flower3(e,item_crayon.x,item_crayon.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_crayon&&(item_crayon.destroy(!0),local_items_flag[a]=!1);if(!0==local_items_flag[a]&&update_achv(),n="Fishbowl",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let W,L,G="pos_item_fishbowl";null!=localStorage.getItem(G)&&local_owner==local_wallet?(W=(_pos=JSON.parse(localStorage.getItem(G)))[0],L=_pos[1]):(W=dic_items[n].pos_x,L=dic_items[n].pos_y),item_fishbowl=e.add.sprite(W,L,"item_fishbowl").setOrigin(.5).setScale(.3).setDepth(L).anims.play("item_fishbowl_1",!0).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_fishbowl.x=game.input.activePointer.x,item_fishbowl.y=game.input.activePointer.y):(item_fishbowl.x=game.input.activePointer.y,item_fishbowl.y=960-game.input.activePointer.x),item_fishbowl.depth=item_fishbowl.y}).on("dragend",()=>{let e=[item_fishbowl.x,item_fishbowl.y];local_owner==local_wallet&&localStorage.setItem(G,JSON.stringify(e)),item_fishbowl.x>=100&&item_fishbowl.x<=1100&&item_fishbowl.y>=500&&item_fishbowl.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_fishbowl.x,item_fishbowl.y))}),0!=local_items[a+64]&&draw_glitter(e,item_fishbowl),count_sync>3&&(draw_flower3(e,item_fishbowl.x,item_fishbowl.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_fishbowl&&(item_fishbowl.destroy(!0),local_items_flag[a]=!1);if(!0==local_items_flag[a]&&(local_wallet_age>=20?item_fishbowl.anims.play("item_fishbowl_5",!0):local_wallet_age>=15?item_fishbowl.anims.play("item_fishbowl_4",!0):local_wallet_age>=10?item_fishbowl.anims.play("item_fishbowl_3",!0):local_wallet_age>=5?item_fishbowl.anims.play("item_fishbowl_2",!0):item_fishbowl.anims.play("item_fishbowl_1",!0)),n="Piano",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let X=dic_items[n].pos_x,j=dic_items[n].pos_y,U="pos_item_piano";null!=localStorage.getItem(U)&&local_owner==local_wallet&&(X=(_pos=JSON.parse(localStorage.getItem(U)))[0],j=_pos[1]),item_piano=e.add.image(X,j,"item_piano").setScale(.4).setOrigin(.5).setDepth(2).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_piano.x=game.input.activePointer.x,item_piano.y=game.input.activePointer.y):(item_piano.x=game.input.activePointer.y,item_piano.y=960-game.input.activePointer.x),item_piano.depth=item_piano.y}).on("dragend",()=>{let e=[item_piano.x,item_piano.y];local_owner==local_wallet&&localStorage.setItem(U,JSON.stringify(e)),item_piano.x>=100&&item_piano.x<=1100&&item_piano.y>=500&&item_piano.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_piano.x,item_piano.y))}).on("pointerdown",()=>{item_piano.texture==game.textures.get("item_piano")?(flag_onLight?sound_piano1.play():sound_piano2.play(),item_piano.setTexture("item_piano_opened")):item_piano.setTexture("item_piano")}),0!=local_items[a+64]&&draw_glitter(e,item_piano),count_sync>3&&(draw_flower3(e,item_piano.x,item_piano.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_piano&&(item_piano.destroy(!0),local_items_flag[a]=!1);if(n="Pinwheel",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let q=dic_items[n].pos_x,Y=dic_items[n].pos_y,K="pos_item_pinwheel";null!=localStorage.getItem(K)&&local_owner==local_wallet&&(q=(_pos=JSON.parse(localStorage.getItem(K)))[0],Y=_pos[1]),summon_pinwheel(e,q,Y),0!=local_items[a+64]&&draw_glitter(e,group_pinwheel.getChildren()[0]),count_sync>3&&(draw_flower3(e,q,Y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof group_pinwheel&&(group_pinwheel.destroy(!0),local_items_flag[a]=!1);if(n="Asnya",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let J=dic_items[n].pos_x,Z=dic_items[n].pos_y,Q="pos_item_asnya";null!=localStorage.getItem(Q)&&local_owner==local_wallet&&(J=(_pos=JSON.parse(localStorage.getItem(Q)))[0],Z=_pos[1]),item_asnya=e.add.sprite(J,Z,"item_asnya").setScale(.25).setOrigin(.5).setDepth(Z).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_asnya.x=game.input.activePointer.x,item_asnya.y=game.input.activePointer.y):(item_asnya.x=game.input.activePointer.y,item_asnya.y=960-game.input.activePointer.x),item_asnya.depth=item_asnya.y}).on("dragend",()=>{let e=[item_asnya.x,item_asnya.y];local_owner==local_wallet&&localStorage.setItem(Q,JSON.stringify(e)),item_asnya.x>=100&&item_asnya.x<=1100&&item_asnya.y>=500&&item_asnya.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_asnya.x,item_asnya.y))}),0!=local_items[a+64]&&draw_glitter(e,item_asnya),count_sync>3&&(draw_flower3(e,item_asnya.x,item_asnya.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_asnya&&(item_asnya.destroy(!0),local_items_flag[a]=!1);if(n="Tablet",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let ee=dic_items[n].pos_x,et=dic_items[n].pos_y,ei="pos_item_tablet";null!=localStorage.getItem(ei)&&local_owner==local_wallet&&(ee=(_pos=JSON.parse(localStorage.getItem(ei)))[0],et=_pos[1]),item_pad=e.add.sprite(ee,et,"item_pad_on").setScale(.25).setOrigin(.5).setDepth(et).setInteractive({useHandCursor:!0,draggable:!0}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_pad.x=game.input.activePointer.x,item_pad.y=game.input.activePointer.y):(item_pad.x=game.input.activePointer.y,item_pad.y=960-game.input.activePointer.x),item_pad.depth=item_pad.y}).on("dragend",()=>{let e=[item_pad.x,item_pad.y];local_owner==local_wallet&&localStorage.setItem(ei,JSON.stringify(e)),item_pad.x>=100&&item_pad.x<=1100&&item_pad.y>=500&&item_pad.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_pad.x,item_pad.y))}).on("pointerdown",()=>{0==flag_radarchart?(flag_radarchart=1,flag_info=1,group_info.setVisible(!0),local_level>=5&&wallet==local_owner&&("undefined"!=typeof item_clarinet||"undefined"!=typeof item_piano||"undefined"!=typeof item_violin||"undefined"!=typeof item_horn||"undefined"!=typeof item_timpani||"undefined"!=typeof item_harp)?button_practice.visible=!0:button_practice.visible=!1,draw_radarchart(e),item_pad.setTexture("item_pad_on"),sound_pad.play(),text_select_item.setText(">> Select Item <<")):(flag_radarchart=0,flag_info=0,group_info.setVisible(!1),group_info2.setVisible(!1),group_chart.destroy(!0),item_pad.setTexture("item_pad_off"))}),flag_radarchart=1,draw_radarchart(e),0!=local_items[a+64]&&draw_glitter(e,item_pad),count_sync>3&&(draw_flower3(e,item_pad.x,item_pad.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_pad&&(item_pad.destroy(!0),local_items_flag[a]=!1);if(n="Flower Wreath",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let es=dic_items[n].pos_x,ea=dic_items[n].pos_y,en="pos_item_wreath";null!=localStorage.getItem(en)&&local_owner==local_wallet&&(es=(_pos=JSON.parse(localStorage.getItem(en)))[0],ea=_pos[1]);let eo="";eo+=" Wallet score:         \n",eo+="   (token             ) \n",eo+="   (nft                  ) \n",eo+="   (staking           ) \n",eo+="   (special           ) ",item_wreath_text1=e.add.text(es-15,ea+75,eo,{font:"17px Arial",fill:"#000000",backgroundColor:"#ffffff"}).setOrigin(.4).setVisible(!1).setDepth(2e3),eo="",eo+="                       "+(local_achv_onChain_score/100).toFixed(2)+" \n",eo+="                 "+(local_achv_onChain_score_token/100).toFixed(2)+" \n",eo+="                 "+(local_achv_onChain_score_nft/100).toFixed(2)+" \n",eo+="                 "+(local_achv_onChain_score_staking/100).toFixed(2)+" \n",eo+="                 "+(local_achv_onChain_score_murasaki_nft/100).toFixed(2)+" ",item_wreath_text2=e.add.text(es-15,ea+75,eo,{font:"17px Arial",fill:"#E5004F"}).setOrigin(.4).setVisible(!1).setDepth(2001),item_wreath_click=0,item_wreath=e.add.sprite(es,ea,"item_wreath").setOrigin(.5).setScale(.275).setInteractive({useHandCursor:!0,draggable:!0}).on("pointerdown",()=>{item_wreath_text1.setVisible(!0),item_wreath_text2.setVisible(!0);let e=item_wreath_click+=1;setTimeout(()=>{item_wreath_click==e&&(item_wreath_text1.setVisible(!1),item_wreath_text2.setVisible(!1))},2e3)}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_wreath.x=game.input.activePointer.x,item_wreath.y=game.input.activePointer.y):(item_wreath.x=game.input.activePointer.y,item_wreath.y=960-game.input.activePointer.x),item_wreath.depth=item_wreath.y,item_wreath_text1.visible=!1,item_wreath_text2.visible=!1}).on("dragend",()=>{let e=[item_wreath.x,item_wreath.y];local_owner==local_wallet&&localStorage.setItem(en,JSON.stringify(e)),item_wreath_text1.x=item_wreath.x-15,item_wreath_text1.y=item_wreath.y+75,item_wreath_text2.x=item_wreath.x-15,item_wreath_text2.y=item_wreath.y+75}),0!=local_items[a+64]&&draw_glitter(e,item_wreath),count_sync>3&&(draw_flower3(e,item_wreath.x,item_wreath.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_wreath&&(item_wreath.destroy(!0),local_items_flag[a]=!1);if(n="Ribbon",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]?(local_items_flag[a]=!0,(item_ribbon=e.add.sprite(dic_items[n].pos_x,dic_items[n].pos_y,"item_ribbon").setScale(.15).setOrigin(.5)).depth=item_bear.depth+1,0!=local_items[a+64]&&draw_glitter(e,item_ribbon),count_sync>3&&(draw_flower3(e,item_ribbon.x,item_ribbon.y),sound_hat.play())):0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_ribbon&&(item_ribbon.destroy(!0),local_items_flag[a]=!1),n="Dr. Bitco",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]?(local_items_flag[a]=!0,dr_bitco=new Pet(e,dic_items[n].pos_x-25+50*Math.random(),dic_items[n].pos_y-25+50*Math.random(),"dr_bitco_right","dr_bitco_left","crafting").setScale(.11),group_update.add(dr_bitco),group_pet.add(dr_bitco),0!=local_items[a+64]&&draw_glitter(e,dr_bitco),count_sync>3&&(draw_flower3(e,dr_bitco.x,dr_bitco.y),sound_hat.play())):0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof dr_bitco&&(dr_bitco.destroy(!0),local_items_flag[a]=!1),n="Light Switch",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]?(local_items_flag[a]=!0,back_black=e.add.image(640,480,"back_black").setDepth(3300).setVisible(!1),murasaki_neon=new Neon(e,50+900*Math.random(),200+200*Math.random(),"murasaki_neon_right","murasaki_neon_left").setVisible(!1).setDepth(3302).setOrigin(.5).setScale(.35),group_update.add(murasaki_neon),item_wall_sticker_neon=e.add.sprite(640,480,"item_wall_sticker_neon").anims.play("wall_sticker_neon",!0).setDepth(3301).setAlpha(.7).setVisible(!1),(item_switch=e.add.sprite(dic_items[n].pos_x,dic_items[n].pos_y,"item_switch").setOrigin(.5).setScale(.25).setInteractive({useHandCursor:!0})).anims.play("item_switch_off",!0),item_switch.on("pointerdown",()=>{(!0==flag_music&&music(),"listning"==murasakisan.mode&&(murasakisan.mode="resting",murasakisan.count=0),"item_switch_off"==item_switch.anims.currentAnim.key)?(item_switch.anims.play("item_switch_on",!0),back_black.visible=!0,sound_switch.play(),murasaki_neon.visible=!0,text_kanban.setColor("white"),"undefined"!=typeof item_lantern&&(item_lantern.anims.play("item_lantern"),item_lantern.setDepth(3301)),"undefined"!=typeof item_window&&(item_window.texture==game.textures.get(item_window.texture_opened)?item_window.setTexture("item_window_night"):item_window.setTexture("item_window_night_closed")),"undefined"!=typeof item_wall_sticker&&local_score>=18e5&&item_wall_sticker_neon.setVisible(!0),local_dapps_staking_amount>0&&neon_moon.setVisible(!0),local_dapps_staking_amount>1e3&&neon_saturn.setVisible(!0),local_dapps_staking_amount>3e3&&(100*Math.random()>=70?neon_moon.setFrame(1):neon_moon.setFrame(0)),local_dapps_staking_amount>5e3&&neon_ufo.setVisible(!0),flag_onLight=!1):(item_switch.anims.play("item_switch_off",!0),back_black.visible=!1,sound_switch.play(),murasaki_neon.visible=!1,group_neonStar.clear(!0),text_kanban.setColor("black"),"undefined"!=typeof item_lantern&&(item_lantern.anims.stop(),item_lantern.setFrame(0),item_lantern.setDepth(item_lantern.y)),"undefined"!=typeof item_window&&(item_window.texture==game.textures.get("item_window_night")?item_window.setTexture(item_window.texture_opened):item_window.setTexture(item_window.texture_closed)),"undefined"!=typeof item_wall_sticker&&local_score>=18e5&&item_wall_sticker_neon.setVisible(!1),neon_ufo.setVisible(!1),neon_moon.setVisible(!1),neon_saturn.setVisible(!1),flag_onLight=!0)}),item_switch.depth=item_switch.y,(neon_ufo=e.add.sprite(2e3,100,"neon_ufo").anims.play("neon_ufo",!0).setDepth(3302).setAlpha(1).setScale(.3).setAngle(0).setVisible(!1)).isSound=1,neon_ufo.angleAdd=1,neon_ufo.update=()=>{neon_ufo.x-=.5,neon_ufo.x<-500&&(neon_ufo.x=2e3,neon_ufo.isSound=1),neon_ufo.angle+=neon_ufo.angleAdd,neon_ufo.angle>=10?neon_ufo.angleAdd=-.25:neon_ufo.angle<=-20&&(neon_ufo.angleAdd=.25),neon_ufo.x<1280&&neon_ufo.x>50&&1==neon_ufo.isSound&&!0==neon_ufo.visible&&(sound_ufo.play(),neon_ufo.isSound=0)},group_update.add(neon_ufo),neon_moon=e.add.sprite(1200,80,"neon_moon").setDepth(3301).setAlpha(1).setScale(.4).setVisible(!1),neon_saturn=e.add.sprite(180,60,"neon_saturn").setDepth(3301).setAlpha(1).setScale(.2).setVisible(!1),0!=local_items[a+64]&&draw_glitter(e,item_switch),count_sync>3&&(draw_flower3(e,item_switch.x,item_switch.y),sound_hat.play())):0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_switch&&(item_switch.destroy(!0),local_items_flag[a]=!1),n="Mortarboard",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let er=dic_items[n].pos_x,e$=dic_items[n].pos_y;(item_hat_mortarboard=e.add.sprite(er,e$,"item_hat_mortarboard").setOrigin(.5).setScale(.2).setAngle(90)).setInteractive({useHandCursor:!0});let el="item_hat_mortarboard";item_hat_mortarboard.on("pointerdown",()=>{0==item_wearing_hat?(item_wearing_hat=item_hat_mortarboard,murasakisan.on_click(),sound_hat.play(),item_hat_mortarboard.setAngle(0),local_owner==local_wallet&&localStorage.setItem(el,JSON.stringify(1))):item_wearing_hat==item_hat_mortarboard&&(item_wearing_hat=0,item_hat_mortarboard.x=er,item_hat_mortarboard.y=e$,item_hat_mortarboard.setAngle(90),local_owner==local_wallet&&localStorage.setItem(el,JSON.stringify(0)))}),null!=localStorage.getItem(el)&&local_owner==local_wallet&&JSON.parse(localStorage.getItem(el))&&(item_wearing_hat=item_hat_mortarboard,item_hat_mortarboard.setAngle(0)),0!=local_items[a+64]&&draw_glitter(e,item_hat_mortarboard),count_sync>3&&(draw_flower3(e,item_hat_mortarboard.x,item_hat_mortarboard.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_hat_mortarboard&&(item_hat_mortarboard.destroy(!0),local_items_flag[a]=!1);if(n="News Board",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let ed=dic_items[n].pos_x,e8=dic_items[n].pos_y;item_newspaper=e.add.image(ed,e8,"item_newspaper").setOrigin(.5).setScale(.19).setDepth(2),item_newspaper_text1=e.add.text(ed,e8-20,local_newsText[0],{font:"14px Arial",fill:"#000000"}).setOrigin(.5).setDepth(3),item_newspaper_text2=e.add.text(ed,e8+0,local_newsText[1],{font:"14px Arial",fill:"#000000"}).setOrigin(.5).setDepth(3),item_newspaper_text3=e.add.text(ed,e8+20,local_newsText[2],{font:"14px Arial",fill:"#000000"}).setOrigin(.5).setDepth(3),item_newspaper_text4=e.add.text(ed,e8+40,local_newsText[3],{font:"14px Arial",fill:"#000000"}).setOrigin(.5).setDepth(3),count_to_newsUpdate=0,0!=local_items[a+64]&&draw_glitter(e,item_newspaper),count_sync>3&&(draw_flower3(e,item_newspaper.x,item_newspaper.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_newspaper&&(item_newspaper.destroy(!0),item_newspaper_text1.destroy(!0),item_newspaper_text2.destroy(!0),item_newspaper_text3.destroy(!0),item_newspaper_text4.destroy(!0),local_items_flag[a]=!1);if(!0==local_items_flag[a]&&(count_to_newsUpdate+=1)%30==0&&(contract_update_event_random(),item_newspaper_text1.setText(local_newsText[0]),item_newspaper_text2.setText(local_newsText[1]),item_newspaper_text3.setText(local_newsText[2]),item_newspaper_text4.setText(local_newsText[3])),n="Water Bottle",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let eh=dic_items[n].pos_x,em=dic_items[n].pos_y,eg="pos_item_waterBottle";null!=localStorage.getItem(eg)&&local_owner==local_wallet&&(eh=(_pos=JSON.parse(localStorage.getItem(eg)))[0],em=_pos[1]),item_waterBottle=e.add.sprite(eh,em,"item_waterbottle").setScale(.45).setOrigin(.5).setDepth(em).setInteractive({draggable:!0,useHandCursor:!0}).on("pointerdown",()=>{open_window_strolling(e)}),0!=local_items[a+64]&&draw_glitter(e,item_waterBottle),count_sync>3&&(draw_flower3(e,item_waterBottle.x,item_waterBottle.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_waterBottle&&(item_waterBottle.destroy(!0),local_items_flag[a]=!1);if(!0==local_items_flag[a]&&("strolling_start"==murasakisan.mode||"strolling_end"==murasakisan.mode)&&(item_waterBottle.visible=!1),n="Diary Book",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let ec,ep,eu="pos_item_book";null!=localStorage.getItem(eu)&&local_owner==local_wallet?(ec=(_pos=JSON.parse(localStorage.getItem(eu)))[0],ep=_pos[1]):(ec=dic_items[n].pos_x,ep=dic_items[n].pos_y);let ef="";ef+=" total exp: "+local_total_exp_gained+" \n",ef+=" total coin: "+local_total_coin_mined+" \n",ef+=" total leaf: "+local_total_material_farmed+"\n",ef+=" total craft: "+local_total_item_crafted+" \n",ef+=" total fluffy: "+local_total_precious_received+" ",item_book_text=e.add.text(ec,ep-90,ef,{font:"20px Arial",fill:"#000000",backgroundColor:"#ffffff"}).setOrigin(.5).setVisible(!1).setDepth(2e3),item_book_click=0,item_book=e.add.sprite(ec,ep,"item_book").setScale(.22).setOrigin(.5).setInteractive({draggable:!0,useHandCursor:!0}).on("pointerdown",()=>{if(1==flag_info){let e=item_book_click+=1;item_book_text.visible=!0,setTimeout(()=>{item_book_click==e&&(item_book_text.visible=!1)},2e3)}}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_book.x=game.input.activePointer.x,item_book.y=game.input.activePointer.y):(item_book.x=game.input.activePointer.y,item_book.y=960-game.input.activePointer.x),item_book.depth=item_book.y,item_book_text.visible=!1}).on("dragend",()=>{item_book_text.x=item_book.x,item_book_text.y=item_book.y-90,item_book.depth=item_book.y;let e=[item_book.x,item_book.y];local_owner==local_wallet&&localStorage.setItem(eu,JSON.stringify(e))}),0!=local_items[a+64]&&draw_glitter(e,item_book),count_sync>3&&(draw_flower3(e,item_book.x,item_book.y),sound_hat.play())}else if(0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_clock)item_book.destroy(!0),item_book_text.destroy(!0),local_items_flag[a]=!1;else if(!0==local_items_flag[a]){let e_="";e_+=" total exp: "+local_total_exp_gained+" \n",e_+=" total coin: "+local_total_coin_mined+" \n",e_+=" total leaf: "+local_total_material_farmed+"\n",e_+=" total craft: "+local_total_item_crafted+" \n",e_+=" total fluffy: "+local_total_precious_received+" ",item_book_text.setText(e_)}if(n="Cuckoo Clock",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let ey=dic_items[n].pos_x,ex=dic_items[n].pos_y;item_clock=e.add.sprite(ey,ex,"item_clock").setFrame(0).setScale(.45).setOrigin(.5).setDepth(2).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{item_clock.anims.play("item_clock_anim_1"),sound_clock.play(),setTimeout(()=>{sound_clock.play()},2e3)}),0!=local_items[a+64]&&draw_glitter(e,item_clock),count_sync>3&&(draw_flower3(e,item_clock.x,item_clock.y),sound_hat.play()),item_clock_short=e.add.sprite(ey,ex,"item_clock").setFrame(2).setScale(.45).setOrigin(.5).setDepth(3),item_clock_long=e.add.sprite(ey,ex,"item_clock").setFrame(1).setScale(.45).setOrigin(.5).setDepth(3)}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_clock&&(item_clock.destroy(!0),item_clock_long.destroy(!0),item_clock_short.destroy(!0),local_items_flag[a]=!1);if(!0==local_items_flag[a]){let e0=local_nonce%1440;item_clock_short.setAngle(.5*e0),item_clock_long.setAngle(6*e0)}if(n="Violin",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let eb=dic_items[n].pos_x,e3=dic_items[n].pos_y,ev="pos_item_violin";null!=localStorage.getItem(ev)&&local_owner==local_wallet&&(eb=(_pos=JSON.parse(localStorage.getItem(ev)))[0],e3=_pos[1]),item_violin=e.add.sprite(eb,e3,"item_violin").setScale(.2).setOrigin(.5).setDepth(e3).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_violin.x=game.input.activePointer.x,item_violin.y=game.input.activePointer.y):(item_violin.x=game.input.activePointer.y,item_violin.y=960-game.input.activePointer.x),item_violin.depth=item_violin.y}).on("dragend",()=>{let e=[item_violin.x,item_violin.y];local_owner==local_wallet&&localStorage.setItem(ev,JSON.stringify(e)),item_violin.x>=100&&item_violin.x<=1100&&item_violin.y>=500&&item_violin.y<=800&&(sound_hat.play(),murasakisan.try_attenting(item_violin.x,item_violin.y))}),0!=local_items[a+64]&&draw_glitter(e,item_violin),count_sync>3&&(draw_flower3(e,item_violin.x,item_violin.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_violin&&(item_violin.destroy(!0),local_items_flag[a]=!1);if(n="Retro Game",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let e1=dic_items[n].pos_x,ew=dic_items[n].pos_y,e2="pos_item_retrogame";null!=localStorage.getItem(e2)&&local_owner==local_wallet&&(e1=(_pos=JSON.parse(localStorage.getItem(e2)))[0],ew=_pos[1]),item_retrogame=e.add.sprite(e1,ew,"item_retrogame").setScale(.2).setOrigin(.5).setDepth(ew).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_retrogame.x=game.input.activePointer.x,item_retrogame.y=game.input.activePointer.y):(item_retrogame.x=game.input.activePointer.y,item_retrogame.y=960-game.input.activePointer.x),item_retrogame.depth=item_retrogame.y}).on("dragend",()=>{let t=[item_retrogame.x,item_retrogame.y];local_owner==local_wallet&&localStorage.setItem(e2,JSON.stringify(t)),summon_retroAlphabet(e,item_retrogame.x,item_retrogame.y),sound_pad.play(),item_retrogame.disableInteractive(),setTimeout(()=>{item_retrogame.setInteractive({draggable:!0,useHandCursor:!0})},5e3)}),0!=local_items[a+64]&&draw_glitter(e,item_retrogame),count_sync>3&&(draw_flower3(e,item_retrogame.x,item_retrogame.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_retrogame&&(item_retrogame.destroy(!0),local_items_flag[a]=!1);if(n="Flowerpot",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let e4=dic_items[n].pos_x,ek=dic_items[n].pos_y,eF="pos_item_vase";null!=localStorage.getItem(eF)&&local_owner==local_wallet&&(e4=(_pos=JSON.parse(localStorage.getItem(eF)))[0],ek=_pos[1]),item_vase=e.add.sprite(e4,ek,"item_vase").setScale(.4).setOrigin(.5).setDepth(ek).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_vase.x=game.input.activePointer.x,item_vase.y=game.input.activePointer.y):(item_vase.x=game.input.activePointer.y,item_vase.y=960-game.input.activePointer.x),item_vase.depth=item_vase.y}).on("dragend",()=>{let e=[item_vase.x,item_vase.y];local_owner==local_wallet&&localStorage.setItem(eF,JSON.stringify(e))}),0!=local_items[a+64]&&draw_glitter(e,item_vase),count_sync>3&&(draw_flower3(e,item_vase.x,item_vase.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_vase&&(item_vase.destroy(!0),local_items_flag[a]=!1);if(n="Lantern",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let e6=dic_items[n].pos_x,eS=dic_items[n].pos_y,e5="pos_item_lantern";null!=localStorage.getItem(e5)&&local_owner==local_wallet&&(e6=(_pos=JSON.parse(localStorage.getItem(e5)))[0],eS=_pos[1]),item_lantern=e.add.sprite(e6,eS,"item_lantern_list").setFrame(0).setScale(.275).setOrigin(.5).setDepth(eS).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_lantern.x=game.input.activePointer.x,item_lantern.y=game.input.activePointer.y):(item_lantern.x=game.input.activePointer.y,item_lantern.y=960-game.input.activePointer.x),item_lantern.depth=item_lantern.y}).on("dragend",()=>{let e=[item_lantern.x,item_lantern.y];local_owner==local_wallet&&localStorage.setItem(e5,JSON.stringify(e))}),0!=local_items[a+64]&&draw_glitter(e,item_lantern),count_sync>3&&(draw_flower3(e,item_lantern.x,item_lantern.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_lantern&&(item_lantern.destroy(!0),local_items_flag[a]=!1);if(n="Cleaner Robot",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let eA=dic_items[n].pos_x,e7=dic_items[n].pos_y,eT="pos_item_runpa";null!=localStorage.getItem(eT)&&local_owner==local_wallet&&(eA=(_pos=JSON.parse(localStorage.getItem(eT)))[0],e7=_pos[1]);let eC=summon_runpa(e,eA,e7);0!=local_items[a+64]&&draw_glitter(e,eC),count_sync>3&&(draw_flower3(e,eC.x,eC.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_runpa&&(item_runpa.destroy(!0),local_items_flag[a]=!1);if(n="Candle",a=dic_items[n].item_id,(0!=local_items[a]||0!=local_items[a+64]||0!=local_items[a+128])&&!0!=local_items_flag[a]){local_items_flag[a]=!0;let eD=dic_items[n].pos_x,eI=dic_items[n].pos_y,eH="pos_item_candle";null!=localStorage.getItem(eH)&&local_owner==local_wallet&&(eD=(_pos=JSON.parse(localStorage.getItem(eH)))[0],eI=_pos[1]),item_candle=e.add.sprite(eD,eI,"item_candle").anims.play("item_candle").setScale(.25).setOrigin(.5).setDepth(eI).setInteractive({draggable:!0,useHandCursor:!0}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_candle.x=game.input.activePointer.x,item_candle.y=game.input.activePointer.y):(item_candle.x=game.input.activePointer.y,item_candle.y=960-game.input.activePointer.x),item_candle.depth=item_candle.y}).on("dragend",()=>{let e=[item_candle.x,item_candle.y];local_owner==local_wallet&&localStorage.setItem(eH,JSON.stringify(e))}),0!=local_items[a+64]&&draw_glitter(e,item_candle),count_sync>3&&(draw_flower3(e,item_candle.x,item_candle.y),sound_hat.play())}else 0==local_items[a]&&0==local_items[a+64]&&0==local_items[a+128]&&"undefined"!=typeof item_lantern&&(item_candle.destroy(!0),local_items_flag[a]=!1);if(local_items[194]!=previous_local_item194){async function V(t){let s=get_userItems(194);try{group_item194.destroy(!0)}catch(a){}group_item194=t.add.group();let n=[],o=[],r=[];for(let $=0;$<s.length;$++){let l=650,d=500;n[$]=t.add.sprite(l+50*$,d,"item_bank").setScale(.275).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>n[$].setTexture("item_bank_broken")).on("pointerover",()=>sound_button_select.play()).on("pointerover",()=>{o[$].visible=!0}).on("pointerover",()=>{r[$].visible=!0}).on("pointerout",()=>n[$].setTexture("item_bank")).on("pointerout",()=>{o[$].visible=!1}).on("pointerout",()=>{r[$].visible=!1}).on("pointerdown",()=>unpack_bag(summoner,s[$])).on("pointerdown",()=>sound_button_on.play()),n[$].depth=n[$].y,o[$]=t.add.text(l+10+50*$,d-50,"+1000",{font:"17px Arial",fill:"#000000"}).setOrigin(.5).setVisible(!1),r[$]=t.add.sprite(l-30+50*$,d-50,"icon_ohana").setOrigin(.5).setScale(.07).setVisible(!1),group_item194.add(n[$]),group_item194.add(o[$]),group_item194.add(r[$]),count_sync>3&&(draw_flower3(e,n[$].x,n[$].y),sound_hat.play())}}V(e)}if(local_items[195]!=previous_local_item195){async function V(t){let s=get_userItems(195);try{group_item195.destroy(!0)}catch(a){}group_item195=t.add.group();let n=[],o=[],r=[];for(let $=0;$<s.length;$++){let l=550,d=490;n[$]=t.add.sprite(l-50*$,d,"item_pouch").setScale(.225).setOrigin(.5).setInteractive({useHandCursor:!0}).on("pointerover",()=>n[$].setTexture("item_pouch_broken")).on("pointerover",()=>sound_button_select.play()).on("pointerover",()=>{o[$].visible=!0}).on("pointerover",()=>{r[$].visible=!0}).on("pointerout",()=>n[$].setTexture("item_pouch")).on("pointerout",()=>{o[$].visible=!1}).on("pointerout",()=>{r[$].visible=!1}).on("pointerdown",()=>unpack_bag(summoner,s[$])).on("pointerdown",()=>sound_button_on.play()),n[$].depth=n[$].y,o[$]=t.add.text(l+15-50*$,d-50,"+1000",{font:"17px Arial",fill:"#000000"}).setOrigin(.5).setVisible(!1),r[$]=t.add.sprite(l-22-50*$,d-50,"icon_kusa").setOrigin(.5).setScale(.09).setVisible(!1),group_item195.add(n[$]),group_item195.add(o[$]),group_item195.add(r[$]),count_sync>3&&(draw_flower3(e,n[$].x,n[$].y),sound_hat.play())}}V(e)}if(local_items[200]>previous_local_item200&&get_itemIds_from_itemType(local_myListsAt_withItemType,200).forEach(async t=>{if(!summoned_presentbox.includes(t)){let s=["item_presentboxes"],a=s[Math.floor(Math.random()*s.length)],n=170+830*Math.random(),o=510+170*Math.random(),r=await call_item_info(t),$=await call_name_from_summoner(r.crafted_summoner);""==$&&($="#"+r.crafted_summoner);let l=r.memo,d=new PresentBox(e,n,o,a,t,$,l).setOrigin(.5).setScale(.3).setAlpha(1).setDepth(o);summoned_presentbox.push(t),group_update.add(d),draw_flower3(e,n,o),sound_hat.play()}}),local_fluffy_count!=previous_local_fluffy_count||local_pippel_score!=previous_local_pippel_score){let eO=0,eP=0,eR=0,eM=0,eB=0;for(let eV=201;eV<=212;eV++){let ez=local_items[eV];ez>0&&(get_itemIds_from_itemType(local_myListsAt_withItemType,eV).forEach(t=>{summoned_fluffies.includes(t)||(setTimeout(()=>{summon_fluffy2(e,eV,t)},eO,t),eO+=0,summoned_fluffies.push(t))}),eP+=ez)}for(let eE=213;eE<=224;eE++){let eN=local_items[eE];eN>0&&(get_itemIds_from_itemType(local_myListsAt_withItemType,eE).forEach(t=>{summoned_fluffies.includes(t)||(setTimeout(()=>{summon_fluffy2(e,eE,t)},eO,t),eO+=0,summoned_fluffies.push(t))}),eR+=eN)}for(let eW=225;eW<=236;eW++){let eL=local_items[eW];eL>0&&(get_itemIds_from_itemType(local_myListsAt_withItemType,eW).forEach(t=>{summoned_fluffies.includes(t)||(setTimeout(()=>{summon_fluffy2(e,eW,t)},eO,t),eO+=0,summoned_fluffies.push(t))}),eM+=eL)}for(let eG=237;eG<=248;eG++)local_items[eG]>0&&get_itemIds_from_itemType(local_myListsAt_withItemType,eG).forEach(t=>{eB+=1,summoned_fluffies.includes(t)||(summon_nuichan(e,t,eG,eB),summoned_fluffies.push(t))});let eX="";eX+=" fluffy x "+eP+"\n",eX+=" fluffier x "+eR+"\n",eX+=" fluffiest x "+eM+"\n",eX+=" fluffy doll x "+eB+"\n",eX+=" pippel +"+local_pippel_score/10+" ",text_fluffy.setText(eX)}if(("undefined"==typeof item_staking||void 0===item_staking.scene)&&"regular"==gamemode){let ej,eU,eq="pos_item_staking";null!=localStorage.getItem(eq)&&local_owner==local_wallet?(ej=(_pos=JSON.parse(localStorage.getItem(eq)))[0],eU=_pos[1]):(ej=330,eU=850);let eY="";eY+=" Staking: "+local_dapps_staking_amount+" $ASTR \n",eY+=" Complete: "+local_staking_reward_percent+"%",item_staking_text=e.add.text(ej,eU-60,eY,{font:"20px Arial",fill:"#000000",backgroundColor:"#ffffff"}).setOrigin(.5).setVisible(!1).setDepth(2e3),item_staking_bar_back=makeMiniProgressBar(e,ej-20-2,eU+30+18-2,44,14,16766421).setDepth(eU+1),(item_staking_bar=makeMiniProgressBar(e,ej-20,eU+30+18,40,10,15007823).setDepth(eU+2)).scaleX=.01,item_staking_click=0,item_staking=e.add.sprite(ej,eU,"item_staking_00").setOrigin(.5).setScale(.18).setDepth(eU).setInteractive({draggable:!0,useHandCursor:!0}).on("pointerdown",()=>{item_staking_text.visible=!0;let e=item_staking_click+=1;setTimeout(()=>{item_staking_click==e&&(item_staking_text.visible=!1)},2e3),100==local_staking_reward_percent&&(open_staking_reward(summoner),sound_button_on.play())}).on("drag",()=>{1280==e.sys.game.scale.gameSize._width?(item_staking.x=game.input.activePointer.x,item_staking.y=game.input.activePointer.y):(item_staking.x=game.input.activePointer.y,item_staking.y=960-game.input.activePointer.x),item_staking.depth=item_staking.y,item_staking_bar_back.x=item_staking.x-20-2,item_staking_bar_back.y=item_staking.y+30+18-2,item_staking_bar_back.depth=item_staking.y+1,item_staking_bar.x=item_staking.x-20,item_staking_bar.y=item_staking.y+30+18,item_staking_bar.depth=item_staking.y+2,item_staking_text.visible=!1}).on("dragend",()=>{item_staking_text.x=item_staking.x,item_staking_text.y=item_staking.y-60,item_staking_text.depth=item_staking.y+1;let e=[item_staking.x,item_staking.y];local_owner==local_wallet&&localStorage.setItem(eq,JSON.stringify(e))})}else if("undefined"!=typeof item_staking&&void 0!==item_staking.scene&&0==local_dapps_staking_amount)item_staking.setTexture("item_staking_00");else if("undefined"!=typeof item_staking&&void 0!==item_staking.scene){let e9="";e9+=" Staking: "+local_dapps_staking_amount+" $ASTR \n",e9+=" Complete: "+local_staking_reward_percent+"%",item_staking_text.setText(e9),item_staking_bar.scaleX=local_staking_reward_percent/100,local_staking_reward_percent<=15?item_staking.setTexture("item_staking_01"):local_staking_reward_percent<=30?item_staking.setTexture("item_staking_02"):local_staking_reward_percent<=45?item_staking.setTexture("item_staking_03"):local_staking_reward_percent<=60?item_staking.setTexture("item_staking_04"):local_staking_reward_percent<=75?item_staking.setTexture("item_staking_05"):local_staking_reward_percent<=90?item_staking.setTexture("item_staking_06"):local_staking_reward_percent<100?item_staking.setTexture("item_staking_07"):100==local_staking_reward_percent&&item_staking.setTexture("item_staking_08")}if(count_sync>=3&&1==local_receiving_mail&&("undefined"==typeof cat_visitor||void 0===cat_visitor.scene)){async function eK(e){let t=await contract_callMailDetail(summoner),s=t[0],a=t[1];cat_visitor=new VisitorCat(e,0,0,s,a).setOrigin(.5).setScale(.4),group_update.add(cat_visitor),murasakisan.on_click()}eK(e)}if(0!=summoner&&("undefined"==typeof festligheter||"destroy"==festligheter.mode)&&(local_ff_next_festival_block-local_blockNumber<=7200||1==local_ff_inSession)){console.log("summon, festligheter");let eJ=200+700*Math.random(),eZ=550+200*Math.random();festligheter=new Festligheter(e,eJ,eZ,"ff_preFestival").setOrigin(.5).setScale(.25).setAlpha(1).setDepth(3),group_update.add(festligheter)}if("trial"==gamemode&&local_level>=3&&local_total_item_crafted>=2&&0==flag_mogumogu?(summon_mogumogu(e),flag_mogumogu=1):1==flag_mogumogu&&"trial"!=gamemode&&(group_mogumogu.destroy(!0),flag_mogumogu=0),1==local_check_pippel&&count_sync>=2?!1==pippel_basic.visible&&(pippel_basic.visible=!0,draw_flower3(e,pippel_basic.x,pippel_basic.y),murasakisan.on_click(),sound_pippel.play()):(!0==pippel_basic.visible&&local_pippel_score!=previous_local_pippel_score&&(draw_flower3(e,pippel_house.x,pippel_house.y),sound_hat.play()),pippel_basic.visible=!1),local_pippel_score>0&&"undefined"==typeof pippel_house){let eQ=460,te=170,tt="pos_pippel_house";null!=localStorage.getItem(tt)&&local_owner==local_wallet&&(eQ=(_pos=JSON.parse(localStorage.getItem(tt)))[0],te=_pos[1]),(pippel_house=e.add.sprite(eQ,te,"pippel_house").setOrigin(.5).setScale(.25).setInteractive({draggable:!0,useHandCursor:!0})).flag_drag=0,pippel_house.on("pointerdown",()=>{setTimeout(()=>{1!=pippel_house.flag_drag&&draw_pippelSummary(e)},250)}).on("drag",()=>{pippel_house.flag_drag=1,1280==e.sys.game.scale.gameSize._width?(pippel_house.x=game.input.activePointer.x,pippel_house.y=game.input.activePointer.y):(pippel_house.x=game.input.activePointer.y,pippel_house.y=960-game.input.activePointer.x),pippel_house.depth=pippel_house.y}).on("dragend",()=>{let e=[pippel_house.x,pippel_house.y];local_owner==local_wallet&&localStorage.setItem(tt,JSON.stringify(e)),pippel_house.flag_drag=0})}previous_local_items=local_items,previous_local_item194=local_items[194],previous_local_item195=local_items[195],previous_local_item196=local_items[196],previous_local_item200=local_items[200],previous_local_rolled_dice=local_rolled_dice,previous_local_name_str=local_name_str,previous_local_score=local_score,previous_local_fluffy_count=local_fluffy_count,previous_local_pippel_score=local_pippel_score}function calc_fps(){let e=Date.now();if(e>=time_forFPS+1e3){time_forFPS=e;let t=turn-turn_forFPS;turn_forFPS=turn,text_fps.setText(t+" fps")}}async function updateFirst(e){1==flag_radarchart&&draw_radarchart(e),update_syncTime(e),update_numericAnimation(e),update_parametersWithAnimation(e),update_parametersWithoutAnimation(e),update_checkModeChange(e),update_checkButtonActivation(e),update_checkItem(e),update_astarPrice(),update_house_price()}async function checkChainId(e,t){parseInt(await window.ethereum.request({method:"eth_chainId"}))!=t&&e.scene.start("SomethingWrong")}function update(e){turn+=1,calc_fps(),turn%100==0&&summoner>0&&0==flag_doneFp&&local_wallet==local_owner&&(send_fp_get(local_wallet,summoner),flag_doneFp=1),turn%1e3==0&&summoner>0&&1==flag_radarchart&&draw_radarchart(e),turn%20==0&&update_syncTime(e),(1==turn||turn%2==0)&&update_numericAnimation(e),(1==turn||turn%150==0)&&update_parametersWithAnimation(e),(1==turn||turn%150==10)&&update_parametersWithoutAnimation(e),(1==turn||turn%150==20)&&update_checkModeChange(e),(1==turn||turn%150==30)&&update_checkButtonActivation(e),(1==turn||turn%150==40)&&update_checkItem(e),turn%300==50&&text_system_message.setText(""),(turn%150==60||1==turn||1==count_sync)&&update_systemMessage(),turn%500==0&&checkChainId(e,CORRECT_CHAINID),1==flag_sync&&(turn%250==70||1==flag_syncNow)&&(flag_syncNow=0,0==count_sync||0==local_notPetrified||0==summoner?contract_update_all():summoner>0&&contract_update_dynamic_status(summoner))}class FirstCheck extends Phaser.Scene{constructor(){super({key:"FirstCheck",active:!0}),this.flag_start=0,console.log("scene: FirstCheck")}preload(){this.load.image("icon_error","src/png/icon_error.png"),this.load.image("icon_wrong","src/png/icon_wrong.png"),this.load.spritesheet("logolist","src/icon/logolist.png",{frameWidth:370,frameHeight:320}),this.load.spritesheet("logolist2","src/icon/logolist2.png",{frameWidth:370,frameHeight:320}),this.load.spritesheet("logolist3","src/icon/logolist3.png",{frameWidth:370,frameHeight:320}),this.load.spritesheet("logolist4","src/icon/logolist4.png",{frameWidth:370,frameHeight:320})}create(){let e=this.add.text(640,480,"Check Network").setFontSize(80).setFontFamily("Arial").setOrigin(.5).setFill("#ff1694"),t=this.add.text(640,560,"Connecting...").setFontSize(40).setFontFamily("Arial").setOrigin(.5).setFill("#ffebf7"),s=this.add.image(640,360,"icon_error").setOrigin(.5).setScale(.5).setVisible(!1);async function a(a){let o=0,r=0;try{r=(await window.ethereum.request({method:"eth_requestAccounts"}))[0];let $=await window.ethereum.request({method:"eth_chainId"});o=parseInt($)}catch(l){console.log("error"),console.error(l),0==r&&(e.setText("Connect Wallet"),t.setText("Please install Metamask and allow wallet connection."))}0!=r&&o==CORRECT_CHAINID?(e.setText("Check Network"),t.setText("Connecting...OK!"),s.setVisible(!1),0==a.flag_start&&(setTimeout(()=>{a.scene.start("Loading")},500,a),setTimeout(()=>{a.scene.launch("Loading_overlap")},100,a),a.flag_start=1),clearInterval(n)):0==r?(e.setText("Connect Wallet"),t.setText("Please install Metamask and allow wallet connection."),s.setVisible(!0)):o!=CORRECT_CHAINID&&(e.setText("Wrong Network"),t.setText("Please connect to the Astar Network RPC."),s.setVisible(!0))}a(this);let n=setInterval(a,5e3,this)}}class Loading extends Phaser.Scene{constructor(){super({key:"Loading",active:!1}),this.flag_start=0}async update_web3(){let e=Date.now();this.count_web3Loading=0,console.log("load: web3"),await init_web3(),console.log("  OK",Date.now()-e),this.count_web3Loading+=1,console.log("load: summoner"),await contract_update_summoner_of_wallet(),console.log("  OK",Date.now()-e),this.count_web3Loading+=1,console.log("load: static"),await contract_update_static_status(summoner),console.log("  OK",Date.now()-e),this.count_web3Loading+=1,console.log("load: dynamic"),await contract_update_dynamic_status(summoner),console.log("  OK",Date.now()-e),this.count_web3Loading+=1,console.log("load: item"),local_myListsAt_withItemType=await get_myListsAt_withItemType(local_owner),console.log("  OK",Date.now()-e),this.count_web3Loading+=1,console.log("load: festival"),await contract_update_festival_info(summoner),console.log("  OK",Date.now()-e),this.count_web3Loading+=1,this.flag_start=1}preload(){console.log("scene: Loading"),this.update_web3(),preload(this),this.load.scenePlugin({key:"rexuiplugin",url:"lib/rexuiplugin.min.js",sceneKey:"rexUI"})}create(){this._msg1=this.add.text(640,480,"").setFontSize(30).setFontFamily("Arial").setOrigin(.5).setFill("#ffebf7")}update(){if(1==this.flag_start)this._msg1.setText(""),this.scene.stop("Loading_overlap"),this.cameras.main.fadeOut(250,255,255,255),this.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,()=>{this.scene.start("Opeaning")}),this.flag_start=2;else{let e="Loading On-Chain Data... (";e+=this.count_web3Loading+"/6)",this._msg1.setText(e)}}}class Loading_overlap extends Phaser.Scene{constructor(){super({key:"Loading_overlap",active:!1}),this.turn=0,this.flowerCount_present=0}preload(){this.load.spritesheet("nyui_loading","src/png/nyui_moving.png",{frameWidth:370,frameHeight:320}),this.load.spritesheet("nyui_loading2","src/png/nyui_happy.png",{frameWidth:370,frameHeight:320}),this.load.spritesheet("ohana_loading","src/particle/flowers.png",{frameWidth:370,frameHeight:320}),this.load.image("opening_logo","src/png/opening_logo.png")}create(){this.version_text=this.add.text(1275,955,version,{font:"16px Arial",fill:"#3D3D3D"}).setOrigin(1).setDepth(2e3);let e=400+300*Math.random(),t=800+20*Math.random();this.nyui_text=this.add.text(e,t-50,"").setFontSize(20).setFontFamily("Arial").setOrigin(.5).setFill("#ff1694").setVisible(!1);let s="";s+="This count is stored locally\n",s+="and does not affect gameplay :)",this.nyui_text2=this.add.text(e,t+60,s).setFontSize(16).setFontFamily("Arial").setOrigin(.5).setFill("#888888").setVisible(!1),this.nyui=this.add.sprite(e,t,"nyui_loading").setOrigin(.5).setScale(.25).setDepth(1e3).setInteractive({useHandCursor:!0}).on("pointerdown",()=>{this.flowerCount_present+=1,localStorage_flowerCount+=1,this.nyui_text.setText(localStorage_flowerCount+" flowers"),this.nyui_text.setVisible(!0),this.nyui_text2.setVisible(!0),this.add.image(e-150+300*Math.random(),t-20+40*Math.random(),"ohana_loading").setFrame(Math.floor(5*Math.random())).setOrigin(.5).setScale(.1).setAngle(360*Math.random()).setDepth(999),localStorage.setItem("flowerCount_inGame",JSON.stringify(localStorage_flowerCount))})}update(){this.turn+=1,this.flowerCount_present>=10?this.nyui.setTexture("nyui_loading2"):this.turn%80==40?this.nyui.setFrame(1):this.turn%80==0&&this.nyui.setFrame(0)}}class Opeaning extends Phaser.Scene{constructor(){super({key:"Opeaning",active:!1})}preload(){console.log("scene: Opeaning")}create(){this.cameras.main.fadeIn(500,255,255,255),this.add.image(640,480,"opening_logo").setScale(.8),setTimeout(()=>{this.cameras.main.fadeOut(250,255,255,255),this.cameras.main.once(Phaser.Cameras.Scene2D.Events.FADE_OUT_COMPLETE,()=>{this.scene.start("Main")})},1e3)}}class SomethingWrong extends Phaser.Scene{constructor(){super({key:"SomethingWrong",active:!1})}create(){let e=this.add.image(640,360,"icon_wrong").setOrigin(.5).setScale(.5).setVisible(!1);this.add.text(640,480,"Something Wrong").setFontSize(80).setFontFamily("Arial").setOrigin(.5).setFill("#ff1694"),this.add.text(640,560,"Please reload the page.").setFontSize(40).setFontFamily("Arial").setOrigin(.5).setFill("#ffebf7"),this.add.text(640,660,">> Click Here <<").setFontSize(40).setFontFamily("Arial").setOrigin(.5).setFill("#0000FF").setInteractive({useHandCursor:!0}).on("pointerdown",()=>{window.location.reload()}),e.setVisible(!0)}}class Main extends Phaser.Scene{constructor(){super({key:"Main",active:!1})}create(){let e=Date.now();console.log("create..."),create(this),console.log("  OK",Date.now()-e),updateFirst(this)}update(){0==flag_fadein&&(this.cameras.main.fadeIn(500,255,255,255),flag_fadein=1),update(this)}}let config={type:Phaser.CANVAS,parent:"canvas",backgroundColor:"F4B4D0",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:1280,height:960},scene:[FirstCheck,Loading,Loading_overlap,Opeaning,SomethingWrong,Main],fps:{target:60},dom:{createContainer:!0}};game=new Phaser.Game(config);